parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"KniQ":[function(require,module,exports) {
"use strict";function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inherits=t,exports.getUid=o;var e=0;function o(t){return t.ol_uid||(t.ol_uid=++e)}var r=exports.VERSION="5.1.3";
},{}],"ygGQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util.js"),r=function(r){function t(t){var o="Assertion failed. See https://openlayers.org/en/"+e.VERSION.split("-")[0]+"/doc/errors/#"+t+" for details.";r.call(this,o),this.code=t,this.name="AssertionError",this.message=o}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t}(Error);exports.default=r;
},{"./util.js":"KniQ"}],"BTrx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={ADD:"add",REMOVE:"remove"};
},{}],"zehl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={PROPERTYCHANGE:"propertychange"};
},{}],"mH6q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=e,exports.getValues=n,exports.isEmpty=t;var r=exports.assign="function"==typeof Object.assign?Object.assign:function(r,e){var n=arguments;if(null==r)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),o=1,i=arguments.length;o<i;++o){var s=n[o];if(null!=s)for(var u in s)s.hasOwnProperty(u)&&(t[u]=s[u])}return t};function e(r){for(var e in r)delete r[e]}function n(r){var e=[];for(var n in r)e.push(r[n]);return e}function t(r){var e;for(e in r)return!1;return!e}
},{}],"55Uq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindListener=t,exports.findListener=n,exports.getListeners=r,exports.listen=o,exports.listenOnce=s,exports.unlisten=a,exports.unlistenByKey=u,exports.unlistenAll=c;var e=require("./obj.js");function t(e){var t=function(t){var n=e.listener,r=e.bindTo||e.target;return e.callOnce&&u(e),n.call(r,t)};return e.boundListener=t,t}function n(e,t,n,r){for(var i,l=0,o=e.length;l<o;++l)if((i=e[l]).listener===t&&i.bindTo===n)return r&&(i.deleteIndex=l),i}function r(e,t){var n=e.ol_lm;return n?n[t]:void 0}function i(e){var t=e.ol_lm;return t||(t=e.ol_lm={}),t}function l(t,n){var i=r(t,n);if(i){for(var l=0,o=i.length;l<o;++l)t.removeEventListener(n,i[l].boundListener),(0,e.clear)(i[l]);i.length=0;var s=t.ol_lm;s&&(delete s[n],0===Object.keys(s).length&&delete t.ol_lm)}}function o(e,r,l,o,s){var a=i(e),u=a[r];u||(u=a[r]=[]);var c=n(u,l,o,!1);return c?s||(c.callOnce=!1):(c={bindTo:o,callOnce:!!s,listener:l,target:e,type:r},e.addEventListener(r,t(c)),u.push(c)),c}function s(e,t,n,r){return o(e,t,n,r,!0)}function a(e,t,i,l){var o=r(e,t);if(o){var s=n(o,i,l,!0);s&&u(s)}}function u(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var n=r(t.target,t.type);if(n){var i="deleteIndex"in t?t.deleteIndex:n.indexOf(t);-1!==i&&n.splice(i,1),0===n.length&&l(t.target,t.type)}(0,e.clear)(t)}}function c(e){var t=i(e);for(var n in t)l(e,n)}
},{"./obj.js":"mH6q"}],"RgA2":[function(require,module,exports) {
"use strict";function e(){return!0}function t(){return!1}function r(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRUE=e,exports.FALSE=t,exports.UNDEFINED=r;
},{}],"DDda":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./functions.js"),s=function(){};s.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},s.prototype.disposed_=!1,s.prototype.disposeInternal=e.UNDEFINED,exports.default=s;
},{"./functions.js":"RgA2"}],"fKNg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stopPropagation=o,exports.preventDefault=p;var t=function(t){this.propagationStopped,this.type=t,this.target=null};function o(t){t.stopPropagation()}function p(t){t.preventDefault()}t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},exports.default=t;
},{}],"PAZw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../Disposable.js"),t=o(e),i=require("../events.js"),s=require("../functions.js"),n=require("../events/Event.js"),r=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){e.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addEventListener=function(e,t){var i=this.listeners_[e];i||(i=this.listeners_[e]=[]),-1===i.indexOf(t)&&i.push(t)},t.prototype.dispatchEvent=function(e){var t="string"==typeof e?new r.default(e):e,i=t.type;t.target=this;var n,o=this.listeners_[i];if(o){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var p=0,h=o.length;p<h;++p)if(!1===o[p].call(this,t)||t.propagationStopped){n=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var a=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];a--;)this.removeEventListener(i,s.UNDEFINED);delete this.dispatching_[i]}return n}},t.prototype.disposeInternal=function(){(0,i.unlistenAll)(this)},t.prototype.getListeners=function(e){return this.listeners_[e]},t.prototype.hasListener=function(e){return e?e in this.listeners_:Object.keys(this.listeners_).length>0},t.prototype.removeEventListener=function(e,t){var i=this.listeners_[e];if(i){var n=i.indexOf(t);e in this.pendingRemovals_?(i[n]=s.UNDEFINED,++this.pendingRemovals_[e]):(i.splice(n,1),0===i.length&&delete this.listeners_[e])}},t}(t.default);exports.default=p;
},{"../Disposable.js":"DDda","../events.js":"55Uq","../functions.js":"RgA2","../events/Event.js":"fKNg"}],"C8cu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};
},{}],"8IdS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unByKey=u;var e=require("./events.js"),t=require("./events/EventTarget.js"),r=o(t),n=require("./events/EventType.js"),i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var s=function(t){function r(){t.call(this),this.revision_=0}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.changed=function(){++this.revision_,this.dispatchEvent(i.default.CHANGE)},r.prototype.getRevision=function(){return this.revision_},r.prototype.on=function(t,r){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),o=0;o<n;++o)i[o]=(0,e.listen)(this,t[o],r);return i}return(0,e.listen)(this,t,r)},r.prototype.once=function(t,r){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),o=0;o<n;++o)i[o]=(0,e.listenOnce)(this,t[o],r);return i}return(0,e.listenOnce)(this,t,r)},r.prototype.un=function(t,r){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)(0,e.unlisten)(this,t[n],r);else(0,e.unlisten)(this,t,r)},r}(r.default);function u(t){if(Array.isArray(t))for(var r=0,n=t.length;r<n;++r)(0,e.unlistenByKey)(t[r]);else(0,e.unlistenByKey)(t)}exports.default=s;
},{"./events.js":"55Uq","./events/EventTarget.js":"PAZw","./events/EventType.js":"C8cu"}],"PhPh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChangeEventType=h;var t=require("./util.js"),e=require("./ObjectEventType.js"),r=p(e),s=require("./Observable.js"),o=p(s),i=require("./events/Event.js"),n=p(i),u=require("./obj.js");function p(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(e,r,s){t.call(this,e),this.key=r,this.oldValue=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n.default),c=function(e){function s(r){e.call(this),(0,t.getUid)(this),this.values_={},void 0!==r&&this.setProperties(r)}return e&&(s.__proto__=e),s.prototype=Object.create(e&&e.prototype),s.prototype.constructor=s,s.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},s.prototype.getKeys=function(){return Object.keys(this.values_)},s.prototype.getProperties=function(){return(0,u.assign)({},this.values_)},s.prototype.notify=function(t,e){var s;s=h(t),this.dispatchEvent(new a(s,t,e)),s=r.default.PROPERTYCHANGE,this.dispatchEvent(new a(s,t,e))},s.prototype.set=function(t,e,r){if(r)this.values_[t]=e;else{var s=this.values_[t];this.values_[t]=e,s!==e&&this.notify(t,s)}},s.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},s.prototype.unset=function(t,e){if(t in this.values_){var r=this.values_[t];delete this.values_[t],e||this.notify(t,r)}},s}(o.default),l={};function h(t){return l.hasOwnProperty(t)?l[t]:l[t]="change:"+t}exports.default=c;
},{"./util.js":"KniQ","./ObjectEventType.js":"zehl","./Observable.js":"8IdS","./events/Event.js":"fKNg","./obj.js":"mH6q"}],"FnDa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollectionEvent=void 0;var t=require("./AssertionError.js"),e=a(t),r=require("./CollectionEventType.js"),i=a(r),n=require("./Object.js"),o=a(n),s=require("./events/Event.js"),h=a(s);function a(t){return t&&t.__esModule?t:{default:t}}var u={LENGTH:"length"},p=exports.CollectionEvent=function(t){function e(e,r){t.call(this,e),this.element=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h.default),c=function(t){function r(e,r){t.call(this);var i=r||{};if(this.unique_=!!i.unique,this.array_=e||[],this.unique_)for(var n=0,o=this.array_.length;n<o;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},r.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},r.prototype.forEach=function(t){for(var e=this.array_,r=0,i=e.length;r<i;++r)t(e[r],r,e)},r.prototype.getArray=function(){return this.array_},r.prototype.item=function(t){return this.array_[t]},r.prototype.getLength=function(){return this.get(u.LENGTH)},r.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new p(i.default.ADD,e))},r.prototype.pop=function(){return this.removeAt(this.getLength()-1)},r.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},r.prototype.remove=function(t){for(var e=this.array_,r=0,i=e.length;r<i;++r)if(e[r]===t)return this.removeAt(r)},r.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new p(i.default.REMOVE,e)),e},r.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new p(i.default.REMOVE,n)),this.dispatchEvent(new p(i.default.ADD,e))}else{for(var o=r;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},r.prototype.updateLength_=function(){this.set(u.LENGTH,this.array_.length)},r.prototype.assertUnique_=function(t,r){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==r)throw new e.default(58)},r}(o.default);exports.default=c;
},{"./AssertionError.js":"ygGQ","./CollectionEventType.js":"BTrx","./Object.js":"PhPh","./events/Event.js":"fKNg"}],"fLG6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=s;var e=require("./AssertionError.js"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new r.default(t)}
},{"./AssertionError.js":"ygGQ"}],"urGY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};
},{}],"bUAS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};
},{}],"QDir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.boundingExtent=a,exports.buffer=s,exports.clone=f,exports.closestSquaredDistanceXY=c,exports.containsCoordinate=p,exports.containsExtent=x,exports.containsXY=l,exports.coordinateRelationship=d,exports.createEmpty=h,exports.createOrUpdate=m,exports.createOrUpdateEmpty=g,exports.createOrUpdateFromCoordinate=T,exports.createOrUpdateFromCoordinates=E,exports.createOrUpdateFromFlatCoordinates=M,exports.createOrUpdateFromRings=O,exports.equals=v,exports.extend=C,exports.extendCoordinate=R,exports.extendCoordinates=F,exports.extendFlatCoordinates=I,exports.extendRings=N,exports.extendXY=B,exports.forEachCorner=L,exports.getArea=y,exports.getBottomLeft=U,exports.getBottomRight=G,exports.getCenter=_,exports.getCorner=A,exports.getEnlargedArea=S,exports.getForViewAndSize=H,exports.getHeight=W,exports.getIntersectionArea=q,exports.getIntersection=j,exports.getMargin=V,exports.getSize=b,exports.getTopLeft=P,exports.getTopRight=X,exports.getWidth=Y,exports.intersects=z,exports.isEmpty=K,exports.returnOrUpdate=w,exports.scaleFromCenter=D,exports.intersectsSegment=k,exports.applyTransform=J;var t=require("./asserts.js"),e=require("./extent/Corner.js"),r=u(e),n=require("./extent/Relationship.js"),o=u(n);function u(t){return t&&t.__esModule?t:{default:t}}function a(t){for(var e=h(),r=0,n=t.length;r<n;++r)R(e,t[r]);return e}function i(t,e,r){return m(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}function s(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function f(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function c(t,e,r){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*o}function p(t,e){return l(t,e[0],e[1])}function x(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function l(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function d(t,e){var r=t[0],n=t[1],u=t[2],a=t[3],i=e[0],s=e[1],f=o.default.UNKNOWN;return i<r?f|=o.default.LEFT:i>u&&(f|=o.default.RIGHT),s<n?f|=o.default.BELOW:s>a&&(f|=o.default.ABOVE),f===o.default.UNKNOWN&&(f=o.default.INTERSECTING),f}function h(){return[1/0,1/0,-1/0,-1/0]}function m(t,e,r,n,o){return o?(o[0]=t,o[1]=e,o[2]=r,o[3]=n,o):[t,e,r,n]}function g(t){return m(1/0,1/0,-1/0,-1/0,t)}function T(t,e){var r=t[0],n=t[1];return m(r,n,r,n,e)}function E(t,e){return F(g(e),t)}function M(t,e,r,n,o){return I(g(o),t,e,r,n)}function O(t,e){return N(g(e),t)}function v(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function C(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function R(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function F(t,e){for(var r=0,n=e.length;r<n;++r)R(t,e[r]);return t}function I(t,e,r,n,o){for(;r<n;r+=o)B(t,e[r],e[r+1]);return t}function N(t,e){for(var r=0,n=e.length;r<n;++r)F(t,e[r]);return t}function B(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function L(t,e,r){var n;return(n=e.call(r,U(t)))?n:(n=e.call(r,G(t)))?n:(n=e.call(r,X(t)))?n:(n=e.call(r,P(t)))||!1}function y(t){var e=0;return K(t)||(e=Y(t)*W(t)),e}function U(t){return[t[0],t[1]]}function G(t){return[t[2],t[1]]}function _(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function A(e,n){var o;return n===r.default.BOTTOM_LEFT?o=U(e):n===r.default.BOTTOM_RIGHT?o=G(e):n===r.default.TOP_LEFT?o=P(e):n===r.default.TOP_RIGHT?o=X(e):(0,t.assert)(!1,13),o}function S(t,e){var r=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-r)*(Math.max(t[3],e[3])-n)}function H(t,e,r,n,o){var u=e*n[0]/2,a=e*n[1]/2,i=Math.cos(r),s=Math.sin(r),f=u*i,c=u*s,p=a*i,x=a*s,l=t[0],d=t[1],h=l-f+x,g=l-f-x,T=l+f-x,E=l+f+x,M=d-c-p,O=d-c+p,v=d+c+p,C=d+c-p;return m(Math.min(h,g,T,E),Math.min(M,O,v,C),Math.max(h,g,T,E),Math.max(M,O,v,C),o)}function W(t){return t[3]-t[1]}function q(t,e){return y(j(t,e))}function j(t,e,r){var n=r||h();return z(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):g(n),n}function V(t){return Y(t)+W(t)}function b(t){return[t[2]-t[0],t[3]-t[1]]}function P(t){return[t[0],t[3]]}function X(t){return[t[2],t[3]]}function Y(t){return t[2]-t[0]}function z(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function K(t){return t[2]<t[0]||t[3]<t[1]}function w(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function D(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}function k(t,e,r){var n=!1,u=d(t,e),a=d(t,r);if(u===o.default.INTERSECTING||a===o.default.INTERSECTING)n=!0;else{var i,s,f=t[0],c=t[1],p=t[2],x=t[3],l=e[0],h=e[1],m=r[0],g=r[1],T=(g-h)/(m-l);a&o.default.ABOVE&&!(u&o.default.ABOVE)&&(n=(i=m-(g-x)/T)>=f&&i<=p),n||!(a&o.default.RIGHT)||u&o.default.RIGHT||(n=(s=g-(m-p)*T)>=c&&s<=x),n||!(a&o.default.BELOW)||u&o.default.BELOW||(n=(i=m-(g-c)/T)>=f&&i<=p),n||!(a&o.default.LEFT)||u&o.default.LEFT||(n=(s=g-(m-f)*T)>=c&&s<=x)}return n}function J(t,e,r){var n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(n,n,2),i([n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]],r)}
},{"./asserts.js":"fLG6","./extent/Corner.js":"urGY","./extent/Relationship.js":"bUAS"}],"LGwr":[function(require,module,exports) {
"use strict";function r(r,t,e,n,o,a){for(var f=a||[],s=0,l=t;l<e;l+=n){var u=r[l],v=r[l+1];f[s++]=o[0]*u+o[2]*v+o[4],f[s++]=o[1]*u+o[3]*v+o[5]}return a&&f.length!=s&&(f.length=s),f}function t(r,t,e,n,o,a,f){for(var s=f||[],l=Math.cos(o),u=Math.sin(o),v=a[0],h=a[1],c=0,g=t;g<e;g+=n){var i=r[g]-v,p=r[g+1]-h;s[c++]=v+i*l-p*u,s[c++]=h+i*u+p*l;for(var x=g+2;x<g+n;++x)s[c++]=r[x]}return f&&s.length!=c&&(s.length=c),s}function e(r,t,e,n,o,a,f,s){for(var l=s||[],u=f[0],v=f[1],h=0,c=t;c<e;c+=n){var g=r[c]-u,i=r[c+1]-v;l[h++]=u+o*g,l[h++]=v+a*i;for(var p=c+2;p<c+n;++p)l[h++]=r[p]}return s&&l.length!=h&&(l.length=h),l}function n(r,t,e,n,o,a,f){for(var s=f||[],l=0,u=t;u<e;u+=n){s[l++]=r[u]+o,s[l++]=r[u+1]+a;for(var v=u+2;v<u+n;++v)s[l++]=r[v]}return f&&s.length!=l&&(s.length=l),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform2D=r,exports.rotate=t,exports.scale=e,exports.translate=n;
},{}],"B96G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosh=void 0,exports.clamp=t,exports.roundUpToPowerOfTwo=o,exports.squaredSegmentDistance=a,exports.squaredDistance=n,exports.solveLinearSystem=s,exports.toDegrees=u,exports.toRadians=i,exports.modulo=c,exports.lerp=f;var r=require("./asserts.js");function t(r,t,e){return Math.min(Math.max(r,t),e)}var e=exports.cosh="cosh"in Math?Math.cosh:function(r){var t=Math.exp(r);return(t+1/t)/2};function o(t){return(0,r.assert)(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function a(r,t,e,o,a,s){var u=a-e,i=s-o;if(0!==u||0!==i){var c=((r-e)*u+(t-o)*i)/(u*u+i*i);c>1?(e=a,o=s):c>0&&(e+=u*c,o+=i*c)}return n(r,t,e,o)}function n(r,t,e,o){var a=e-r,n=o-t;return a*a+n*n}function s(r){for(var t=r.length,e=0;e<t;e++){for(var o=e,a=Math.abs(r[e][e]),n=e+1;n<t;n++){var s=Math.abs(r[n][e]);s>a&&(a=s,o=n)}if(0===a)return null;var u=r[o];r[o]=r[e],r[e]=u;for(var i=e+1;i<t;i++)for(var c=-r[i][e]/r[e][e],f=e;f<t+1;f++)e==f?r[i][f]=0:r[i][f]+=c*r[e][f]}for(var h=new Array(t),p=t-1;p>=0;p--){h[p]=r[p][t]/r[p][p];for(var v=p-1;v>=0;v--)r[v][t]-=r[v][p]*h[p]}return h}function u(r){return 180*r/Math.PI}function i(r){return r*Math.PI/180}function c(r,t){var e=r%t;return e*t<0?e+t:e}function f(r,t,e){return r+e*(t-r)}
},{"./asserts.js":"fLG6"}],"lmV0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};
},{}],"q4ER":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_RADIUS=void 0,exports.getDistance=o,exports.getLength=i,exports.getArea=h,exports.offset=f;var e=require("./math.js"),t=require("./geom/GeometryType.js"),a=r(t);function r(e){return e&&e.__esModule?e:{default:e}}var s=exports.DEFAULT_RADIUS=6371008.8;function o(t,a,r){var o=r||s,n=(0,e.toRadians)(t[1]),i=(0,e.toRadians)(a[1]),u=(i-n)/2,h=(0,e.toRadians)(a[0]-t[0])/2,f=Math.sin(u)*Math.sin(u)+Math.sin(h)*Math.sin(h)*Math.cos(n)*Math.cos(i);return 2*o*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))}function n(e,t){for(var a=0,r=0,s=e.length;r<s-1;++r)a+=o(e[r],e[r+1],t);return a}function i(e,t){var r=t||{},o=r.radius||s,u=r.projection||"EPSG:3857",h=e.getType();h!==a.default.GEOMETRY_COLLECTION&&(e=e.clone().transform(u,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(h){case a.default.POINT:case a.default.MULTI_POINT:break;case a.default.LINE_STRING:case a.default.LINEAR_RING:I=n(f=e.getCoordinates(),o);break;case a.default.MULTI_LINE_STRING:case a.default.POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)I+=n(f[M],o);break;case a.default.MULTI_POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)for(l=0,g=(d=f[M]).length;l<g;++l)I+=n(d[l],o);break;case a.default.GEOMETRY_COLLECTION:var L=e.getGeometries();for(M=0,c=L.length;M<c;++M)I+=i(L[M],t);break;default:throw new Error("Unsupported geometry type: "+h)}return I}function u(t,a){for(var r=0,s=t.length,o=t[s-1][0],n=t[s-1][1],i=0;i<s;i++){var u=t[i][0],h=t[i][1];r+=(0,e.toRadians)(u-o)*(2+Math.sin((0,e.toRadians)(n))+Math.sin((0,e.toRadians)(h))),o=u,n=h}return r*a*a/2}function h(e,t){var r=t||{},o=r.radius||s,n=r.projection||"EPSG:3857",i=e.getType();i!==a.default.GEOMETRY_COLLECTION&&(e=e.clone().transform(n,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(i){case a.default.POINT:case a.default.MULTI_POINT:case a.default.LINE_STRING:case a.default.MULTI_LINE_STRING:case a.default.LINEAR_RING:break;case a.default.POLYGON:for(f=e.getCoordinates(),I=Math.abs(u(f[0],o)),M=1,c=f.length;M<c;++M)I-=Math.abs(u(f[M],o));break;case a.default.MULTI_POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)for(d=f[M],I+=Math.abs(u(d[0],o)),l=1,g=d.length;l<g;++l)I-=Math.abs(u(d[l],o));break;case a.default.GEOMETRY_COLLECTION:var L=e.getGeometries();for(M=0,c=L.length;M<c;++M)I+=h(L[M],t);break;default:throw new Error("Unsupported geometry type: "+i)}return I}function f(t,a,r,o){var n=o||s,i=(0,e.toRadians)(t[1]),u=(0,e.toRadians)(t[0]),h=a/n,f=Math.asin(Math.sin(i)*Math.cos(h)+Math.cos(i)*Math.sin(h)*Math.cos(r)),d=u+Math.atan2(Math.sin(r)*Math.sin(h)*Math.cos(i),Math.cos(h)-Math.sin(i)*Math.sin(f));return[(0,e.toDegrees)(d),(0,e.toDegrees)(f)]}
},{"./math.js":"B96G","./geom/GeometryType.js":"lmV0"}],"yZx6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var E={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},e=exports.METERS_PER_UNIT={};e[E.DEGREES]=2*Math.PI*6370997/360,e[E.FEET]=.3048,e[E.METERS]=1,e[E.USFEET]=1200/3937,exports.default=E;
},{}],"WUar":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../proj/Units.js"),n=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};n.prototype.canWrapX=function(){return this.canWrapX_},n.prototype.getCode=function(){return this.code_},n.prototype.getExtent=function(){return this.extent_},n.prototype.getUnits=function(){return this.units_},n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||e.METERS_PER_UNIT[this.units_]},n.prototype.getWorldExtent=function(){return this.worldExtent_},n.prototype.getAxisOrientation=function(){return this.axisOrientation_},n.prototype.isGlobal=function(){return this.global_},n.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},n.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},n.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},n.prototype.setWorldExtent=function(t){this.worldExtent_=t},n.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},exports.default=n;
},{"../proj/Units.js":"yZx6"}],"lohs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROJECTIONS=exports.WORLD_EXTENT=exports.EXTENT=exports.HALF_SIZE=exports.RADIUS=void 0,exports.fromEPSG4326=l,exports.toEPSG4326=x;var e=require("../math.js"),t=require("../proj/Projection.js"),r=s(t),o=require("../proj/Units.js"),n=s(o);function s(e){return e&&e.__esModule?e:{default:e}}var a=exports.RADIUS=6378137,p=exports.HALF_SIZE=Math.PI*a,u=exports.EXTENT=[-p,-p,p,p],i=exports.WORLD_EXTENT=[-180,-85,180,85],E=function(t){function r(r){t.call(this,{code:r,units:n.default.METERS,extent:u,global:!0,worldExtent:i,getPointResolution:function(t,r){return t/(0,e.cosh)(r[1]/a)}})}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(r.default),c=exports.PROJECTIONS=[new E("EPSG:3857"),new E("EPSG:102100"),new E("EPSG:102113"),new E("EPSG:900913"),new E("urn:ogc:def:crs:EPSG:6.18:3:3857"),new E("urn:ogc:def:crs:EPSG::3857"),new E("http://www.opengis.net/gml/srs/epsg.xml#3857")];function l(e,t,r){var o=e.length,n=r>1?r:2,s=t;void 0===s&&(s=n>2?e.slice():new Array(o));for(var u=p,i=0;i<o;i+=n){s[i]=u*e[i]/180;var E=a*Math.log(Math.tan(Math.PI*(e[i+1]+90)/360));E>u?E=u:E<-u&&(E=-u),s[i+1]=E}return s}function x(e,t,r){var o=e.length,n=r>1?r:2,s=t;void 0===s&&(s=n>2?e.slice():new Array(o));for(var u=0;u<o;u+=n)s[u]=180*e[u]/p,s[u+1]=360*Math.atan(Math.exp(e[u+1]/a))/Math.PI-90;return s}
},{"../math.js":"B96G","../proj/Projection.js":"WUar","../proj/Units.js":"yZx6"}],"ZniN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROJECTIONS=exports.METERS_PER_UNIT=exports.EXTENT=exports.RADIUS=void 0;var e=require("../proj/Projection.js"),t=n(e),r=require("../proj/Units.js"),o=n(r);function n(e){return e&&e.__esModule?e:{default:e}}var s=exports.RADIUS=6378137,u=exports.EXTENT=[-180,-90,180,90],c=exports.METERS_PER_UNIT=Math.PI*s/180,p=function(e){function t(t,r){e.call(this,{code:t,units:o.default.DEGREES,extent:u,axisOrientation:r,global:!0,metersPerUnit:c,worldExtent:u})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(t.default),E=exports.PROJECTIONS=[new p("CRS:84"),new p("EPSG:4326","neu"),new p("urn:ogc:def:crs:EPSG::4326","neu"),new p("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new p("urn:ogc:def:crs:OGC:1.3:CRS84"),new p("urn:ogc:def:crs:OGC:2:84"),new p("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new p("urn:x-ogc:def:crs:EPSG:4326","neu")];
},{"../proj/Projection.js":"WUar","../proj/Units.js":"yZx6"}],"3tlE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=t,exports.get=r,exports.add=n;var e={};function t(){e={}}function r(t){return e[t]||null}function n(t,r){e[t]=r}
},{}],"uhlP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=r,exports.add=o,exports.remove=n,exports.get=i;var e=require("../obj.js"),t={};function r(){t={}}function o(e,r,o){var n=e.getCode(),i=r.getCode();n in t||(t[n]={}),t[n][i]=o}function n(r,o){var n=r.getCode(),i=o.getCode(),d=t[n][i];return delete t[n][i],(0,e.isEmpty)(t[n])&&delete t[n],d}function i(e,r){var o;return e in t&&r in t[e]&&(o=t[e][r]),o}
},{"../obj.js":"mH6q"}],"Diht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.METERS_PER_UNIT=void 0,exports.cloneTransform=E,exports.identityTransform=v,exports.addProjection=P,exports.addProjections=g,exports.get=j,exports.getPointResolution=x,exports.addEquivalentProjections=m,exports.addEquivalentTransforms=T,exports.clearAllProjections=S,exports.createProjection=R,exports.createTransformFromCoordinateTransform=_,exports.addCoordinateTransforms=h,exports.fromLonLat=q,exports.toLonLat=C,exports.equivalent=O,exports.getTransformFromProjections=G,exports.getTransform=U,exports.transform=y,exports.transformExtent=I,exports.transformWithProjections=M,exports.addCommon=N;var r=require("./sphere.js"),e=require("./extent.js"),t=require("./math.js"),o=require("./proj/epsg3857.js"),n=require("./proj/epsg4326.js"),i=require("./proj/Projection.js"),s=l(i),a=require("./proj/Units.js"),u=l(a),f=require("./proj/projections.js"),c=p(f),d=require("./proj/transforms.js");function p(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function l(r){return r&&r.__esModule?r:{default:r}}function E(r,e,t){var o;if(void 0!==e){for(var n=0,i=r.length;n<i;++n)e[n]=r[n];o=e}else o=r.slice();return o}function v(r,e,t){if(void 0!==e&&r!==e){for(var o=0,n=r.length;o<n;++o)e[o]=r[o];r=e}return r}function P(r){c.add(r.getCode(),r),(0,d.add)(r,r,E)}function g(r){r.forEach(P)}function j(r){var e=null;if(r instanceof s.default)e=r;else if("string"==typeof r){var t=r;e=c.get(t)}return e}function x(e,t,o,n){var i,s=(e=j(e)).getPointResolutionFunc();if(s)i=s(t,o);else if(e.getUnits()==u.default.DEGREES&&!n||n==u.default.DEGREES)i=t;else{var f=G(e,j("EPSG:4326")),c=[o[0]-t/2,o[1],o[0]+t/2,o[1],o[0],o[1]-t/2,o[0],o[1]+t/2];c=f(c,c,2),i=((0,r.getDistance)(c.slice(0,2),c.slice(2,4))+(0,r.getDistance)(c.slice(4,6),c.slice(6,8)))/2;var d=n?a.METERS_PER_UNIT[n]:e.getMetersPerUnit();void 0!==d&&(i/=d)}return i}function m(r){g(r),r.forEach(function(e){r.forEach(function(r){e!==r&&(0,d.add)(e,r,E)})})}function T(r,e,t,o){r.forEach(function(r){e.forEach(function(e){(0,d.add)(r,e,t),(0,d.add)(e,r,o)})})}function S(){c.clear(),(0,d.clear)()}function R(r,e){return r?"string"==typeof r?j(r):r:j(e)}function _(r){return function(e,t,o){for(var n=e.length,i=void 0!==o?o:2,s=void 0!==t?t:new Array(n),a=0;a<n;a+=i){var u=r([e[a],e[a+1]]);s[a]=u[0],s[a+1]=u[1];for(var f=i-1;f>=2;--f)s[a+f]=e[a+f]}return s}}function h(r,e,t,o){var n=j(r),i=j(e);(0,d.add)(n,i,_(t)),(0,d.add)(i,n,_(o))}function q(r,e){return y(r,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function C(r,e){var o=y(r,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=o[0];return(n<-180||n>180)&&(o[0]=(0,t.modulo)(n+180,360)-180),o}function O(r,e){if(r===e)return!0;var t=r.getUnits()===e.getUnits();return r.getCode()===e.getCode()?t:G(r,e)===E&&t}function G(r,e){var t=r.getCode(),o=e.getCode(),n=(0,d.get)(t,o);return n||(n=v),n}function U(r,e){return G(j(r),j(e))}function y(r,e,t){return U(e,t)(r,void 0,r.length)}function I(r,t,o){var n=U(t,o);return(0,e.applyTransform)(r,n)}function M(r,e,t){return G(e,t)(r)}function N(){m(o.PROJECTIONS),m(n.PROJECTIONS),T(n.PROJECTIONS,o.PROJECTIONS,o.fromEPSG4326,o.toEPSG4326)}exports.METERS_PER_UNIT=a.METERS_PER_UNIT,N();
},{"./sphere.js":"q4ER","./extent.js":"QDir","./math.js":"B96G","./proj/epsg3857.js":"lohs","./proj/epsg4326.js":"ZniN","./proj/Projection.js":"WUar","./proj/Units.js":"yZx6","./proj/projections.js":"3tlE","./proj/transforms.js":"uhlP"}],"P4eA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.reset=n,exports.multiply=o,exports.set=s,exports.setFromArray=u,exports.apply=a,exports.rotate=i,exports.scale=c,exports.translate=p,exports.compose=f,exports.invert=x,exports.determinant=v;var r=require("./asserts.js"),t=new Array(6);function e(){return[1,0,0,1,0,0]}function n(r){return s(r,1,0,0,1,0,0)}function o(r,t){var e=r[0],n=r[1],o=r[2],s=r[3],u=r[4],a=r[5],i=t[0],c=t[1],p=t[2],f=t[3],x=t[4],v=t[5];return r[0]=e*i+o*c,r[1]=n*i+s*c,r[2]=e*p+o*f,r[3]=n*p+s*f,r[4]=e*x+o*v+u,r[5]=n*x+s*v+a,r}function s(r,t,e,n,o,s,u){return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r[4]=s,r[5]=u,r}function u(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function a(r,t){var e=t[0],n=t[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t}function i(r,e){var n=Math.cos(e),u=Math.sin(e);return o(r,s(t,n,u,-u,n,0,0))}function c(r,e,n){return o(r,s(t,e,0,0,n,0,0))}function p(r,e,n){return o(r,s(t,1,0,0,1,e,n))}function f(r,t,e,n,o,s,u,a){var i=Math.sin(s),c=Math.cos(s);return r[0]=n*c,r[1]=o*i,r[2]=-n*i,r[3]=o*c,r[4]=u*n*c-a*n*i+t,r[5]=u*o*i+a*o*c+e,r}function x(t){var e=v(t);(0,r.assert)(0!==e,32);var n=t[0],o=t[1],s=t[2],u=t[3],a=t[4],i=t[5];return t[0]=u/e,t[1]=-o/e,t[2]=-s/e,t[3]=n/e,t[4]=(s*i-u*a)/e,t[5]=-(n*i-o*a)/e,t}function v(r){return r[0]*r[3]-r[1]*r[2]}
},{"./asserts.js":"fLG6"}],"F8sI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../Object.js"),e=c(t),o=require("../extent.js"),r=require("../functions.js"),n=require("../geom/flat/transform.js"),i=require("../proj.js"),s=require("../proj/Units.js"),p=c(s),u=require("../transform.js");function c(t){return t&&t.__esModule?t:{default:t}}var a=(0,u.create)(),f=function(t){function e(){t.call(this),this.extent_=(0,o.createEmpty)(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){},e.prototype.closestPointXY=function(t,e,o,r){},e.prototype.getClosestPoint=function(t,e){var o=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],o,1/0),o},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),(0,o.returnOrUpdate)(this.extent_,t)},e.prototype.rotate=function(t,e){},e.prototype.scale=function(t,e,o){},e.prototype.translate=function(t,e){},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){},e.prototype.getType=function(){},e.prototype.applyTransform=function(t){},e.prototype.intersectsExtent=function(t){},e.prototype.translate=function(t,e){},e.prototype.transform=function(t,e){var r=(t=(0,i.get)(t)).getUnits()==p.default.TILE_PIXELS?function(r,s,p){var c=t.getExtent(),f=t.getWorldExtent(),y=(0,o.getHeight)(f)/(0,o.getHeight)(c);return(0,u.compose)(a,f[0],f[3],y,-y,0,0,0),(0,n.transform2D)(r,0,r.length,p,a,s),(0,i.getTransform)(t,e)(r,s,p)}:(0,i.getTransform)(t,e);return this.applyTransform(r),this},e}(e.default);f.prototype.containsXY=r.FALSE,exports.default=f;
},{"../Object.js":"PhPh","../extent.js":"QDir","../functions.js":"RgA2","../geom/flat/transform.js":"LGwr","../proj.js":"Diht","../proj/Units.js":"yZx6","../transform.js":"P4eA"}],"eucy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromString=void 0,exports.asString=a,exports.asArray=i,exports.normalize=p,exports.toString=c;var r=require("./asserts.js"),e=require("./math.js"),t=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,n=/^([a-z]*)$/i;function a(r){return"string"==typeof r?r:c(r)}function s(r){var e=document.createElement("div");if(e.style.color=r,""!==e.style.color){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}var o=exports.fromString=function(){var r={},e=0;return function(t){var n;if(r.hasOwnProperty(t))n=r[t];else{if(e>=1024){var a=0;for(var s in r)0==(3&a++)&&(delete r[s],--e)}n=u(t),r[t]=n,++e}return n}}();function i(r){return Array.isArray(r)?r:o(r)}function u(e){var a,o,i,u,c;if(n.exec(e)&&(e=s(e)),t.exec(e)){var l,f=e.length-1;l=f<=4?1:2;var v=4===f||8===f;a=parseInt(e.substr(1+0*l,l),16),o=parseInt(e.substr(1+1*l,l),16),i=parseInt(e.substr(1+2*l,l),16),u=v?parseInt(e.substr(1+3*l,l),16):255,1==l&&(a=(a<<4)+a,o=(o<<4)+o,i=(i<<4)+i,v&&(u=(u<<4)+u)),c=[a,o,i,u/255]}else 0==e.indexOf("rgba(")?p(c=e.slice(5,-1).split(",").map(Number)):0==e.indexOf("rgb(")?((c=e.slice(4,-1).split(",").map(Number)).push(1),p(c)):(0,r.assert)(!1,14);return c}function p(r){return r[0]=(0,e.clamp)(r[0]+.5|0,0,255),r[1]=(0,e.clamp)(r[1]+.5|0,0,255),r[2]=(0,e.clamp)(r[2]+.5|0,0,255),r[3]=(0,e.clamp)(r[3],0,1),r}function c(r){var e=r[0];e!=(0|e)&&(e=e+.5|0);var t=r[1];t!=(0|t)&&(t=t+.5|0);var n=r[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+t+","+n+","+(void 0===r[3]?1:r[3])+")"}
},{"./asserts.js":"fLG6","./math.js":"B96G"}],"V5+X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asColorLike=r,exports.isColorLike=t;var e=require("./color.js");function r(r){return t(r)?r:(0,e.toString)(r)}function t(e){return"string"==typeof e||e instanceof CanvasPattern||e instanceof CanvasGradient}
},{"./color.js":"eucy"}],"Xno5":[function(require,module,exports) {
"use strict";function e(e,t){var r=document.createElement("CANVAS");return e&&(r.width=e),t&&(r.height=t),r.getContext("2d")}function t(e){var t=e.offsetWidth,r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function r(e){var t=e.offsetHeight,r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function o(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function n(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function i(e){for(;e.lastChild;)e.removeChild(e.lastChild)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=e,exports.outerWidth=t,exports.outerHeight=r,exports.replaceNode=o,exports.removeNode=n,exports.removeChildren=i;
},{}],"SCyv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContext=w;var e=exports.ONE=1,t=exports.SRC_ALPHA=770,r=exports.COLOR_ATTACHMENT0=36064,E=exports.COLOR_BUFFER_BIT=16384,o=exports.TRIANGLES=4,T=exports.TRIANGLE_STRIP=5,p=exports.ONE_MINUS_SRC_ALPHA=771,s=exports.ARRAY_BUFFER=34962,x=exports.ELEMENT_ARRAY_BUFFER=34963,_=exports.STREAM_DRAW=35040,R=exports.STATIC_DRAW=35044,A=exports.DYNAMIC_DRAW=35048,S=exports.CULL_FACE=2884,N=exports.BLEND=3042,I=exports.STENCIL_TEST=2960,n=exports.DEPTH_TEST=2929,U=exports.SCISSOR_TEST=3089,L=exports.UNSIGNED_BYTE=5121,C=exports.UNSIGNED_SHORT=5123,a=exports.UNSIGNED_INT=5125,M=exports.FLOAT=5126,X=exports.RGBA=6408,i=exports.FRAGMENT_SHADER=35632,D=exports.VERTEX_SHADER=35633,F=exports.LINK_STATUS=35714,O=exports.LINEAR=9729,l=exports.TEXTURE_MAG_FILTER=10240,G=exports.TEXTURE_MIN_FILTER=10241,P=exports.TEXTURE_WRAP_S=10242,c=exports.TEXTURE_WRAP_T=10243,d=exports.TEXTURE_2D=3553,f=exports.TEXTURE0=33984,u=exports.CLAMP_TO_EDGE=33071,g=exports.COMPILE_STATUS=35713,B=exports.FRAMEBUFFER=36160,H=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function w(e,t){for(var r=H.length,E=0;E<r;++E)try{var o=e.getContext(H[E],t);if(o)return o}catch(e){}return null}var v,b,m=exports.DEBUG=!0,W=!1;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var y=document.createElement("CANVAS"),Y=w(y,{failIfMajorPerformanceCaveat:!0});Y&&(exports.HAS=W=!0,exports.MAX_TEXTURE_SIZE=v=Y.getParameter(Y.MAX_TEXTURE_SIZE),exports.EXTENSIONS=b=Y.getSupportedExtensions())}catch(e){}exports.HAS=W,exports.MAX_TEXTURE_SIZE=v,exports.EXTENSIONS=b;
},{}],"f3Nv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./webgl.js");Object.defineProperty(exports,"WEBGL",{enumerable:!0,get:function(){return e.HAS}});var t="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",r=exports.FIREFOX=-1!==t.indexOf("firefox"),o=exports.SAFARI=-1!==t.indexOf("safari")&&-1==t.indexOf("chrom"),n=exports.WEBKIT=-1!==t.indexOf("webkit")&&-1==t.indexOf("edge"),i=exports.MAC=-1!==t.indexOf("macintosh"),a=exports.DEVICE_PIXEL_RATIO=window.devicePixelRatio||1,s=exports.CANVAS_LINE_DASH=function(){var e=!1;try{e=!!document.createElement("CANVAS").getContext("2d").setLineDash}catch(e){}return e}(),x=exports.GEOLOCATION="geolocation"in navigator,d=exports.TOUCH="ontouchstart"in window,O=exports.POINTER="PointerEvent"in window,f=exports.MSPOINTER=!!navigator.msPointerEnabled;
},{"./webgl.js":"SCyv"}],"u3k+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3};
},{}],"HgMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.CLASS_HIDDEN="ol-hidden",t=exports.CLASS_SELECTABLE="ol-selectable",o=exports.CLASS_UNSELECTABLE="ol-unselectable",r=exports.CLASS_UNSUPPORTED="ol-unsupported",l=exports.CLASS_CONTROL="ol-control",n=exports.CLASS_COLLAPSED="ol-collapsed",s=exports.getFontFamilies=function(){var e,t={};return function(o){if(e||(e=document.createElement("div").style),!(o in t)){e.font=o;var r=e.fontFamily;if(e.font="",!r)return null;t[o]=r.split(/,\s?/)}return t[o]}}();
},{}],"oMDz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../asserts.js"),t=require("../events/EventTarget.js"),r=o(t),s=require("../events/EventType.js"),n=o(s);function o(e){return e&&e.__esModule?e:{default:e}}var i=function(t){function r(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},r.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(n.default.CLEAR)},r.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},r.prototype.forEach=function(e,t){for(var r=this.oldest_;r;)e.call(t,r.value_,r.key_,this),r=r.newer},r.prototype.get=function(t){var r=this.entries_[t];return(0,e.assert)(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)},r.prototype.remove=function(t){var r=this.entries_[t];return(0,e.assert)(void 0!==r,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[t],--this.count_,r.value_},r.prototype.getCount=function(){return this.count_},r.prototype.getKeys=function(){var e,t=new Array(this.count_),r=0;for(e=this.newest_;e;e=e.older)t[r++]=e.key_;return t},r.prototype.getValues=function(){var e,t=new Array(this.count_),r=0;for(e=this.newest_;e;e=e.older)t[r++]=e.value_;return t},r.prototype.peekLast=function(){return this.oldest_.value_},r.prototype.peekLastKey=function(){return this.oldest_.key_},r.prototype.peekFirstKey=function(){return this.newest_.key_},r.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},r.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},r.prototype.set=function(t,r){(0,e.assert)(!(t in this.entries_),16);var s={key_:t,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=s:this.oldest_=s,this.newest_=s,this.entries_[t]=s,++this.count_},r.prototype.setSize=function(e){this.highWaterMark=e},r.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},r}(r.default);exports.default=i;
},{"../asserts.js":"fLG6","../events/EventTarget.js":"PAZw","../events/EventType.js":"C8cu"}],"iAG7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resetTransform=exports.measureTextHeight=exports.checkFont=exports.textHeights=exports.checkedFonts=exports.labelCache=exports.defaultLineWidth=exports.defaultPadding=exports.defaultTextBaseline=exports.defaultTextAlign=exports.defaultStrokeStyle=exports.defaultMiterLimit=exports.defaultLineJoin=exports.defaultLineDashOffset=exports.defaultLineDash=exports.defaultLineCap=exports.defaultFillStyle=exports.defaultFont=void 0,exports.measureTextWidth=w,exports.rotateAtOffset=k,exports.drawImage=M;var e=require("../css.js"),t=require("../dom.js"),r=require("../obj.js"),a=require("../structs/LRUCache.js"),o=n(a),s=require("../transform.js");function n(e){return e&&e.__esModule?e:{default:e}}var l=exports.defaultFont="10px sans-serif",i=exports.defaultFillStyle=[0,0,0,1],u=exports.defaultLineCap="round",f=exports.defaultLineDash=[],p=exports.defaultLineDashOffset=0,d=exports.defaultLineJoin="round",x=exports.defaultMiterLimit=10,c=exports.defaultStrokeStyle=[0,0,0,1],h=exports.defaultTextAlign="center",m=exports.defaultTextBaseline="middle",v=exports.defaultPadding=[0,0,0,0],g=exports.defaultLineWidth=1,y=exports.labelCache=new o.default,T=exports.checkedFonts={},L=null,b=exports.textHeights={},C=exports.checkFont=function(){var t,a,o=60,s=T,n="32px ",l=["monospace","serif"],i=l.length,u="wmytzilWMYTZIL@#/&?$%10";function f(e){for(var t=F(),r=!0,o=0;o<i;++o){var s=l[o];if(t.font=n+s,a=t.measureText(u).width,e!=s){t.font=n+e+","+s;var f=t.measureText(u).width;r=r&&f!=a}}return r}function p(){var e=!0;for(var a in s)s[a]<o&&(f(a)?(s[a]=o,(0,r.clear)(b),L=null,y.clear()):(++s[a],e=!1));e&&(clearInterval(t),t=void 0)}return function(r){var a=(0,e.getFontFamilies)(r);if(a)for(var n=0,l=a.length;n<l;++n){var i=a[n];i in s||(s[i]=o,f(i)||(s[i]=0,void 0===t&&(t=setInterval(p,32))))}}}();function F(){return L||(L=(0,t.createCanvasContext2D)(1,1)),L}var j=exports.measureTextHeight=function(){var e,t=b;return function(r){var a=t[r];return null==a&&(e||((e=document.createElement("span")).textContent="M",e.style.margin=e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=r,document.body.appendChild(e),a=t[r]=e.offsetHeight,document.body.removeChild(e)),a}}();function w(e,t){var r=F();return e!=r.font&&(r.font=e),r.measureText(t).width}function k(e,t,r,a){0!==t&&(e.translate(r,a),e.rotate(t),e.translate(-r,-a))}var A=exports.resetTransform=(0,s.create)();function M(e,t,r,a,o,s,n,l,i,u,f){var p;1!=r&&(p=e.globalAlpha,e.globalAlpha=p*r),t&&e.setTransform.apply(e,t),e.drawImage(a,o,s,n,l,i,u,n*f,l*f),p&&(e.globalAlpha=p),t&&e.setTransform.apply(e,A)}
},{"../css.js":"HgMV","../dom.js":"Xno5","../obj.js":"mH6q","../structs/LRUCache.js":"oMDz","../transform.js":"P4eA"}],"S8ow":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.snapToPixel_=t.snapToPixel};t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getSnapToPixel=function(){return this.snapToPixel_},t.prototype.getAnchor=function(){},t.prototype.getImage=function(t){},t.prototype.getHitDetectionImage=function(t){},t.prototype.getImageState=function(){},t.prototype.getImageSize=function(){},t.prototype.getHitDetectionImageSize=function(){},t.prototype.getOrigin=function(){},t.prototype.getSize=function(){},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setSnapToPixel=function(t){this.snapToPixel_=t},t.prototype.listenImageChange=function(t,o){},t.prototype.load=function(){},t.prototype.unlistenImageChange=function(t,o){},exports.default=t;
},{}],"il3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../colorlike.js"),i=require("../dom.js"),e=require("../has.js"),s=require("../ImageState.js"),a=h(s),n=require("../render/canvas.js"),o=require("../style/Image.js"),r=h(o);function h(t){return t&&t.__esModule?t:{default:t}}var l=function(s){function o(t){var i=void 0===t.snapToPixel||t.snapToPixel,e=void 0!==t.rotateWithView&&t.rotateWithView;s.call(this,{opacity:1,rotateWithView:e,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:i}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=t.atlasManager,this.render_(this.atlasManager_)}return s&&(o.__proto__=s),o.prototype=Object.create(s&&s.prototype),o.prototype.constructor=o,o.prototype.clone=function(){var t=new o({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},o.prototype.getAnchor=function(){return this.anchor_},o.prototype.getAngle=function(){return this.angle_},o.prototype.getFill=function(){return this.fill_},o.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},o.prototype.getImage=function(t){return this.canvas_},o.prototype.getImageSize=function(){return this.imageSize_},o.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},o.prototype.getImageState=function(){return a.default.LOADED},o.prototype.getOrigin=function(){return this.origin_},o.prototype.getPoints=function(){return this.points_},o.prototype.getRadius=function(){return this.radius_},o.prototype.getRadius2=function(){return this.radius2_},o.prototype.getSize=function(){return this.size_},o.prototype.getStroke=function(){return this.stroke_},o.prototype.listenImageChange=function(t,i){},o.prototype.load=function(){},o.prototype.unlistenImageChange=function(t,i){},o.prototype.render_=function(s){var a,o,r="",h="",l=0,u=null,_=0,c=0;this.stroke_&&(null===(o=this.stroke_.getColor())&&(o=n.defaultStrokeStyle),o=(0,t.asColorLike)(o),void 0===(c=this.stroke_.getWidth())&&(c=n.defaultLineWidth),u=this.stroke_.getLineDash(),_=this.stroke_.getLineDashOffset(),e.CANVAS_LINE_DASH||(u=null,_=0),void 0===(h=this.stroke_.getLineJoin())&&(h=n.defaultLineJoin),void 0===(r=this.stroke_.getLineCap())&&(r=n.defaultLineCap),void 0===(l=this.stroke_.getMiterLimit())&&(l=n.defaultMiterLimit));var d=2*(this.radius_+c)+1,g={strokeStyle:o,strokeWidth:c,size:d,lineCap:r,lineDash:u,lineDashOffset:_,lineJoin:h,miterLimit:l};if(void 0===s){var f=(0,i.createCanvasContext2D)(d,d);this.canvas_=f.canvas,a=d=this.canvas_.width,this.draw_(g,f,0,0),this.createHitDetectionCanvas_(g)}else{d=Math.round(d);var p,v=!this.fill_;v&&(p=this.drawHitDetectionCanvas_.bind(this,g));var k=this.getChecksum(),m=s.add(k,d,d,this.draw_.bind(this,g),p);this.canvas_=m.image,this.origin_=[m.offsetX,m.offsetY],a=m.image.width,v?(this.hitDetectionCanvas_=m.hitImage,this.hitDetectionImageSize_=[m.hitImage.width,m.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[a,a])}this.anchor_=[d/2,d/2],this.size_=[d,d],this.imageSize_=[a,a]},o.prototype.draw_=function(i,e,s,a){var o,r,h;e.setTransform(1,0,0,1,0,0),e.translate(s,a),e.beginPath();var l=this.points_;if(l===1/0)e.arc(i.size/2,i.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(l*=2),o=0;o<=l;o++)r=2*o*Math.PI/l-Math.PI/2+this.angle_,h=o%2==0?this.radius_:u,e.lineTo(i.size/2+h*Math.cos(r),i.size/2+h*Math.sin(r))}if(this.fill_){var _=this.fill_.getColor();null===_&&(_=n.defaultFillStyle),e.fillStyle=(0,t.asColorLike)(_),e.fill()}this.stroke_&&(e.strokeStyle=i.strokeStyle,e.lineWidth=i.strokeWidth,i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.miterLimit=i.miterLimit,e.stroke()),e.closePath()},o.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=(0,i.createCanvasContext2D)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},o.prototype.drawHitDetectionCanvas_=function(t,i,e,s){i.setTransform(1,0,0,1,0,0),i.translate(e,s),i.beginPath();var a=this.points_;if(a===1/0)i.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o,r,h,l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(a*=2),o=0;o<=a;o++)h=2*o*Math.PI/a-Math.PI/2+this.angle_,r=o%2==0?this.radius_:l,i.lineTo(t.size/2+r*Math.cos(h),t.size/2+r*Math.sin(h))}i.fillStyle=n.defaultFillStyle,i.fill(),this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.stroke()),i.closePath()},o.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",i=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||i!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var e="r"+t+i+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[e,t,i,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},o}(r.default);exports.default=l;
},{"../colorlike.js":"V5+X","../dom.js":"Xno5","../has.js":"f3Nv","../ImageState.js":"u3k+","../render/canvas.js":"iAG7","../style/Image.js":"S8ow"}],"cdf1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../style/RegularShape.js"),e=a(t);function a(t){return t&&t.__esModule?t:{default:t}}var r=function(t){function e(e){var a=e||{};t.call(this,{points:1/0,fill:a.fill,radius:a.radius,snapToPixel:a.snapToPixel,stroke:a.stroke,atlasManager:a.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(e.default);exports.default=r;
},{"../style/RegularShape.js":"il3X"}],"AFcg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o=require("../util.js"),t=require("../color.js"),e=function(o){var t=o||{};this.color_=void 0!==t.color?t.color:null,this.checksum_=void 0};e.prototype.clone=function(){var o=this.getColor();return new e({color:o&&o.slice?o.slice():o||void 0})},e.prototype.getColor=function(){return this.color_},e.prototype.setColor=function(o){this.color_=o,this.checksum_=void 0},e.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?this.checksum_=(0,o.getUid)(this.color_).toString():this.checksum_="f"+(this.color_?(0,t.asString)(this.color_):"-")),this.checksum_},exports.default=e;
},{"../util.js":"KniQ","../color.js":"eucy"}],"TXDt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util.js"),i=function(t){var i=t||{};this.color_=void 0!==i.color?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=void 0!==i.lineDash?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width,this.checksum_=void 0};i.prototype.clone=function(){var t=this.getColor();return new i({color:t&&t.slice?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},i.prototype.getColor=function(){return this.color_},i.prototype.getLineCap=function(){return this.lineCap_},i.prototype.getLineDash=function(){return this.lineDash_},i.prototype.getLineDashOffset=function(){return this.lineDashOffset_},i.prototype.getLineJoin=function(){return this.lineJoin_},i.prototype.getMiterLimit=function(){return this.miterLimit_},i.prototype.getWidth=function(){return this.width_},i.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},i.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},i.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},i.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},i.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},i.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},i.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},i.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=(0,t.getUid)(this.color_).toString():this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_},exports.default=i;
},{"../util.js":"KniQ"}],"1he4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toFunction=a,exports.createDefaultStyle=g,exports.createEditingStyle=y;var e=require("../asserts.js"),t=require("../geom/GeometryType.js"),o=f(t),r=require("../style/Circle.js"),n=f(r),i=require("../style/Fill.js"),u=f(i),l=require("../style/Stroke.js"),s=f(l);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=e||{};this.geometry_=null,this.geometryFunction_=h,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex};function a(t){var o,r;"function"==typeof t?o=t:(Array.isArray(t)?r=t:((0,e.assert)(t instanceof d,41),r=[t]),o=function(){return r});return o}d.prototype.clone=function(){var e=this.getGeometry();return e&&e.clone&&(e=e.clone()),new d({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},d.prototype.getRenderer=function(){return this.renderer_},d.prototype.setRenderer=function(e){this.renderer_=e},d.prototype.getGeometry=function(){return this.geometry_},d.prototype.getGeometryFunction=function(){return this.geometryFunction_},d.prototype.getFill=function(){return this.fill_},d.prototype.setFill=function(e){this.fill_=e},d.prototype.getImage=function(){return this.image_},d.prototype.setImage=function(e){this.image_=e},d.prototype.getStroke=function(){return this.stroke_},d.prototype.setStroke=function(e){this.stroke_=e},d.prototype.getText=function(){return this.text_},d.prototype.setText=function(e){this.text_=e},d.prototype.getZIndex=function(){return this.zIndex_},d.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=h,this.geometry_=e},d.prototype.setZIndex=function(e){this.zIndex_=e};var c=null;function g(e,t){if(!c){var o=new u.default({color:"rgba(255,255,255,0.4)"}),r=new s.default({color:"#3399CC",width:1.25});c=[new d({image:new n.default({fill:o,stroke:r,radius:5}),fill:o,stroke:r})]}return c}function y(){var e={},t=[255,255,255,1],r=[0,153,255,1];return e[o.default.POLYGON]=[new d({fill:new u.default({color:[255,255,255,.5]})})],e[o.default.MULTI_POLYGON]=e[o.default.POLYGON],e[o.default.LINE_STRING]=[new d({stroke:new s.default({color:t,width:5})}),new d({stroke:new s.default({color:r,width:3})})],e[o.default.MULTI_LINE_STRING]=e[o.default.LINE_STRING],e[o.default.CIRCLE]=e[o.default.POLYGON].concat(e[o.default.LINE_STRING]),e[o.default.POINT]=[new d({image:new n.default({radius:6,fill:new u.default({color:r}),stroke:new s.default({color:t,width:1.5})}),zIndex:1/0})],e[o.default.MULTI_POINT]=e[o.default.POINT],e[o.default.GEOMETRY_COLLECTION]=e[o.default.POLYGON].concat(e[o.default.LINE_STRING],e[o.default.POINT]),e}function h(e){return e.getGeometry()}exports.default=d;
},{"../asserts.js":"fLG6","../geom/GeometryType.js":"lmV0","../style/Circle.js":"cdf1","../style/Fill.js":"AFcg","../style/Stroke.js":"TXDt"}],"mYW9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStyleFunction=l;var e=require("./asserts.js"),t=require("./events.js"),r=require("./events/EventType.js"),n=u(r),o=require("./Object.js"),i=u(o),s=require("./geom/Geometry.js"),y=u(s),h=require("./style/Style.js"),a=u(h);function u(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function r(r){if(e.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,(0,t.listen)(this,(0,o.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),void 0!==r)if(r instanceof y.default||!r){var n=r;this.setGeometry(n)}else{var i=r;this.setProperties(i)}}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.clone=function(){var e=new r(this.getProperties());e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var n=this.getStyle();return n&&e.setStyle(n),e},r.prototype.getGeometry=function(){return this.get(this.geometryName_)},r.prototype.getId=function(){return this.id_},r.prototype.getGeometryName=function(){return this.geometryName_},r.prototype.getStyle=function(){return this.style_},r.prototype.getStyleFunction=function(){return this.styleFunction_},r.prototype.handleGeometryChange_=function(){this.changed()},r.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,t.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=(0,t.listen)(e,n.default.CHANGE,this.handleGeometryChange_,this)),this.changed()},r.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},r.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?l(e):void 0,this.changed()},r.prototype.setId=function(e){this.id_=e,this.changed()},r.prototype.setGeometryName=function(e){(0,t.unlisten)(this,(0,o.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=e,(0,t.listen)(this,(0,o.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},r}(i.default);function l(t){return"function"==typeof t?t:(Array.isArray(t)?r=t:((0,e.assert)(t instanceof a.default,41),r=[t]),function(){return r});var r}exports.default=g;
},{"./asserts.js":"fLG6","./events.js":"55Uq","./events/EventType.js":"C8cu","./Object.js":"PhPh","./geom/Geometry.js":"F8sI","./style/Style.js":"1he4"}],"M8S8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"};
},{}],"luEr":[function(require,module,exports) {
"use strict";function r(r,n,t){for(var u,o,i=t||e,f=0,a=r.length,s=!1;f<a;)(o=+i(r[u=f+(a-f>>1)],n))<0?f=u+1:(a=u,s=!o);return s?f:~f}function e(r,e){return r>e?1:r<e?-1:0}function n(r,e){return r.indexOf(e)>=0}function t(r,e,n){var t,u=r.length;if(r[0]<=e)return 0;if(e<=r[u-1])return u-1;if(n>0){for(t=1;t<u;++t)if(r[t]<e)return t-1}else if(n<0){for(t=1;t<u;++t)if(r[t]<=e)return t}else for(t=1;t<u;++t){if(r[t]==e)return t;if(r[t]<e)return r[t-1]-e<e-r[t]?t-1:t}return u-1}function u(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function o(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,u=0;u<t;u++)r[r.length]=n[u]}function i(r,e){var n=r.indexOf(e),t=n>-1;return t&&r.splice(n,1),t}function f(r,e){for(var n,t=r.length>>>0,u=0;u<t;u++)if(e(n=r[u],u,r))return n;return null}function a(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}function s(r,e){var n,t=r.length,u=Array(r.length);for(n=0;n<t;n++)u[n]={index:n,value:r[n]};for(u.sort(function(r,n){return e(r.value,n.value)||r.index-n.index}),n=0;n<r.length;n++)r[n]=u[n].value}function l(r,e){var n;return!r.every(function(t,u){return n=u,!e(t,u,r)})?n:-1}function c(r,n,t){var u=n||e;return r.every(function(e,n){if(0===n)return!0;var o=u(r[n-1],e);return!(o>0||t&&0===o)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binarySearch=r,exports.numberSafeCompareFunction=e,exports.includes=n,exports.linearFindNearest=t,exports.reverseSubArray=u,exports.extend=o,exports.remove=i,exports.find=f,exports.equals=a,exports.stableSort=s,exports.findIndex=l,exports.isSorted=c;
},{}],"1Utv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};
},{}],"pnrv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStrideForLayout=f,exports.transformGeom2D=h;var t=require("../functions.js"),e=require("../extent.js"),i=require("../geom/Geometry.js"),r=l(i),o=require("../geom/GeometryLayout.js"),n=l(o),s=require("../geom/flat/transform.js"),a=require("../obj.js");function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function i(){t.call(this),this.layout=n.default.XY,this.stride=2,this.flatCoordinates=null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.computeExtent=function(t){return(0,e.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},i.prototype.getCoordinates=function(){},i.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},i.prototype.getFlatCoordinates=function(){return this.flatCoordinates},i.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},i.prototype.getLayout=function(){return this.layout},i.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&((0,a.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},i.prototype.getSimplifiedGeometryInternal=function(t){return this},i.prototype.getStride=function(){return this.stride},i.prototype.setFlatCoordinates=function(t,e){this.stride=f(t),this.layout=t,this.flatCoordinates=e},i.prototype.setCoordinates=function(t,e){},i.prototype.setLayout=function(t,e,i){var r;if(t)r=f(t);else{for(var o=0;o<i;++o){if(0===e.length)return this.layout=n.default.XY,void(this.stride=2);e=e[0]}t=d(r=e.length)}this.layout=t,this.stride=r},i.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},i.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();(0,s.rotate)(i,0,i.length,r,t,e,i),this.changed()}},i.prototype.scale=function(t,i,r){var o=i;void 0===o&&(o=t);var n=r;n||(n=(0,e.getCenter)(this.getExtent()));var a=this.getFlatCoordinates();if(a){var l=this.getStride();(0,s.scale)(a,0,a.length,l,t,o,n,a),this.changed()}},i.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();(0,s.translate)(i,0,i.length,r,t,e,i),this.changed()}},i}(r.default);function d(t){var e;return 2==t?e=n.default.XY:3==t?e=n.default.XYZ:4==t&&(e=n.default.XYZM),e}function f(t){var e;return t==n.default.XY?e=2:t==n.default.XYZ||t==n.default.XYM?e=3:t==n.default.XYZM&&(e=4),e}function h(t,e,i){var r=t.getFlatCoordinates();if(r){var o=t.getStride();return(0,s.transform2D)(r,0,r.length,o,e,i)}return null}u.prototype.containsXY=t.FALSE,exports.default=u;
},{"../functions.js":"RgA2","../extent.js":"QDir","../geom/Geometry.js":"F8sI","../geom/GeometryLayout.js":"1Utv","../geom/flat/transform.js":"LGwr","../obj.js":"mH6q"}],"EOSm":[function(require,module,exports) {
"use strict";function r(r,e,n,t){for(var o=0,i=r[n-t],a=r[n-t+1];e<n;e+=t){var s=r[e],u=r[e+1];o+=a*s-i*u,i=s,a=u}return o/2}function e(e,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=r(e,n,u,o),n=u}return i}function n(r,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=e(r,n,u,o),n=u[u.length-1]}return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRing=r,exports.linearRings=e,exports.linearRingss=n;
},{}],"rMra":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxSquaredDelta=t,exports.arrayMaxSquaredDelta=a,exports.multiArrayMaxSquaredDelta=n,exports.assignClosestPoint=s,exports.assignClosestArrayPoint=o,exports.assignClosestMultiArrayPoint=i;var r=require("../../math.js");function e(e,t,a,n,s,o,i){var u,f=e[t],l=e[t+1],v=e[a]-f,h=e[a+1]-l;if(0===v&&0===h)u=t;else{var g=((s-f)*v+(o-l)*h)/(v*v+h*h);if(g>1)u=a;else{if(g>0){for(var c=0;c<n;++c)i[c]=(0,r.lerp)(e[t+c],e[a+c],g);return void(i.length=n)}u=t}}for(var N=0;N<n;++N)i[N]=e[u+N];i.length=n}function t(e,t,a,n,s){var o=e[t],i=e[t+1];for(t+=n;t<a;t+=n){var u=e[t],f=e[t+1],l=(0,r.squaredDistance)(o,i,u,f);l>s&&(s=l),o=u,i=f}return s}function a(r,e,a,n,s){for(var o=0,i=a.length;o<i;++o){var u=a[o];s=t(r,e,u,n,s),e=u}return s}function n(r,e,t,n,s){for(var o=0,i=t.length;o<i;++o){var u=t[o];s=a(r,e,u,n,s),e=u[u.length-1]}return s}function s(t,a,n,s,o,i,u,f,l,v,h){if(a==n)return v;var g,c;if(0===o){if((c=(0,r.squaredDistance)(u,f,t[a],t[a+1]))<v){for(g=0;g<s;++g)l[g]=t[a+g];return l.length=s,c}return v}for(var N=h||[NaN,NaN],x=a+s;x<n;)if(e(t,x-s,x,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s,x+=s}else x+=s*Math.max((Math.sqrt(c)-Math.sqrt(v))/o|0,1);if(i&&(e(t,n-s,a,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v)){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s}return v}function o(r,e,t,a,n,o,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=s(r,e,N,a,n,o,i,u,f,l,h),e=N}return l}function i(r,e,t,a,n,s,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=o(r,e,N,a,n,s,i,u,f,l,h),e=N[N.length-1]}return l}
},{"../../math.js":"B96G"}],"1FNh":[function(require,module,exports) {
"use strict";function e(e,r,t,n){for(var o=0,a=t.length;o<a;++o)e[r++]=t[o];return r}function r(e,r,t,n){for(var o=0,a=t.length;o<a;++o)for(var f=t[o],l=0;l<n;++l)e[r++]=f[l];return r}function t(e,t,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=r(e,t,n[u],o);f[l++]=s,t=s}return f.length=l,f}function n(e,r,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=t(e,r,n[u],o,f[l]);f[l++]=s,r=s[s.length-1]}return f.length=l,f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deflateCoordinate=e,exports.deflateCoordinates=r,exports.deflateCoordinatesArray=t,exports.deflateMultiCoordinatesArray=n;
},{}],"znXl":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){for(var i=void 0!==o?o:[],a=0,l=r;l<t;l+=n)i[a++]=e.slice(l,l+n);return i.length=a,i}function r(r,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=e(r,t,u,o,a[l]),t=u}return a.length=l,a}function t(e,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=r(e,t,u,o,a[l]),t=u[u.length-1]}return a.length=l,a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateCoordinates=e,exports.inflateCoordinatesArray=r,exports.inflateMultiCoordinatesArray=t;
},{}],"IEpt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simplifyLineString=e,exports.douglasPeucker=t,exports.douglasPeuckerArray=n,exports.douglasPeuckerMultiArray=u,exports.radialDistance=a,exports.snap=o,exports.quantize=i,exports.quantizeArray=s,exports.quantizeMultiArray=f;var r=require("../../math.js");function e(r,e,n,u,o,i,s){var f=void 0!==s?s:[];return i||(n=a(r,e,n,u,o,f,0),r=f,e=0,u=2),f.length=t(r,e,n,u,o,f,0),f}function t(e,t,n,u,a,o,i){var s=(n-t)/u;if(s<3){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var f=new Array(s);f[0]=1,f[s-1]=1;for(var p=[t,n-u],v=0;p.length>0;){for(var l=p.pop(),c=p.pop(),h=0,g=e[c],d=e[c+1],x=e[l],y=e[l+1],q=c+u;q<l;q+=u){var A=e[q],M=e[q+1],P=(0,r.squaredSegmentDistance)(A,M,g,d,x,y);P>h&&(v=q,h=P)}h>a&&(f[(v-t)/u]=1,c+u<v&&p.push(c,v),v+u<l&&p.push(v,l))}for(var k=0;k<s;++k)f[k]&&(o[i++]=e[t+k*u],o[i++]=e[t+k*u+1]);return i}function n(r,e,n,u,a,o,i,s){for(var f=0,p=n.length;f<p;++f){var v=n[f];i=t(r,e,v,u,a,o,i),s.push(i),e=v}return i}function u(r,e,t,u,a,o,i,s){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];i=n(r,e,v,u,a,o,i,l),s.push(l),e=v[v.length-1]}return i}function a(e,t,n,u,a,o,i){if(n<=t+u){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var s=e[t],f=e[t+1];o[i++]=s,o[i++]=f;var p=s,v=f;for(t+=u;t<n;t+=u)p=e[t],v=e[t+1],(0,r.squaredDistance)(s,f,p,v)>a&&(o[i++]=p,o[i++]=v,s=p,f=v);return p==s&&v==f||(o[i++]=p,o[i++]=v),i}function o(r,e){return e*Math.round(r/e)}function i(r,e,t,n,u,a,i){if(e==t)return i;var s,f,p=o(r[e],u),v=o(r[e+1],u);e+=n,a[i++]=p,a[i++]=v;do{if(s=o(r[e],u),f=o(r[e+1],u),(e+=n)==t)return a[i++]=s,a[i++]=f,i}while(s==p&&f==v);for(;e<t;){var l=o(r[e],u),c=o(r[e+1],u);if(e+=n,l!=s||c!=f){var h=s-p,g=f-v,d=l-p,x=c-v;h*x==g*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(g<0&&x<g||g==x||g>0&&x>g)?(s=l,f=c):(a[i++]=s,a[i++]=f,p=s,v=f,s=l,f=c)}}return a[i++]=s,a[i++]=f,i}function s(r,e,t,n,u,a,o,s){for(var f=0,p=t.length;f<p;++f){var v=t[f];o=i(r,e,v,n,u,a,o),s.push(o),e=v}return o}function f(r,e,t,n,u,a,o,i){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];o=s(r,e,v,n,u,a,o,l),i.push(l),e=v[v.length-1]}return o}
},{"../../math.js":"B96G"}],"jRgU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../extent.js"),e=require("../geom/GeometryLayout.js"),i=f(e),o=require("../geom/GeometryType.js"),s=f(o),r=require("../geom/SimpleGeometry.js"),a=f(r),n=require("../geom/flat/area.js"),l=require("../geom/flat/closest.js"),h=require("../geom/flat/deflate.js"),u=require("../geom/flat/inflate.js"),d=require("../geom/flat/simplify.js");function f(t){return t&&t.__esModule?t:{default:t}}var p=function(e){function o(t,i){e.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(t[0])?this.setCoordinates(t,i):this.setFlatCoordinates(i,t)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.clone=function(){return new o(this.flatCoordinates.slice(),this.layout)},o.prototype.closestPointXY=function(e,i,o,s){return s<(0,t.closestSquaredDistanceXY)(this.getExtent(),e,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,l.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,l.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,i,o,s))},o.prototype.getArea=function(){return(0,n.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},o.prototype.getCoordinates=function(){return(0,u.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},o.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=(0,d.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new o(e,i.default.XY)},o.prototype.getType=function(){return s.default.LINEAR_RING},o.prototype.intersectsExtent=function(t){},o.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,h.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},o}(a.default);exports.default=p;
},{"../extent.js":"QDir","../geom/GeometryLayout.js":"1Utv","../geom/GeometryType.js":"lmV0","../geom/SimpleGeometry.js":"pnrv","../geom/flat/area.js":"EOSm","../geom/flat/closest.js":"rMra","../geom/flat/deflate.js":"1FNh","../geom/flat/inflate.js":"znXl","../geom/flat/simplify.js":"IEpt"}],"gLcY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../extent.js"),e=require("../geom/GeometryType.js"),o=a(e),r=require("../geom/SimpleGeometry.js"),i=a(r),n=require("../geom/flat/deflate.js"),s=require("../math.js");function a(t){return t&&t.__esModule?t:{default:t}}var u=function(e){function r(t,o){e.call(this),this.setCoordinates(t,o)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.clone=function(){return new r(this.flatCoordinates.slice(),this.layout)},r.prototype.closestPointXY=function(t,e,o,r){var i=this.flatCoordinates,n=(0,s.squaredDistance)(t,e,i[0],i[1]);if(n<r){for(var a=this.stride,u=0;u<a;++u)o[u]=i[u];return o.length=a,n}return r},r.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},r.prototype.computeExtent=function(e){return(0,t.createOrUpdateFromCoordinate)(this.flatCoordinates,e)},r.prototype.getType=function(){return o.default.POINT},r.prototype.intersectsExtent=function(e){return(0,t.containsXY)(e,this.flatCoordinates[0],this.flatCoordinates[1])},r.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()},r}(i.default);exports.default=u;
},{"../extent.js":"QDir","../geom/GeometryType.js":"lmV0","../geom/SimpleGeometry.js":"pnrv","../geom/flat/deflate.js":"1FNh","../math.js":"B96G"}],"dzdN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingContainsExtent=n,exports.linearRingContainsXY=e,exports.linearRingsContainsXY=t,exports.linearRingssContainsXY=i;var r=require("../../extent.js");function n(n,t,i,o,u){return!(0,r.forEachCorner)(u,function(r){return!e(n,t,i,o,r[0],r[1])})}function e(r,n,e,t,i,o){for(var u=0,a=r[e-t],s=r[e-t+1];n<e;n+=t){var f=r[n],l=r[n+1];s<=o?l>o&&(f-a)*(o-s)-(i-a)*(l-s)>0&&u++:l<=o&&(f-a)*(o-s)-(i-a)*(l-s)<0&&u--,a=f,s=l}return 0!==u}function t(r,n,t,i,o,u){if(0===t.length)return!1;if(!e(r,n,t[0],i,o,u))return!1;for(var a=1,s=t.length;a<s;++a)if(e(r,t[a-1],t[a],i,o,u))return!1;return!0}function i(r,n,e,i,o,u){if(0===e.length)return!1;for(var a=0,s=e.length;a<s;++a){var f=e[a];if(t(r,n,f,i,o,u))return!0;n=f[f.length-1]}return!1}
},{"../../extent.js":"QDir"}],"UDvN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteriorPointOfArray=t,exports.getInteriorPointsOfMultiArray=n;var r=require("../../array.js"),e=require("../flat/contains.js");function t(t,n,a,o,i,s,u){for(var f,l,v,g,h,p,c,y=i[s+1],N=[],b=0,j=a.length;b<j;++b){var x=a[b];for(g=t[x-o],p=t[x-o+1],f=n;f<x;f+=o)h=t[f],c=t[f+1],(y<=p&&c<=y||p<=y&&y<=c)&&(v=(y-p)/(c-p)*(h-g)+g,N.push(v)),g=h,p=c}var M=NaN,O=-1/0;for(N.sort(r.numberSafeCompareFunction),g=N[0],f=1,l=N.length;f<l;++f){h=N[f];var P=Math.abs(h-g);P>O&&(v=(g+h)/2,(0,e.linearRingsContainsXY)(t,n,a,o,v,y)&&(M=v,O=P)),g=h}return isNaN(M)&&(M=i[s]),u?(u.push(M,y,O),u):[M,y,O]}function n(r,e,n,a,o){for(var i=[],s=0,u=n.length;s<u;++s){var f=n[s];i=t(r,e,f,a,o,2*s,i),e=f[f.length-1]}return i}
},{"../../array.js":"luEr","../flat/contains.js":"dzdN"}],"2U8i":[function(require,module,exports) {
"use strict";function e(e,r,t,o,u,c){for(var f,n=[e[r],e[r+1]],s=[];r+o<t;r+=o){if(s[0]=e[r+o],s[1]=e[r+o+1],f=u.call(c,n,s))return f;n[0]=s[0],n[1]=s[1]}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=e;
},{}],"GZir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectsLineString=t,exports.intersectsLineStringArray=i,exports.intersectsLinearRing=s,exports.intersectsLinearRingArray=a,exports.intersectsLinearRingMultiArray=o;var n=require("../../extent.js"),e=require("../flat/contains.js"),r=require("../flat/segments.js");function t(e,t,i,s,a){var o=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),e,t,i,s);return!!(0,n.intersects)(a,o)&&(!!(0,n.containsExtent)(a,o)||(o[0]>=a[0]&&o[2]<=a[2]||(o[1]>=a[1]&&o[3]<=a[3]||(0,r.forEach)(e,t,i,s,function(e,r){return(0,n.intersectsSegment)(a,e,r)}))))}function i(n,e,r,i,s){for(var a=0,o=r.length;a<o;++a){if(t(n,e,r[a],i,s))return!0;e=r[a]}return!1}function s(n,r,i,s,a){return!!t(n,r,i,s,a)||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[0],a[1])||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[0],a[3])||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[2],a[1])||!!(0,e.linearRingContainsXY)(n,r,i,s,a[2],a[3]))))}function a(n,r,t,i,a){if(!s(n,r,t[0],i,a))return!1;if(1===t.length)return!0;for(var o=1,u=t.length;o<u;++o)if((0,e.linearRingContainsExtent)(n,t[o-1],t[o],i,a))return!1;return!0}function o(n,e,r,t,i){for(var s=0,o=r.length;s<o;++s){var u=r[s];if(a(n,e,u,t,i))return!0;e=u[u.length-1]}return!1}
},{"../../extent.js":"QDir","../flat/contains.js":"dzdN","../flat/segments.js":"2U8i"}],"ElTe":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(;r<o-t;){for(var s=0;s<t;++s){var a=e[r+s];e[r+s]=e[o-t+s],e[o-t+s]=a}r+=t,o-=t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinates=e;
},{}],"2/8c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingIsClockwise=e,exports.linearRingIsOriented=n,exports.linearRingsAreOriented=t,exports.orientLinearRings=i,exports.orientLinearRingsArray=o;var r=require("../flat/reverse.js");function e(r,e,n,t){for(var i=0,o=r[n-t],s=r[n-t+1];e<n;e+=t){var a=r[e],u=r[e+1];i+=(a-o)*(u+s),o=a,s=u}return i>0}function n(r,n,t,i,o){for(var s=void 0!==o&&o,a=0,u=t.length;a<u;++a){var f=t[a],v=e(r,n,f,i);if(0===a){if(s&&v||!s&&!v)return!1}else if(s&&!v||!s&&v)return!1;n=f}return!0}function t(r,e,t,i,o){for(var s=0,a=t.length;s<a;++s)if(!n(r,e,t[s],i,o))return!1;return!0}function i(n,t,i,o,s){for(var a=void 0!==s&&s,u=0,f=i.length;u<f;++u){var v=i[u],l=e(n,t,v,o);(0===u?a&&l||!a&&!l:a&&!l||!a&&l)&&(0,r.coordinates)(n,t,v,o),t=v}return t}function o(r,e,n,t,o){for(var s=0,a=n.length;s<a;++s)e=i(r,e,n[s],t,o);return e}
},{"../flat/reverse.js":"ElTe"}],"6Nww":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circular=F,exports.fromExtent=P,exports.fromCircle=I,exports.makeRegular=L;var t=require("../array.js"),e=require("../extent.js"),i=require("../geom/GeometryLayout.js"),r=x(i),n=require("../geom/GeometryType.js"),s=x(n),o=require("../geom/LinearRing.js"),a=x(o),h=require("../geom/Point.js"),l=x(h),d=require("../geom/SimpleGeometry.js"),u=x(d),f=require("../sphere.js"),g=require("../geom/flat/area.js"),p=require("../geom/flat/closest.js"),c=require("../geom/flat/contains.js"),_=require("../geom/flat/deflate.js"),y=require("../geom/flat/inflate.js"),C=require("../geom/flat/interiorpoint.js"),v=require("../geom/flat/intersectsextent.js"),m=require("../geom/flat/orient.js"),R=require("../geom/flat/simplify.js"),q=require("../math.js");function x(t){return t&&t.__esModule?t:{default:t}}var j=function(i){function n(t,e,r){i.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&r?(this.setFlatCoordinates(e,t),this.ends_=r):this.setCoordinates(t,e)}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n.prototype.appendLinearRing=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},n.prototype.closestPointXY=function(t,i,r,n){return n<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,p.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,p.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,r,n))},n.prototype.containsXY=function(t,e){return(0,c.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},n.prototype.getArea=function(){return(0,g.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},n.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,m.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,y.inflateCoordinatesArray)(e,0,this.ends_,this.stride)},n.prototype.getEnds=function(){return this.ends_},n.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,e.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,C.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},n.prototype.getInteriorPoint=function(){return new l.default(this.getFlatInteriorPoint(),r.default.XYM)},n.prototype.getLinearRingCount=function(){return this.ends_.length},n.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new a.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},n.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[],n=0,s=0,o=i.length;s<o;++s){var h=i[s],l=new a.default(e.slice(n,h),t);r.push(l),n=h}return r},n.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,m.linearRingIsOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,m.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},n.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];return e.length=(0,R.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new n(e,r.default.XY,i)},n.prototype.getType=function(){return s.default.POLYGON},n.prototype.intersectsExtent=function(t){return(0,v.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},n.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,_.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(u.default);function F(e,i,n,s){for(var o=n||32,a=[],h=0;h<o;++h)(0,t.extend)(a,(0,f.offset)(e,i,2*Math.PI*h/o,s));return a.push(a[0],a[1]),new j(a,r.default.XY,[a.length])}function P(t){var e=t[0],i=t[1],n=t[2],s=t[3],o=[e,i,e,s,n,s,n,i,e,i];return new j(o,r.default.XY,[o.length])}function I(t,e,i){for(var r=e||32,n=t.getStride(),s=t.getLayout(),o=t.getCenter(),a=n*(r+1),h=new Array(a),l=0;l<a;l+=n){h[l]=0,h[l+1]=0;for(var d=2;d<n;d++)h[l+d]=o[d]}var u=[h.length],f=new j(h,s,u);return L(f,o,t.getRadius(),i),f}function L(t,e,i,r){for(var n=t.getFlatCoordinates(),s=t.getStride(),o=n.length/s-1,a=r||0,h=0;h<=o;++h){var l=h*s,d=a+2*(0,q.modulo)(h,o)*Math.PI/o;n[l]=e[0]+i*Math.cos(d),n[l+1]=e[1]+i*Math.sin(d)}t.changed()}exports.default=j;
},{"../array.js":"luEr","../extent.js":"QDir","../geom/GeometryLayout.js":"1Utv","../geom/GeometryType.js":"lmV0","../geom/LinearRing.js":"jRgU","../geom/Point.js":"gLcY","../geom/SimpleGeometry.js":"pnrv","../sphere.js":"q4ER","../geom/flat/area.js":"EOSm","../geom/flat/closest.js":"rMra","../geom/flat/contains.js":"dzdN","../geom/flat/deflate.js":"1FNh","../geom/flat/inflate.js":"znXl","../geom/flat/interiorpoint.js":"UDvN","../geom/flat/intersectsextent.js":"GZir","../geom/flat/orient.js":"2/8c","../geom/flat/simplify.js":"IEpt","../math.js":"B96G"}],"X4ix":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./GeolocationProperty.js"),e=p(t),i=require("./Object.js"),o=p(i),n=require("./events.js"),r=require("./events/EventType.js"),s=p(r),a=require("./geom/Polygon.js"),u=require("./has.js"),c=require("./math.js"),h=require("./proj.js");function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function o(o){t.call(this);var r=o||{};this.position_=null,this.transform_=h.identityTransform,this.watchId_=void 0,(0,n.listen)(this,(0,i.getChangeEventType)(e.default.PROJECTION),this.handleProjectionChanged_,this),(0,n.listen)(this,(0,i.getChangeEventType)(e.default.TRACKING),this.handleTrackingChanged_,this),void 0!==r.projection&&this.setProjection(r.projection),void 0!==r.trackingOptions&&this.setTrackingOptions(r.trackingOptions),this.setTracking(void 0!==r.tracking&&r.tracking)}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},o.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=(0,h.getTransformFromProjections)((0,h.get)("EPSG:4326"),t),this.position_&&this.set(e.default.POSITION,this.transform_(this.position_)))},o.prototype.handleTrackingChanged_=function(){if(u.GEOLOCATION){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},o.prototype.positionChange_=function(t){var i=t.coords;this.set(e.default.ACCURACY,i.accuracy),this.set(e.default.ALTITUDE,null===i.altitude?void 0:i.altitude),this.set(e.default.ALTITUDE_ACCURACY,null===i.altitudeAccuracy?void 0:i.altitudeAccuracy),this.set(e.default.HEADING,null===i.heading?void 0:(0,c.toRadians)(i.heading)),this.position_?(this.position_[0]=i.longitude,this.position_[1]=i.latitude):this.position_=[i.longitude,i.latitude];var o=this.transform_(this.position_);this.set(e.default.POSITION,o),this.set(e.default.SPEED,null===i.speed?void 0:i.speed);var n=(0,a.circular)(this.position_,i.accuracy);n.applyTransform(this.transform_),this.set(e.default.ACCURACY_GEOMETRY,n),this.changed()},o.prototype.positionError_=function(t){t.type=s.default.ERROR,this.setTracking(!1),this.dispatchEvent(t)},o.prototype.getAccuracy=function(){return this.get(e.default.ACCURACY)},o.prototype.getAccuracyGeometry=function(){return this.get(e.default.ACCURACY_GEOMETRY)||null},o.prototype.getAltitude=function(){return this.get(e.default.ALTITUDE)},o.prototype.getAltitudeAccuracy=function(){return this.get(e.default.ALTITUDE_ACCURACY)},o.prototype.getHeading=function(){return this.get(e.default.HEADING)},o.prototype.getPosition=function(){return this.get(e.default.POSITION)},o.prototype.getProjection=function(){return this.get(e.default.PROJECTION)},o.prototype.getSpeed=function(){return this.get(e.default.SPEED)},o.prototype.getTracking=function(){return this.get(e.default.TRACKING)},o.prototype.getTrackingOptions=function(){return this.get(e.default.TRACKING_OPTIONS)},o.prototype.setProjection=function(t){this.set(e.default.PROJECTION,(0,h.get)(t))},o.prototype.setTracking=function(t){this.set(e.default.TRACKING,t)},o.prototype.setTrackingOptions=function(t){this.set(e.default.TRACKING_OPTIONS,t)},o}(o.default);exports.default=d;
},{"./GeolocationProperty.js":"M8S8","./Object.js":"PhPh","./events.js":"55Uq","./events/EventType.js":"C8cu","./geom/Polygon.js":"6Nww","./has.js":"f3Nv","./math.js":"B96G","./proj.js":"Diht"}],"AiCK":[function(require,module,exports) {
"use strict";function e(e,r,t){var n=void 0!==t?e.toFixed(t):""+e,i=n.indexOf(".");return(i=-1===i?n.length:i)>r?n:new Array(1+r-i).join("0")+n}function r(e,r){for(var t=(""+e).split("."),n=(""+r).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),s=parseInt(n[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padNumber=e,exports.compareVersions=r;
},{}],"nGsj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=e,exports.closestOnCircle=n,exports.closestOnSegment=o,exports.createStringXY=u,exports.degreesToStringHDMS=s,exports.format=a,exports.equals=i,exports.rotate=c,exports.scale=f,exports.squaredDistance=p,exports.distance=x,exports.squaredDistanceToSegment=d,exports.toStringHDMS=l,exports.toStringXY=h;var t=require("./math.js"),r=require("./string.js");function e(t,r){return t[0]+=r[0],t[1]+=r[1],t}function n(t,r){var e=r.getRadius(),n=r.getCenter(),o=n[0],u=n[1],s=t[0]-o,a=t[1]-u;0===s&&0===a&&(s=1);var i=Math.sqrt(s*s+a*a);return[o+e*s/i,u+e*a/i]}function o(t,r){var e,n,o=t[0],u=t[1],s=r[0],a=r[1],i=s[0],c=s[1],f=a[0],p=a[1],x=f-i,d=p-c,l=0===x&&0===d?0:(x*(o-i)+d*(u-c))/(x*x+d*d||0);return l<=0?(e=i,n=c):l>=1?(e=f,n=p):(e=i+l*x,n=c+l*d),[e,n]}function u(t){return function(r){return h(r,t)}}function s(e,n,o){var u=(0,t.modulo)(n+180,360)-180,s=Math.abs(3600*u),a=o||0,i=Math.pow(10,a),c=Math.floor(s/3600),f=Math.floor((s-3600*c)/60),p=s-3600*c-60*f;return(p=Math.ceil(p*i)/i)>=60&&(p=0,f+=1),f>=60&&(f=0,c+=1),c+"° "+(0,r.padNumber)(f,2)+"′ "+(0,r.padNumber)(p,2,a)+"″"+(0==u?"":" "+e.charAt(u<0?1:0))}function a(t,r,e){return t?r.replace("{x}",t[0].toFixed(e)).replace("{y}",t[1].toFixed(e)):""}function i(t,r){for(var e=!0,n=t.length-1;n>=0;--n)if(t[n]!=r[n]){e=!1;break}return e}function c(t,r){var e=Math.cos(r),n=Math.sin(r),o=t[0]*e-t[1]*n,u=t[1]*e+t[0]*n;return t[0]=o,t[1]=u,t}function f(t,r){return t[0]*=r,t[1]*=r,t}function p(t,r){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function x(t,r){return Math.sqrt(p(t,r))}function d(t,r){return p(t,o(t,r))}function l(t,r){return t?s("NS",t[1],r)+" "+s("EW",t[0],r):""}function h(t,r){return a(t,"{x}, {y}",r)}
},{"./math.js":"B96G","./string.js":"AiCK"}],"rDTq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolatePoint=n,exports.lineStringCoordinateAtM=t,exports.lineStringsCoordinateAtM=i;var r=require("../../array.js"),e=require("../../math.js");function n(n,t,i,l,u,a){var f=NaN,s=NaN,o=(i-t)/l;if(1===o)f=n[t],s=n[t+1];else if(2==o)f=(1-u)*n[t]+u*n[t+l],s=(1-u)*n[t+1]+u*n[t+l+1];else if(0!==o){for(var v=n[t],c=n[t+1],p=0,h=[0],g=t+l;g<i;g+=l){var d=n[g],x=n[g+1];p+=Math.sqrt((d-v)*(d-v)+(x-c)*(x-c)),h.push(p),v=d,c=x}var M=u*p,N=(0,r.binarySearch)(h,M);if(N<0){var j=(M-h[-N-2])/(h[-N-1]-h[-N-2]),q=t+(-N-2)*l;f=(0,e.lerp)(n[q],n[q+l],j),s=(0,e.lerp)(n[q+1],n[q+l+1],j)}else f=n[t+N*l],s=n[t+N*l+1]}return a?(a[0]=f,a[1]=s,a):[f,s]}function t(r,n,t,i,l,u){if(t==n)return null;var a;if(l<r[n+i-1])return u?((a=r.slice(n,n+i))[i-1]=l,a):null;if(r[t-1]<l)return u?((a=r.slice(t-i,t))[i-1]=l,a):null;if(l==r[n+i-1])return r.slice(n,n+i);for(var f=n/i,s=t/i;f<s;){var o=f+s>>1;l<r[(o+1)*i-1]?s=o:f=o+1}var v=r[f*i-1];if(l==v)return r.slice((f-1)*i,(f-1)*i+i);var c=(l-v)/(r[(f+1)*i-1]-v);a=[];for(var p=0;p<i-1;++p)a.push((0,e.lerp)(r[(f-1)*i+p],r[f*i+p],c));return a.push(l),a}function i(r,e,n,i,l,u,a){if(a)return t(r,e,n[n.length-1],i,l,u);var f;if(l<r[i-1])return u?((f=r.slice(0,i))[i-1]=l,f):null;if(r[r.length-1]<l)return u?((f=r.slice(r.length-i))[i-1]=l,f):null;for(var s=0,o=n.length;s<o;++s){var v=n[s];if(e!=v){if(l<r[e+i-1])return null;if(l<=r[v-1])return t(r,e,v,i,l,!1);e=v}}return null}
},{"../../array.js":"luEr","../../math.js":"B96G"}],"ZZrx":[function(require,module,exports) {
"use strict";function r(r,t,e,n){for(var i=r[t],o=r[t+1],s=0,a=t+n;a<e;a+=n){var u=r[a],c=r[a+1];s+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return s}function t(t,e,n,i){var o=r(t,e,n,i),s=t[n-i]-t[e],a=t[n-i+1]-t[e+1];return o+=Math.sqrt(s*s+a*a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringLength=r,exports.linearRingLength=t;
},{}],"DfxW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../array.js"),e=require("../extent.js"),i=require("../geom/GeometryLayout.js"),o=C(i),s=require("../geom/GeometryType.js"),r=C(s),n=require("../geom/SimpleGeometry.js"),a=C(n),l=require("../geom/flat/closest.js"),h=require("../geom/flat/deflate.js"),d=require("../geom/flat/inflate.js"),f=require("../geom/flat/interpolate.js"),u=require("../geom/flat/intersectsextent.js"),p=require("../geom/flat/length.js"),g=require("../geom/flat/segments.js"),c=require("../geom/flat/simplify.js");function C(t){return t&&t.__esModule?t:{default:t}}var y=function(i){function s(t,e){i.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}return i&&(s.__proto__=i),s.prototype=Object.create(i&&i.prototype),s.prototype.constructor=s,s.prototype.appendCoordinate=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()},s.prototype.clone=function(){return new s(this.flatCoordinates.slice(),this.layout)},s.prototype.closestPointXY=function(t,i,o,s){return s<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,l.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,l.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,o,s))},s.prototype.forEachSegment=function(t){return(0,g.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},s.prototype.getCoordinateAtM=function(t,e){if(this.layout!=o.default.XYM&&this.layout!=o.default.XYZM)return null;var i=void 0!==e&&e;return(0,f.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},s.prototype.getCoordinates=function(){return(0,d.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},s.prototype.getCoordinateAt=function(t,e){return(0,f.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},s.prototype.getLength=function(){return(0,p.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},s.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},s.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=(0,c.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new s(e,o.default.XY)},s.prototype.getType=function(){return r.default.LINE_STRING},s.prototype.intersectsExtent=function(t){return(0,u.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},s.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,h.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},s}(a.default);exports.default=y;
},{"../array.js":"luEr","../extent.js":"QDir","../geom/GeometryLayout.js":"1Utv","../geom/GeometryType.js":"lmV0","../geom/SimpleGeometry.js":"pnrv","../geom/flat/closest.js":"rMra","../geom/flat/deflate.js":"1FNh","../geom/flat/inflate.js":"znXl","../geom/flat/interpolate.js":"rDTq","../geom/flat/intersectsextent.js":"GZir","../geom/flat/length.js":"ZZrx","../geom/flat/segments.js":"2U8i","../geom/flat/simplify.js":"IEpt"}],"w0c6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greatCircleArc=n,exports.meridian=e,exports.parallel=o;var t=require("../../math.js"),a=require("../../proj.js");function r(a,r,n){for(var e,o,s,i,u,p,h=[],c=a(0),M=a(1),f=r(c),g=r(M),d=[M,c],l=[g,f],v=[1,0],R={},m=1e5;--m>0&&v.length>0;)s=v.pop(),c=d.pop(),f=l.pop(),(p=s.toString())in R||(h.push(f[0],f[1]),R[p]=!0),i=v.pop(),M=d.pop(),g=l.pop(),o=r(e=a(u=(s+i)/2)),(0,t.squaredSegmentDistance)(o[0],o[1],f[0],f[1],g[0],g[1])<n?(h.push(g[0],g[1]),R[p=i.toString()]=!0):(v.push(i,u,u,s),l.push(g,o,o,f),d.push(M,e,e,c));return h}function n(n,e,o,s,i,u){var p=(0,a.get)("EPSG:4326"),h=Math.cos((0,t.toRadians)(e)),c=Math.sin((0,t.toRadians)(e)),M=Math.cos((0,t.toRadians)(s)),f=Math.sin((0,t.toRadians)(s)),g=Math.cos((0,t.toRadians)(o-n)),d=Math.sin((0,t.toRadians)(o-n)),l=c*f+h*M*g;return r(function(a){if(1<=l)return[o,s];var r=a*Math.acos(l),e=Math.cos(r),i=Math.sin(r),u=d*M,p=h*f-c*M*g,v=Math.atan2(u,p),R=Math.asin(c*e+h*i*Math.cos(v)),m=(0,t.toRadians)(n)+Math.atan2(Math.sin(v)*i*h,e-c*Math.sin(R));return[(0,t.toDegrees)(m),(0,t.toDegrees)(R)]},(0,a.getTransform)(p,i),u)}function e(t,n,e,o,s){var i=(0,a.get)("EPSG:4326");return r(function(a){return[t,n+(e-n)*a]},(0,a.getTransform)(i,o),s)}function o(t,n,e,o,s){var i=(0,a.get)("EPSG:4326");return r(function(a){return[n+(e-n)*a,t]},(0,a.getTransform)(i,o),s)}
},{"../../math.js":"B96G","../../proj.js":"Diht"}],"z39m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"};
},{}],"AXKs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={POINT:"point",LINE:"line"};
},{}],"RPsG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../style/Fill.js"),e=n(t),o=require("../style/TextPlacement.js"),i=n(o);function n(t){return t&&t.__esModule?t:{default:t}}var r="#333",s=function(t){var o=t||{};this.font_=o.font,this.rotation_=o.rotation,this.rotateWithView_=o.rotateWithView,this.scale_=o.scale,this.text_=o.text,this.textAlign_=o.textAlign,this.textBaseline_=o.textBaseline,this.fill_=void 0!==o.fill?o.fill:new e.default({color:r}),this.maxAngle_=void 0!==o.maxAngle?o.maxAngle:Math.PI/4,this.placement_=void 0!==o.placement?o.placement:i.default.POINT,this.overflow_=!!o.overflow,this.stroke_=void 0!==o.stroke?o.stroke:null,this.offsetX_=void 0!==o.offsetX?o.offsetX:0,this.offsetY_=void 0!==o.offsetY?o.offsetY:0,this.backgroundFill_=o.backgroundFill?o.backgroundFill:null,this.backgroundStroke_=o.backgroundStroke?o.backgroundStroke:null,this.padding_=void 0===o.padding?null:o.padding};s.prototype.clone=function(){return new s({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},s.prototype.getOverflow=function(){return this.overflow_},s.prototype.getFont=function(){return this.font_},s.prototype.getMaxAngle=function(){return this.maxAngle_},s.prototype.getPlacement=function(){return this.placement_},s.prototype.getOffsetX=function(){return this.offsetX_},s.prototype.getOffsetY=function(){return this.offsetY_},s.prototype.getFill=function(){return this.fill_},s.prototype.getRotateWithView=function(){return this.rotateWithView_},s.prototype.getRotation=function(){return this.rotation_},s.prototype.getScale=function(){return this.scale_},s.prototype.getStroke=function(){return this.stroke_},s.prototype.getText=function(){return this.text_},s.prototype.getTextAlign=function(){return this.textAlign_},s.prototype.getTextBaseline=function(){return this.textBaseline_},s.prototype.getBackgroundFill=function(){return this.backgroundFill_},s.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},s.prototype.getPadding=function(){return this.padding_},s.prototype.setOverflow=function(t){this.overflow_=t},s.prototype.setFont=function(t){this.font_=t},s.prototype.setMaxAngle=function(t){this.maxAngle_=t},s.prototype.setOffsetX=function(t){this.offsetX_=t},s.prototype.setOffsetY=function(t){this.offsetY_=t},s.prototype.setPlacement=function(t){this.placement_=t},s.prototype.setFill=function(t){this.fill_=t},s.prototype.setRotation=function(t){this.rotation_=t},s.prototype.setScale=function(t){this.scale_=t},s.prototype.setStroke=function(t){this.stroke_=t},s.prototype.setText=function(t){this.text_=t},s.prototype.setTextAlign=function(t){this.textAlign_=t},s.prototype.setTextBaseline=function(t){this.textBaseline_=t},s.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},s.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},s.prototype.setPadding=function(t){this.padding_=t},exports.default=s;
},{"../style/Fill.js":"AFcg","../style/TextPlacement.js":"AXKs"}],"/QUi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./coordinate.js"),e=require("./events.js"),a=require("./extent.js"),i=require("./geom/GeometryLayout.js"),s=x(i),l=require("./geom/LineString.js"),r=x(l),n=require("./geom/Point.js"),o=x(n),h=require("./geom/flat/geodesic.js"),_=require("./math.js"),m=require("./proj.js"),L=require("./render/EventType.js"),d=x(L),p=require("./style/Fill.js"),u=x(p),f=require("./style/Stroke.js"),b=x(f),g=require("./style/Text.js"),c=x(g);function x(t){return t&&t.__esModule?t:{default:t}}var y=new b.default({color:"rgba(0,0,0,0.2)"}),P=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],M=function(e){var a=e||{};this.map_=null,this.postcomposeListenerKey_=null,this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxLatP_=1/0,this.maxLonP_=1/0,this.minLatP_=-1/0,this.minLonP_=-1/0,this.targetSize_=void 0!==a.targetSize?a.targetSize:100,this.maxLines_=void 0!==a.maxLines?a.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==a.strokeStyle?a.strokeStyle:y,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,1==a.showLabels&&(this.lonLabelFormatter_=null==a.lonLabelFormatter?t.degreesToStringHDMS.bind(this,"EW"):a.lonLabelFormatter,this.latLabelFormatter_=null==a.latLabelFormatter?t.degreesToStringHDMS.bind(this,"NS"):a.latLabelFormatter,this.lonLabelPosition_=null==a.lonLabelPosition?0:a.lonLabelPosition,this.latLabelPosition_=null==a.latLabelPosition?1:a.latLabelPosition,this.lonLabelStyle_=void 0!==a.lonLabelStyle?a.lonLabelStyle:new c.default({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new u.default({color:"rgba(0,0,0,1)"}),stroke:new b.default({color:"rgba(255,255,255,1)",width:3})}),this.latLabelStyle_=void 0!==a.latLabelStyle?a.latLabelStyle:new c.default({font:"12px Calibri,sans-serif",textAlign:"end",fill:new u.default({color:"rgba(0,0,0,1)"}),stroke:new b.default({color:"rgba(255,255,255,1)",width:3})}),this.meridiansLabels_=[],this.parallelsLabels_=[]),this.setMap(void 0!==a.map?a.map:null)};M.prototype.addMeridian_=function(t,e,i,s,l,r){var n=this.getMeridian_(t,e,i,s,r);if((0,a.intersects)(n.getExtent(),l)){if(this.meridiansLabels_){var o=this.getMeridianPoint_(n,l,r);this.meridiansLabels_[r]={geom:o,text:this.lonLabelFormatter_(t)}}this.meridians_[r++]=n}return r},M.prototype.getMeridianPoint_=function(t,e,a){var i,s=t.getFlatCoordinates(),l=Math.max(e[1],s[1]),r=Math.min(e[3],s[s.length-1]),n=(0,_.clamp)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,l,r),h=[s[0],n];return a in this.meridiansLabels_?(i=this.meridiansLabels_[a]).setCoordinates(h):i=new o.default(h),i},M.prototype.addParallel_=function(t,e,i,s,l,r){var n=this.getParallel_(t,e,i,s,r);if((0,a.intersects)(n.getExtent(),l)){if(this.parallelsLabels_){var o=this.getParallelPoint_(n,l,r);this.parallelsLabels_[r]={geom:o,text:this.latLabelFormatter_(t)}}this.parallels_[r++]=n}return r},M.prototype.getParallelPoint_=function(t,e,a){var i,s=t.getFlatCoordinates(),l=Math.max(e[0],s[0]),r=Math.min(e[2],s[s.length-2]),n=[(0,_.clamp)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,l,r),s[1]];return a in this.parallelsLabels_?(i=this.parallelsLabels_[a]).setCoordinates(n):i=new o.default(n),i},M.prototype.createGraticule_=function(t,e,a,i){var s=this.getInterval_(a);if(-1==s)return this.meridians_.length=this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var l,r,n,o,h=this.toLonLatTransform_(e),L=h[0],d=h[1],p=this.maxLines_,u=[Math.max(t[0],this.minLonP_),Math.max(t[1],this.minLatP_),Math.min(t[2],this.maxLonP_),Math.min(t[3],this.maxLatP_)],f=(u=(0,m.transformExtent)(u,this.projection_,"EPSG:4326"))[3],b=u[2],g=u[1],c=u[0];for(L=Math.floor(L/s)*s,o=(0,_.clamp)(L,this.minLon_,this.maxLon_),r=this.addMeridian_(o,g,f,i,t,0),l=0;o!=this.minLon_&&l++<p;)o=Math.max(o-s,this.minLon_),r=this.addMeridian_(o,g,f,i,t,r);for(o=(0,_.clamp)(L,this.minLon_,this.maxLon_),l=0;o!=this.maxLon_&&l++<p;)o=Math.min(o+s,this.maxLon_),r=this.addMeridian_(o,g,f,i,t,r);for(this.meridians_.length=r,this.meridiansLabels_&&(this.meridiansLabels_.length=r),d=Math.floor(d/s)*s,n=(0,_.clamp)(d,this.minLat_,this.maxLat_),r=this.addParallel_(n,c,b,i,t,0),l=0;n!=this.minLat_&&l++<p;)n=Math.max(n-s,this.minLat_),r=this.addParallel_(n,c,b,i,t,r);for(n=(0,_.clamp)(d,this.minLat_,this.maxLat_),l=0;n!=this.maxLat_&&l++<p;)n=Math.min(n+s,this.maxLat_),r=this.addParallel_(n,c,b,i,t,r);this.parallels_.length=r,this.parallelsLabels_&&(this.parallelsLabels_.length=r)},M.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],a=this.projectionCenterLonLat_[1],i=-1,s=Math.pow(this.targetSize_*t,2),l=[],r=[],n=0,o=P.length;n<o;++n){var h=P[n]/2;if(l[0]=e-h,l[1]=a-h,r[0]=e+h,r[1]=a+h,this.fromLonLatTransform_(l,l),this.fromLonLatTransform_(r,r),Math.pow(r[0]-l[0],2)+Math.pow(r[1]-l[1],2)<=s)break;i=P[n]}return i},M.prototype.getMap=function(){return this.map_},M.prototype.getMeridian_=function(t,e,a,i,l){var n=(0,h.meridian)(t,e,a,this.projection_,i),o=this.meridians_[l];return o?(o.setFlatCoordinates(s.default.XY,n),o.changed()):o=this.meridians_[l]=new r.default(n,s.default.XY),o},M.prototype.getMeridians=function(){return this.meridians_},M.prototype.getParallel_=function(t,e,a,i,l){var n=(0,h.parallel)(t,e,a,this.projection_,i),o=this.parallels_[l];return o?(o.setFlatCoordinates(s.default.XY,n),o.changed()):o=new r.default(n,s.default.XY),o},M.prototype.getParallels=function(){return this.parallels_},M.prototype.handlePostCompose_=function(t){var e,a,i,s,l=t.vectorContext,r=t.frameState,n=r.extent,o=r.viewState,h=o.center,_=o.projection,L=o.resolution,d=r.pixelRatio,p=L*L/(4*d*d);for((!this.projection_||!(0,m.equivalent)(this.projection_,_))&&this.updateProjectionInfo_(_),this.createGraticule_(n,h,L,p),l.setFillStrokeStyle(null,this.strokeStyle_),e=0,a=this.meridians_.length;e<a;++e)i=this.meridians_[e],l.drawGeometry(i);for(e=0,a=this.parallels_.length;e<a;++e)i=this.parallels_[e],l.drawGeometry(i);if(this.meridiansLabels_)for(e=0,a=this.meridiansLabels_.length;e<a;++e)s=this.meridiansLabels_[e],this.lonLabelStyle_.setText(s.text),l.setTextStyle(this.lonLabelStyle_),l.drawGeometry(s.geom);if(this.parallelsLabels_)for(e=0,a=this.parallelsLabels_.length;e<a;++e)s=this.parallelsLabels_[e],this.latLabelStyle_.setText(s.text),l.setTextStyle(this.latLabelStyle_),l.drawGeometry(s.geom)},M.prototype.updateProjectionInfo_=function(t){var e=(0,m.get)("EPSG:4326"),i=t.getWorldExtent(),s=(0,m.transformExtent)(i,e,t);this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0],this.maxLatP_=s[3],this.maxLonP_=s[2],this.minLatP_=s[1],this.minLonP_=s[0],this.fromLonLatTransform_=(0,m.getTransform)(e,t),this.toLonLatTransform_=(0,m.getTransform)(t,e),this.projectionCenterLonLat_=this.toLonLatTransform_((0,a.getCenter)(t.getExtent())),this.projection_=t},M.prototype.setMap=function(t){this.map_&&((0,e.unlistenByKey)(this.postcomposeListenerKey_),this.postcomposeListenerKey_=null,this.map_.render()),t&&(this.postcomposeListenerKey_=(0,e.listen)(t,d.default.POSTCOMPOSE,this.handlePostCompose_,this),t.render()),this.map_=t},exports.default=M;
},{"./coordinate.js":"nGsj","./events.js":"55Uq","./extent.js":"QDir","./geom/GeometryLayout.js":"1Utv","./geom/LineString.js":"DfxW","./geom/Point.js":"gLcY","./geom/flat/geodesic.js":"w0c6","./math.js":"B96G","./proj.js":"Diht","./render/EventType.js":"z39m","./style/Fill.js":"AFcg","./style/Stroke.js":"TXDt","./style/Text.js":"RPsG"}],"Ojbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./events/EventTarget.js"),e=r(t),o=require("./events/EventType.js"),n=r(o);function r(t){return t&&t.__esModule?t:{default:t}}var i=function(t){function e(e,o,n,r){t.call(this),this.extent=e,this.pixelRatio_=n,this.resolution=o,this.state=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(n.default.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){},e}(e.default);exports.default=i;
},{"./events/EventTarget.js":"PAZw","./events/EventType.js":"C8cu"}],"DHWK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./ImageBase.js"),t=h(e),i=require("./ImageState.js"),s=h(i),a=require("./events.js"),n=require("./events/EventType.js"),r=h(n),o=require("./extent.js");function h(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(t,i,a,n,r,o){e.call(this,t,i,a,s.default.IDLE),this.src_=n,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.state=s.default.IDLE,this.imageLoadFunction_=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=s.default.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=(0,o.getHeight)(this.extent)/this.image_.height),this.state=s.default.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state!=s.default.IDLE&&this.state!=s.default.ERROR||(this.state=s.default.LOADING,this.changed(),this.imageListenerKeys_=[(0,a.listenOnce)(this.image_,r.default.ERROR,this.handleImageError_,this),(0,a.listenOnce)(this.image_,r.default.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},t.prototype.setImage=function(e){this.image_=e},t.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.unlistenByKey),this.imageListenerKeys_=null},t}(t.default);exports.default=u;
},{"./ImageBase.js":"Ojbp","./ImageState.js":"u3k+","./events.js":"55Uq","./events/EventType.js":"C8cu","./extent.js":"QDir"}],"K7j2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./ImageBase.js"),e=a(t),r=require("./ImageState.js"),o=a(r);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(e,r,a,s,i){var n=void 0!==i?o.default.IDLE:o.default.LOADED;t.call(this,e,r,a,n),this.loader_=void 0!==i?i:null,this.canvas_=s,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=o.default.ERROR):this.state=o.default.LOADED,this.changed()},e.prototype.load=function(){this.state==o.default.IDLE&&(this.state=o.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(e.default);exports.default=s;
},{"./ImageBase.js":"Ojbp","./ImageState.js":"u3k+"}],"Xz9x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5};
},{}],"IeCz":[function(require,module,exports) {
"use strict";function e(e){return Math.pow(e,3)}function t(t){return 1-e(1-t)}function n(e){return 3*e*e-2*e*e*e}function r(e){return e}function u(e){return e<.5?n(2*e):1-n(2*(e-.5))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeIn=e,exports.easeOut=t,exports.inAndOut=n,exports.linear=r,exports.upAndDown=u;
},{}],"IWZI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./TileState.js"),i=a(t),e=require("./easing.js"),r=require("./events/EventTarget.js"),n=a(r),o=require("./events/EventType.js"),s=a(o);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function r(i,e,r){t.call(this);var n=r||{};this.tileCoord=i,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={}}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.changed=function(){this.dispatchEvent(s.default.CHANGE)},r.prototype.getKey=function(){return this.key+"/"+this.tileCoord},r.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==i.default.LOADED)return t;t=t.interimTile}while(t);return this},r.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==i.default.LOADED){t.interimTile=null;break}t.getState()==i.default.LOADING?e=t:t.getState()==i.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},r.prototype.getTileCoord=function(){return this.tileCoord},r.prototype.getState=function(){return this.state},r.prototype.setState=function(t){this.state=t,this.changed()},r.prototype.load=function(){},r.prototype.getAlpha=function(t,i){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=i,this.transitionStarts_[t]=r;var n=i-r+1e3/60;return n>=this.transition_?1:(0,e.easeIn)(n/this.transition_)},r.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},r.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},r}(n.default);exports.default=u;
},{"./TileState.js":"Xz9x","./easing.js":"IeCz","./events/EventTarget.js":"PAZw","./events/EventType.js":"C8cu"}],"T/Os":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Tile.js"),e=h(t),i=require("./TileState.js"),s=h(i),n=require("./dom.js"),a=require("./events.js"),r=require("./events/EventType.js"),o=h(r);function h(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(e,i,s,n,a,r){t.call(this,e,i,r),this.crossOrigin_=n,this.src_=s,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.imageListenerKeys_=null,this.tileLoadFunction_=a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==s.default.LOADING&&(this.unlistenImage_(),this.image_=u()),this.interimTile&&this.interimTile.dispose(),this.state=s.default.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=s.default.ERROR,this.unlistenImage_(),this.image_=u(),this.changed()},e.prototype.handleImageLoad_=function(){this.image_.naturalWidth&&this.image_.naturalHeight?this.state=s.default.LOADED:this.state=s.default.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==s.default.ERROR&&(this.state=s.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==s.default.IDLE&&(this.state=s.default.LOADING,this.changed(),this.imageListenerKeys_=[(0,a.listenOnce)(this.image_,o.default.ERROR,this.handleImageError_,this),(0,a.listenOnce)(this.image_,o.default.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.unlistenByKey),this.imageListenerKeys_=null},e}(e.default);function u(){var t=(0,n.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}exports.default=l;
},{"./Tile.js":"IWZI","./TileState.js":"Xz9x","./dom.js":"Xno5","./events.js":"55Uq","./events/EventType.js":"C8cu"}],"77gA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0};t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,i){this.points_.push(t,i,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var n=i-3;n>0&&this.points_[n+2]>t;)n-=3;var e=this.points_[i+2]-this.points_[n+2];if(e<1e3/60)return!1;var s=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/e,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},exports.default=t;
},{}],"vFcA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./events/Event.js"),e=r(t);function r(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(e,r,o){t.call(this,e),this.map=r,this.frameState=void 0!==o?o:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e.default);exports.default=o;
},{"./events/Event.js":"fKNg"}],"HMLS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./MapEvent.js"),e=o(t);function o(t){return t&&t.__esModule?t:{default:t}}var r=function(t){function e(e,o,r,i,n){t.call(this,e,o,n),this.originalEvent=r,this.pixel=o.getEventPixel(r),this.coordinate=o.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(e.default);exports.default=r;
},{"./MapEvent.js":"vFcA"}],"Yh/D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./events/EventType.js"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}exports.default={SINGLECLICK:"singleclick",CLICK:t.default.CLICK,DBLCLICK:t.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};
},{"./events/EventType.js":"C8cu"}],"J1WQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./MapBrowserEvent.js"),e=r(t);function r(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(e,r,o,n,u){t.call(this,e,r,o.originalEvent,n,u),this.pointerEvent=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e.default);exports.default=o;
},{"./MapBrowserEvent.js":"HMLS"}],"TaSm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};
},{}],"R8kl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,e){this.dispatcher=t,this.mapping_=e};t.prototype.getEvents=function(){return Object.keys(this.mapping_)},t.prototype.getHandlerForEvent=function(t){return this.mapping_[t]},exports.default=t;
},{}],"Plx9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.POINTER_TYPE=exports.POINTER_ID=void 0;var t=require("../pointer/EventSource.js"),e=i(t);function i(t){return t&&t.__esModule?t:{default:t}}var o=exports.POINTER_ID=1,r=exports.POINTER_TYPE="mouse",s=25;function n(t){if(!this.isEventSimulatedFromTouch_(t)){o.toString()in this.pointerMap&&this.cancel(t);var e=v(t,this.dispatcher);this.pointerMap[o.toString()]=t,this.dispatcher.down(e,t)}}function u(t){if(!this.isEventSimulatedFromTouch_(t)){var e=v(t,this.dispatcher);this.dispatcher.move(e,t)}}function a(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[o.toString()];if(e&&e.button===t.button){var i=v(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function p(t){if(!this.isEventSimulatedFromTouch_(t)){var e=v(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function c(t){if(!this.isEventSimulatedFromTouch_(t)){var e=v(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}var h=function(t){function e(e){var i={mousedown:n,mousemove:u,mouseup:a,mouseover:p,mouseout:c};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,o=t.clientY,r=0,n=e.length,u=void 0;r<n&&(u=e[r]);r++){var a=Math.abs(i-u[0]),p=Math.abs(o-u[1]);if(a<=s&&p<=s)return!0}return!1},e.prototype.cancel=function(t){var e=v(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[o.toString()]},e}(e.default);function v(t,e){var i=e.cloneEvent(t,t),s=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),s()},i.pointerId=o,i.isPrimary=!0,i.pointerType=r,i}exports.default=h;
},{"../pointer/EventSource.js":"R8kl"}],"qKvi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../pointer/EventSource.js"),e=r(t);function r(t){return t&&t.__esModule?t:{default:t}}var n=["","unavailable","touch","pen","mouse"];function i(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function p(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function o(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function a(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function s(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function c(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function u(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function h(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var v=function(t){function e(e){var r={MSPointerDown:i,MSPointerMove:p,MSPointerUp:o,MSPointerOut:a,MSPointerOver:s,MSPointerCancel:c,MSGotPointerCapture:h,MSLostPointerCapture:u};t.call(this,e,r),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=n[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(e.default);exports.default=v;
},{"../pointer/EventSource.js":"R8kl"}],"Hw3i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../pointer/EventSource.js"),e=i(t);function i(t){return t&&t.__esModule?t:{default:t}}function r(t){this.dispatcher.fireNativeEvent(t)}function n(t){this.dispatcher.fireNativeEvent(t)}function o(t){this.dispatcher.fireNativeEvent(t)}function c(t){this.dispatcher.fireNativeEvent(t)}function p(t){this.dispatcher.fireNativeEvent(t)}function a(t){this.dispatcher.fireNativeEvent(t)}function u(t){this.dispatcher.fireNativeEvent(t)}function s(t){this.dispatcher.fireNativeEvent(t)}var f=function(t){function e(e){var i={pointerdown:r,pointermove:n,pointerup:o,pointerout:c,pointerover:p,pointercancel:a,gotpointercapture:s,lostpointercapture:u};t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e.default);exports.default=f;
},{"../pointer/EventSource.js":"R8kl"}],"rjJl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../events/Event.js"),e=i(t);function i(t){return t&&t.__esModule?t:{default:t}}var n=!1,s=function(t){function e(e,i,n){t.call(this,e),this.originalEvent=i;var s=n||{};this.buttons=this.getButtons_(s),this.pressure=this.getPressure_(s,this.buttons),this.bubbles="bubbles"in s&&s.bubbles,this.cancelable="cancelable"in s&&s.cancelable,this.view="view"in s?s.view:null,this.detail="detail"in s?s.detail:null,this.screenX="screenX"in s?s.screenX:0,this.screenY="screenY"in s?s.screenY:0,this.clientX="clientX"in s?s.clientX:0,this.clientY="clientY"in s?s.clientY:0,this.ctrlKey="ctrlKey"in s&&s.ctrlKey,this.altKey="altKey"in s&&s.altKey,this.shiftKey="shiftKey"in s&&s.shiftKey,this.metaKey="metaKey"in s&&s.metaKey,this.button="button"in s?s.button:0,this.relatedTarget="relatedTarget"in s?s.relatedTarget:null,this.pointerId="pointerId"in s?s.pointerId:0,this.width="width"in s?s.width:0,this.height="height"in s?s.height:0,this.tiltX="tiltX"in s?s.tiltX:0,this.tiltY="tiltY"in s?s.tiltY:0,this.pointerType="pointerType"in s?s.pointerType:"",this.hwTimestamp="hwTimestamp"in s?s.hwTimestamp:0,this.isPrimary="isPrimary"in s&&s.isPrimary,i.preventDefault&&(this.preventDefault=function(){i.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getButtons_=function(t){var e;if(t.buttons||n)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e},e.prototype.getPressure_=function(t,e){return t.pressure?t.pressure:e?.5:0},e}(e.default);!function(){try{var t=new MouseEvent("click",{buttons:1});n=1===t.buttons}catch(t){}}(),exports.default=s;
},{"../events/Event.js":"fKNg"}],"XfdC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../array.js"),e=require("../pointer/EventSource.js"),i=o(e),r=require("../pointer/MouseSource.js");function o(t){return t&&t.__esModule?t:{default:t}}var s=200,n="touch";function c(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function u(t){t.preventDefault(),this.processTouches_(t,this.moveOverOut_)}function h(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function a(t){this.processTouches_(t,this.cancelOut_)}var p=function(e){function i(t,i){var r={touchstart:c,touchmove:u,touchend:h,touchcancel:a};e.call(this,t,r),this.pointerMap=t.pointerMap,this.mouseSource=i,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0,this.dedupTimeout_=2500}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},i.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&r.POINTER_ID.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},i.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},i.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),s)},i.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},i.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},i.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.webkitRadiusX||e.radiusX||0,i.height=e.webkitRadiusY||e.radiusY||0,i.pressure=e.webkitForce||e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType=n,i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},i.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),r=i.length;function o(){t.preventDefault()}for(var s=0;s<r;++s){var n=this.touchToPointer_(t,i[s]);n.preventDefault=o,e.call(this,t,n)}},i.prototype.findTouch_=function(t,e){for(var i=t.length,r=0;r<i;r++){if(t[r].identifier===e)return!0}return!1},i.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),o=i.length;if(o>=e.length){for(var s=[],n=0;n<o;++n){var c=i[n],u=this.pointerMap[c];c==r.POINTER_ID||this.findTouch_(e,c-2)||s.push(u.out)}for(var h=0;h<s.length;++h)this.cancelOut_(t,s[h])}},i.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},i.prototype.moveOverOut_=function(t,e){var i=e,r=this.pointerMap[i.pointerId];if(r){var o=r.out,s=r.outTarget;this.dispatcher.move(i,t),o&&s!==i.target&&(o.relatedTarget=i.target,i.relatedTarget=s,o.target=s,i.target?(this.dispatcher.leaveOut(o,t),this.dispatcher.enterOver(i,t)):(i.target=s,i.relatedTarget=null,this.cancelOut_(t,i))),r.out=i,r.outTarget=i.target}},i.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},i.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},i.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},i.prototype.dedupSynthMouse_=function(e){var i=this.mouseSource.lastTouches,r=e.changedTouches[0];if(this.isPrimaryTouch_(r)){var o=[r.clientX,r.clientY];i.push(o),setTimeout(function(){(0,t.remove)(i,o)},this.dedupTimeout_)}},i}(i.default);exports.default=p;
},{"../array.js":"luEr","../pointer/EventSource.js":"R8kl","../pointer/MouseSource.js":"Plx9"}],"zTqe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../events.js"),t=require("../events/EventTarget.js"),r=d(t),n=require("../has.js"),i=require("../pointer/EventType.js"),o=d(i),s=require("../pointer/MouseSource.js"),u=d(s),p=require("../pointer/MsSource.js"),a=d(p),c=require("../pointer/NativeSource.js"),h=d(c),l=require("../pointer/PointerEvent.js"),v=d(l),f=require("../pointer/TouchSource.js"),E=d(f);function d(e){return e&&e.__esModule?e:{default:e}}var y=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],_=function(t){function r(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.registerSources=function(){if(n.POINTER)this.registerSource("native",new h.default(this));else if(n.MSPOINTER)this.registerSource("ms",new a.default(this));else{var e=new u.default(this);this.registerSource("mouse",e),n.TOUCH&&this.registerSource("touch",new E.default(this,e))}this.register_()},r.prototype.registerSource=function(e,t){var r=t,n=r.getEvents();n&&(n.forEach(function(e){var t=r.getHandlerForEvent(e);t&&(this.eventMap_[e]=t.bind(r))}.bind(this)),this.eventSourceList_.push(r))},r.prototype.register_=function(){for(var e=this.eventSourceList_.length,t=0;t<e;t++){var r=this.eventSourceList_[t];this.addEvents_(r.getEvents())}},r.prototype.unregister_=function(){for(var e=this.eventSourceList_.length,t=0;t<e;t++){var r=this.eventSourceList_[t];this.removeEvents_(r.getEvents())}},r.prototype.eventHandler_=function(e){var t=e.type,r=this.eventMap_[t];r&&r(e)},r.prototype.addEvents_=function(t){t.forEach(function(t){(0,e.listen)(this.element_,t,this.eventHandler_,this)}.bind(this))},r.prototype.removeEvents_=function(t){t.forEach(function(t){(0,e.unlisten)(this.element_,t,this.eventHandler_,this)}.bind(this))},r.prototype.cloneEvent=function(e,t){for(var r={},n=0,i=y.length;n<i;n++){var o=y[n][0];r[o]=e[o]||t[o]||y[n][1]}return r},r.prototype.down=function(e,t){this.fireEvent(o.default.POINTERDOWN,e,t)},r.prototype.move=function(e,t){this.fireEvent(o.default.POINTERMOVE,e,t)},r.prototype.up=function(e,t){this.fireEvent(o.default.POINTERUP,e,t)},r.prototype.enter=function(e,t){e.bubbles=!1,this.fireEvent(o.default.POINTERENTER,e,t)},r.prototype.leave=function(e,t){e.bubbles=!1,this.fireEvent(o.default.POINTERLEAVE,e,t)},r.prototype.over=function(e,t){e.bubbles=!0,this.fireEvent(o.default.POINTEROVER,e,t)},r.prototype.out=function(e,t){e.bubbles=!0,this.fireEvent(o.default.POINTEROUT,e,t)},r.prototype.cancel=function(e,t){this.fireEvent(o.default.POINTERCANCEL,e,t)},r.prototype.leaveOut=function(e,t){this.out(e,t),this.contains_(e.target,e.relatedTarget)||this.leave(e,t)},r.prototype.enterOver=function(e,t){this.over(e,t),this.contains_(e.target,e.relatedTarget)||this.enter(e,t)},r.prototype.contains_=function(e,t){return!(!e||!t)&&e.contains(t)},r.prototype.makeEvent=function(e,t,r){return new v.default(e,r,t)},r.prototype.fireEvent=function(e,t,r){var n=this.makeEvent(e,t,r);this.dispatchEvent(n)},r.prototype.fireNativeEvent=function(e){var t=this.makeEvent(e.type,e,e);this.dispatchEvent(t)},r.prototype.wrapMouseEvent=function(e,t){return this.makeEvent(e,u.default.prepareEvent(t,this),t)},r.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},r}(r.default);exports.default=_;
},{"../events.js":"55Uq","../events/EventTarget.js":"PAZw","../has.js":"f3Nv","../pointer/EventType.js":"TaSm","../pointer/MouseSource.js":"Plx9","../pointer/MsSource.js":"qKvi","../pointer/NativeSource.js":"Hw3i","../pointer/PointerEvent.js":"rjJl","../pointer/TouchSource.js":"XfdC"}],"ohHk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./has.js"),e=require("./MapBrowserEventType.js"),i=_(e),n=require("./MapBrowserPointerEvent.js"),s=_(n),r=require("./events.js"),o=require("./events/EventTarget.js"),a=_(o),h=require("./pointer/EventType.js"),d=_(h),l=require("./pointer/PointerEventHandler.js"),u=_(l);function _(t){return t&&t.__esModule?t:{default:t}}var p=function(e){function n(i,n){e.call(this),this.map_=i,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n?n*t.DEVICE_PIXEL_RATIO:t.DEVICE_PIXEL_RATIO,this.down_=null;var s=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new u.default(s),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=(0,r.listen)(this.pointerEventHandler_,d.default.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=(0,r.listen)(this.pointerEventHandler_,d.default.POINTERMOVE,this.relayEvent_,this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.emulateClick_=function(t){var e=new s.default(i.default.CLICK,this.map_,t);this.dispatchEvent(e),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,e=new s.default(i.default.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var e=new s.default(i.default.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},n.prototype.updateActivePointers_=function(t){var e=t;e.type==i.default.POINTERUP||e.type==i.default.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==i.default.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},n.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new s.default(i.default.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(r.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},n.prototype.isMouseActionButton_=function(t){return 0===t.button},n.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new s.default(i.default.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new u.default(document),this.dragListenerKeys_.push((0,r.listen)(this.documentPointerEventHandler_,i.default.POINTERMOVE,this.handlePointerMove_,this),(0,r.listen)(this.documentPointerEventHandler_,i.default.POINTERUP,this.handlePointerUp_,this),(0,r.listen)(this.pointerEventHandler_,i.default.POINTERCANCEL,this.handlePointerUp_,this)))},n.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new s.default(i.default.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},n.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new s.default(t.type,this.map_,t,e))},n.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},n.prototype.disposeInternal=function(){this.relayedListenerKey_&&((0,r.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&((0,r.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(r.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),e.prototype.disposeInternal.call(this)},n}(a.default);exports.default=p;
},{"./has.js":"f3Nv","./MapBrowserEventType.js":"Yh/D","./MapBrowserPointerEvent.js":"J1WQ","./events.js":"55Uq","./events/EventTarget.js":"PAZw","./pointer/EventType.js":"TaSm","./pointer/PointerEventHandler.js":"zTqe"}],"xLGm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"};
},{}],"zlNQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};
},{}],"RQLY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DROP=void 0;var t=require("../asserts.js"),e=require("../obj.js"),i=exports.DROP=1/0,n=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};n.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,(0,e.clear)(this.queuedElements_)},n.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},n.prototype.enqueue=function(e){(0,t.assert)(!(this.keyFunction_(e)in this.queuedElements_),31);var n=this.priorityFunction_(e);return n!=i&&(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},n.prototype.getCount=function(){return this.elements_.length},n.prototype.getLeftChildIndex_=function(t){return 2*t+1},n.prototype.getRightChildIndex_=function(t){return 2*t+2},n.prototype.getParentIndex_=function(t){return t-1>>1},n.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},n.prototype.isEmpty=function(){return 0===this.elements_.length},n.prototype.isKeyQueued=function(t){return t in this.queuedElements_},n.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},n.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,s=e[t],r=i[t],o=t;t<n>>1;){var h=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),p=u<n&&i[u]<i[h]?u:h;e[t]=e[p],i[t]=i[p],t=p}e[t]=s,i[t]=r,this.siftDown_(o,t)},n.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,s=i[e],r=n[e];e>t;){var o=this.getParentIndex_(e);if(!(n[o]>r))break;i[e]=i[o],n[e]=n[o],e=o}i[e]=s,n[e]=r},n.prototype.reprioritize=function(){var t,e,n,s=this.priorityFunction_,r=this.elements_,o=this.priorities_,h=0,u=r.length;for(e=0;e<u;++e)(n=s(t=r[e]))==i?delete this.queuedElements_[this.keyFunction_(t)]:(o[h]=n,r[h++]=t);r.length=h,o.length=h,this.heapify_()},exports.default=n;
},{"../asserts.js":"fLG6","../obj.js":"mH6q"}],"0tHO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./TileState.js"),t=o(e),i=require("./events.js"),n=require("./events/EventType.js"),a=o(n),s=require("./structs/PriorityQueue.js"),l=o(s);function o(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function n(t,i){e.call(this,function(e){return t.apply(null,e)},function(e){return e[0].getKey()}),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.enqueue=function(t){var n=e.prototype.enqueue.call(this,t);if(n){var s=t[0];(0,i.listen)(s,a.default.CHANGE,this.handleTileChange,this)}return n},n.prototype.getTilesLoading=function(){return this.tilesLoading_},n.prototype.handleTileChange=function(e){var n=e.target,s=n.getState();if(s===t.default.LOADED||s===t.default.ERROR||s===t.default.EMPTY||s===t.default.ABORT){(0,i.unlisten)(n,a.default.CHANGE,this.handleTileChange,this);var l=n.getKey();l in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[l],--this.tilesLoading_),this.tileChangeCallback_()}},n.prototype.loadMoreTiles=function(e,i){for(var n,a,s,l=0,o=!1;this.tilesLoading_<e&&l<i&&this.getCount()>0;)s=(a=this.dequeue()[0]).getKey(),(n=a.getState())===t.default.ABORT?o=!0:n!==t.default.IDLE||s in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++l,a.load());0===l&&o&&this.tileChangeCallback_()},n}(l.default);exports.default=r;
},{"./TileState.js":"Xz9x","./events.js":"55Uq","./events/EventType.js":"C8cu","./structs/PriorityQueue.js":"RQLY"}],"mOEX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.DEFAULT_MAX_ZOOM=42,r=exports.DEFAULT_TILE_SIZE=256;
},{}],"Rc7z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExtent=t,exports.none=r;var e=require("./math.js");function t(t){return function(r){return r?[(0,e.clamp)(r[0],t[0],t[2]),(0,e.clamp)(r[1],t[1],t[3])]:void 0}}function r(e){return e}
},{"./math.js":"B96G"}],"o7nl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSnapToResolutions=t,exports.createSnapToPower=a;var r=require("./array.js"),e=require("./math.js");function t(t){return function(a,o,n){if(void 0!==a){var i=(0,r.linearFindNearest)(t,a,n);i=(0,e.clamp)(i+o,0,t.length-1);var u=Math.floor(i);if(i!=u&&u<t.length-1){var h=t[u]/t[u+1];return t[u]/Math.pow(h,i-u)}return t[u]}}}function a(r,e,t){return function(a,o,n){if(void 0!==a){var i=-n/2+.5,u=Math.floor(Math.log(e/a)/Math.log(r)+i),h=Math.max(u+o,0);return void 0!==t&&(h=Math.min(h,t)),e/Math.pow(r,h)}}}
},{"./array.js":"luEr","./math.js":"B96G"}],"9EKd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disable=e,exports.none=o,exports.createSnapToN=t,exports.createSnapToZero=n;var r=require("./math.js");function e(r,e){return void 0!==r?0:void 0}function o(r,e){return void 0!==r?r+e:void 0}function t(r){var e=2*Math.PI/r;return function(r,o){return void 0!==r?r=Math.floor((r+o)/e+.5)*e:void 0}}function n(e){var o=e||(0,r.toRadians)(5);return function(r,e){return void 0!==r?Math.abs(r+e)<=o?0:r+e:void 0}}
},{"./math.js":"B96G"}],"cuLW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={ANIMATING:0,INTERACTING:1};
},{}],"0/98":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};
},{}],"hNqE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCenterConstraint=Z,exports.createResolutionConstraint=O,exports.createRotationConstraint=F,exports.isNoopAnimation=S;var t=require("./tilegrid/common.js"),o=require("./util.js"),e=require("./functions.js"),i=require("./centerconstraint.js"),n=require("./Object.js"),r=N(n),s=require("./resolutionconstraint.js"),a=require("./rotationconstraint.js"),u=require("./ViewHint.js"),h=N(u),l=require("./ViewProperty.js"),c=N(l),p=require("./array.js"),m=require("./asserts.js"),g=require("./coordinate.js"),R=require("./easing.js"),d=require("./extent.js"),f=require("./geom/GeometryType.js"),v=N(f),_=require("./geom/Polygon.js"),y=require("./geom/SimpleGeometry.js"),M=N(y),C=require("./math.js"),x=require("./obj.js"),A=require("./proj.js"),E=require("./proj/Units.js"),T=N(E);function N(t){return t&&t.__esModule?t:{default:t}}var I=0,j=function(t){function i(o){t.call(this);var e=(0,x.assign)({},o);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=(0,A.createProjection)(e.projection,"EPSG:3857"),this.applyOptions_(e)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.applyOptions_=function(t){var o={};o[c.default.CENTER]=void 0!==t.center?t.center:null;var e=O(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var i=Z(t),n=e.constraint,r=F(t);this.constraints_={center:i,resolution:n,rotation:r},void 0!==t.resolution?o[c.default.RESOLUTION]=t.resolution:void 0!==t.zoom&&(o[c.default.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(o[c.default.RESOLUTION]=(0,C.clamp)(Number(this.getResolution()||o[c.default.RESOLUTION]),this.minResolution_,this.maxResolution_))),o[c.default.ROTATION]=void 0!==t.rotation?t.rotation:0,this.setProperties(o),this.options_=t},i.prototype.getUpdatedOptions_=function(t){var o=(0,x.assign)({},this.options_);return void 0!==o.resolution?o.resolution=this.getResolution():o.zoom=this.getZoom(),o.center=this.getCenter(),o.rotation=this.getRotation(),(0,x.assign)({},o,t)},i.prototype.animate=function(t){var o,e=arguments,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(o=arguments[i-1],--i),!this.isDef()){var n=arguments[i-1];return n.center&&this.setCenter(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(o&&setTimeout(function(){o(!0)},0))}for(var r=Date.now(),s=this.getCenter().slice(),a=this.getResolution(),u=this.getRotation(),l=[],c=0;c<i;++c){var p=e[c],m={start:r,complete:!1,anchor:p.anchor,duration:void 0!==p.duration?p.duration:1e3,easing:p.easing||R.inAndOut};if(p.center&&(m.sourceCenter=s,m.targetCenter=p.center,s=m.targetCenter),void 0!==p.zoom?(m.sourceResolution=a,m.targetResolution=this.constrainResolution(this.maxResolution_,p.zoom-this.minZoom_,0),a=m.targetResolution):p.resolution&&(m.sourceResolution=a,m.targetResolution=p.resolution,a=m.targetResolution),void 0!==p.rotation){m.sourceRotation=u;var g=(0,C.modulo)(p.rotation-u+Math.PI,2*Math.PI)-Math.PI;m.targetRotation=u+g,u=m.targetRotation}m.callback=o,S(m)?m.complete=!0:r+=m.duration,l.push(m)}this.animations_.push(l),this.setHint(h.default.ANIMATING,1),this.updateAnimations_()},i.prototype.getAnimating=function(){return this.hints_[h.default.ANIMATING]>0},i.prototype.getInteracting=function(){return this.hints_[h.default.INTERACTING]>0},i.prototype.cancelAnimations=function(){this.setHint(h.default.ANIMATING,-this.hints_[h.default.ANIMATING]);for(var t=0,o=this.animations_.length;t<o;++t){var e=this.animations_[t];e[0].callback&&e[0].callback(!1)}this.animations_.length=0},i.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),o=!1,e=this.animations_.length-1;e>=0;--e){for(var i=this.animations_[e],n=!0,r=0,s=i.length;r<s;++r){var a=i[r];if(!a.complete){var u=t-a.start,l=a.duration>0?u/a.duration:1;l>=1?(a.complete=!0,l=1):n=!1;var p=a.easing(l);if(a.sourceCenter){var m=a.sourceCenter[0],g=a.sourceCenter[1],R=m+p*(a.targetCenter[0]-m),d=g+p*(a.targetCenter[1]-g);this.set(c.default.CENTER,[R,d])}if(a.sourceResolution&&a.targetResolution){var f=1===p?a.targetResolution:a.sourceResolution+p*(a.targetResolution-a.sourceResolution);a.anchor&&this.set(c.default.CENTER,this.calculateCenterZoom(f,a.anchor)),this.set(c.default.RESOLUTION,f)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var v=1===p?(0,C.modulo)(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+p*(a.targetRotation-a.sourceRotation);a.anchor&&this.set(c.default.CENTER,this.calculateCenterRotate(v,a.anchor)),this.set(c.default.ROTATION,v)}if(o=!0,!a.complete)break}}if(n){this.animations_[e]=null,this.setHint(h.default.ANIMATING,-1);var _=i[0].callback;_&&setTimeout(function(){_(!0)},0)}}this.animations_=this.animations_.filter(Boolean),o&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},i.prototype.calculateCenterRotate=function(t,o){var e,i=this.getCenter();return void 0!==i&&(e=[i[0]-o[0],i[1]-o[1]],(0,g.rotate)(e,t-this.getRotation()),(0,g.add)(e,o)),e},i.prototype.calculateCenterZoom=function(t,o){var e,i=this.getCenter(),n=this.getResolution();void 0!==i&&void 0!==n&&(e=[o[0]-t*(o[0]-i[0])/n,o[1]-t*(o[1]-i[1])/n]);return e},i.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+(0,o.getUid)(this)+'"]',i=document.querySelector(e);if(i){var n=getComputedStyle(i);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},i.prototype.constrainCenter=function(t){return this.constraints_.center(t)},i.prototype.constrainResolution=function(t,o,e){var i=o||0,n=e||0;return this.constraints_.resolution(t,i,n)},i.prototype.constrainRotation=function(t,o){var e=o||0;return this.constraints_.rotation(t,e)},i.prototype.getCenter=function(){return this.get(c.default.CENTER)},i.prototype.getConstraints=function(){return this.constraints_},i.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},i.prototype.calculateExtent=function(t){var o=t||this.getSizeFromViewport_(),e=this.getCenter();(0,m.assert)(e,1);var i=this.getResolution();(0,m.assert)(void 0!==i,2);var n=this.getRotation();return(0,m.assert)(void 0!==n,3),(0,d.getForViewAndSize)(e,i,n,o)},i.prototype.getMaxResolution=function(){return this.maxResolution_},i.prototype.getMinResolution=function(){return this.minResolution_},i.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},i.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},i.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},i.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},i.prototype.getProjection=function(){return this.projection_},i.prototype.getResolution=function(){return this.get(c.default.RESOLUTION)},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getResolutionForExtent=function(t,o){var e=o||this.getSizeFromViewport_(),i=(0,d.getWidth)(t)/e[0],n=(0,d.getHeight)(t)/e[1];return Math.max(i,n)},i.prototype.getResolutionForValueFunction=function(t){var o=t||2,e=this.maxResolution_,i=this.minResolution_,n=Math.log(e/i)/Math.log(o);return function(t){return e/Math.pow(o,t*n)}},i.prototype.getRotation=function(){return this.get(c.default.ROTATION)},i.prototype.getValueForResolutionFunction=function(t){var o=t||2,e=this.maxResolution_,i=this.minResolution_,n=Math.log(e/i)/Math.log(o);return function(t){return Math.log(e/t)/Math.log(o)/n}},i.prototype.getState=function(){var t=this.getCenter(),o=this.getProjection(),e=this.getResolution(),i=this.getRotation();return{center:t.slice(),projection:void 0!==o?o:null,resolution:e,rotation:i,zoom:this.getZoom()}},i.prototype.getZoom=function(){var t,o=this.getResolution();return void 0!==o&&(t=this.getZoomForResolution(o)),t},i.prototype.getZoomForResolution=function(t){var o,e,i=this.minZoom_||0;if(this.resolutions_){var n=(0,p.linearFindNearest)(this.resolutions_,t,1);i=n,o=this.resolutions_[n],e=n==this.resolutions_.length-1?2:o/this.resolutions_[n+1]}else o=this.maxResolution_,e=this.zoomFactor_;return i+Math.log(o/t)/Math.log(e)},i.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},i.prototype.fit=function(t,o){var i,n=o||{},r=n.size;r||(r=this.getSizeFromViewport_()),t instanceof M.default?t.getType()===v.default.CIRCLE?(t=t.getExtent(),(i=(0,_.fromExtent)(t)).rotate(this.getRotation(),(0,d.getCenter)(t))):i=t:((0,m.assert)(Array.isArray(t),24),(0,m.assert)(!(0,d.isEmpty)(t),25),i=(0,_.fromExtent)(t));var s,a=void 0!==n.padding?n.padding:[0,0,0,0],u=void 0===n.constrainResolution||n.constrainResolution,h=void 0!==n.nearest&&n.nearest;s=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):0;for(var l=i.getFlatCoordinates(),c=this.getRotation(),p=Math.cos(-c),g=Math.sin(-c),R=1/0,f=1/0,y=-1/0,C=-1/0,x=i.getStride(),A=0,E=l.length;A<E;A+=x){var T=l[A]*p-l[A+1]*g,N=l[A]*g+l[A+1]*p;R=Math.min(R,T),f=Math.min(f,N),y=Math.max(y,T),C=Math.max(C,N)}var I=this.getResolutionForExtent([R,f,y,C],[r[0]-a[1]-a[3],r[1]-a[0]-a[2]]);if(I=isNaN(I)?s:Math.max(I,s),u){var j=this.constrainResolution(I,0,0);!h&&j<I&&(j=this.constrainResolution(j,-1,0)),I=j}g=-g;var Z=(R+y)/2,O=(f+C)/2,F=[(Z+=(a[1]-a[3])/2*I)*p-(O+=(a[0]-a[2])/2*I)*g,O*p+Z*g],S=n.callback?n.callback:e.UNDEFINED;void 0!==n.duration?this.animate({resolution:I,center:F,duration:n.duration,easing:n.easing},S):(this.setResolution(I),this.setCenter(F),setTimeout(S.bind(void 0,!0),0))},i.prototype.centerOn=function(t,o,e){var i=this.getRotation(),n=Math.cos(-i),r=Math.sin(-i),s=t[0]*n-t[1]*r,a=t[1]*n+t[0]*r,u=this.getResolution(),h=(s+=(o[0]/2-e[0])*u)*n-(a+=(e[1]-o[1]/2)*u)*(r=-r),l=a*n+s*r;this.setCenter([h,l])},i.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},i.prototype.rotate=function(t,o){if(void 0!==o){var e=this.calculateCenterRotate(t,o);this.setCenter(e)}this.setRotation(t)},i.prototype.setCenter=function(t){this.set(c.default.CENTER,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setHint=function(t,o){return this.hints_[t]+=o,this.changed(),this.hints_[t]},i.prototype.setResolution=function(t){this.set(c.default.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setRotation=function(t){this.set(c.default.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},i}(r.default);function Z(t){return void 0!==t.extent?(0,i.createExtent)(t.extent):i.none}function O(o){var e,i,n,r=void 0!==o.minZoom?o.minZoom:I,a=void 0!==o.maxZoom?o.maxZoom:28,u=void 0!==o.zoomFactor?o.zoomFactor:2;if(void 0!==o.resolutions){var h=o.resolutions;i=h[r],n=void 0!==h[a]?h[a]:h[h.length-1],e=(0,s.createSnapToResolutions)(h)}else{var l=(0,A.createProjection)(o.projection,"EPSG:3857"),c=l.getExtent(),p=(c?Math.max((0,d.getWidth)(c),(0,d.getHeight)(c)):360*A.METERS_PER_UNIT[T.default.DEGREES]/l.getMetersPerUnit())/t.DEFAULT_TILE_SIZE/Math.pow(2,I),m=p/Math.pow(2,28-I);void 0!==(i=o.maxResolution)?r=0:i=p/Math.pow(u,r),void 0===(n=o.minResolution)&&(n=void 0!==o.maxZoom?void 0!==o.maxResolution?i/Math.pow(u,a):p/Math.pow(u,a):m),a=r+Math.floor(Math.log(i/n)/Math.log(u)),n=i/Math.pow(u,a-r),e=(0,s.createSnapToPower)(u,i,a-r)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:r,zoomFactor:u}}function F(t){if(void 0===t.enableRotation||t.enableRotation){var o=t.constrainRotation;return void 0===o||!0===o?(0,a.createSnapToZero)():!1===o?a.none:"number"==typeof o?(0,a.createSnapToN)(o):a.none}return a.disable}function S(t){return!(t.sourceCenter&&t.targetCenter&&!(0,g.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}exports.default=j;
},{"./tilegrid/common.js":"mOEX","./util.js":"KniQ","./functions.js":"RgA2","./centerconstraint.js":"Rc7z","./Object.js":"PhPh","./resolutionconstraint.js":"o7nl","./rotationconstraint.js":"9EKd","./ViewHint.js":"cuLW","./ViewProperty.js":"0/98","./array.js":"luEr","./asserts.js":"fLG6","./coordinate.js":"nGsj","./easing.js":"IeCz","./extent.js":"QDir","./geom/GeometryType.js":"lmV0","./geom/Polygon.js":"6Nww","./geom/SimpleGeometry.js":"pnrv","./math.js":"B96G","./obj.js":"mH6q","./proj.js":"Diht","./proj/Units.js":"yZx6"}],"1Hbe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"};
},{}],"T6DQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../Object.js"),e=r(t),o=require("../layer/Property.js"),i=r(o),s=require("../math.js"),n=require("../obj.js");function r(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(e){t.call(this);var o=(0,n.assign)({},e);o[i.default.OPACITY]=void 0!==e.opacity?e.opacity:1,o[i.default.VISIBLE]=void 0===e.visible||e.visible,o[i.default.Z_INDEX]=void 0!==e.zIndex?e.zIndex:0,o[i.default.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,o[i.default.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(o),this.state_={layer:this,managed:!0},this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){return this.state_.opacity=(0,s.clamp)(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex(),this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},e.prototype.getLayersArray=function(t){},e.prototype.getLayerStatesArray=function(t){},e.prototype.getExtent=function(){return this.get(i.default.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(i.default.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(i.default.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(i.default.OPACITY)},e.prototype.getSourceState=function(){},e.prototype.getVisible=function(){return this.get(i.default.VISIBLE)},e.prototype.getZIndex=function(){return this.get(i.default.Z_INDEX)},e.prototype.setExtent=function(t){this.set(i.default.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(i.default.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(i.default.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(i.default.OPACITY,t)},e.prototype.setVisible=function(t){this.set(i.default.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(i.default.Z_INDEX,t)},e}(e.default);exports.default=u;
},{"../Object.js":"PhPh","../layer/Property.js":"1Hbe","../math.js":"B96G","../obj.js":"mH6q"}],"iC8j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};
},{}],"q0nK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util.js"),t=require("../Collection.js"),r=_(t),s=require("../CollectionEventType.js"),i=_(s),n=require("../Object.js"),a=require("../ObjectEventType.js"),o=_(a),l=require("../asserts.js"),h=require("../events.js"),y=require("../events/EventType.js"),u=_(y),d=require("../extent.js"),c=require("../layer/Base.js"),f=_(c),g=require("../obj.js"),p=require("../source/State.js"),v=_(p);function _(e){return e&&e.__esModule?e:{default:e}}var L={LAYERS:"layers"},E=function(t){function s(e){var s=e||{},i=(0,g.assign)({},s);delete i.layers;var a=s.layers;t.call(this,i),this.layersListenerKeys_=[],this.listenerKeys_={},(0,h.listen)(this,(0,n.getChangeEventType)(L.LAYERS),this.handleLayersChanged_,this),a?Array.isArray(a)?a=new r.default(a.slice(),{unique:!0}):((0,l.assert)(a instanceof r.default,43),a=a):a=new r.default(void 0,{unique:!0}),this.setLayers(a)}return t&&(s.__proto__=t),s.prototype=Object.create(t&&t.prototype),s.prototype.constructor=s,s.prototype.handleLayerChange_=function(){this.changed()},s.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(h.unlistenByKey),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var r in this.layersListenerKeys_.push((0,h.listen)(t,i.default.ADD,this.handleLayersAdd_,this),(0,h.listen)(t,i.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[r].forEach(h.unlistenByKey);(0,g.clear)(this.listenerKeys_);for(var s=t.getArray(),n=0,a=s.length;n<a;n++){var l=s[n];this.listenerKeys_[(0,e.getUid)(l).toString()]=[(0,h.listen)(l,o.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,h.listen)(l,u.default.CHANGE,this.handleLayerChange_,this)]}this.changed()},s.prototype.handleLayersAdd_=function(t){var r=t.element,s=(0,e.getUid)(r).toString();this.listenerKeys_[s]=[(0,h.listen)(r,o.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,h.listen)(r,u.default.CHANGE,this.handleLayerChange_,this)],this.changed()},s.prototype.handleLayersRemove_=function(t){var r=t.element,s=(0,e.getUid)(r).toString();this.listenerKeys_[s].forEach(h.unlistenByKey),delete this.listenerKeys_[s],this.changed()},s.prototype.getLayers=function(){return this.get(L.LAYERS)},s.prototype.setLayers=function(e){this.set(L.LAYERS,e)},s.prototype.getLayersArray=function(e){var t=void 0!==e?e:[];return this.getLayers().forEach(function(e){e.getLayersArray(t)}),t},s.prototype.getLayerStatesArray=function(e){var t=void 0!==e?e:[],r=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});for(var s=this.getLayerState(),i=r,n=t.length;i<n;i++){var a=t[i];a.opacity*=s.opacity,a.visible=a.visible&&s.visible,a.maxResolution=Math.min(a.maxResolution,s.maxResolution),a.minResolution=Math.max(a.minResolution,s.minResolution),void 0!==s.extent&&(void 0!==a.extent?a.extent=(0,d.getIntersection)(a.extent,s.extent):a.extent=s.extent)}return t},s.prototype.getSourceState=function(){return v.default.READY},s}(f.default);exports.default=E;
},{"../util.js":"KniQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../Object.js":"PhPh","../ObjectEventType.js":"zehl","../asserts.js":"fLG6","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../layer/Base.js":"T6DQ","../obj.js":"mH6q","../source/State.js":"iC8j"}],"TAHd":[function(require,module,exports) {
"use strict";function r(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function e(r){return r[0]>0&&r[1]>0}function t(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function o(r,e){return Array.isArray(r)?r:(void 0===e?e=[r,r]:e[0]=e[1]=r,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=r,exports.hasArea=e,exports.scale=t,exports.toSize=o;
},{}],"kRwz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util.js"),t=require("./Collection.js"),i=N(t),r=require("./CollectionEventType.js"),n=N(r),s=require("./MapBrowserEvent.js"),o=N(s),a=require("./MapBrowserEventHandler.js"),l=N(a),h=require("./MapBrowserEventType.js"),d=N(h),u=require("./MapEvent.js"),p=N(u),y=require("./MapEventType.js"),v=N(y),f=require("./MapProperty.js"),c=N(f),_=require("./Object.js"),E=N(_),g=require("./ObjectEventType.js"),m=N(g),T=require("./TileQueue.js"),w=N(T),C=require("./View.js"),R=N(C),S=require("./ViewHint.js"),x=N(S),I=require("./asserts.js"),L=require("./dom.js"),A=require("./events.js"),P=require("./events/Event.js"),O=require("./events/EventType.js"),F=N(O),K=require("./extent.js"),M=require("./functions.js"),D=require("./has.js"),G=require("./layer/Group.js"),j=N(G),q=require("./size.js"),H=require("./structs/PriorityQueue.js"),B=require("./transform.js");function N(e){return e&&e.__esModule?e:{default:e}}var b=function(t){function r(e){t.call(this);var r=W(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:D.DEVICE_PIXEL_RATIO,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=(0,B.create)(),this.pixelToCoordinateTransform_=(0,B.create)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("DIV"),this.viewport_.className="ol-viewport"+(D.TOUCH?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var s=[F.default.CLICK,F.default.DBLCLICK,F.default.MOUSEDOWN,F.default.TOUCHSTART,F.default.MSPOINTERDOWN,d.default.POINTERDOWN,F.default.MOUSEWHEEL,F.default.WHEEL],o=0,a=s.length;o<a;++o)(0,A.listen)(this.overlayContainerStopEvent_,s[o],P.stopPropagation);for(var h in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new l.default(this,e.moveTolerance),d.default)(0,A.listen)(this.mapBrowserEventHandler_,d.default[h],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=r.keyboardEventTarget,this.keyHandlerKeys_=null,(0,A.listen)(this.viewport_,F.default.CONTEXTMENU,this.handleBrowserEvent,this),(0,A.listen)(this.viewport_,F.default.WHEEL,this.handleBrowserEvent,this),(0,A.listen)(this.viewport_,F.default.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=r.controls||new i.default,this.interactions=r.interactions||new i.default,this.overlays_=r.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new w.default(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},(0,A.listen)(this,(0,_.getChangeEventType)(c.default.LAYERGROUP),this.handleLayerGroupChanged_,this),(0,A.listen)(this,(0,_.getChangeEventType)(c.default.VIEW),this.handleViewChanged_,this),(0,A.listen)(this,(0,_.getChangeEventType)(c.default.SIZE),this.handleSizeChanged_,this),(0,A.listen)(this,(0,_.getChangeEventType)(c.default.TARGET),this.handleTargetChanged_,this),this.setProperties(r.values),this.controls.forEach(function(e){e.setMap(this)}.bind(this)),(0,A.listen)(this.controls,n.default.ADD,function(e){e.element.setMap(this)},this),(0,A.listen)(this.controls,n.default.REMOVE,function(e){e.element.setMap(null)},this),this.interactions.forEach(function(e){e.setMap(this)}.bind(this)),(0,A.listen)(this.interactions,n.default.ADD,function(e){e.element.setMap(this)},this),(0,A.listen)(this.interactions,n.default.REMOVE,function(e){e.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),(0,A.listen)(this.overlays_,n.default.ADD,function(e){this.addOverlayInternal_(e.element)},this),(0,A.listen)(this.overlays_,n.default.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)},this)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},r.prototype.addControl=function(e){this.getControls().push(e)},r.prototype.addInteraction=function(e){this.getInteractions().push(e)},r.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},r.prototype.addOverlay=function(e){this.getOverlays().push(e)},r.prototype.addOverlayInternal_=function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},r.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),(0,A.unlisten)(this.viewport_,F.default.CONTEXTMENU,this.handleBrowserEvent,this),(0,A.unlisten)(this.viewport_,F.default.WHEEL,this.handleBrowserEvent,this),(0,A.unlisten)(this.viewport_,F.default.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(F.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},r.prototype.forEachFeatureAtPixel=function(e,t,i){if(this.frameState_){var r=this.getCoordinateFromPixel(e),n=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,s=void 0!==i.layerFilter?i.layerFilter:M.TRUE;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,n,t,null,s,null)}},r.prototype.getFeaturesAtPixel=function(e,t){var i=null;return this.forEachFeatureAtPixel(e,function(e){i||(i=[]),i.push(e)},t),i},r.prototype.forEachLayerAtPixel=function(e,t,i){if(this.frameState_){var r=i||{},n=void 0!==r.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,s=r.layerFilter||M.TRUE;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,n,t,null,s,null)}},r.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(e),r=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:M.TRUE,n=void 0!==t.hitTolerance?t.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,n,r,null)},r.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},r.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),i=e.changedTouches?e.changedTouches[0]:e;return[i.clientX-t.left,i.clientY-t.top]},r.prototype.getTarget=function(){return this.get(c.default.TARGET)},r.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},r.prototype.getCoordinateFromPixel=function(e){var t=this.frameState_;return t?(0,B.apply)(t.pixelToCoordinateTransform,e.slice()):null},r.prototype.getControls=function(){return this.controls},r.prototype.getOverlays=function(){return this.overlays_},r.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null},r.prototype.getInteractions=function(){return this.interactions},r.prototype.getLayerGroup=function(){return this.get(c.default.LAYERGROUP)},r.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},r.prototype.getPixelFromCoordinate=function(e){var t=this.frameState_;return t?(0,B.apply)(t.coordinateToPixelTransform,e.slice(0,2)):null},r.prototype.getRenderer=function(){return this.renderer_},r.prototype.getSize=function(){return this.get(c.default.SIZE)},r.prototype.getView=function(){return this.get(c.default.VIEW)},r.prototype.getViewport=function(){return this.viewport_},r.prototype.getOverlayContainer=function(){return this.overlayContainer_},r.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},r.prototype.getTilePriority=function(e,t,i,r){var n=this.frameState_;if(!(n&&t in n.wantedTiles))return H.DROP;if(!n.wantedTiles[t][e.getKey()])return H.DROP;var s=i[0]-n.focus[0],o=i[1]-n.focus[1];return 65536*Math.log(r)+Math.sqrt(s*s+o*o)/r},r.prototype.handleBrowserEvent=function(e,t){var i=t||e.type,r=new o.default(i,this,e);this.handleMapBrowserEvent(r)},r.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){this.focus_=e.coordinate,e.frameState=this.frameState_;var t=this.getInteractions().getArray();if(!1!==this.dispatchEvent(e))for(var i=t.length-1;i>=0;i--){var r=t[i];if(r.getActive())if(!r.handleEvent(e))break}}},r.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var i=this.maxTilesLoading_,r=i;if(e){var n=e.viewHints;n[x.default.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,r=2),n[x.default.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,r=2)}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,r))}for(var s=this.postRenderFunctions_,o=0,a=s.length;o<a;++o)s[o](this,e);s.length=0},r.prototype.handleSizeChanged_=function(){this.render()},r.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.keyHandlerKeys_){for(var t=0,i=this.keyHandlerKeys_.length;t<i;++t)(0,A.unlistenByKey)(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null}if(e){e.appendChild(this.viewport_);var r=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[(0,A.listen)(r,F.default.KEYDOWN,this.handleBrowserEvent,this),(0,A.listen)(r,F.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(F.default.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),(0,L.removeNode)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(F.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},r.prototype.handleTileChange_=function(){this.render()},r.prototype.handleViewPropertyChanged_=function(){this.render()},r.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&((0,A.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,A.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",(0,e.getUid)(t)),this.viewPropertyListenerKey_=(0,A.listen)(t,m.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,A.listen)(t,F.default.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},r.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(A.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[(0,A.listen)(e,m.default.PROPERTYCHANGE,this.render,this),(0,A.listen)(e,F.default.CHANGE,this.render,this)]),this.render()},r.prototype.isRendered=function(){return!!this.frameState_},r.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},r.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},r.prototype.removeControl=function(e){return this.getControls().remove(e)},r.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},r.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},r.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},r.prototype.renderFrame_=function(t){var i,r=this.getSize(),n=this.getView(),s=(0,K.createEmpty)(),o=this.frameState_,a=null;if(void 0!==r&&(0,q.hasArea)(r)&&n&&n.isDef()){for(var l=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=this.getLayerGroup().getLayerStatesArray(),d={},u=0,y=h.length;u<y;++u)d[(0,e.getUid)(h[u].layer)]=h[u];i=n.getState();var f=this.focus_;if(!f){f=i.center;var c=i.resolution/this.pixelRatio_;f[0]=Math.round(f[0]/c)*c,f[1]=Math.round(f[1]/c)*c}a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:s,focus:f,index:this.frameIndex_++,layerStates:d,layerStatesArray:h,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:i,viewHints:l,wantedTiles:{}}}if(a&&(a.extent=(0,K.getForViewAndSize)(i.center,i.resolution,i.rotation,a.size,s)),this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),o)(!this.previousExtent_||!(0,K.isEmpty)(this.previousExtent_)&&!(0,K.equals)(a.extent,this.previousExtent_))&&(this.dispatchEvent(new p.default(v.default.MOVESTART,this,o)),this.previousExtent_=(0,K.createOrUpdateEmpty)(this.previousExtent_));this.previousExtent_&&!a.viewHints[x.default.ANIMATING]&&!a.viewHints[x.default.INTERACTING]&&!(0,K.equals)(a.extent,this.previousExtent_)&&(this.dispatchEvent(new p.default(v.default.MOVEEND,this,a)),(0,K.clone)(a.extent,this.previousExtent_))}this.dispatchEvent(new p.default(v.default.POSTRENDER,this,a)),setTimeout(this.handlePostRender.bind(this),0)},r.prototype.setLayerGroup=function(e){this.set(c.default.LAYERGROUP,e)},r.prototype.setSize=function(e){this.set(c.default.SIZE,e)},r.prototype.setTarget=function(e){this.set(c.default.TARGET,e)},r.prototype.setView=function(e){this.set(c.default.VIEW,e)},r.prototype.skipFeature=function(t){var i=(0,e.getUid)(t).toString();this.skippedFeatureUids_[i]=!0,this.render()},r.prototype.updateSize=function(){var e=this.getTargetElement();if(e){var t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}else this.setSize(void 0)},r.prototype.unskipFeature=function(t){var i=(0,e.getUid)(t).toString();delete this.skippedFeatureUids_[i],this.render()},r}(E.default);function W(e){var t=null;void 0!==e.keyboardEventTarget&&(t="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r,n,s,o={},a=e.layers instanceof j.default?e.layers:new j.default({layers:e.layers});return o[c.default.LAYERGROUP]=a,o[c.default.TARGET]=e.target,o[c.default.VIEW]=void 0!==e.view?e.view:new R.default,void 0!==e.controls&&(Array.isArray(e.controls)?r=new i.default(e.controls.slice()):((0,I.assert)(e.controls instanceof i.default,47),r=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?n=new i.default(e.interactions.slice()):((0,I.assert)(e.interactions instanceof i.default,48),n=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?s=new i.default(e.overlays.slice()):((0,I.assert)(e.overlays instanceof i.default,49),s=e.overlays):s=new i.default,{controls:r,interactions:n,keyboardEventTarget:t,overlays:s,values:o}}exports.default=b;
},{"./util.js":"KniQ","./Collection.js":"FnDa","./CollectionEventType.js":"BTrx","./MapBrowserEvent.js":"HMLS","./MapBrowserEventHandler.js":"ohHk","./MapBrowserEventType.js":"Yh/D","./MapEvent.js":"vFcA","./MapEventType.js":"xLGm","./MapProperty.js":"zlNQ","./Object.js":"PhPh","./ObjectEventType.js":"zehl","./TileQueue.js":"0tHO","./View.js":"hNqE","./ViewHint.js":"cuLW","./asserts.js":"fLG6","./dom.js":"Xno5","./events.js":"55Uq","./events/Event.js":"fKNg","./events/EventType.js":"C8cu","./extent.js":"QDir","./functions.js":"RgA2","./has.js":"f3Nv","./layer/Group.js":"q0nK","./size.js":"TAHd","./structs/PriorityQueue.js":"RQLY","./transform.js":"P4eA"}],"+/xx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../functions.js"),t=require("../MapEventType.js"),r=l(t),s=require("../Object.js"),n=l(s),i=require("../dom.js"),o=require("../events.js");function l(e){return e&&e.__esModule?e:{default:e}}var p=function(t){function s(r){t.call(this),this.element=r.element?r.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=r.render?r.render:e.UNDEFINED,r.target&&this.setTarget(r.target)}return t&&(s.__proto__=t),s.prototype=Object.create(t&&t.prototype),s.prototype.constructor=s,s.prototype.disposeInternal=function(){(0,i.removeNode)(this.element),t.prototype.disposeInternal.call(this)},s.prototype.getMap=function(){return this.map_},s.prototype.setMap=function(t){this.map_&&(0,i.removeNode)(this.element);for(var s=0,n=this.listenerKeys.length;s<n;++s)(0,o.unlistenByKey)(this.listenerKeys[s]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==e.UNDEFINED&&this.listenerKeys.push((0,o.listen)(t,r.default.POSTRENDER,this.render,this)),t.render())},s.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},s}(n.default);exports.default=p;
},{"../functions.js":"RgA2","../MapEventType.js":"xLGm","../Object.js":"PhPh","../dom.js":"Xno5","../events.js":"55Uq"}],"GCgv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.visibleAtResolution=_;var e=require("../events.js"),t=require("../events/EventType.js"),r=d(t),s=require("../util.js"),n=require("../Object.js"),o=require("../layer/Base.js"),a=d(o),u=require("../layer/Property.js"),i=d(u),h=require("../obj.js"),p=require("../render/EventType.js"),l=d(p),y=require("../source/State.js"),c=d(y);function d(e){return e&&e.__esModule?e:{default:e}}var g=function(t){function o(r){var s=(0,h.assign)({},r);delete s.source,t.call(this,s),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,r.map&&this.setMap(r.map),(0,e.listen)(this,(0,n.getChangeEventType)(i.default.SOURCE),this.handleSourcePropertyChange_,this);var o=r.source?r.source:null;this.setSource(o)}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.getLayersArray=function(e){var t=e||[];return t.push(this),t},o.prototype.getLayerStatesArray=function(e){var t=e||[];return t.push(this.getLayerState()),t},o.prototype.getSource=function(){return this.get(i.default.SOURCE)||null},o.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():c.default.UNDEFINED},o.prototype.handleSourceChange_=function(){this.changed()},o.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&((0,e.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=(0,e.listen)(t,r.default.CHANGE,this.handleSourceChange_,this)),this.changed()},o.prototype.setMap=function(t){this.mapPrecomposeKey_&&((0,e.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,e.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,e.listen)(t,l.default.PRECOMPOSE,function(e){var t=this.getLayerState();t.managed=!1,t.zIndex=1/0,e.frameState.layerStatesArray.push(t),e.frameState.layerStates[(0,s.getUid)(this)]=t},this),this.mapRenderKey_=(0,e.listen)(this,r.default.CHANGE,t.render,t),this.changed())},o.prototype.setSource=function(e){this.set(i.default.SOURCE,e)},o}(a.default);function _(e,t){return e.visible&&t>=e.minResolution&&t<e.maxResolution}exports.default=g;
},{"../events.js":"55Uq","../events/EventType.js":"C8cu","../util.js":"KniQ","../Object.js":"PhPh","../layer/Base.js":"T6DQ","../layer/Property.js":"1Hbe","../obj.js":"mH6q","../render/EventType.js":"z39m","../source/State.js":"iC8j"}],"Q4Cf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=d;var e=require("../array.js"),t=require("../control/Control.js"),l=p(t),i=require("../css.js"),s=require("../dom.js"),o=require("../events.js"),r=require("../events/EventType.js"),a=p(r),n=require("../layer/Layer.js");function p(e){return e&&e.__esModule?e:{default:e}}var c=function(t){function l(e){var l=e||{};t.call(this,{element:document.createElement("div"),render:l.render||d,target:l.target}),this.ulElement_=document.createElement("UL"),this.collapsed_=void 0===l.collapsed||l.collapsed,this.collapsible_=void 0===l.collapsible||l.collapsible,this.collapsible_||(this.collapsed_=!1);var s=void 0!==l.className?l.className:"ol-attribution",r=void 0!==l.tipLabel?l.tipLabel:"Attributions",n=void 0!==l.collapseLabel?l.collapseLabel:"»";"string"==typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;var p=void 0!==l.label?l.label:"i";"string"==typeof p?(this.label_=document.createElement("span"),this.label_.textContent=p):this.label_=p;var c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=r,h.appendChild(c),(0,o.listen)(h,a.default.CLICK,this.handleClick_,this);var u=s+" "+i.CLASS_UNSELECTABLE+" "+i.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+i.CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),_=this.element;_.className=u,_.appendChild(this.ulElement_),_.appendChild(h),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(l.__proto__=t),l.prototype=Object.create(t&&t.prototype),l.prototype.constructor=l,l.prototype.getSourceAttributions_=function(e){for(var t={},l=[],i=e.layerStatesArray,s=e.viewState.resolution,o=0,r=i.length;o<r;++o){var a=i[o];if((0,n.visibleAtResolution)(a,s)){var p=a.layer.getSource();if(p){var c=p.getAttributions();if(c){var d=c(e);if(d)if(Array.isArray(d))for(var h=0,u=d.length;h<u;++h)d[h]in t||(l.push(d[h]),t[d[h]]=!0);else d in t||(l.push(d),t[d]=!0)}}}}return l},l.prototype.updateElement_=function(t){if(t){var l=this.getSourceAttributions_(t),i=l.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!(0,e.equals)(l,this.renderedAttributions_)){(0,s.removeChildren)(this.ulElement_);for(var o=0,r=l.length;o<r;++o){var a=document.createElement("LI");a.innerHTML=l[o],this.ulElement_.appendChild(a)}this.renderedAttributions_=l}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},l.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},l.prototype.handleToggle_=function(){this.element.classList.toggle(i.CLASS_COLLAPSED),this.collapsed_?(0,s.replaceNode)(this.collapseLabel_,this.label_):(0,s.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},l.prototype.getCollapsible=function(){return this.collapsible_},l.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},l.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},l.prototype.getCollapsed=function(){return this.collapsed_},l}(l.default);function d(e){this.updateElement_(e.frameState)}exports.default=c;
},{"../array.js":"luEr","../control/Control.js":"+/xx","../css.js":"HgMV","../dom.js":"Xno5","../events.js":"55Uq","../events/EventType.js":"C8cu","../layer/Layer.js":"GCgv"}],"sCgw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=d;var t=require("../control/Control.js"),e=l(t),s=require("../css.js"),a=require("../easing.js"),i=require("../events.js"),o=require("../events/EventType.js"),r=l(o);function l(t){return t&&t.__esModule?t:{default:t}}var n=function(t){function e(e){var a=e||{};t.call(this,{element:document.createElement("div"),render:a.render||d,target:a.target});var o=void 0!==a.className?a.className:"ol-rotate",l=void 0!==a.label?a.label:"⇧";this.label_=null,"string"==typeof l?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=l):(this.label_=l,this.label_.classList.add("ol-compass"));var n=a.tipLabel?a.tipLabel:"Reset rotation",h=document.createElement("button");h.className=o+"-reset",h.setAttribute("type","button"),h.title=n,h.appendChild(this.label_),(0,i.listen)(h,r.default.CLICK,this.handleClick_,this);var u=o+" "+s.CLASS_UNSELECTABLE+" "+s.CLASS_CONTROL,_=this.element;_.className=u,_.appendChild(h),this.callResetNorth_=a.resetNorth?a.resetNorth:void 0,this.duration_=void 0!==a.duration?a.duration:250,this.autoHide_=void 0===a.autoHide||a.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(s.CLASS_HIDDEN)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:a.easeOut}):t.setRotation(0))},e}(e.default);function d(t){var e=t.frameState;if(e){var a=e.viewState.rotation;if(a!=this.rotation_){var i="rotate("+a+"rad)";if(this.autoHide_){var o=this.element.classList.contains(s.CLASS_HIDDEN);o||0!==a?o&&0!==a&&this.element.classList.remove(s.CLASS_HIDDEN):this.element.classList.add(s.CLASS_HIDDEN)}this.label_.style.msTransform=i,this.label_.style.webkitTransform=i,this.label_.style.transform=i}this.rotation_=a}}exports.default=n;
},{"../control/Control.js":"+/xx","../css.js":"HgMV","../easing.js":"IeCz","../events.js":"55Uq","../events/EventType.js":"C8cu"}],"L3+c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../events.js"),t=require("../events/EventType.js"),o=l(t),i=require("../control/Control.js"),n=l(i),a=require("../css.js"),r=require("../easing.js");function l(e){return e&&e.__esModule?e:{default:e}}var s=function(t){function i(i){var n=i||{};t.call(this,{element:document.createElement("div"),target:n.target});var r=void 0!==n.className?n.className:"ol-zoom",l=void 0!==n.delta?n.delta:1,s=void 0!==n.zoomInLabel?n.zoomInLabel:"+",u=void 0!==n.zoomOutLabel?n.zoomOutLabel:"−",d=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",c=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=r+"-in",p.setAttribute("type","button"),p.title=d,p.appendChild("string"==typeof s?document.createTextNode(s):s),(0,e.listen)(p,o.default.CLICK,this.handleClick_.bind(this,l));var m=document.createElement("button");m.className=r+"-out",m.setAttribute("type","button"),m.title=c,m.appendChild("string"==typeof u?document.createTextNode(u):u),(0,e.listen)(m,o.default.CLICK,this.handleClick_.bind(this,-l));var v=r+" "+a.CLASS_UNSELECTABLE+" "+a.CLASS_CONTROL,b=this.element;b.className=v,b.appendChild(p),b.appendChild(m),this.duration_=void 0!==n.duration?n.duration:250}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.handleClick_=function(e,t){t.preventDefault(),this.zoomByDelta_(e)},i.prototype.zoomByDelta_=function(e){var t=this.getMap().getView();if(t){var o=t.getResolution();if(o){var i=t.constrainResolution(o,e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:i,duration:this.duration_,easing:r.easeOut})):t.setResolution(i)}}},i}(n.default);exports.default=s;
},{"../events.js":"55Uq","../events/EventType.js":"C8cu","../control/Control.js":"+/xx","../css.js":"HgMV","../easing.js":"IeCz"}],"uzb+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=d;var t=require("../Collection.js"),e=a(t),o=require("./Attribution.js"),r=a(o),u=require("./Rotate.js"),i=a(u),n=require("./Zoom.js"),s=a(n);function a(t){return t&&t.__esModule?t:{default:t}}function d(t){var o=t||{},u=new e.default;return(void 0===o.zoom||o.zoom)&&u.push(new s.default(o.zoomOptions)),(void 0===o.rotate||o.rotate)&&u.push(new i.default(o.rotateOptions)),(void 0===o.attribution||o.attribution)&&u.push(new r.default(o.attributionOptions)),u}
},{"../Collection.js":"FnDa","./Attribution.js":"Q4Cf","./Rotate.js":"sCgw","./Zoom.js":"L3+c"}],"caOi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={ACTIVE:"active"};
},{}],"jB2p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pan=u,exports.rotate=c,exports.rotateWithoutConstraints=l,exports.zoom=p,exports.zoomByDelta=f,exports.zoomWithoutConstraints=v;var t=require("../Object.js"),e=a(t),o=require("../easing.js"),n=require("../interaction/Property.js"),r=a(n),i=require("../math.js");function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(e){t.call(this),this.map_=null,this.setActive(!0),this.handleEvent=e.handleEvent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(r.default.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.setActive=function(t){this.set(r.default.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(e.default);function u(t,e,n){var r=t.getCenter();if(r){var i=t.constrainCenter([r[0]+e[0],r[1]+e[1]]);n?t.animate({duration:n,easing:o.linear,center:i}):t.setCenter(i)}}function c(t,e,o,n){e=t.constrainRotation(e,0),l(t,e,o,n)}function l(t,e,n,r){if(void 0!==e){var i=t.getRotation(),a=t.getCenter();void 0!==i&&a&&r>0?t.animate({rotation:e,anchor:n,duration:r,easing:o.easeOut}):t.rotate(e,n)}}function p(t,e,o,n,r){e=t.constrainResolution(e,0,r),v(t,e,o,n)}function f(t,e,o,n){var r=t.getResolution(),a=t.constrainResolution(r,e,0);if(void 0!==a){var s=t.getResolutions();a=(0,i.clamp)(a,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(o&&void 0!==a&&a!==r){var u=t.getCenter(),c=t.calculateCenterZoom(a,o);c=t.constrainCenter(c),o=[(a*u[0]-r*c[0])/(a-r),(a*u[1]-r*c[1])/(a-r)]}v(t,a,o,n)}function v(t,e,n,r){if(e){var i=t.getResolution(),a=t.getCenter();if(void 0!==i&&a&&e!==i&&r)t.animate({resolution:e,anchor:n,duration:r,easing:o.easeOut});else{if(n){var s=t.calculateCenterZoom(e,n);t.setCenter(s)}t.setResolution(e)}}}exports.default=s;
},{"../Object.js":"PhPh","../easing.js":"IeCz","../interaction/Property.js":"caOi","../math.js":"B96G"}],"2NSa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../MapBrowserEventType.js"),e=a(t),r=require("../interaction/Interaction.js"),o=a(r);function a(t){return t&&t.__esModule?t:{default:t}}var i=function(t){function e(e){t.call(this,{handleEvent:n});var r=e||{};this.delta_=r.delta?r.delta:1,this.duration_=void 0!==r.duration?r.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.default);function n(t){var o=!1,a=t.originalEvent;if(t.type==e.default.DBLCLICK){var i=t.map,n=t.coordinate,u=a.shiftKey?-this.delta_:this.delta_,d=i.getView();(0,r.zoomByDelta)(d,u,n,this.duration_),t.preventDefault(),o=!0}return!o}exports.default=i;
},{"../MapBrowserEventType.js":"Yh/D","../interaction/Interaction.js":"jB2p"}],"YcID":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.primaryAction=exports.mouseOnly=exports.targetNotEditable=exports.shiftKeyOnly=exports.platformModifierKeyOnly=exports.noModifierKeys=exports.doubleClick=exports.singleClick=exports.pointerMove=exports.never=exports.mouseActionButton=exports.click=exports.always=exports.focus=exports.altShiftKeysOnly=exports.altKeyOnly=void 0;var e=require("../MapBrowserEventType.js"),t=i(e),r=require("../asserts.js"),n=require("../functions.js"),o=require("../has.js");function i(e){return e&&e.__esModule?e:{default:e}}var s=exports.altKeyOnly=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},a=exports.altShiftKeysOnly=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},l=exports.focus=function(e){return e.target.getTargetElement()===document.activeElement},u=exports.always=n.TRUE,y=exports.click=function(e){return e.type==t.default.CLICK},p=exports.mouseActionButton=function(e){var t=e.originalEvent;return 0==t.button&&!(o.WEBKIT&&o.MAC&&t.ctrlKey)},c=exports.never=n.FALSE,f=exports.pointerMove=function(e){return"pointermove"==e.type},K=exports.singleClick=function(e){return e.type==t.default.SINGLECLICK},x=exports.doubleClick=function(e){return e.type==t.default.DBLCLICK},v=exports.noModifierKeys=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},E=exports.platformModifierKeyOnly=function(e){var t=e.originalEvent;return!t.altKey&&(o.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey},m=exports.shiftKeyOnly=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},d=exports.targetNotEditable=function(e){var t=e.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t},g=exports.mouseOnly=function(e){return(0,r.assert)(e.pointerEvent,56),"mouse"==e.pointerEvent.pointerType},C=exports.primaryAction=function(e){var t=e.pointerEvent;return t.isPrimary&&0===t.button};
},{"../MapBrowserEventType.js":"Yh/D","../asserts.js":"fLG6","../functions.js":"RgA2","../has.js":"f3Nv"}],"dnA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.centroid=v,exports.handleEvent=f;var e=require("../functions.js"),t=require("../MapBrowserEventType.js"),n=d(t),r=require("../MapBrowserPointerEvent.js"),i=d(r),a=require("../interaction/Interaction.js"),o=d(a),s=require("../obj.js");function d(e){return e&&e.__esModule?e:{default:e}}var h=e.UNDEFINED,l=e.FALSE,u=e.FALSE,p=e.UNDEFINED,E=function(e){function t(t){var n=t||{};e.call(this,{handleEvent:n.handleEvent||f}),this.handleDownEvent_=n.handleDownEvent?n.handleDownEvent:u,this.handleDragEvent_=n.handleDragEvent?n.handleDragEvent:h,this.handleMoveEvent_=n.handleMoveEvent?n.handleMoveEvent:p,this.handleUpEvent_=n.handleUpEvent?n.handleUpEvent:l,this.handlingDownUpSequence=!1,this.stopDown=n.stopDown?n.stopDown:D,this.trackedPointers_={},this.targetPointers=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.updateTrackedPointers_=function(e){if(c(e)){var t=e.pointerEvent,r=t.pointerId.toString();e.type==n.default.POINTERUP?delete this.trackedPointers_[r]:e.type==n.default.POINTERDOWN?this.trackedPointers_[r]=t:r in this.trackedPointers_&&(this.trackedPointers_[r]=t),this.targetPointers=(0,s.getValues)(this.trackedPointers_)}},t}(o.default);function v(e){for(var t=e.length,n=0,r=0,i=0;i<t;i++)n+=e[i].clientX,r+=e[i].clientY;return[n/t,r/t]}function c(e){var t=e.type;return t===n.default.POINTERDOWN||t===n.default.POINTERDRAG||t===n.default.POINTERUP}function f(e){if(!(e instanceof i.default))return!0;var t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==n.default.POINTERDRAG)this.handleDragEvent_(e);else if(e.type==n.default.POINTERUP){var r=this.handleUpEvent_(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==n.default.POINTERDOWN){var a=this.handleDownEvent_(e);this.handlingDownUpSequence=a,t=this.stopDown(a)}else e.type==n.default.POINTERMOVE&&this.handleMoveEvent_(e);return!t}function D(e){return e}exports.default=E;
},{"../functions.js":"RgA2","../MapBrowserEventType.js":"Yh/D","../MapBrowserPointerEvent.js":"J1WQ","../interaction/Interaction.js":"jB2p","../obj.js":"mH6q"}],"N4gU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../ViewHint.js"),e=c(t),i=require("../coordinate.js"),n=require("../easing.js"),r=require("../events/condition.js"),s=require("../functions.js"),o=require("../interaction/Pointer.js"),a=c(o);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(e){t.call(this,{handleDownEvent:d,handleDragEvent:l,handleUpEvent:u,stopDown:s.FALSE});var i=e||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.condition_=i.condition?i.condition:r.noModifierKeys,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.default);function l(t){var e=this.targetPointers,n=(0,o.centroid)(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var r=this.lastCentroid[0]-n[0],s=n[1]-this.lastCentroid[1],a=t.map.getView(),c=[r,s];(0,i.scale)(c,a.getResolution()),(0,i.rotate)(c,a.getRotation()),(0,i.add)(c,a.getCenter()),c=a.constrainCenter(c),a.setCenter(c)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length}function u(t){var i=t.map,r=i.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var s=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=r.getCenter(),c=i.getPixelFromCoordinate(a),h=i.getCoordinateFromPixel([c[0]-s*Math.cos(o),c[1]-s*Math.sin(o)]);r.animate({center:r.constrainCenter(h),duration:500,easing:n.easeOut})}return r.setHint(e.default.INTERACTING,-1),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}function d(t){if(this.targetPointers.length>0&&this.condition_(t)){var i=t.map.getView();return this.lastCentroid=null,this.handlingDownUpSequence||i.setHint(e.default.INTERACTING,1),i.getAnimating()&&i.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}exports.default=h;
},{"../ViewHint.js":"cuLW","../coordinate.js":"nGsj","../easing.js":"IeCz","../events/condition.js":"YcID","../functions.js":"RgA2","../interaction/Pointer.js":"dnA2"}],"PgBj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../rotationconstraint.js"),e=require("../ViewHint.js"),n=u(e),i=require("../events/condition.js"),o=require("../functions.js"),r=require("../interaction/Interaction.js"),a=require("../interaction/Pointer.js"),s=u(a);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(e){var n=e||{};t.call(this,{handleDownEvent:f,handleDragEvent:d,handleUpEvent:c,stopDown:o.FALSE}),this.condition_=n.condition?n.condition:i.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.default);function d(e){if((0,i.mouseOnly)(e)){var n=e.map,o=n.getView();if(o.getConstraints().rotation!==t.disable){var a=n.getSize(),s=e.pixel,u=Math.atan2(a[1]/2-s[1],s[0]-a[0]/2);if(void 0!==this.lastAngle_){var l=u-this.lastAngle_,d=o.getRotation();(0,r.rotateWithoutConstraints)(o,d-l)}this.lastAngle_=u}}}function c(t){if(!(0,i.mouseOnly)(t))return!0;var e=t.map.getView();e.setHint(n.default.INTERACTING,-1);var o=e.getRotation();return(0,r.rotate)(e,o,void 0,this.duration_),!1}function f(t){return!!(0,i.mouseOnly)(t)&&(!(!(0,i.mouseActionButton)(t)||!this.condition_(t))&&(t.map.getView().setHint(n.default.INTERACTING,1),this.lastAngle_=void 0,!0))}exports.default=l;
},{"../rotationconstraint.js":"9EKd","../ViewHint.js":"cuLW","../events/condition.js":"YcID","../functions.js":"RgA2","../interaction/Interaction.js":"jB2p","../interaction/Pointer.js":"dnA2"}],"bMDg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../Disposable.js"),e=s(t),i=require("../geom/Polygon.js"),o=s(i);function s(t){return t&&t.__esModule?t:{default:t}}var r=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new o.default([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(e.default);exports.default=r;
},{"../Disposable.js":"DDda","../geom/Polygon.js":"6Nww"}],"AQ/R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../events/Event.js"),e=u(t),o=require("../events/condition.js"),n=require("../functions.js"),i=require("../interaction/Pointer.js"),r=u(i),s=require("../render/Box.js"),a=u(s);function u(t){return t&&t.__esModule?t:{default:t}}var d={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},c=function(t){function e(e,o,n){t.call(this,e),this.coordinate=o,this.mapBrowserEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e.default),l=function(t){function e(e){t.call(this,{handleDownEvent:p,handleDragEvent:x,handleUpEvent:_});var i=e||{};this.box_=new a.default(i.className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,this.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:n.UNDEFINED,this.startPixel_=null,this.condition_=i.condition?i.condition:o.always,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:h}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGeometry=function(){return this.box_.getGeometry()},e}(r.default);function h(t,e,o){var n=o[0]-e[0],i=o[1]-e[1];return n*n+i*i>=this.minArea_}function x(t){(0,o.mouseOnly)(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new c(d.BOXDRAG,t.coordinate,t)))}function _(t){return!(0,o.mouseOnly)(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new c(d.BOXEND,t.coordinate,t))),!1)}function p(t){return!!(0,o.mouseOnly)(t)&&(!(!(0,o.mouseActionButton)(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new c(d.BOXSTART,t.coordinate,t)),!0))}exports.default=l;
},{"../events/Event.js":"fKNg","../events/condition.js":"YcID","../functions.js":"RgA2","../interaction/Pointer.js":"dnA2","../render/Box.js":"bMDg"}],"pTqW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../easing.js"),e=require("../events/condition.js"),o=require("../extent.js"),r=require("../interaction/DragBox.js"),n=i(r);function i(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function o(o){var r=o||{},n=r.condition?r.condition:e.shiftKeyOnly;t.call(this,{condition:n,className:r.className||"ol-dragzoom",onBoxEnd:s}),this.duration_=void 0!==r.duration?r.duration:200,this.out_=void 0!==r.out&&r.out}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o}(n.default);function s(){var e=this.getMap(),r=e.getView(),n=e.getSize(),i=this.getGeometry().getExtent();if(this.out_){var a=r.calculateExtent(n),s=(0,o.createOrUpdateFromCoordinates)([e.getPixelFromCoordinate((0,o.getBottomLeft)(i)),e.getPixelFromCoordinate((0,o.getTopRight)(i))]),u=r.getResolutionForExtent(s,n);(0,o.scaleFromCenter)(a,1/u),i=a}var c=r.constrainResolution(r.getResolutionForExtent(i,n)),d=(0,o.getCenter)(i);d=r.constrainCenter(d),r.animate({resolution:c,center:d,duration:this.duration_,easing:t.easeOut})}exports.default=a;
},{"../easing.js":"IeCz","../events/condition.js":"YcID","../extent.js":"QDir","../interaction/DragBox.js":"AQ/R"}],"mmJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={LEFT:37,UP:38,RIGHT:39,DOWN:40};
},{}],"CFRo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../coordinate.js"),e=require("../events/EventType.js"),i=d(e),o=require("../events/KeyCode.js"),n=d(o),r=require("../events/condition.js"),a=require("../interaction/Interaction.js"),u=d(a);function d(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(e){t.call(this,{handleEvent:s});var i=e||{};this.defaultCondition_=function(t){return(0,r.noModifierKeys)(t)&&(0,r.targetNotEditable)(t)},this.condition_=void 0!==i.condition?i.condition:this.defaultCondition_,this.duration_=void 0!==i.duration?i.duration:100,this.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(u.default);function s(e){var o=!1;if(e.type==i.default.KEYDOWN){var r=e.originalEvent.keyCode;if(this.condition_(e)&&(r==n.default.DOWN||r==n.default.LEFT||r==n.default.RIGHT||r==n.default.UP)){var u=e.map.getView(),d=u.getResolution()*this.pixelDelta_,l=0,s=0;r==n.default.DOWN?s=-d:r==n.default.LEFT?l=-d:r==n.default.RIGHT?l=d:s=d;var f=[l,s];(0,t.rotate)(f,u.getRotation()),(0,a.pan)(u,f,this.duration_),e.preventDefault(),o=!0}}return!o}exports.default=l;
},{"../coordinate.js":"nGsj","../events/EventType.js":"C8cu","../events/KeyCode.js":"mmJk","../events/condition.js":"YcID","../interaction/Interaction.js":"jB2p"}],"7S8w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../events/EventType.js"),e=n(t),o=require("../events/condition.js"),r=require("../interaction/Interaction.js"),i=n(r);function n(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(e){t.call(this,{handleEvent:d});var r=e||{};this.condition_=r.condition?r.condition:o.targetNotEditable,this.delta_=r.delta?r.delta:1,this.duration_=void 0!==r.duration?r.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i.default);function d(t){var o=!1;if(t.type==e.default.KEYDOWN||t.type==e.default.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var n=t.map,a=i=="+".charCodeAt(0)?this.delta_:-this.delta_,d=n.getView();(0,r.zoomByDelta)(d,a,void 0,this.duration_),t.preventDefault(),o=!0}}return!o}exports.default=a;
},{"../events/EventType.js":"C8cu","../events/condition.js":"YcID","../interaction/Interaction.js":"jB2p"}],"kPt6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mode=void 0;var t=require("../ViewHint.js"),e=d(t),i=require("../events/condition.js"),o=require("../easing.js"),a=require("../events/EventType.js"),s=d(a),n=require("../has.js"),r=require("../interaction/Interaction.js"),h=d(r),u=require("../math.js");function d(t){return t&&t.__esModule?t:{default:t}}var _=1,c=exports.Mode={TRACKPAD:"trackpad",WHEEL:"wheel"},l=function(t){function o(e){t.call(this,{handleEvent:m});var o=e||{};this.delta_=0,this.duration_=void 0!==o.duration?o.duration:250,this.timeout_=void 0!==o.timeout?o.timeout:80,this.useAnchor_=void 0===o.useAnchor||o.useAnchor,this.constrainResolution_=o.constrainResolution||!1,this.condition_=o.condition?o.condition:i.always,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(e.default.INTERACTING,-1)},o.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=_,o=(0,u.clamp)(this.delta_,-i,i);(0,r.zoomByDelta)(e,-o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},o.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},o}(h.default);function m(t){if(!this.condition_(t))return!0;var i=t.type;if(i!==s.default.WHEEL&&i!==s.default.MOUSEWHEEL)return!0;t.preventDefault();var a,r=t.map,h=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==s.default.WHEEL?(a=h.deltaY,n.FIREFOX&&h.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=n.DEVICE_PIXEL_RATIO),h.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)):t.type==s.default.MOUSEWHEEL&&(a=-h.wheelDeltaY,n.SAFARI&&(a/=3)),0===a)return!1;var u=Date.now();if(void 0===this.startTime_&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?c.TRACKPAD:c.WHEEL),this.mode_===c.TRACKPAD){var d=r.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):d.setHint(e.default.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var _=d.getResolution()*Math.pow(2,a/this.trackpadDeltaPerZoom_),l=d.getMinResolution(),m=d.getMaxResolution(),p=0;if(_<l?(_=Math.max(_,l/this.trackpadZoomBuffer_),p=1):_>m&&(_=Math.min(_,m*this.trackpadZoomBuffer_),p=-1),this.lastAnchor_){var v=d.calculateCenterZoom(_,this.lastAnchor_);d.setCenter(d.constrainCenter(v))}return d.setResolution(_),0===p&&this.constrainResolution_&&d.animate({resolution:d.constrainResolution(_,a>0?-1:1),easing:o.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),p>0?d.animate({resolution:l,easing:o.easeOut,anchor:this.lastAnchor_,duration:500}):p<0&&d.animate({resolution:m,easing:o.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=u,!1}this.delta_+=a;var E=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),E),!1}exports.default=l;
},{"../ViewHint.js":"cuLW","../events/condition.js":"YcID","../easing.js":"IeCz","../events/EventType.js":"C8cu","../has.js":"f3Nv","../interaction/Interaction.js":"jB2p","../math.js":"B96G"}],"8hbG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../ViewHint.js"),e=s(t),i=require("../functions.js"),n=require("../interaction/Interaction.js"),r=require("../interaction/Pointer.js"),o=s(r),a=require("../rotationconstraint.js");function s(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(e){t.call(this,{handleDownEvent:_,handleDragEvent:l,handleUpEvent:u,stopDown:i.FALSE});var n=e||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==n.threshold?n.threshold:.3,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.default);function l(t){var e=0,i=this.targetPointers[0],o=this.targetPointers[1],s=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(void 0!==this.lastAngle_){var h=s-this.lastAngle_;this.rotationDelta_+=h,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=h}this.lastAngle_=s;var l=t.map,u=l.getView();if(u.getConstraints().rotation!==a.disable){var _=l.getViewport().getBoundingClientRect(),c=(0,r.centroid)(this.targetPointers);if(c[0]-=_.left,c[1]-=_.top,this.anchor_=l.getCoordinateFromPixel(c),this.rotating_){var d=u.getRotation();l.render(),(0,n.rotateWithoutConstraints)(u,d+e,this.anchor_)}}}function u(t){if(this.targetPointers.length<2){var i=t.map.getView();if(i.setHint(e.default.INTERACTING,-1),this.rotating_){var r=i.getRotation();(0,n.rotate)(i,r,this.anchor_,this.duration_)}return!1}return!0}function _(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().setHint(e.default.INTERACTING,1),!0}return!1}exports.default=h;
},{"../ViewHint.js":"cuLW","../functions.js":"RgA2","../interaction/Interaction.js":"jB2p","../interaction/Pointer.js":"dnA2","../rotationconstraint.js":"9EKd"}],"rcXm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../ViewHint.js"),e=s(t),i=require("../functions.js"),n=require("../interaction/Interaction.js"),o=require("../interaction/Pointer.js"),r=s(o);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(e){t.call(this,{handleDownEvent:c,handleDragEvent:l,handleUpEvent:u,stopDown:i.FALSE});var n=e||{};this.constrainResolution_=n.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==n.duration?n.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r.default);function l(t){var e=1,i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,a=i.clientY-r.clientY,l=Math.sqrt(s*s+a*a);void 0!==this.lastDistance_&&(e=this.lastDistance_/l),this.lastDistance_=l;var u=t.map,c=u.getView(),h=c.getResolution(),_=c.getMaxResolution(),d=c.getMinResolution(),g=h*e;g>_?(e=_/h,g=_):g<d&&(e=d/h,g=d),1!=e&&(this.lastScaleDelta_=e);var p=u.getViewport().getBoundingClientRect(),v=(0,o.centroid)(this.targetPointers);v[0]-=p.left,v[1]-=p.top,this.anchor_=u.getCoordinateFromPixel(v),u.render(),(0,n.zoomWithoutConstraints)(c,g,this.anchor_)}function u(t){if(this.targetPointers.length<2){var i=t.map.getView();i.setHint(e.default.INTERACTING,-1);var o=i.getResolution();if(this.constrainResolution_||o<i.getMinResolution()||o>i.getMaxResolution()){var r=this.lastScaleDelta_-1;(0,n.zoom)(i,o,this.anchor_,this.duration_,r)}return!1}return!0}function c(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().setHint(e.default.INTERACTING,1),!0}return!1}exports.default=a;
},{"../ViewHint.js":"cuLW","../functions.js":"RgA2","../interaction/Interaction.js":"jB2p","../interaction/Pointer.js":"dnA2"}],"IYO6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../functions.js"),e=require("../events.js"),r=require("../events/Event.js"),s=c(r),i=require("../events/EventType.js"),o=c(i),n=require("../interaction/Interaction.js"),a=c(n),u=require("../proj.js");function c(t){return t&&t.__esModule?t:{default:t}}var p={ADD_FEATURES:"addfeatures"},l=function(t){function e(e,r,s,i){t.call(this,e),this.features=s,this.file=r,this.projection=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.default),h=function(r){function s(e){var s=e||{};r.call(this,{handleEvent:t.TRUE}),this.formatConstructors_=s.formatConstructors?s.formatConstructors:[],this.projection_=s.projection?(0,u.get)(s.projection):null,this.dropListenKeys_=null,this.source_=s.source||null,this.target=s.target?s.target:null}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.handleResult_=function(t,e){var r=e.target.result,s=this.getMap(),i=this.projection_;i||(i=s.getView().getProjection());for(var o=this.formatConstructors_,n=[],a=0,u=o.length;a<u;++a){var c=new(0,o[a]);if((n=this.tryReadFeatures_(c,r,{featureProjection:i}))&&n.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(n)),this.dispatchEvent(new l(p.ADD_FEATURES,t,n,i))},s.prototype.registerListeners_=function(){var t=this.getMap();if(t){var r=this.target?this.target:t.getViewport();this.dropListenKeys_=[(0,e.listen)(r,o.default.DROP,f,this),(0,e.listen)(r,o.default.DRAGENTER,_,this),(0,e.listen)(r,o.default.DRAGOVER,_,this),(0,e.listen)(r,o.default.DROP,_,this)]}},s.prototype.setActive=function(t){r.prototype.setActive.call(this,t),t?this.registerListeners_():this.unregisterListeners_()},s.prototype.setMap=function(t){this.unregisterListeners_(),r.prototype.setMap.call(this,t),this.getActive()&&this.registerListeners_()},s.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(t){return null}},s.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(e.unlistenByKey),this.dropListenKeys_=null)},s}(a.default);function f(t){for(var e=t.dataTransfer.files,r=0,s=e.length;r<s;++r){var i=e.item(r),n=new FileReader;n.addEventListener(o.default.LOAD,this.handleResult_.bind(this,i)),n.readAsText(i)}}function _(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}exports.default=h;
},{"../functions.js":"RgA2","../events.js":"55Uq","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../interaction/Interaction.js":"jB2p","../proj.js":"Diht"}],"0/IT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../rotationconstraint.js"),i=require("../ViewHint.js"),e=r(i),n=require("../events/condition.js"),a=require("../interaction/Interaction.js"),o=require("../interaction/Pointer.js"),s=r(o);function r(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function i(i){var e=i||{};t.call(this,{handleDownEvent:h,handleDragEvent:u,handleUpEvent:d}),this.condition_=e.condition?e.condition:n.shiftKeyOnly,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==e.duration?e.duration:400}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(s.default);function u(i){if((0,n.mouseOnly)(i)){var e=i.map,o=e.getSize(),s=i.pixel,r=s[0]-o[0]/2,l=o[1]/2-s[1],u=Math.atan2(l,r),d=Math.sqrt(r*r+l*l),h=e.getView();if(h.getConstraints().rotation!==t.disable&&void 0!==this.lastAngle_){var _=u-this.lastAngle_;(0,a.rotateWithoutConstraints)(h,h.getRotation()-_)}if(this.lastAngle_=u,void 0!==this.lastMagnitude_){var c=this.lastMagnitude_*(h.getResolution()/d);(0,a.zoomWithoutConstraints)(h,c)}void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/d),this.lastMagnitude_=d}}function d(t){if(!(0,n.mouseOnly)(t))return!0;var i=t.map.getView();i.setHint(e.default.INTERACTING,-1);var o=this.lastScaleDelta_-1;return(0,a.rotate)(i,i.getRotation()),(0,a.zoom)(i,i.getResolution(),void 0,this.duration_,o),this.lastScaleDelta_=0,!1}function h(t){return!!(0,n.mouseOnly)(t)&&(!!this.condition_(t)&&(t.map.getView().setHint(e.default.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))}exports.default=l;
},{"../rotationconstraint.js":"9EKd","../ViewHint.js":"cuLW","../events/condition.js":"YcID","../interaction/Interaction.js":"jB2p","../interaction/Pointer.js":"dnA2"}],"AyCw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../extent.js"),e=require("../geom/GeometryType.js"),r=n(e),o=require("../geom/SimpleGeometry.js"),i=n(o),s=require("../geom/flat/deflate.js");function n(t){return t&&t.__esModule?t:{default:t}}var a=function(e){function o(t,r,o){if(e.call(this),void 0!==o&&void 0===r)this.setFlatCoordinates(o,t);else{var i=r||0;this.setCenterAndRadius(t,i,o)}}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.clone=function(){return new o(this.flatCoordinates.slice(),void 0,this.layout)},o.prototype.closestPointXY=function(t,e,r,o){var i=this.flatCoordinates,s=t-i[0],n=e-i[1],a=s*s+n*n;if(a<o){if(0===a)for(var d=0;d<this.stride;++d)r[d]=i[d];else{var u=this.getRadius()/Math.sqrt(a);r[0]=i[0]+u*s,r[1]=i[1]+u*n;for(var h=2;h<this.stride;++h)r[h]=i[h]}return r.length=this.stride,a}return o},o.prototype.containsXY=function(t,e){var r=this.flatCoordinates,o=t-r[0],i=e-r[1];return o*o+i*i<=this.getRadiusSquared_()},o.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},o.prototype.computeExtent=function(e){var r=this.flatCoordinates,o=r[this.stride]-r[0];return(0,t.createOrUpdate)(r[0]-o,r[1]-o,r[0]+o,r[1]+o,e)},o.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},o.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},o.prototype.getType=function(){return r.default.CIRCLE},o.prototype.intersectsExtent=function(e){var r=this.getExtent();if((0,t.intersects)(e,r)){var o=this.getCenter();return e[0]<=o[0]&&e[2]>=o[0]||(e[1]<=o[1]&&e[3]>=o[1]||(0,t.forEachCorner)(e,this.intersectsCoordinate,this))}return!1},o.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],o=t.slice();o[e]=o[0]+r;for(var i=1;i<e;++i)o[e+i]=t[i];this.setFlatCoordinates(this.layout,o),this.changed()},o.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,i=(0,s.deflateCoordinate)(o,0,t,this.stride);o[i++]=o[0]+e;for(var n=1,a=this.stride;n<a;++n)o[i++]=o[n];o.length=i,this.changed()},o.prototype.getCoordinates=function(){},o.prototype.setCoordinates=function(t,e){},o.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},o}(i.default);a.prototype.transform,exports.default=a;
},{"../extent.js":"QDir","../geom/GeometryType.js":"lmV0","../geom/SimpleGeometry.js":"pnrv","../geom/flat/deflate.js":"1FNh"}],"4fbC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../array.js"),e=require("../extent.js"),i=require("../geom/GeometryLayout.js"),s=c(i),r=require("../geom/GeometryType.js"),o=c(r),n=require("../geom/LineString.js"),a=c(n),l=require("../geom/SimpleGeometry.js"),d=c(l),h=require("../geom/flat/closest.js"),u=require("../geom/flat/deflate.js"),f=require("../geom/flat/inflate.js"),p=require("../geom/flat/interpolate.js"),g=require("../geom/flat/intersectsextent.js"),y=require("../geom/flat/simplify.js");function c(t){return t&&t.__esModule?t:{default:t}}var _=function(i){function r(e,s,r){if(i.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,s);else if(void 0!==s&&r)this.setFlatCoordinates(s,e),this.ends_=r;else{for(var o=this.getLayout(),n=[],a=[],l=0,d=e.length;l<d;++l){var h=e[l];0===l&&(o=h.getLayout()),(0,t.extend)(n,h.getFlatCoordinates()),a.push(n.length)}this.setFlatCoordinates(o,n),this.ends_=a}}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.appendLineString=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},r.prototype.clone=function(){return new r(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},r.prototype.closestPointXY=function(t,i,s,r){return r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,h.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,h.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,i,s,r))},r.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=s.default.XYM&&this.layout!=s.default.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,o=void 0!==i&&i;return(0,p.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,t,r,o)},r.prototype.getCoordinates=function(){return(0,f.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)},r.prototype.getEnds=function(){return this.ends_},r.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new a.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},r.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,s=[],r=0,o=0,n=e.length;o<n;++o){var l=e[o],d=new a.default(t.slice(r,l),i);s.push(d),r=l}return s},r.prototype.getFlatMidpoints=function(){for(var e=[],i=this.flatCoordinates,s=0,r=this.ends_,o=this.stride,n=0,a=r.length;n<a;++n){var l=r[n],d=(0,p.interpolatePoint)(i,s,l,o,.5);(0,t.extend)(e,d),s=l}return e},r.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];return e.length=(0,y.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new r(e,s.default.XY,i)},r.prototype.getType=function(){return o.default.MULTI_LINE_STRING},r.prototype.intersectsExtent=function(t){return(0,g.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)},r.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,u.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},r}(d.default);exports.default=_;
},{"../array.js":"luEr","../extent.js":"QDir","../geom/GeometryLayout.js":"1Utv","../geom/GeometryType.js":"lmV0","../geom/LineString.js":"DfxW","../geom/SimpleGeometry.js":"pnrv","../geom/flat/closest.js":"rMra","../geom/flat/deflate.js":"1FNh","../geom/flat/inflate.js":"znXl","../geom/flat/interpolate.js":"rDTq","../geom/flat/intersectsextent.js":"GZir","../geom/flat/simplify.js":"IEpt"}],"dNu5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../array.js"),e=require("../extent.js"),o=require("../geom/GeometryType.js"),r=f(o),i=require("../geom/Point.js"),s=f(i),n=require("../geom/SimpleGeometry.js"),a=f(n),l=require("../geom/flat/deflate.js"),u=require("../geom/flat/inflate.js"),d=require("../math.js");function f(t){return t&&t.__esModule?t:{default:t}}var h=function(o){function i(t,e){o.call(this),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}return o&&(i.__proto__=o),i.prototype=Object.create(o&&o.prototype),i.prototype.constructor=i,i.prototype.appendPoint=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()},i.prototype.clone=function(){return new i(this.flatCoordinates.slice(),this.layout)},i.prototype.closestPointXY=function(t,o,r,i){if(i<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,o))return i;for(var s=this.flatCoordinates,n=this.stride,a=0,l=s.length;a<l;a+=n){var u=(0,d.squaredDistance)(t,o,s[a],s[a+1]);if(u<i){i=u;for(var f=0;f<n;++f)r[f]=s[a+f];r.length=n}}return i},i.prototype.getCoordinates=function(){return(0,u.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},i.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new s.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},i.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,o=this.stride,r=[],i=0,n=t.length;i<n;i+=o){var a=new s.default(t.slice(i,i+o),e);r.push(a)}return r},i.prototype.getType=function(){return r.default.MULTI_POINT},i.prototype.intersectsExtent=function(t){for(var o=this.flatCoordinates,r=this.stride,i=0,s=o.length;i<s;i+=r){var n=o[i],a=o[i+1];if((0,e.containsXY)(t,n,a))return!0}return!1},i.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,l.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},i}(a.default);exports.default=h;
},{"../array.js":"luEr","../extent.js":"QDir","../geom/GeometryType.js":"lmV0","../geom/Point.js":"gLcY","../geom/SimpleGeometry.js":"pnrv","../geom/flat/deflate.js":"1FNh","../geom/flat/inflate.js":"znXl","../math.js":"B96G"}],"VjQP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingss=r;var e=require("../../extent.js");function r(r,t,a,n){for(var s=[],o=(0,e.createEmpty)(),i=0,u=a.length;i<u;++i){var l=a[i];o=(0,e.createOrUpdateFromFlatCoordinates)(r,t,l[0],n),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return s}
},{"../../extent.js":"QDir"}],"6ouh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../array.js"),e=require("../extent.js"),i=require("../geom/GeometryLayout.js"),s=R(i),r=require("../geom/GeometryType.js"),n=R(r),o=require("../geom/MultiPoint.js"),a=R(o),l=require("../geom/Polygon.js"),h=R(l),d=require("../geom/SimpleGeometry.js"),u=R(d),f=require("../geom/flat/area.js"),g=require("../geom/flat/center.js"),p=require("../geom/flat/closest.js"),_=require("../geom/flat/contains.js"),c=require("../geom/flat/deflate.js"),y=require("../geom/flat/inflate.js"),v=require("../geom/flat/interiorpoint.js"),C=require("../geom/flat/intersectsextent.js"),m=require("../geom/flat/orient.js"),q=require("../geom/flat/simplify.js");function R(t){return t&&t.__esModule?t:{default:t}}var j=function(i){function r(e,s,r){if(i.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var n=this.getLayout(),o=[],a=[],l=0,h=e.length;l<h;++l){var d=e[l];0===l&&(n=d.getLayout());for(var u=o.length,f=d.getEnds(),g=0,p=f.length;g<p;++g)f[g]+=u;(0,t.extend)(o,d.getFlatCoordinates()),a.push(f)}s=n,e=o,r=a}void 0!==s&&r?(this.setFlatCoordinates(s,e),this.endss_=r):this.setCoordinates(e,s)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.appendPolygon=function(e){var i;if(this.flatCoordinates){var s=this.flatCoordinates.length;(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates());for(var r=0,n=(i=e.getEnds().slice()).length;r<n;++r)i[r]+=s}else this.flatCoordinates=e.getFlatCoordinates().slice(),i=e.getEnds().slice(),this.endss_.push();this.endss_.push(i),this.changed()},r.prototype.clone=function(){for(var t=this.endss_.length,e=new Array(t),i=0;i<t;++i)e[i]=this.endss_[i].slice();return new r(this.flatCoordinates.slice(),this.layout,e)},r.prototype.closestPointXY=function(t,i,s,r){return r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,p.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,p.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,s,r))},r.prototype.containsXY=function(t,e){return(0,_.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},r.prototype.getArea=function(){return(0,f.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},r.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,m.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,y.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)},r.prototype.getEndss=function(){return this.endss_},r.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=(0,g.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,v.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},r.prototype.getInteriorPoints=function(){return new a.default(this.getFlatInteriorPoints().slice(),s.default.XYM)},r.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,m.linearRingsAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,m.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},r.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];return e.length=(0,q.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new r(e,s.default.XY,i)},r.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var s=this.endss_[t].slice(),r=s[s.length-1];if(0!==e)for(var n=0,o=s.length;n<o;++n)s[n]-=e;return new h.default(this.flatCoordinates.slice(e,r),this.layout,s)},r.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,s=[],r=0,n=0,o=i.length;n<o;++n){var a=i[n].slice(),l=a[a.length-1];if(0!==r)for(var d=0,u=a.length;d<u;++d)a[d]-=r;var f=new h.default(e.slice(r,l),t,a);s.push(f),r=l}return s},r.prototype.getType=function(){return n.default.MULTI_POLYGON},r.prototype.intersectsExtent=function(t){return(0,C.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},r.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,c.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var s=i[i.length-1];this.flatCoordinates.length=0===s.length?0:s[s.length-1]}this.changed()},r}(u.default);exports.default=j;
},{"../array.js":"luEr","../extent.js":"QDir","../geom/GeometryLayout.js":"1Utv","../geom/GeometryType.js":"lmV0","../geom/MultiPoint.js":"dNu5","../geom/Polygon.js":"6Nww","../geom/SimpleGeometry.js":"pnrv","../geom/flat/area.js":"EOSm","../geom/flat/center.js":"VjQP","../geom/flat/closest.js":"rMra","../geom/flat/contains.js":"dzdN","../geom/flat/deflate.js":"1FNh","../geom/flat/inflate.js":"znXl","../geom/flat/interiorpoint.js":"UDvN","../geom/flat/intersectsextent.js":"GZir","../geom/flat/orient.js":"2/8c","../geom/flat/simplify.js":"IEpt"}],"8+bQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"};
},{}],"oqAD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={IMAGE:"image",VECTOR:"vector"};
},{}],"dflx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderType=void 0;var e=require("../LayerType.js"),t=l(e),r=require("../layer/Layer.js"),n=l(r),i=require("../layer/VectorRenderType.js"),o=l(i),u=require("../obj.js"),d=require("../style/Style.js");function l(e){return e&&e.__esModule?e:{default:e}}var s=exports.RenderType={IMAGE:"image",VECTOR:"vector"},p={RENDER_ORDER:"renderOrder"},a=function(e){function r(r){var n=r||{},i=(0,u.assign)({},n);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,e.call(this,i),this.declutter_=void 0!==n.declutter&&n.declutter,this.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(n.style),this.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,this.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,this.renderMode_=n.renderMode||o.default.VECTOR,this.type=t.default.VECTOR}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getDeclutter=function(){return this.declutter_},r.prototype.setDeclutter=function(e){this.declutter_=e},r.prototype.getRenderBuffer=function(){return this.renderBuffer_},r.prototype.getRenderOrder=function(){return this.get(p.RENDER_ORDER)},r.prototype.getStyle=function(){return this.style_},r.prototype.getStyleFunction=function(){return this.styleFunction_},r.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},r.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},r.prototype.setRenderOrder=function(e){this.set(p.RENDER_ORDER,e)},r.prototype.setStyle=function(e){this.style_=void 0!==e?e:d.createDefaultStyle,this.styleFunction_=null===e?void 0:(0,d.toFunction)(this.style_),this.changed()},r.prototype.getRenderMode=function(){return this.renderMode_},r}(n.default);a.prototype.getSource,exports.default=a;
},{"../LayerType.js":"8+bQ","../layer/Layer.js":"GCgv","../layer/VectorRenderType.js":"oqAD","../obj.js":"mH6q","../style/Style.js":"1he4"}],"AbO3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};
},{}],"U3JP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadFeaturesXhr=n,exports.xhr=a;var e=require("./functions.js"),t=require("./format/FormatType.js"),r=s(t);function s(e){return e&&e.__esModule?e:{default:e}}function n(e,t,s,n){return function(a,o,u){var i=new XMLHttpRequest;i.open("GET","function"==typeof e?e(a,o,u):e,!0),t.getType()==r.default.ARRAY_BUFFER&&(i.responseType="arraybuffer"),i.onload=function(e){if(!i.status||i.status>=200&&i.status<300){var a,o=t.getType();o==r.default.JSON||o==r.default.TEXT?a=i.responseText:o==r.default.XML?(a=i.responseXML)||(a=(new DOMParser).parseFromString(i.responseText,"application/xml")):o==r.default.ARRAY_BUFFER&&(a=i.response),a?s.call(this,t.readFeatures(a,{featureProjection:u}),t.readProjection(a),t.getLastExtent()):n.call(this)}else n.call(this)}.bind(this),i.onerror=function(){n.call(this)}.bind(this),i.send()}}function a(t,r){return n(t,r,function(e,t){this.addFeatures(e)},e.UNDEFINED)}
},{"./functions.js":"RgA2","./format/FormatType.js":"AbO3"}],"JpXE":[function(require,module,exports) {
"use strict";function e(e,t){return[[-1/0,-1/0,1/0,1/0]]}function t(e,t){return[e]}function r(e){return function(t,r){var n=e.getZForResolution(r),o=e.getTileRangeForExtentAndZ(t,n),u=[],i=[n,0,0];for(i[1]=o.minX;i[1]<=o.maxX;++i[1])for(i[2]=o.minY;i[2]<=o.maxY;++i[2])u.push(e.getTileCoordExtent(i));return u}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=e,exports.bbox=t,exports.tile=r;
},{}],"H38a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../functions.js"),e=require("../Object.js"),r=u(e),o=require("../proj.js"),i=require("../source/State.js"),n=u(i);function u(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(e){t.call(this),this.projection_=(0,o.get)(e.projection),this.attributions_=this.adaptAttributions_(e.attributions),this.state_=void 0!==e.state?e.state:n.default.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.adaptAttributions_=function(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null},e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=this.adaptAttributions_(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(r.default);s.prototype.forEachFeatureAtCoordinate=t.UNDEFINED,exports.default=s;
},{"../functions.js":"RgA2","../Object.js":"PhPh","../proj.js":"Diht","../source/State.js":"iC8j"}],"s8Fc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};
},{}],"+5J5":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,o=arguments[3];!function(o,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):o.quickselect=n()}(this,function(){"use strict";function t(t,o,n){var r=t[o];t[o]=t[n],t[n]=r}function o(t,o){return t<o?-1:t>o?1:0}return function(n,r,e,f,u){!function o(n,r,e,f,u){for(;f>e;){if(f-e>600){var a=f-e+1,i=r-e+1,c=Math.log(a),h=.5*Math.exp(2*c/3),s=.5*Math.sqrt(c*h*(a-h)/a)*(i-a/2<0?-1:1),l=Math.max(e,Math.floor(r-i*h/a+s)),M=Math.min(f,Math.floor(r+(a-i)*h/a+s));o(n,r,l,M,u)}var m=n[r],p=e,d=f;for(t(n,e,r),u(n[f],m)>0&&t(n,e,f);p<d;){for(t(n,p,d),p++,d--;u(n[p],m)<0;)p++;for(;u(n[d],m)>0;)d--}0===u(n[e],m)?t(n,e,d):t(n,++d,f),d<=r&&(e=d+1),r<=d&&(f=d-1)}}(n,r,e||0,f||n.length-1,u||o)}});
},{}],"y0Xa":[function(require,module,exports) {
"use strict";module.exports=i,module.exports.default=i;var t=require("quickselect");function i(t,n){if(!(this instanceof i))return new i(t,n);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),this.clear()}function n(t,i,n){if(!n)return i.indexOf(t);for(var a=0;a<i.length;a++)if(n(t,i[a]))return a;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,a,h){h||(h=x(null)),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0;for(var r,o=i;o<n;o++)r=t.children[o],e(h,t.leaf?a(r):r);return h}function e(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function r(t,i){return t.minX-i.minX}function o(t,i){return t.minY-i.minY}function s(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function m(t,i){var n=Math.max(t.minX,i.minX),a=Math.max(t.minY,i.minY),h=Math.min(t.maxX,i.maxX),e=Math.min(t.maxY,i.maxY);return Math.max(0,h-n)*Math.max(0,e-a)}function c(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function f(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function x(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,a,h,e){for(var r,o=[n,a];o.length;)(a=o.pop())-(n=o.pop())<=h||(r=n+Math.ceil((a-n)/h/2)*h,t(i,r,n,a,e),o.push(n,r,r,a))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],a=this.toBBox;if(!f(t,i))return n;for(var h,e,r,o,s=[];i;){for(h=0,e=i.children.length;h<e;h++)r=i.children[h],f(t,o=i.leaf?a(r):r)&&(i.leaf?n.push(r):c(t,o)?this._all(r,n):s.push(r));i=s.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!f(t,i))return!1;for(var a,h,e,r,o=[];i;){for(a=0,h=i.children.length;a<h;a++)if(e=i.children[a],f(t,r=i.leaf?n(e):e)){if(i.leaf||c(t,r))return!0;o.push(e)}i=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var a=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var h=this.data;this.data=a,a=h}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=x([]),this},remove:function(t,i){if(!t)return this;for(var a,h,e,r,o=this.data,s=this.toBBox(t),l=[],u=[];o||l.length;){if(o||(o=l.pop(),h=l[l.length-1],a=u.pop(),r=!0),o.leaf&&-1!==(e=n(t,o.children,i)))return o.children.splice(e,1),l.push(o),this._condense(l),this;r||o.leaf||!c(o,s)?h?(a++,o=h.children[a],r=!1):o=null:(l.push(o),u.push(a),a=0,h=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:r,compareMinY:o,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,h){var e,r=n-i+1,o=this._maxEntries;if(r<=o)return a(e=x(t.slice(i,n+1)),this.toBBox),e;h||(h=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,h-1))),(e=x([])).leaf=!1,e.height=h;var s,l,u,m,c=Math.ceil(r/o),f=c*Math.ceil(Math.sqrt(o));for(d(t,i,n,f,this.compareMinX),s=i;s<=n;s+=f)for(d(t,s,u=Math.min(s+f-1,n),c,this.compareMinY),l=s;l<=u;l+=c)m=Math.min(l+c-1,u),e.children.push(this._build(t,l,m,h-1));return a(e,this.toBBox),e},_chooseSubtree:function(t,i,n,a){for(var h,e,r,o,l,m,c,f;a.push(i),!i.leaf&&a.length-1!==n;){for(c=f=1/0,h=0,e=i.children.length;h<e;h++)l=s(r=i.children[h]),(m=u(t,r)-l)<f?(f=m,c=l<c?l:c,o=r):m===f&&l<c&&(c=l,o=r);i=o||i.children[0]}return i},_insert:function(t,i,n){var a=this.toBBox,h=n?t:a(t),r=[],o=this._chooseSubtree(h,this.data,i,r);for(o.children.push(t),e(o,h);i>=0&&r[i].children.length>this._maxEntries;)this._split(r,i),i--;this._adjustParentBBoxes(h,r,i)},_split:function(t,i){var n=t[i],h=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,h);var r=this._chooseSplitIndex(n,e,h),o=x(n.children.splice(r,n.children.length-r));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(t,i){this.data=x([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,n){var a,e,r,o,l,u,c,f;for(u=c=1/0,a=i;a<=n-i;a++)o=m(e=h(t,0,a,this.toBBox),r=h(t,a,n,this.toBBox)),l=s(e)+s(r),o<u?(u=o,f=a,c=l<c?l:c):o===u&&l<c&&(c=l,f=a);return f},_chooseSplitAxis:function(t,i,n){var a=t.leaf?this.compareMinX:r,h=t.leaf?this.compareMinY:o;this._allDistMargin(t,i,n,a)<this._allDistMargin(t,i,n,h)&&t.children.sort(a)},_allDistMargin:function(t,i,n,a){t.children.sort(a);var r,o,s=this.toBBox,u=h(t,0,i,s),m=h(t,n-i,n,s),c=l(u)+l(m);for(r=i;r<n-i;r++)o=t.children[r],e(u,t.leaf?s(o):o),c+=l(u);for(r=n-i-1;r>=i;r--)o=t.children[r],e(m,t.leaf?s(o):o),c+=l(m);return c},_adjustParentBBoxes:function(t,i,n){for(var a=n;a>=0;a--)e(i[a],t)},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};
},{"quickselect":"+5J5"}],"MiUH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util.js"),e=require("rbush"),r=o(e),i=require("../extent.js"),n=require("../obj.js");function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){this.rbush_=(0,r.default)(t,void 0),this.items_={}};s.prototype.insert=function(e,r){var i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:r};this.rbush_.insert(i),this.items_[(0,t.getUid)(r)]=i},s.prototype.load=function(e,r){for(var i=new Array(r.length),n=0,o=r.length;n<o;n++){var s=e[n],u=r[n],a={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:u};i[n]=a,this.items_[(0,t.getUid)(u)]=a}this.rbush_.load(i)},s.prototype.remove=function(e){var r=(0,t.getUid)(e),i=this.items_[r];return delete this.items_[r],null!==this.rbush_.remove(i)},s.prototype.update=function(e,r){var n=this.items_[(0,t.getUid)(r)],o=[n.minX,n.minY,n.maxX,n.maxY];(0,i.equals)(o,e)||(this.remove(r),this.insert(e,r))},s.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},s.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},s.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},s.prototype.forEachInExtent=function(t,e,r){return this.forEach_(this.getInExtent(t),e,r)},s.prototype.forEach_=function(t,e,r){for(var i,n=0,o=t.length;n<o;n++)if(i=e.call(r,t[n]))return i;return i},s.prototype.isEmpty=function(){return(0,n.isEmpty)(this.items_)},s.prototype.clear=function(){this.rbush_.clear(),this.items_={}},s.prototype.getExtent=function(t){var e=this.rbush_.data;return(0,i.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)},s.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[0|e]=t.items_[0|e]},exports.default=s;
},{"../util.js":"KniQ","rbush":"y0Xa","../extent.js":"QDir","../obj.js":"mH6q"}],"ZS12":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VectorSourceEvent=void 0;var e=require("../util.js"),t=require("../Collection.js"),r=G(t),n=require("../CollectionEventType.js"),i=G(n),s=require("../ObjectEventType.js"),o=G(s),a=require("../array.js"),u=require("../asserts.js"),h=require("../events.js"),d=require("../events/Event.js"),l=G(d),f=require("../events/EventType.js"),c=G(f),_=require("../extent.js"),p=require("../featureloader.js"),v=require("../functions.js"),y=require("../loadingstrategy.js"),E=require("../obj.js"),g=require("../source/Source.js"),I=G(g),x=require("../source/State.js"),F=G(x),m=require("../source/VectorEventType.js"),R=G(m),C=require("../structs/RBush.js"),j=G(C);function G(e){return e&&e.__esModule?e:{default:e}}var A=exports.VectorSourceEvent=function(e){function t(t,r){e.call(this,t),this.feature=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(l.default),q=function(e){function t(t){var n=t||{};e.call(this,{attributions:n.attributions,projection:void 0,state:F.default.READY,wrapX:void 0===n.wrapX||n.wrapX}),this.loader_=v.UNDEFINED,this.format_=n.format,this.overlaps_=null==n.overlaps||n.overlaps,this.url_=n.url,void 0!==n.loader?this.loader_=n.loader:void 0!==this.url_&&((0,u.assert)(this.format_,7),this.loader_=(0,p.xhr)(this.url_,this.format_)),this.strategy_=void 0!==n.strategy?n.strategy:y.all;var i,s,o=void 0===n.useSpatialIndex||n.useSpatialIndex;this.featuresRtree_=o?new j.default:null,this.loadedExtentsRtree_=new j.default,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,n.features instanceof r.default?s=(i=n.features).getArray():Array.isArray(n.features)&&(s=n.features),o||void 0!==i||(i=new r.default(s)),void 0!==s&&this.addFeaturesInternal(s),void 0!==i&&this.bindFeaturesCollection_(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(I.default);q.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},q.prototype.addFeatureInternal=function(t){var r=(0,e.getUid)(t).toString();if(this.addToIndex_(r,t)){this.setupChangeEvents_(r,t);var n=t.getGeometry();if(n){var i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[r]=t;this.dispatchEvent(new A(R.default.ADDFEATURE,t))}},q.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[(0,h.listen)(t,c.default.CHANGE,this.handleFeatureChange_,this),(0,h.listen)(t,o.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]},q.prototype.addToIndex_=function(e,t){var r=!0,n=t.getId();return void 0!==n?n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t:((0,u.assert)(!(e in this.undefIdIndex_),30),this.undefIdIndex_[e]=t),r},q.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},q.prototype.addFeaturesInternal=function(t){for(var r=[],n=[],i=[],s=0,o=t.length;s<o;s++){var a=t[s],u=(0,e.getUid)(a).toString();this.addToIndex_(u,a)&&n.push(a)}for(var h=0,d=n.length;h<d;h++){var l=n[h],f=(0,e.getUid)(l).toString();this.setupChangeEvents_(f,l);var c=l.getGeometry();if(c){var _=c.getExtent();r.push(_),i.push(l)}else this.nullGeometryFeatures_[f]=l}this.featuresRtree_&&this.featuresRtree_.load(r,i);for(var p=0,v=n.length;p<v;p++)this.dispatchEvent(new A(R.default.ADDFEATURE,n[p]))},q.prototype.bindFeaturesCollection_=function(e){var t=!1;(0,h.listen)(this,R.default.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),(0,h.listen)(this,R.default.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),(0,h.listen)(e,i.default.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)},this),(0,h.listen)(e,i.default.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)},this),this.featuresCollection_=e},q.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(h.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var n=new A(R.default.CLEAR);this.dispatchEvent(n),this.changed()},q.prototype.forEachFeature=function(e){return this.featuresRtree_?this.featuresRtree_.forEach(e):this.featuresCollection_?this.featuresCollection_.forEach(e):void 0},q.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})},q.prototype.forEachFeatureInExtent=function(e,t){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(e,t):this.featuresCollection_?this.featuresCollection_.forEach(t):void 0},q.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}})},q.prototype.getFeaturesCollection=function(){return this.featuresCollection_},q.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,E.isEmpty)(this.nullGeometryFeatures_)||(0,a.extend)(e,(0,E.getValues)(this.nullGeometryFeatures_))),e},q.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t},q.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_.getInExtent(e)},q.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0],n=e[1],i=null,s=[NaN,NaN],o=1/0,a=[-1/0,-1/0,1/0,1/0],u=t||v.TRUE;return this.featuresRtree_.forEachInExtent(a,function(e){if(u(e)){var t=e.getGeometry(),h=o;if((o=t.closestPointXY(r,n,s,o))<h){i=e;var d=Math.sqrt(o);a[0]=r-d,a[1]=n-d,a[2]=r+d,a[3]=n+d}}}),i},q.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},q.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},q.prototype.getFormat=function(){return this.format_},q.prototype.getOverlaps=function(){return this.overlaps_},q.prototype.getResolutions=function(){},q.prototype.getUrl=function(){return this.url_},q.prototype.handleFeatureChange_=function(t){var r=t.target,n=(0,e.getUid)(r).toString(),i=r.getGeometry();if(i){var s=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(s,r)):this.featuresRtree_&&this.featuresRtree_.update(s,r)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(r),this.nullGeometryFeatures_[n]=r);var o=r.getId();if(void 0!==o){var a=o.toString();n in this.undefIdIndex_?(delete this.undefIdIndex_[n],this.idIndex_[a]=r):this.idIndex_[a]!==r&&(this.removeFromIdIndex_(r),this.idIndex_[a]=r)}else n in this.undefIdIndex_||(this.removeFromIdIndex_(r),this.undefIdIndex_[n]=r);this.changed(),this.dispatchEvent(new A(R.default.CHANGEFEATURE,r))},q.prototype.hasFeature=function(t){var r=t.getId();return void 0!==r?r in this.idIndex_:(0,e.getUid)(t).toString()in this.undefIdIndex_},q.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&(0,E.isEmpty)(this.nullGeometryFeatures_)},q.prototype.loadFeatures=function(e,t,r){for(var n=this,i=this.loadedExtentsRtree_,s=this.strategy_(e,t),o=function(e,o){var a=s[e];i.forEachInExtent(a,function(e){return(0,_.containsExtent)(e.extent,a)})||(n.loader_.call(n,a,t,r),i.insert(a,{extent:a.slice()}))},a=0,u=s.length;a<u;++a)o(a)},q.prototype.removeLoadedExtent=function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if((0,_.equals)(r.extent,e))return t=r,!0}),t&&r.remove(t)},q.prototype.removeFeature=function(t){var r=(0,e.getUid)(t).toString();r in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[r]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},q.prototype.removeFeatureInternal=function(t){var r=(0,e.getUid)(t).toString();this.featureChangeKeys_[r].forEach(h.unlistenByKey),delete this.featureChangeKeys_[r];var n=t.getId();void 0!==n?delete this.idIndex_[n.toString()]:delete this.undefIdIndex_[r],this.dispatchEvent(new A(R.default.REMOVEFEATURE,t))},q.prototype.removeFromIdIndex_=function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t},q.prototype.setLoader=function(e){this.loader_=e},exports.default=q;
},{"../util.js":"KniQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../ObjectEventType.js":"zehl","../array.js":"luEr","../asserts.js":"fLG6","../events.js":"55Uq","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../extent.js":"QDir","../featureloader.js":"U3JP","../functions.js":"RgA2","../loadingstrategy.js":"JpXE","../obj.js":"mH6q","../source/Source.js":"H38a","../source/State.js":"iC8j","../source/VectorEventType.js":"s8Fc","../structs/RBush.js":"MiUH"}],"5e7i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleEvent=K,exports.createRegularPolygon=Q,exports.createBox=Z;var t=require("../events/EventType.js"),e=U(t),i=require("../Feature.js"),s=U(i),o=require("../MapBrowserEventType.js"),n=U(o),r=require("../MapBrowserPointerEvent.js"),h=U(r),a=require("../Object.js"),d=require("../coordinate.js"),_=require("../events.js"),u=require("../events/Event.js"),l=U(u),c=require("../events/condition.js"),f=require("../extent.js"),p=require("../functions.js"),g=require("../geom/Circle.js"),m=U(g),y=require("../geom/GeometryType.js"),C=U(y),k=require("../geom/LineString.js"),T=U(k),P=require("../geom/MultiLineString.js"),v=U(P),N=require("../geom/MultiPoint.js"),L=U(N),w=require("../geom/MultiPolygon.js"),O=U(w),I=require("../pointer/MouseSource.js"),E=require("../geom/Point.js"),D=U(E),G=require("../geom/Polygon.js"),F=U(G),R=require("../interaction/Pointer.js"),S=U(R),q=require("../interaction/Property.js"),x=U(q),M=require("../layer/Vector.js"),j=U(M),Y=require("../source/Vector.js"),A=U(Y),b=require("../style/Style.js");function U(t){return t&&t.__esModule?t:{default:t}}var V={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},H={DRAWSTART:"drawstart",DRAWEND:"drawend"},B=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l.default),W=function(t){function e(e){t.call(this,{handleDownEvent:z,handleEvent:K,handleUpEvent:J,stopDown:p.FALSE}),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=$(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===V.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:p.TRUE;var i=e.geometryFunction;if(!i)if(this.type_===C.default.CIRCLE)i=function(t,e){var i=e||new m.default([NaN,NaN]),s=(0,d.squaredDistance)(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(s)),i};else{var s,o=this.mode_;o===V.POINT?s=D.default:o===V.LINE_STRING?s=T.default:o===V.POLYGON&&(s=F.default),i=function(t,e){var i=e;return i?o===V.POLYGON?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new s(t),i}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new j.default({source:new A.default({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:X(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:c.noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=c.always:this.freehandCondition_=e.freehandCondition?e.freehandCondition:c.shiftKeyOnly,(0,_.listen)(this,(0,a.getChangeEventType)(x.default.ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,s=e[0]-i[0],o=e[1]-i[1],n=s*s+o*o;if(this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,s=[this.finishCoordinate_];if(this.mode_===V.LINE_STRING?i=this.sketchCoords_.length>this.minPoints_:this.mode_===V.POLYGON&&(i=this.sketchCoords_[0].length>this.minPoints_,s=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),i)for(var o=t.map,n=0,r=s.length;n<r;n++){var h=s[n],a=o.getPixelFromCoordinate(h),d=t.pixel,_=d[0]-a[0],u=d[1]-a[1],l=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(_*_+u*u)<=l){this.finishCoordinate_=h;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new s.default(new D.default(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===V.POINT?this.sketchCoords_=e.slice():this.mode_===V.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new s.default(new T.default(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new s.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new B(H.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,o,n=t.coordinate,r=this.sketchFeature_.getGeometry();(this.mode_===V.POINT?i=this.sketchCoords_:this.mode_===V.POLYGON?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(n=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,r),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(n);if(r instanceof F.default&&this.mode_!==V.POLYGON){this.sketchLine_||(this.sketchLine_=new s.default);var h=r.getLinearRing(0);(o=this.sketchLine_.getGeometry())?(o.setFlatCoordinates(h.getLayout(),h.getFlatCoordinates()),o.changed()):(o=new T.default(h.getFlatCoordinates(),h.getLayout()),this.sketchLine_.setGeometry(o))}else this.sketchLineCoords_&&(o=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,s=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===V.LINE_STRING?(this.finishCoordinate_=s.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(s.slice()),this.geometryFunction_(i,o)):this.mode_===V.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(s.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===V.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===V.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===V.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===V.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===C.default.MULTI_POINT?t.setGeometry(new L.default([e])):this.type_===C.default.MULTI_LINE_STRING?t.setGeometry(new v.default([e])):this.type_===C.default.MULTI_POLYGON&&t.setGeometry(new O.default([e])),this.dispatchEvent(new B(H.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new B(H.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(S.default);function X(){var t=(0,b.createEditingStyle)();return function(e,i){return t[e.getGeometry().getType()]}}function K(t){t.originalEvent.type===e.default.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==V.POINT&&this.freehandCondition_(t);var i=t.type===n.default.POINTERMOVE,s=!0;this.lastDragTime_&&t.type===n.default.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===n.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),s=!1):this.freehand_&&t.type===n.default.POINTERDOWN?s=!1:i?(s=t.type===n.default.POINTERMOVE)&&this.freehand_?s=this.handlePointerMove_(t):(t.pointerEvent.pointerType==I.POINTER_TYPE||t.type===n.default.POINTERDRAG&&!this.downTimeout_)&&this.handlePointerMove_(t):t.type===n.default.DBLCLICK&&(s=!1),R.handleEvent.call(this,t)&&s}function z(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new h.default(n.default.POINTERMOVE,t.map,t.pointerEvent,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)}function J(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===V.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===V.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e}function Q(t,e){return function(i,s){var o=i[0],n=i[1],r=Math.sqrt((0,d.squaredDistance)(o,n)),h=s||(0,G.fromCircle)(new m.default(o),t),a=e||Math.atan((n[1]-o[1])/(n[0]-o[0]));return(0,G.makeRegular)(h,o,r,a),h}}function Z(){return function(t,e){var i=(0,f.boundingExtent)(t),s=[[(0,f.getBottomLeft)(i),(0,f.getBottomRight)(i),(0,f.getTopRight)(i),(0,f.getTopLeft)(i),(0,f.getBottomLeft)(i)]],o=e;return o?o.setCoordinates(s):o=new F.default(s),o}}function $(t){var e;return t===C.default.POINT||t===C.default.MULTI_POINT?e=V.POINT:t===C.default.LINE_STRING||t===C.default.MULTI_LINE_STRING?e=V.LINE_STRING:t===C.default.POLYGON||t===C.default.MULTI_POLYGON?e=V.POLYGON:t===C.default.CIRCLE&&(e=V.CIRCLE),e}exports.default=W;
},{"../events/EventType.js":"C8cu","../Feature.js":"mYW9","../MapBrowserEventType.js":"Yh/D","../MapBrowserPointerEvent.js":"J1WQ","../Object.js":"PhPh","../coordinate.js":"nGsj","../events.js":"55Uq","../events/Event.js":"fKNg","../events/condition.js":"YcID","../extent.js":"QDir","../functions.js":"RgA2","../geom/Circle.js":"AyCw","../geom/GeometryType.js":"lmV0","../geom/LineString.js":"DfxW","../geom/MultiLineString.js":"4fbC","../geom/MultiPoint.js":"dNu5","../geom/MultiPolygon.js":"6ouh","../pointer/MouseSource.js":"Plx9","../geom/Point.js":"gLcY","../geom/Polygon.js":"6Nww","../interaction/Pointer.js":"dnA2","../interaction/Property.js":"caOi","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../style/Style.js":"1he4"}],"1o7b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../Feature.js"),t=T(e),n=require("../MapBrowserEventType.js"),r=T(n),i=require("../MapBrowserPointerEvent.js"),o=T(i),a=require("../coordinate.js"),u=require("../events/Event.js"),l=T(u),s=require("../extent.js"),p=require("../geom/GeometryType.js"),c=T(p),d=require("../geom/Point.js"),h=T(d),x=require("../geom/Polygon.js"),f=require("../interaction/Pointer.js"),_=T(f),v=require("../layer/Vector.js"),y=T(v),E=require("../source/Vector.js"),g=T(E),m=require("../style/Style.js");function T(e){return e&&e.__esModule?e:{default:e}}var F={EXTENTCHANGED:"extentchanged"},O=function(e){function t(t){e.call(this,F.EXTENTCHANGED),this.extent=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(l.default),q=function(e){function n(t){e.call(this,{handleDownEvent:w,handleDragEvent:j,handleEvent:P,handleUpEvent:S});var n=t||{};this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,t||(t={}),this.extentOverlay_=new y.default({source:new g.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:M(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new y.default({source:new g.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:H(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&this.setExtent(t.extent)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.snapToVertex_=function(e,t){var n=t.getCoordinateFromPixel(e),r=this.getExtent();if(r){var i=V(r);i.sort(function(e,t){return(0,a.squaredDistanceToSegment)(n,e)-(0,a.squaredDistanceToSegment)(n,t)});var o=i[0],u=(0,a.closestOnSegment)(n,o),l=t.getPixelFromCoordinate(u);if((0,a.distance)(e,l)<=this.pixelTolerance_){var s=t.getPixelFromCoordinate(o[0]),p=t.getPixelFromCoordinate(o[1]),c=(0,a.squaredDistance)(l,s),d=(0,a.squaredDistance)(l,p),h=Math.sqrt(Math.min(c,d));return this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(u=c>d?o[1]:o[0]),u}}return null},n.prototype.handlePointerMove_=function(e){var t=e.pixel,n=e.map,r=this.snapToVertex_(t,n);r||(r=n.getCoordinateFromPixel(t)),this.createOrUpdatePointerFeature_(r)},n.prototype.createOrUpdateExtentFeature_=function(e){var n=this.extentFeature_;return n?e?n.setGeometry((0,x.fromExtent)(e)):n.setGeometry(void 0):(n=e?new t.default((0,x.fromExtent)(e)):new t.default({}),this.extentFeature_=n,this.extentOverlay_.getSource().addFeature(n)),n},n.prototype.createOrUpdatePointerFeature_=function(e){var n=this.vertexFeature_;n?n.getGeometry().setCoordinates(e):(n=new t.default(new h.default(e)),this.vertexFeature_=n,this.vertexOverlay_.getSource().addFeature(n));return n},n.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),e.prototype.setMap.call(this,t)},n.prototype.getExtent=function(){return this.extent_},n.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new O(this.extent_))},n}(_.default);function P(e){return!(e instanceof o.default)||(e.type!=r.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),f.handleEvent.call(this,e),!1)}function w(e){var t=e.pixel,n=e.map,r=this.getExtent(),i=this.snapToVertex_(t,n),o=function(e){var t=null,n=null;return e[0]==r[0]?t=r[2]:e[0]==r[2]&&(t=r[0]),e[1]==r[1]?n=r[3]:e[1]==r[3]&&(n=r[1]),null!==t&&null!==n?[t,n]:null};if(i&&r){var a=i[0]==r[0]||i[0]==r[2]?i[0]:null,u=i[1]==r[1]||i[1]==r[3]?i[1]:null;null!==a&&null!==u?this.pointerHandler_=C(o(i)):null!==a?this.pointerHandler_=D(o([a,r[1]]),o([a,r[3]])):null!==u&&(this.pointerHandler_=D(o([r[0],u]),o([r[2],u])))}else i=n.getCoordinateFromPixel(t),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=C(i);return!0}function j(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}return!0}function S(e){this.pointerHandler_=null;var t=this.getExtent();return t&&0!==(0,s.getArea)(t)||this.setExtent(null),!1}function M(){var e=(0,m.createEditingStyle)();return function(t,n){return e[c.default.POLYGON]}}function H(){var e=(0,m.createEditingStyle)();return function(t,n){return e[c.default.POINT]}}function C(e){return function(t){return(0,s.boundingExtent)([e,t])}}function D(e,t){return e[0]==t[0]?function(n){return(0,s.boundingExtent)([e,[n[0],t[1]]])}:e[1]==t[1]?function(n){return(0,s.boundingExtent)([e,[t[0],n[1]]])}:null}function V(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}exports.default=q;
},{"../Feature.js":"mYW9","../MapBrowserEventType.js":"Yh/D","../MapBrowserPointerEvent.js":"J1WQ","../coordinate.js":"nGsj","../events/Event.js":"fKNg","../extent.js":"QDir","../geom/GeometryType.js":"lmV0","../geom/Point.js":"gLcY","../geom/Polygon.js":"6Nww","../interaction/Pointer.js":"dnA2","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../style/Style.js":"1he4"}],"qrxo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModifyEvent=void 0;var e=require("../util.js"),t=require("../Collection.js"),r=O(t),i=require("../CollectionEventType.js"),n=O(i),s=require("../Feature.js"),o=O(s),a=require("../MapBrowserEventType.js"),u=O(a),h=require("../MapBrowserPointerEvent.js"),d=O(h),l=require("../array.js"),g=require("../coordinate.js"),_=require("../events.js"),p=require("../events/Event.js"),f=O(p),c=require("../events/EventType.js"),m=O(c),v=require("../events/condition.js"),y=require("../extent.js"),x=require("../geom/GeometryType.js"),E=O(x),C=require("../geom/Point.js"),S=O(C),F=require("../interaction/Pointer.js"),T=O(F),I=require("../layer/Vector.js"),P=O(I),G=require("../source/Vector.js"),M=O(G),w=require("../source/VectorEventType.js"),N=O(w),L=require("../structs/RBush.js"),R=O(L),q=require("../style/Style.js");function O(e){return e&&e.__esModule?e:{default:e}}var j=0,b=1,A={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},B=exports.ModifyEvent=function(e){function t(t,r,i){e.call(this,t),this.features=r,this.mapBrowserEvent=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(f.default),D=function(t){function i(e){var i;if(t.call(this,{handleDownEvent:V,handleDragEvent:k,handleEvent:W,handleUpEvent:Y}),this.condition_=e.condition?e.condition:v.primaryAction,this.defaultDeleteCondition_=function(e){return(0,v.altKeyOnly)(e)&&(0,v.singleClick)(e)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:v.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new R.default,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new P.default({source:new M.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:X(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,i=new r.default(this.source_.getFeatures()),(0,_.listen)(this.source_,N.default.ADDFEATURE,this.handleSourceAdd_,this),(0,_.listen)(this.source_,N.default.REMOVEFEATURE,this.handleSourceRemove_,this)):i=e.features,!i)throw new Error("The modify interaction requires features or a source");this.features_=i,this.features_.forEach(this.addFeature_.bind(this)),(0,_.listen)(this.features_,n.default.ADD,this.handleFeatureAdd_,this),(0,_.listen)(this.features_,n.default.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.addFeature_=function(e){var t=e.getGeometry();t&&t.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[t.getType()].call(this,e,t);var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),(0,_.listen)(e,m.default.CHANGE,this.handleFeatureChange_,this)},i.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new B(A.MODIFYSTART,this.features_,e)))},i.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),(0,_.unlisten)(e,m.default.CHANGE,this.handleFeatureChange_,this)},i.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var i=r.length-1;i>=0;--i)t.remove(r[i])},i.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},i.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},i.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},i.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},i.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},i.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},i.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},i.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),i={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)},i.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i){var s=r[i],o={feature:e,geometry:t,depth:[i],index:i,segment:[s,s]};this.rBush_.insert(t.getExtent(),o)}},i.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length-1;i<n;++i){var s=r.slice(i,i+2),o={feature:e,geometry:t,index:i,segment:s};this.rBush_.insert((0,y.boundingExtent)(s),o)}},i.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var s=r[i],o=0,a=s.length-1;o<a;++o){var u=s.slice(o,o+2),h={feature:e,geometry:t,depth:[i],index:o,segment:u};this.rBush_.insert((0,y.boundingExtent)(u),h)}},i.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var s=r[i],o=0,a=s.length-1;o<a;++o){var u=s.slice(o,o+2),h={feature:e,geometry:t,depth:[i],index:o,segment:u};this.rBush_.insert((0,y.boundingExtent)(u),h)}},i.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var s=r[i],o=0,a=s.length;o<a;++o)for(var u=s[o],h=0,d=u.length-1;h<d;++h){var l=u.slice(h,h+2),g={feature:e,geometry:t,depth:[o,i],index:h,segment:l};this.rBush_.insert((0,y.boundingExtent)(l),g)}},i.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter(),i={feature:e,geometry:t,index:j,segment:[r,r]},n={feature:e,geometry:t,index:b,segment:[r,r]},s=[i,n];i.featureSegments=n.featureSegments=s,this.rBush_.insert((0,y.createOrUpdateFromCoordinate)(r),i),this.rBush_.insert(t.getExtent(),n)},i.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),i=0;i<r.length;++i)this.SEGMENT_WRITERS_[r[i].getType()].call(this,e,r[i])},i.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new o.default(new S.default(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t));return t},i.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map)},i.prototype.handlePointerAtPixel_=function(t,r){var i=r.getCoordinateFromPixel(t),n=(0,y.buffer)((0,y.createOrUpdateFromCoordinate)(i),r.getView().getResolution()*this.pixelTolerance_),s=this.rBush_.getInExtent(n);if(s.length>0){s.sort(function(e,t){return K(i,e)-K(i,t)});var o=s[0],a=o.segment,u=H(i,o),h=r.getPixelFromCoordinate(u),d=(0,g.distance)(t,h);if(d<=this.pixelTolerance_){var l={};if(o.geometry.getType()===E.default.CIRCLE&&o.index===b)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u);else{var _=r.getPixelFromCoordinate(a[0]),p=r.getPixelFromCoordinate(a[1]),f=(0,g.squaredDistance)(h,_),c=(0,g.squaredDistance)(h,p);d=Math.sqrt(Math.min(f,c)),this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(u=f>c?a[1]:a[0]),this.createOrUpdateVertexFeature_(u);for(var m=1,v=s.length;m<v;++m){var x=s[m].segment;if(!((0,g.equals)(a[0],x[0])&&(0,g.equals)(a[1],x[1])||(0,g.equals)(a[0],x[1])&&(0,g.equals)(a[1],x[0])))break;l[(0,e.getUid)(x)]=!0}}return l[(0,e.getUid)(a)]=!0,void(this.vertexSegments_=l)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},i.prototype.insertVertex_=function(e,t){for(var r,i=e.segment,n=e.feature,s=e.geometry,o=e.depth,a=e.index;t.length<s.getStride();)t.push(0);switch(s.getType()){case E.default.MULTI_LINE_STRING:case E.default.POLYGON:(r=s.getCoordinates())[o[0]].splice(a+1,0,t);break;case E.default.MULTI_POLYGON:(r=s.getCoordinates())[o[1]][o[0]].splice(a+1,0,t);break;case E.default.LINE_STRING:(r=s.getCoordinates()).splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(s,r);var u=this.rBush_;u.remove(e),this.updateSegmentIndices_(s,a,o,1);var h={segment:[i[0],t],feature:n,geometry:s,depth:o,index:a};u.insert((0,y.boundingExtent)(h.segment),h),this.dragSegments_.push([h,1]);var d={segment:[t,i[1]],feature:n,geometry:s,depth:o,index:a+1};u.insert((0,y.boundingExtent)(d.segment),d),this.dragSegments_.push([d,0]),this.ignoreNextSingleClick_=!0},i.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=u.default.POINTERDRAG){var e=this.lastPointerEvent_;return this.willModifyFeatures_(e),this.removeVertex_(),this.dispatchEvent(new B(A.MODIFYEND,this.features_,e)),this.modified_=!1,!0}return!1},i.prototype.removeVertex_=function(){var t,r,i,n,s,o,a,u,h,d,l,g=this.dragSegments_,_={},p=!1;for(s=g.length-1;s>=0;--s)d=(i=g[s])[0],l=(0,e.getUid)(d.feature),d.depth&&(l+="-"+d.depth.join("-")),l in _||(_[l]={}),0===i[1]?(_[l].right=d,_[l].index=d.index):1==i[1]&&(_[l].left=d,_[l].index=d.index+1);for(l in _){switch(h=_[l].right,a=_[l].left,(u=(o=_[l].index)-1)<0&&(u=0),t=r=(n=(d=void 0!==a?a:h).geometry).getCoordinates(),p=!1,n.getType()){case E.default.MULTI_LINE_STRING:r[d.depth[0]].length>2&&(r[d.depth[0]].splice(o,1),p=!0);break;case E.default.LINE_STRING:r.length>2&&(r.splice(o,1),p=!0);break;case E.default.MULTI_POLYGON:t=t[d.depth[1]];case E.default.POLYGON:(t=t[d.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),p=!0,0===o&&(t.pop(),t.push(t[0]),u=t.length-1))}if(p){this.setGeometryCoordinates_(n,r);var f=[];if(void 0!==a&&(this.rBush_.remove(a),f.push(a.segment[0])),void 0!==h&&(this.rBush_.remove(h),f.push(h.segment[1])),void 0!==a&&void 0!==h){var c={depth:d.depth,feature:d.feature,geometry:d.geometry,index:u,segment:f};this.rBush_.insert((0,y.boundingExtent)(c.segment),c)}this.updateSegmentIndices_(n,o,d.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),g.length=0}}return p},i.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},i.prototype.updateSegmentIndices_=function(e,t,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(n){n.geometry===e&&(void 0===r||void 0===n.depth||(0,l.equals)(n.depth,r))&&n.index>t&&(n.index+=i)})},i}(T.default);function U(e,t){return e.index-t.index}function V(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var r=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var n=[],s=i.getGeometry().getCoordinates(),o=(0,y.boundingExtent)([s]),a=this.rBush_.getInExtent(o),u={};a.sort(U);for(var h=0,d=a.length;h<d;++h){var l=a[h],_=l.segment,p=(0,e.getUid)(l.feature),f=l.depth;if(f&&(p+="-"+f.join("-")),u[p]||(u[p]=new Array(2)),l.geometry.getType()===E.default.CIRCLE&&l.index===b){var c=H(r,l);(0,g.equals)(c,s)&&!u[p][0]&&(this.dragSegments_.push([l,0]),u[p][0]=l)}else if((0,g.equals)(_[0],s)&&!u[p][0])this.dragSegments_.push([l,0]),u[p][0]=l;else if((0,g.equals)(_[1],s)&&!u[p][1]){if((l.geometry.getType()===E.default.LINE_STRING||l.geometry.getType()===E.default.MULTI_LINE_STRING)&&u[p][0]&&0===u[p][0].index)continue;this.dragSegments_.push([l,1]),u[p][1]=l}else this.insertVertexCondition_(t)&&(0,e.getUid)(_)in this.vertexSegments_&&!u[p][0]&&!u[p][1]&&n.push([l,s])}n.length&&this.willModifyFeatures_(t);for(var m=n.length-1;m>=0;--m)this.insertVertex_.apply(this,n[m])}return!!this.vertexFeature_}function k(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,r=0,i=this.dragSegments_.length;r<i;++r){for(var n=this.dragSegments_[r],s=n[0],o=s.depth,a=s.geometry,u=void 0,h=s.segment,d=n[1];t.length<a.getStride();)t.push(h[d][t.length]);switch(a.getType()){case E.default.POINT:u=t,h[0]=h[1]=t;break;case E.default.MULTI_POINT:(u=a.getCoordinates())[s.index]=t,h[0]=h[1]=t;break;case E.default.LINE_STRING:(u=a.getCoordinates())[s.index+d]=t,h[d]=t;break;case E.default.MULTI_LINE_STRING:case E.default.POLYGON:(u=a.getCoordinates())[o[0]][s.index+d]=t,h[d]=t;break;case E.default.MULTI_POLYGON:(u=a.getCoordinates())[o[1]][o[0]][s.index+d]=t,h[d]=t;break;case E.default.CIRCLE:h[0]=h[1]=t,s.index===j?(this.changingFeature_=!0,a.setCenter(t),this.changingFeature_=!1):(this.changingFeature_=!0,a.setRadius((0,g.distance)(a.getCenter(),t)),this.changingFeature_=!1)}u&&this.setGeometryCoordinates_(a,u)}this.createOrUpdateVertexFeature_(t)}function Y(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],i=r.geometry;if(i.getType()===E.default.CIRCLE){var n=i.getCenter(),s=r.featureSegments[0],o=r.featureSegments[1];s.segment[0]=s.segment[1]=n,o.segment[0]=o.segment[1]=n,this.rBush_.update((0,y.createOrUpdateFromCoordinate)(n),s),this.rBush_.update(i.getExtent(),o)}else this.rBush_.update((0,y.boundingExtent)(r.segment),r)}return this.modified_&&(this.dispatchEvent(new B(A.MODIFYEND,this.features_,e)),this.modified_=!1),!1}function W(e){return!(e instanceof d.default)||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=u.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=u.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==u.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),F.handleEvent.call(this,e)&&!t);var t}function K(e,t){var r=t.geometry;if(r.getType()===E.default.CIRCLE){var i=r;if(t.index===b){var n=(0,g.squaredDistance)(i.getCenter(),e),s=Math.sqrt(n)-i.getRadius();return s*s}}return(0,g.squaredDistanceToSegment)(e,t.segment)}function H(e,t){var r=t.geometry;return r.getType()===E.default.CIRCLE&&t.index===b?r.getClosestPoint(e):(0,g.closestOnSegment)(e,t.segment)}function X(){var e=(0,q.createEditingStyle)();return function(t,r){return e[E.default.POINT]}}exports.default=D;
},{"../util.js":"KniQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../Feature.js":"mYW9","../MapBrowserEventType.js":"Yh/D","../MapBrowserPointerEvent.js":"J1WQ","../array.js":"luEr","../coordinate.js":"nGsj","../events.js":"55Uq","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../events/condition.js":"YcID","../extent.js":"QDir","../geom/GeometryType.js":"lmV0","../geom/Point.js":"gLcY","../interaction/Pointer.js":"dnA2","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../source/VectorEventType.js":"s8Fc","../structs/RBush.js":"MiUH","../style/Style.js":"1he4"}],"6SMG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util.js"),t=require("../CollectionEventType.js"),r=m(t),i=require("../array.js"),o=require("../events.js"),n=require("../events/Event.js"),a=m(n),s=require("../events/condition.js"),u=require("../functions.js"),l=require("../geom/GeometryType.js"),c=m(l),h=require("../interaction/Interaction.js"),d=m(h),f=require("../layer/Vector.js"),p=m(f),y=require("../obj.js"),_=require("../source/Vector.js"),v=m(_),g=require("../style/Style.js");function m(e){return e&&e.__esModule?e:{default:e}}var F={SELECT:"select"},E=function(e){function t(t,r,i,o){e.call(this,t),this.selected=r,this.deselected=i,this.mapBrowserEvent=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(a.default),C=function(t){function n(e){t.call(this,{handleEvent:T});var n=e||{};this.condition_=n.condition?n.condition:s.singleClick,this.addCondition_=n.addCondition?n.addCondition:s.never,this.removeCondition_=n.removeCondition?n.removeCondition:s.never,this.toggleCondition_=n.toggleCondition?n.toggleCondition:s.shiftKeyOnly,this.multi_=!!n.multi&&n.multi,this.filter_=n.filter?n.filter:u.TRUE,this.hitTolerance_=n.hitTolerance?n.hitTolerance:0;var a,l=new p.default({source:new v.default({useSpatialIndex:!1,features:n.features,wrapX:n.wrapX}),style:n.style?n.style:L(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=l,n.layers)if("function"==typeof n.layers)a=n.layers;else{var c=n.layers;a=function(e){return(0,i.includes)(c,e)}}else a=u.TRUE;this.layerFilter_=a,this.featureLayerAssociation_={};var h=this.featureOverlay_.getSource().getFeaturesCollection();(0,o.listen)(h,r.default.ADD,this.addFeature_,this),(0,o.listen)(h,r.default.REMOVE,this.removeFeature_,this)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.addFeatureLayerAssociation_=function(t,r){var i=(0,e.getUid)(t);this.featureLayerAssociation_[i]=r},n.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},n.prototype.getHitTolerance=function(){return this.hitTolerance_},n.prototype.getLayer=function(t){var r=(0,e.getUid)(t);return this.featureLayerAssociation_[r]},n.prototype.setHitTolerance=function(e){this.hitTolerance_=e},n.prototype.setMap=function(e){var r=this.getMap(),i=this.featureOverlay_.getSource().getFeaturesCollection();r&&i.forEach(r.unskipFeature.bind(r)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&i.forEach(e.skipFeature.bind(e))},n.prototype.addFeature_=function(e){var t=this.getMap();t&&t.skipFeature(e.element)},n.prototype.removeFeature_=function(e){var t=this.getMap();t&&t.unskipFeature(e.element)},n.prototype.removeFeatureLayerAssociation_=function(t){var r=(0,e.getUid)(t);delete this.featureLayerAssociation_[r]},n}(d.default);function T(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),r=this.removeCondition_(e),o=this.toggleCondition_(e),n=!t&&!r&&!o,a=e.map,u=this.featureOverlay_.getSource().getFeaturesCollection(),l=[],c=[];if(n){(0,y.clear)(this.featureLayerAssociation_),a.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return c.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var h=u.getLength()-1;h>=0;--h){var d=u.item(h),f=c.indexOf(d);f>-1?c.splice(f,1):(u.remove(d),l.push(d))}0!==c.length&&u.extend(c)}else{a.forEachFeatureAtPixel(e.pixel,function(e,n){if(this.filter_(e,n))return!t&&!o||(0,i.includes)(u.getArray(),e)?(r||o)&&(0,i.includes)(u.getArray(),e)&&(l.push(e),this.removeFeatureLayerAssociation_(e)):(c.push(e),this.addFeatureLayerAssociation_(e,n)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=l.length-1;p>=0;--p)u.remove(l[p]);u.extend(c)}return(c.length>0||l.length>0)&&this.dispatchEvent(new E(F.SELECT,c,l,e)),(0,s.pointerMove)(e)}function L(){var e=(0,g.createEditingStyle)();return(0,i.extend)(e[c.default.POLYGON],e[c.default.LINE_STRING]),(0,i.extend)(e[c.default.GEOMETRY_COLLECTION],e[c.default.LINE_STRING]),function(t,r){return t.getGeometry()?e[t.getGeometry().getType()]:null}}exports.default=C;
},{"../util.js":"KniQ","../CollectionEventType.js":"BTrx","../array.js":"luEr","../events.js":"55Uq","../events/Event.js":"fKNg","../events/condition.js":"YcID","../functions.js":"RgA2","../geom/GeometryType.js":"lmV0","../interaction/Interaction.js":"jB2p","../layer/Vector.js":"dflx","../obj.js":"mH6q","../source/Vector.js":"ZS12","../style/Style.js":"1he4"}],"NnGW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleEvent=C;var e=require("../util.js"),t=require("../Collection.js"),r=require("../CollectionEventType.js"),i=E(r),n=require("../coordinate.js"),o=require("../events.js"),s=require("../events/EventType.js"),a=E(s),u=require("../extent.js"),h=require("../functions.js"),l=require("../geom/GeometryType.js"),d=E(l),c=require("../geom/Polygon.js"),g=require("../interaction/Pointer.js"),_=E(g),p=require("../obj.js"),f=require("../source/Vector.js"),v=require("../source/VectorEventType.js"),y=E(v),m=require("../structs/RBush.js"),x=E(m);function E(e){return e&&e.__esModule?e:{default:e}}var F=function(r){function s(e){r.call(this,{handleEvent:C,handleDownEvent:h.TRUE,handleUpEvent:T,stopDown:h.FALSE});var t=e||{};this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.sortByDistance_=G.bind(this),this.rBush_=new x.default,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.addFeature=function(t,r){var i=void 0===r||r,n=(0,e.getUid)(t),s=t.getGeometry();if(s){var h=this.SEGMENT_WRITERS_[s.getType()];h&&(this.indexedFeaturesExtents_[n]=s.getExtent((0,u.createEmpty)()),h.call(this,t,s))}i&&(this.featureChangeListenerKeys_[n]=(0,o.listen)(t,a.default.CHANGE,this.handleFeatureChange_,this))},s.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},s.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},s.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},s.prototype.handleFeatureAdd_=function(e){var r;e instanceof f.VectorSourceEvent?r=e.feature:e instanceof t.CollectionEvent&&(r=e.element),this.addFeature(r)},s.prototype.handleFeatureRemove_=function(e){var r;e instanceof f.VectorSourceEvent?r=e.feature:e instanceof t.CollectionEvent&&(r=e.element),this.removeFeature(r)},s.prototype.handleFeatureChange_=function(t){var r=t.target;if(this.handlingDownUpSequence){var i=(0,e.getUid)(r);i in this.pendingFeatures_||(this.pendingFeatures_[i]=r)}else this.updateFeature_(r)},s.prototype.removeFeature=function(t,r){var i=void 0===r||r,n=(0,e.getUid)(t),s=this.indexedFeaturesExtents_[n];if(s){var a=this.rBush_,u=[];a.forEachInExtent(s,function(e){t===e.feature&&u.push(e)});for(var h=u.length-1;h>=0;--h)a.remove(u[h])}i&&((0,o.unlistenByKey)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},s.prototype.setMap=function(e){var t=this.getMap(),n=this.featuresListenerKeys_,s=this.getFeatures_();t&&(n.forEach(o.unlistenByKey),n.length=0,s.forEach(this.forEachFeatureRemove_.bind(this))),r.prototype.setMap.call(this,e),e&&(this.features_?n.push((0,o.listen)(this.features_,i.default.ADD,this.handleFeatureAdd_,this),(0,o.listen)(this.features_,i.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push((0,o.listen)(this.source_,y.default.ADDFEATURE,this.handleFeatureAdd_,this),(0,o.listen)(this.source_,y.default.REMOVEFEATURE,this.handleFeatureRemove_,this)),s.forEach(this.forEachFeatureAdd_.bind(this)))},s.prototype.snapTo=function(e,t,r){var i=r.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=r.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),s=(0,u.boundingExtent)([i,o]),a=this.rBush_.getInExtent(s);this.vertex_&&!this.edge_&&(a=a.filter(function(e){return e.feature.getGeometry().getType()!==d.default.CIRCLE}));var h,l,c,g,_=!1,p=null,f=null;if(a.length>0){this.pixelCoordinate_=t,a.sort(this.sortByDistance_);var v=a[0].segment,y=a[0].feature.getGeometry().getType()===d.default.CIRCLE;this.vertex_&&!this.edge_?(h=r.getPixelFromCoordinate(v[0]),l=r.getPixelFromCoordinate(v[1]),c=(0,n.squaredDistance)(e,h),g=(0,n.squaredDistance)(e,l),Math.sqrt(Math.min(c,g))<=this.pixelTolerance_&&(_=!0,p=c>g?v[1]:v[0],f=r.getPixelFromCoordinate(p))):this.edge_&&(p=y?(0,n.closestOnCircle)(t,a[0].feature.getGeometry()):(0,n.closestOnSegment)(t,v),f=r.getPixelFromCoordinate(p),(0,n.distance)(e,f)<=this.pixelTolerance_&&(_=!0,this.vertex_&&!y&&(h=r.getPixelFromCoordinate(v[0]),l=r.getPixelFromCoordinate(v[1]),c=(0,n.squaredDistance)(f,h),g=(0,n.squaredDistance)(f,l),Math.sqrt(Math.min(c,g))<=this.pixelTolerance_&&(p=c>g?v[1]:v[0],f=r.getPixelFromCoordinate(p))))),_&&(f=[Math.round(f[0]),Math.round(f[1])])}return{snapped:_,vertex:p,vertexPixel:f}},s.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},s.prototype.writeCircleGeometry_=function(e,t){for(var r=(0,c.fromCircle)(t).getCoordinates()[0],i=0,n=r.length-1;i<n;++i){var o=r.slice(i,i+2),s={feature:e,segment:o};this.rBush_.insert((0,u.boundingExtent)(o),s)}},s.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),i=0;i<r.length;++i){var n=this.SEGMENT_WRITERS_[r[i].getType()];n&&n.call(this,e,r[i])}},s.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length-1;i<n;++i){var o=r.slice(i,i+2),s={feature:e,segment:o};this.rBush_.insert((0,u.boundingExtent)(o),s)}},s.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),l={feature:e,segment:h};this.rBush_.insert((0,u.boundingExtent)(h),l)}},s.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i){var o=r[i],s={feature:e,segment:[o,o]};this.rBush_.insert(t.getExtent(),s)}},s.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length;s<a;++s)for(var h=o[s],l=0,d=h.length-1;l<d;++l){var c=h.slice(l,l+2),g={feature:e,segment:c};this.rBush_.insert((0,u.boundingExtent)(c),g)}},s.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),i={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)},s.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),l={feature:e,segment:h};this.rBush_.insert((0,u.boundingExtent)(h),l)}},s}(_.default);function C(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),g.handleEvent.call(this,e)}function T(e){var t=(0,p.getValues)(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}function G(e,t){return(0,n.squaredDistanceToSegment)(this.pixelCoordinate_,e.segment)-(0,n.squaredDistanceToSegment)(this.pixelCoordinate_,t.segment)}exports.default=F;
},{"../util.js":"KniQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../coordinate.js":"nGsj","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../functions.js":"RgA2","../geom/GeometryType.js":"lmV0","../geom/Polygon.js":"6Nww","../interaction/Pointer.js":"dnA2","../obj.js":"mH6q","../source/Vector.js":"ZS12","../source/VectorEventType.js":"s8Fc","../structs/RBush.js":"MiUH"}],"dAAZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranslateEvent=void 0;var t=require("../Collection.js"),e=p(t),r=require("../Object.js"),a=require("../events.js"),i=require("../events/Event.js"),n=p(i),s=require("../functions.js"),o=require("../array.js"),l=require("../interaction/Pointer.js"),u=p(l),h=require("../interaction/Property.js"),c=p(h);function p(t){return t&&t.__esModule?t:{default:t}}var f={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},d=exports.TranslateEvent=function(t){function e(e,r,a){t.call(this,e),this.features=r,this.coordinate=a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n.default),_=function(t){function e(e){t.call(this,{handleDownEvent:v,handleDragEvent:y,handleMoveEvent:g,handleUpEvent:T});var i,n=e||{};if(this.lastCoordinate_=null,this.features_=void 0!==n.features?n.features:null,n.layers)if("function"==typeof n.layers)i=n.layers;else{var l=n.layers;i=function(t){return(0,o.includes)(l,t)}}else i=s.TRUE;this.layerFilter_=i,this.hitTolerance_=n.hitTolerance?n.hitTolerance:0,this.lastFeature_=null,(0,a.listen)(this,(0,r.getChangeEventType)(c.default.ACTIVE),this.handleActiveChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||(0,o.includes)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(r)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(u.default);function v(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,g.call(this,t);var r=this.features_||new e.default([this.lastFeature_]);return this.dispatchEvent(new d(f.TRANSLATESTART,r,t.coordinate)),!0}return!1}function T(t){if(this.lastCoordinate_){this.lastCoordinate_=null,g.call(this,t);var r=this.features_||new e.default([this.lastFeature_]);return this.dispatchEvent(new d(f.TRANSLATEEND,r,t.coordinate)),!0}return!1}function y(t){if(this.lastCoordinate_){var r=t.coordinate,a=r[0]-this.lastCoordinate_[0],i=r[1]-this.lastCoordinate_[1],n=this.features_||new e.default([this.lastFeature_]);n.forEach(function(t){var e=t.getGeometry();e.translate(a,i),t.setGeometry(e)}),this.lastCoordinate_=r,this.dispatchEvent(new d(f.TRANSLATING,n,r))}}function g(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}exports.default=_;
},{"../Collection.js":"FnDa","../Object.js":"PhPh","../events.js":"55Uq","../events/Event.js":"fKNg","../functions.js":"RgA2","../array.js":"luEr","../interaction/Pointer.js":"dnA2","../interaction/Property.js":"caOi"}],"aMDX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Translate=exports.Snap=exports.Select=exports.Pointer=exports.PinchZoom=exports.PinchRotate=exports.MouseWheelZoom=exports.Modify=exports.KeyboardZoom=exports.KeyboardPan=exports.Interaction=exports.Extent=exports.Draw=exports.DragZoom=exports.DragRotateAndZoom=exports.DragRotate=exports.DragPan=exports.DragBox=exports.DragAndDrop=exports.DoubleClickZoom=void 0;var e=require("./interaction/DoubleClickZoom.js");Object.defineProperty(exports,"DoubleClickZoom",{enumerable:!0,get:function(){return K(e).default}});var t=require("./interaction/DragAndDrop.js");Object.defineProperty(exports,"DragAndDrop",{enumerable:!0,get:function(){return K(t).default}});var r=require("./interaction/DragBox.js");Object.defineProperty(exports,"DragBox",{enumerable:!0,get:function(){return K(r).default}});var o=require("./interaction/DragPan.js");Object.defineProperty(exports,"DragPan",{enumerable:!0,get:function(){return K(o).default}});var n=require("./interaction/DragRotate.js");Object.defineProperty(exports,"DragRotate",{enumerable:!0,get:function(){return K(n).default}});var a=require("./interaction/DragRotateAndZoom.js");Object.defineProperty(exports,"DragRotateAndZoom",{enumerable:!0,get:function(){return K(a).default}});var i=require("./interaction/DragZoom.js");Object.defineProperty(exports,"DragZoom",{enumerable:!0,get:function(){return K(i).default}});var u=require("./interaction/Draw.js");Object.defineProperty(exports,"Draw",{enumerable:!0,get:function(){return K(u).default}});var s=require("./interaction/Extent.js");Object.defineProperty(exports,"Extent",{enumerable:!0,get:function(){return K(s).default}});var d=require("./interaction/Interaction.js");Object.defineProperty(exports,"Interaction",{enumerable:!0,get:function(){return K(d).default}});var c=require("./interaction/KeyboardPan.js");Object.defineProperty(exports,"KeyboardPan",{enumerable:!0,get:function(){return K(c).default}});var l=require("./interaction/KeyboardZoom.js");Object.defineProperty(exports,"KeyboardZoom",{enumerable:!0,get:function(){return K(l).default}});var f=require("./interaction/Modify.js");Object.defineProperty(exports,"Modify",{enumerable:!0,get:function(){return K(f).default}});var p=require("./interaction/MouseWheelZoom.js");Object.defineProperty(exports,"MouseWheelZoom",{enumerable:!0,get:function(){return K(p).default}});var m=require("./interaction/PinchRotate.js");Object.defineProperty(exports,"PinchRotate",{enumerable:!0,get:function(){return K(m).default}});var b=require("./interaction/PinchZoom.js");Object.defineProperty(exports,"PinchZoom",{enumerable:!0,get:function(){return K(b).default}});var x=require("./interaction/Pointer.js");Object.defineProperty(exports,"Pointer",{enumerable:!0,get:function(){return K(x).default}});var g=require("./interaction/Select.js");Object.defineProperty(exports,"Select",{enumerable:!0,get:function(){return K(g).default}});var j=require("./interaction/Snap.js");Object.defineProperty(exports,"Snap",{enumerable:!0,get:function(){return K(j).default}});var D=require("./interaction/Translate.js");Object.defineProperty(exports,"Translate",{enumerable:!0,get:function(){return K(D).default}}),exports.defaults=A;var P=require("./Collection.js"),v=K(P),y=require("./Kinetic.js"),h=K(y),Z=K(e),q=K(o),O=K(n),R=K(i),w=K(c),k=K(l),M=K(p),S=K(m),z=K(b);function K(e){return e&&e.__esModule?e:{default:e}}function A(e){var t=e||{},r=new v.default,o=new h.default(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&r.push(new O.default),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&r.push(new Z.default({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&r.push(new q.default({kinetic:o})),(void 0===t.pinchRotate||t.pinchRotate)&&r.push(new S.default),(void 0===t.pinchZoom||t.pinchZoom)&&r.push(new z.default({constrainResolution:t.constrainResolution,duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(r.push(new w.default),r.push(new k.default({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&r.push(new M.default({constrainResolution:t.constrainResolution,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&r.push(new R.default({duration:t.zoomDuration})),r}
},{"./Collection.js":"FnDa","./Kinetic.js":"77gA","./interaction/DoubleClickZoom.js":"2NSa","./interaction/DragPan.js":"N4gU","./interaction/DragRotate.js":"PgBj","./interaction/DragZoom.js":"pTqW","./interaction/KeyboardPan.js":"CFRo","./interaction/KeyboardZoom.js":"7S8w","./interaction/MouseWheelZoom.js":"kPt6","./interaction/PinchRotate.js":"8hbG","./interaction/PinchZoom.js":"rcXm","./interaction/DragAndDrop.js":"IYO6","./interaction/DragBox.js":"AQ/R","./interaction/DragRotateAndZoom.js":"0/IT","./interaction/Draw.js":"5e7i","./interaction/Extent.js":"1o7b","./interaction/Interaction.js":"jB2p","./interaction/Modify.js":"qrxo","./interaction/Pointer.js":"dnA2","./interaction/Select.js":"6SMG","./interaction/Snap.js":"NnGW","./interaction/Translate.js":"dAAZ"}],"7f+F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.ERROR_THRESHOLD=.5,R=exports.ENABLE_RASTER_REPROJECTION=!0;
},{}],"E+B6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../events/Event.js"),e=o(t);function o(t){return t&&t.__esModule?t:{default:t}}var r=function(t){function e(e,o,r,n,s){t.call(this,e),this.vectorContext=o,this.frameState=r,this.context=n,this.glContext=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e.default);exports.default=r;
},{"../events/Event.js":"fKNg"}],"4LQ/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){};t.prototype.drawCustom=function(t,o,e){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,o){},t.prototype.drawFeature=function(t,o){},t.prototype.drawGeometryCollection=function(t,o){},t.prototype.drawLineString=function(t,o){},t.prototype.drawMultiLineString=function(t,o){},t.prototype.drawMultiPoint=function(t,o){},t.prototype.drawMultiPolygon=function(t,o){},t.prototype.drawPoint=function(t,o){},t.prototype.drawPolygon=function(t,o){},t.prototype.drawText=function(t,o){},t.prototype.setFillStrokeStyle=function(t,o){},t.prototype.setImageStyle=function(t,o){},t.prototype.setTextStyle=function(t,o){},exports.default=t;
},{}],"fo6K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../array.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),s=require("../../geom/GeometryType.js"),a=g(s),o=require("../../geom/SimpleGeometry.js"),l=require("../../geom/flat/transform.js"),n=require("../../has.js"),r=require("../VectorContext.js"),h=g(r),_=require("../canvas.js"),f=require("../../transform.js");function g(t){return t&&t.__esModule?t:{default:t}}var S=function(s){function r(t,e,i,a,o){s.call(this),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=a,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageSnapToPixel_=!1,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,f.create)()}return s&&(r.__proto__=s),r.prototype=Object.create(s&&s.prototype),r.prototype.constructor=r,r.prototype.drawImages_=function(t,e,i,s){if(this.image_){var a=(0,l.transform2D)(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,n=this.tmpLocalTransform_,r=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=r*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var _=0,g=a.length;_<g;_+=2){var S=a[_]-this.imageAnchorX_,x=a[_+1]-this.imageAnchorY_;if(this.imageSnapToPixel_&&(S=Math.round(S),x=Math.round(x)),0!==h||1!=this.imageScale_){var d=S+this.imageAnchorX_,m=x+this.imageAnchorY_;(0,f.compose)(n,d,m,this.imageScale_,this.imageScale_,h,-d,-m),o.setTransform.apply(o,n)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,S,x,this.imageWidth_,this.imageHeight_)}0===h&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=r)}},r.prototype.drawText_=function(t,e,i,s){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var a=(0,l.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,n=this.textRotation_;for(this.textRotateWithView_&&(n+=this.viewRotation_);e<i;e+=s){var r=a[e]+this.textOffsetX_,h=a[e+1]+this.textOffsetY_;if(0!==n||1!=this.textScale_){var _=(0,f.compose)(this.tmpLocalTransform_,r,h,this.textScale_,this.textScale_,n,-r,-h);o.setTransform.apply(o,_)}this.textStrokeState_&&o.strokeText(this.text_,r,h),this.textFillState_&&o.fillText(this.text_,r,h)}0===n&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},r.prototype.moveToLineTo_=function(t,e,i,s,a){var o=this.context_,n=(0,l.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(n[0],n[1]);var r=n.length;a&&(r-=2);for(var h=2;h<r;h+=2)o.lineTo(n[h],n[h+1]);return a&&o.closePath(),i},r.prototype.drawRings_=function(t,e,i,s){for(var a=0,o=i.length;a<o;++a)e=this.moveToLineTo_(t,e,i[a],s,!0);return e},r.prototype.drawCircle=function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,o.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),s=e[2]-e[0],a=e[3]-e[1],l=Math.sqrt(s*s+a*a),n=this.context_;n.beginPath(),n.arc(e[0],e[1],l,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},r.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},r.prototype.drawGeometry=function(t){switch(t.getType()){case a.default.POINT:this.drawPoint(t);break;case a.default.LINE_STRING:this.drawLineString(t);break;case a.default.POLYGON:this.drawPolygon(t);break;case a.default.MULTI_POINT:this.drawMultiPoint(t);break;case a.default.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case a.default.MULTI_POLYGON:this.drawMultiPolygon(t);break;case a.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case a.default.CIRCLE:this.drawCircle(t)}},r.prototype.drawFeature=function(t,e){var s=e.getGeometryFunction()(t);s&&(0,i.intersects)(this.extent_,s.getExtent())&&(this.setStyle(e),this.drawGeometry(s))},r.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])},r.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},r.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},r.prototype.drawLineString=function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,s=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(s,0,s.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}},r.prototype.drawMultiLineString=function(t){var e=t.getExtent();if((0,i.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var s=this.context_,a=t.getFlatCoordinates(),o=0,l=t.getEnds(),n=t.getStride();s.beginPath();for(var r=0,h=l.length;r<h;++r)o=this.moveToLineTo_(a,o,l[r],n,!1);s.stroke()}if(""!==this.text_){var _=t.getFlatMidpoints();this.drawText_(_,0,_.length,2)}}},r.prototype.drawPolygon=function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var s=t.getFlatInteriorPoint();this.drawText_(s,0,2,2)}}},r.prototype.drawMultiPolygon=function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,s=t.getOrientedFlatCoordinates(),a=0,o=t.getEndss(),l=t.getStride();e.beginPath();for(var n=0,r=o.length;n<r;++n){var h=o[n];a=this.drawRings_(s,a,h,l)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var _=t.getFlatInteriorPoints();this.drawText_(_,0,_.length,2)}}},r.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},r.prototype.setContextStrokeState_=function(e){var i=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=e.lineCap&&(s.lineCap=i.lineCap=e.lineCap),n.CANVAS_LINE_DASH&&((0,t.equals)(s.lineDash,e.lineDash)||i.setLineDash(s.lineDash=e.lineDash),s.lineDashOffset!=e.lineDashOffset&&(s.lineDashOffset=i.lineDashOffset=e.lineDashOffset)),s.lineJoin!=e.lineJoin&&(s.lineJoin=i.lineJoin=e.lineJoin),s.lineWidth!=e.lineWidth&&(s.lineWidth=i.lineWidth=e.lineWidth),s.miterLimit!=e.miterLimit&&(s.miterLimit=i.miterLimit=e.miterLimit),s.strokeStyle!=e.strokeStyle&&(s.strokeStyle=i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,n.CANVAS_LINE_DASH&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})},r.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:_.defaultTextAlign;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=s&&(i.textAlign=e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})},r.prototype.setFillStrokeStyle=function(t,i){if(t){var s=t.getColor();this.fillState_={fillStyle:(0,e.asColorLike)(s||_.defaultFillStyle)}}else this.fillState_=null;if(i){var a=i.getColor(),o=i.getLineCap(),l=i.getLineDash(),n=i.getLineDashOffset(),r=i.getLineJoin(),h=i.getWidth(),f=i.getMiterLimit();this.strokeState_={lineCap:void 0!==o?o:_.defaultLineCap,lineDash:l||_.defaultLineDash,lineDashOffset:n||_.defaultLineDashOffset,lineJoin:void 0!==r?r:_.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==h?h:_.defaultLineWidth),miterLimit:void 0!==f?f:_.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(a||_.defaultStrokeStyle)}}else this.strokeState_=null},r.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),s=t.getOrigin(),a=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=a[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageSnapToPixel_=t.getSnapToPixel(),this.imageWidth_=a[0]}else this.image_=null},r.prototype.setTextStyle=function(t){if(t){var i=t.getFill();if(i){var s=i.getColor();this.textFillState_={fillStyle:(0,e.asColorLike)(s||_.defaultFillStyle)}}else this.textFillState_=null;var a=t.getStroke();if(a){var o=a.getColor(),l=a.getLineCap(),n=a.getLineDash(),r=a.getLineDashOffset(),h=a.getLineJoin(),f=a.getWidth(),g=a.getMiterLimit();this.textStrokeState_={lineCap:void 0!==l?l:_.defaultLineCap,lineDash:n||_.defaultLineDash,lineDashOffset:r||_.defaultLineDashOffset,lineJoin:void 0!==h?h:_.defaultLineJoin,lineWidth:void 0!==f?f:_.defaultLineWidth,miterLimit:void 0!==g?g:_.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(o||_.defaultStrokeStyle)}}else this.textStrokeState_=null;var S=t.getFont(),x=t.getOffsetX(),d=t.getOffsetY(),m=t.getRotateWithView(),c=t.getRotation(),p=t.getScale(),u=t.getText(),y=t.getTextAlign(),k=t.getTextBaseline();this.textState_={font:void 0!==S?S:_.defaultFont,textAlign:void 0!==y?y:_.defaultTextAlign,textBaseline:void 0!==k?k:_.defaultTextBaseline},this.text_=void 0!==u?u:"",this.textOffsetX_=void 0!==x?this.pixelRatio_*x:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==m&&m,this.textRotation_=void 0!==c?c:0,this.textScale_=this.pixelRatio_*(void 0!==p?p:1)}else this.text_=""},r}(h.default);exports.default=S;
},{"../../array.js":"luEr","../../colorlike.js":"V5+X","../../extent.js":"QDir","../../geom/GeometryType.js":"lmV0","../../geom/SimpleGeometry.js":"pnrv","../../geom/flat/transform.js":"LGwr","../../has.js":"f3Nv","../VectorContext.js":"4LQ/","../canvas.js":"iAG7","../../transform.js":"P4eA"}],"6V0o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shared=void 0;var e=require("../color.js"),t=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function i(t,i,c){return i+":"+t+":"+(c?(0,e.asString)(c):"null")}t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var e=0;for(var t in this.cache_){var i=this.cache_[t];0!=(3&e++)||i.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}},t.prototype.get=function(e,t,c){var h=i(e,t,c);return h in this.cache_?this.cache_[h]:null},t.prototype.set=function(e,t,c,h){var r=i(e,t,c);this.cache_[r]=h,++this.cacheSize_},t.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},exports.default=t;var c=exports.shared=new t;
},{"../color.js":"eucy"}],"8oIh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sortByZIndex=h;var e=require("../util.js"),r=require("../Disposable.js"),t=l(r),n=require("../events.js"),o=require("../events/EventType.js"),s=l(o),i=require("../extent.js"),a=require("../functions.js"),u=require("../layer/Layer.js"),y=require("../style/IconImageCache.js"),d=require("../transform.js");function l(e){return e&&e.__esModule?e:{default:e}}var p=function(r){function t(e){r.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.registerLayerRenderers=function(e){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,e)},t.prototype.getLayerRendererConstructors=function(){return this.layerRendererConstructors_},t.prototype.calculateMatrices2D=function(e){var r=e.viewState,t=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;(0,d.compose)(t,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),(0,d.invert)((0,d.setFromArray)(n,t))},t.prototype.removeLayerRenderers=function(){for(var e in this.layerRenderers_)this.removeLayerRendererByKey_(e).dispose()},t.prototype.forEachFeatureAtCoordinate=function(r,t,n,o,s,a,y){var d,l=t.viewState,p=l.resolution;function c(r,n){var i=(0,e.getUid)(r).toString(),a=t.layerStates[(0,e.getUid)(n)].managed;if(!(i in t.skippedFeatureUids)||a)return o.call(s,r,a?n:null)}var h=l.projection,f=r;if(h.canWrapX()){var R=h.getExtent(),_=(0,i.getWidth)(R),v=r[0];if(v<R[0]||v>R[2])f=[v+_*Math.ceil((R[0]-v)/_),r[1]]}var g,L=t.layerStatesArray;for(g=L.length-1;g>=0;--g){var m=L[g],C=m.layer;if((0,u.visibleAtResolution)(m,p)&&a.call(y,C)){var x=this.getLayerRenderer(C);if(C.getSource()&&(d=x.forEachFeatureAtCoordinate(C.getSource().getWrapX()?f:r,t,n,c,s)),d)return d}}},t.prototype.forEachLayerAtPixel=function(e,r,t,n,o,s,i){},t.prototype.hasFeatureAtCoordinate=function(e,r,t,n,o){return void 0!==this.forEachFeatureAtCoordinate(e,r,t,a.TRUE,this,n,o)},t.prototype.getLayerRenderer=function(r){var t=(0,e.getUid)(r).toString();if(t in this.layerRenderers_)return this.layerRenderers_[t];for(var o,i=0,a=this.layerRendererConstructors_.length;i<a;++i){var u=this.layerRendererConstructors_[i];if(u.handles(r)){o=u.create(this,r);break}}if(!o)throw new Error("Unable to create renderer for layer: "+r.getType());return this.layerRenderers_[t]=o,this.layerRendererListeners_[t]=(0,n.listen)(o,s.default.CHANGE,this.handleLayerRendererChange_,this),o},t.prototype.getLayerRendererByKey=function(e){return this.layerRenderers_[e]},t.prototype.getLayerRenderers=function(){return this.layerRenderers_},t.prototype.getMap=function(){return this.map_},t.prototype.handleLayerRendererChange_=function(){this.map_.render()},t.prototype.removeLayerRendererByKey_=function(e){var r=this.layerRenderers_[e];return delete this.layerRenderers_[e],(0,n.unlistenByKey)(this.layerRendererListeners_[e]),delete this.layerRendererListeners_[e],r},t.prototype.removeUnusedLayerRenderers_=function(e,r){for(var t in this.layerRenderers_)r&&t in r.layerStates||this.removeLayerRendererByKey_(t).dispose()},t.prototype.scheduleExpireIconCache=function(e){e.postRenderFunctions.push(c)},t.prototype.scheduleRemoveUnusedLayerRenderers=function(e){for(var r in this.layerRenderers_)if(!(r in e.layerStates))return void e.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},t}(t.default);function c(e,r){y.shared.expire()}function h(e,r){return e.zIndex-r.zIndex}p.prototype.renderFrame=a.UNDEFINED,exports.default=p;
},{"../util.js":"KniQ","../Disposable.js":"DDda","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../functions.js":"RgA2","../layer/Layer.js":"GCgv","../style/IconImageCache.js":"6V0o","../transform.js":"P4eA"}],"vJhp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.layerRendererConstructors=void 0;var e=require("../../transform.js"),t=require("../../array.js"),r=require("../../css.js"),s=require("../../dom.js"),a=require("../../layer/Layer.js"),i=require("../../render/Event.js"),o=_(i),n=require("../../render/EventType.js"),c=_(n),l=require("../../render/canvas.js"),h=require("../../render/canvas/Immediate.js"),d=_(h),u=require("../Map.js"),p=_(u),v=require("../../source/State.js"),y=_(v);function _(e){return e&&e.__esModule?e:{default:e}}var f=exports.layerRendererConstructors=[],m=function(i){function n(t){i.call(this,t);var a=t.getViewport();this.context_=(0,s.createCanvasContext2D)(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=r.CLASS_UNSELECTABLE,a.insertBefore(this.canvas_,a.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=(0,e.create)()}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n.prototype.dispatchComposeEvent_=function(e,t){var r=this.getMap(),s=this.context_;if(r.hasListener(e)){var a=t.extent,i=t.pixelRatio,n=t.viewState.rotation,c=this.getTransform(t),l=new d.default(s,i,a,c,n),h=new o.default(e,l,t,s,null);r.dispatchEvent(h)}},n.prototype.getTransform=function(t){var r=t.viewState,s=this.canvas_.width/2,a=this.canvas_.height/2,i=t.pixelRatio/r.resolution,o=-i,n=-r.rotation,c=-r.center[0],l=-r.center[1];return(0,e.compose)(this.transform_,s,a,i,o,n,c,l)},n.prototype.renderFrame=function(e){if(e){var r=this.context_,s=e.pixelRatio,i=Math.round(e.size[0]*s),o=Math.round(e.size[1]*s);this.canvas_.width!=i||this.canvas_.height!=o?(this.canvas_.width=i,this.canvas_.height=o):r.clearRect(0,0,i,o);var n=e.viewState.rotation;this.calculateMatrices2D(e),this.dispatchComposeEvent_(c.default.PRECOMPOSE,e);var h=e.layerStatesArray;(0,t.stableSort)(h,u.sortByZIndex),n&&(r.save(),(0,l.rotateAtOffset)(r,n,i/2,o/2));var d,p,v,_,f,m=e.viewState.resolution;for(d=0,p=h.length;d<p;++d)v=(f=h[d]).layer,_=this.getLayerRenderer(v),(0,a.visibleAtResolution)(f,m)&&f.sourceState==y.default.READY&&_.prepareFrame(e,f)&&_.composeFrame(e,f,r);n&&r.restore(),this.dispatchComposeEvent_(c.default.POSTCOMPOSE,e),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(e),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},n.prototype.forEachLayerAtPixel=function(t,r,s,i,o,n,c){var l,h,d=r.viewState.resolution,u=r.layerStatesArray,p=u.length,v=(0,e.apply)(r.pixelToCoordinateTransform,t.slice());for(h=p-1;h>=0;--h){var y=u[h],_=y.layer;if((0,a.visibleAtResolution)(y,d)&&n.call(c,_))if(l=this.getLayerRenderer(_).forEachLayerAtCoordinate(v,r,s,i,o))return l}},n.prototype.registerLayerRenderers=function(e){i.prototype.registerLayerRenderers.call(this,e);for(var r=0,s=e.length;r<s;++r){var a=e[r];(0,t.includes)(f,a)||f.push(a)}},n}(p.default);exports.default=m;
},{"../../transform.js":"P4eA","../../array.js":"luEr","../../css.js":"HgMV","../../dom.js":"Xno5","../../layer/Layer.js":"GCgv","../../render/Event.js":"E+B6","../../render/EventType.js":"z39m","../../render/canvas.js":"iAG7","../../render/canvas/Immediate.js":"fo6K","../Map.js":"8oIh","../../source/State.js":"iC8j"}],"fpOz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util.js"),t=require("../ImageState.js"),r=f(t),i=require("../Observable.js"),o=f(i),n=require("../TileState.js"),a=f(n),u=require("../events.js"),d=require("../events/EventType.js"),l=f(d),s=require("../functions.js"),p=require("../source/State.js"),c=f(p);function f(e){return e&&e.__esModule?e:{default:e}}var g=function(t){function i(e){t.call(this),this.layer_=e}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.createLoadedTileFinder=function(e,t,r){return function(i,o){return e.forEachLoadedTile(t,i,o,function(e){r[i]||(r[i]={}),r[i][e.tileCoord.toString()]=e})}},i.prototype.getLayer=function(){return this.layer_},i.prototype.handleImageChange_=function(e){e.target.getState()===r.default.LOADED&&this.renderIfReadyAndVisible()},i.prototype.loadImage=function(e){var t=e.getState();return t!=r.default.LOADED&&t!=r.default.ERROR&&(0,u.listen)(e,l.default.CHANGE,this.handleImageChange_,this),t==r.default.IDLE&&(e.load(),t=e.getState()),t==r.default.LOADED},i.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e.getVisible()&&e.getSourceState()==c.default.READY&&this.changed()},i.prototype.scheduleExpireCache=function(t,r){if(r.canExpireCache()){var i=function(t,r,i){var o=(0,e.getUid)(t).toString();o in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[o])}.bind(null,r);t.postRenderFunctions.push(i)}},i.prototype.updateUsedTiles=function(t,r,i,o){var n=(0,e.getUid)(r).toString(),a=i.toString();n in t?a in t[n]?t[n][a].extend(o):t[n][a]=o:(t[n]={},t[n][a]=o)},i.prototype.manageTilePyramid=function(t,r,i,o,n,u,d,l,s,p){var c=(0,e.getUid)(r).toString();c in t.wantedTiles||(t.wantedTiles[c]={});var f,g,y,h,E,v,S=t.wantedTiles[c],T=t.tileQueue;for(v=i.getMinZoom();v<=d;++v)for(g=i.getTileRangeForExtentAndZ(u,v,g),y=i.getResolution(v),h=g.minX;h<=g.maxX;++h)for(E=g.minY;E<=g.maxY;++E)d-v<=l?((f=r.getTile(v,h,E,o,n)).getState()==a.default.IDLE&&(S[f.getKey()]=!0,T.isKeyQueued(f.getKey())||T.enqueue([f,c,i.getTileCoordCenter(f.tileCoord),y])),void 0!==s&&s.call(p,f)):r.useTile(v,h,E,n)},i}(o.default);g.prototype.forEachFeatureAtCoordinate=s.UNDEFINED,g.prototype.hasFeatureAtCoordinate=s.FALSE,exports.default=g;
},{"../util.js":"KniQ","../ImageState.js":"u3k+","../Observable.js":"8IdS","../TileState.js":"Xz9x","../events.js":"55Uq","../events/EventType.js":"C8cu","../functions.js":"RgA2","../source/State.js":"iC8j"}],"+vPf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../extent.js"),t=require("../../functions.js"),o=require("../../render/Event.js"),r=l(o),i=require("../../render/EventType.js"),n=l(i),a=require("../../render/canvas.js"),s=require("../../render/canvas/Immediate.js"),p=l(s),f=require("../Layer.js"),u=l(f),c=require("../../transform.js");function l(e){return e&&e.__esModule?e:{default:e}}var d=function(o){function i(e){o.call(this,e),this.renderedResolution,this.transform_=(0,c.create)()}return o&&(i.__proto__=o),i.prototype=Object.create(o&&o.prototype),i.prototype.constructor=i,i.prototype.clip=function(t,o,r){var i=o.pixelRatio,n=o.size[0]*i,s=o.size[1]*i,p=o.viewState.rotation,f=(0,e.getTopLeft)(r),u=(0,e.getTopRight)(r),l=(0,e.getBottomRight)(r),d=(0,e.getBottomLeft)(r);(0,c.apply)(o.coordinateToPixelTransform,f),(0,c.apply)(o.coordinateToPixelTransform,u),(0,c.apply)(o.coordinateToPixelTransform,l),(0,c.apply)(o.coordinateToPixelTransform,d),t.save(),(0,a.rotateAtOffset)(t,-p,n/2,s/2),t.beginPath(),t.moveTo(f[0]*i,f[1]*i),t.lineTo(u[0]*i,u[1]*i),t.lineTo(l[0]*i,l[1]*i),t.lineTo(d[0]*i,d[1]*i),t.clip(),(0,a.rotateAtOffset)(t,p,n/2,s/2)},i.prototype.dispatchComposeEvent_=function(e,t,o,i){var n=this.getLayer();if(n.hasListener(e)){var s=o.size[0]*o.pixelRatio,f=o.size[1]*o.pixelRatio,u=o.viewState.rotation;(0,a.rotateAtOffset)(t,-u,s/2,f/2);var c=void 0!==i?i:this.getTransform(o,0),l=new p.default(t,o.pixelRatio,o.extent,c,o.viewState.rotation),d=new r.default(e,l,o,t,null);n.dispatchEvent(d),(0,a.rotateAtOffset)(t,u,s/2,f/2)}},i.prototype.forEachLayerAtCoordinate=function(e,o,r,i,n){return this.forEachFeatureAtCoordinate(e,o,r,t.TRUE,this)?i.call(n,this.getLayer(),null):void 0},i.prototype.postCompose=function(e,t,o,r){this.dispatchComposeEvent_(n.default.POSTCOMPOSE,e,t,r)},i.prototype.preCompose=function(e,t,o){this.dispatchComposeEvent_(n.default.PRECOMPOSE,e,t,o)},i.prototype.dispatchRenderEvent=function(e,t,o){this.dispatchComposeEvent_(n.default.RENDER,e,t,o)},i.prototype.getTransform=function(e,t){var o=e.viewState,r=e.pixelRatio,i=r*e.size[0]/2,n=r*e.size[1]/2,a=r/o.resolution,s=-a,p=-o.rotation,f=-o.center[0]+t,u=-o.center[1];return(0,c.compose)(this.transform_,i,n,a,s,p,f,u)},i.prototype.composeFrame=function(e,t,o){},i.prototype.prepareFrame=function(e,t){},i}(u.default);exports.default=d;
},{"../../extent.js":"QDir","../../functions.js":"RgA2","../../render/Event.js":"E+B6","../../render/EventType.js":"z39m","../../render/canvas.js":"iAG7","../../render/canvas/Immediate.js":"fo6K","../Layer.js":"fpOz","../../transform.js":"P4eA"}],"F9m+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../coordinate.js"),e=require("../../dom.js"),r=require("../../extent.js"),a=require("../../functions.js"),o=require("../canvas/Layer.js"),i=s(o),n=require("../../transform.js");function s(t){return t&&t.__esModule?t:{default:t}}var h=function(o){function i(t){o.call(this,t),this.coordinateToCanvasPixelTransform=(0,n.create)(),this.hitCanvasContext_=null}return o&&(i.__proto__=o),i.prototype=Object.create(o&&o.prototype),i.prototype.constructor=i,i.prototype.composeFrame=function(t,e,a){this.preCompose(a,t);var o=this.getImage();if(o){var i=e.extent,n=void 0!==i&&!(0,r.containsExtent)(i,t.extent)&&(0,r.intersects)(i,t.extent);n&&this.clip(a,t,i);var s=this.getImageTransform(),h=a.globalAlpha;a.globalAlpha=e.opacity;var u=s[4],c=s[5],p=o.width*s[0],l=o.height*s[3];a.drawImage(o,0,0,+o.width,+o.height,Math.round(u),Math.round(c),Math.round(p),Math.round(l)),a.globalAlpha=h,n&&a.restore()}this.postCompose(a,t,e)},i.prototype.getImage=function(){},i.prototype.getImageTransform=function(){},i.prototype.forEachFeatureAtCoordinate=function(t,e,r,a,o){var i=this.getLayer(),n=i.getSource(),s=e.viewState.resolution,h=e.viewState.rotation,u=e.skippedFeatureUids;return n.forEachFeatureAtCoordinate(t,s,h,r,u,function(t){return a.call(o,t,i)})},i.prototype.forEachLayerAtCoordinate=function(r,i,s,h,u){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==a.UNDEFINED)return o.prototype.forEachLayerAtCoordinate.apply(this,arguments);var c=(0,n.apply)(this.coordinateToCanvasPixelTransform,r.slice());(0,t.scale)(c,i.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=(0,e.createCanvasContext2D)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),c[0],c[1],1,1,0,0,1,1);var p=this.hitCanvasContext_.getImageData(0,0,1,1).data;return p[3]>0?h.call(u,this.getLayer(),p):void 0}},i}(i.default);exports.default=h;
},{"../../coordinate.js":"nGsj","../../dom.js":"Xno5","../../extent.js":"QDir","../../functions.js":"RgA2","../canvas/Layer.js":"+vPf","../../transform.js":"P4eA"}],"rz/N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../reproj/common.js"),t=require("../../ImageCanvas.js"),r=m(t),i=require("../../LayerType.js"),o=m(i),a=require("../../ViewHint.js"),s=m(a),n=require("../../array.js"),u=require("../../extent.js"),p=require("../../layer/VectorRenderType.js"),c=m(p),d=require("../../obj.js"),l=require("./Map.js"),g=require("./IntermediateCanvas.js"),h=m(g),f=require("../../transform.js");function m(e){return e&&e.__esModule?e:{default:e}}var _=function(t){function i(e){if(t.call(this,e),this.image_=null,this.imageTransform_=(0,f.create)(),this.skippedFeatures_=[],this.vectorRenderer_=null,e.getType()===o.default.VECTOR)for(var r=0,a=l.layerRendererConstructors.length;r<a;++r){var s=l.layerRendererConstructors[r];if(s!==i&&s.handles(e)){this.vectorRenderer_=new s(e);break}}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},i.prototype.getImage=function(){return this.image_?this.image_.getImage():null},i.prototype.getImageTransform=function(){return this.imageTransform_},i.prototype.prepareFrame=function(t,i){var o,a=t.pixelRatio,p=t.size,c=t.viewState,l=c.center,g=c.resolution,h=this.getLayer().getSource(),m=t.viewHints,_=this.vectorRenderer_,v=t.extent;if(_||void 0===i.extent||(v=(0,u.getIntersection)(v,i.extent)),!m[s.default.ANIMATING]&&!m[s.default.INTERACTING]&&!(0,u.isEmpty)(v)){var y=c.projection;if(!e.ENABLE_RASTER_REPROJECTION){var R=h.getProjection();R&&(y=R)}var j=this.skippedFeatures_;if(_){var T=_.context,I=(0,d.assign)({},t,{size:[(0,u.getWidth)(v)/g,(0,u.getHeight)(v)/g],viewState:(0,d.assign)({},t.viewState,{rotation:0})}),E=Object.keys(I.skippedFeatureUids).sort();o=new r.default(v,g,a,T.canvas,function(e){!_.prepareFrame(I,i)||!_.replayGroupChanged&&(0,n.equals)(j,E)||(T.canvas.width=I.size[0]*a,T.canvas.height=I.size[1]*a,_.compose(T,I,i),j=E,e())})}else o=h.getImage(v,g,a,y);o&&this.loadImage(o)&&(this.image_=o,this.skippedFeatures_=j)}if(this.image_){var C=(o=this.image_).getExtent(),q=o.getResolution(),x=o.getPixelRatio(),A=a*q/(g*x),w=(0,f.compose)(this.imageTransform_,a*p[0]/2,a*p[1]/2,A,A,0,x*(C[0]-l[0])/q,x*(l[1]-C[3])/q);(0,f.compose)(this.coordinateToCanvasPixelTransform,a*p[0]/2-w[4],a*p[1]/2-w[5],a/g,-a/g,0,-l[0],-l[1]),this.renderedResolution=q*a/x}return!!this.image_},i.prototype.forEachFeatureAtCoordinate=function(e,r,i,o,a){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,r,i,o,a):t.prototype.forEachFeatureAtCoordinate.call(this,e,r,i,o,a)},i}(h.default);_.handles=function(e){return e.getType()===o.default.IMAGE||e.getType()===o.default.VECTOR&&e.getRenderMode()===c.default.IMAGE},_.create=function(e,t){return new _(t)},exports.default=_;
},{"../../reproj/common.js":"7f+F","../../ImageCanvas.js":"K7j2","../../LayerType.js":"8+bQ","../../ViewHint.js":"cuLW","../../array.js":"luEr","../../extent.js":"QDir","../../layer/VectorRenderType.js":"oqAD","../../obj.js":"mH6q","./Map.js":"vJhp","./IntermediateCanvas.js":"F9m+","../../transform.js":"P4eA"}],"346s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=i;var t=function(t,i,n,m){this.minX=t,this.maxX=i,this.minY=n,this.maxY=m};function i(i,n,m,e,s){return void 0!==s?(s.minX=i,s.maxX=n,s.minY=m,s.maxY=e,s):new t(i,n,m,e)}t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},exports.default=t;
},{}],"hkM/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../util.js"),t=require("../../LayerType.js"),i=T(t),r=require("../../TileRange.js"),n=T(r),s=require("../../TileState.js"),o=T(s),a=require("../../ViewHint.js"),l=T(a),d=require("../../dom.js"),h=require("../../extent.js"),u=require("../canvas/IntermediateCanvas.js"),g=T(u),c=require("../../transform.js");function T(e){return e&&e.__esModule?e:{default:e}}var p=function(t){function i(e,i){t.call(this,e),this.context=i?null:(0,d.createCanvasContext2D)(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,h.createEmpty)(),this.tmpTileRange_=new n.default(0,0,0,0),this.imageTransform_=(0,c.create)(),this.zDirection=0}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.isDrawableTile_=function(e){var t=e.getState(),i=this.getLayer().getUseInterimTilesOnError();return t==o.default.LOADED||t==o.default.EMPTY||t==o.default.ERROR&&!i},i.prototype.getTile=function(e,t,i,r,n){var s=this.getLayer(),a=s.getSource().getTile(e,t,i,r,n);return a.getState()==o.default.ERROR&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(o.default.LOADED)),this.isDrawableTile_(a)||(a=a.getInterimTile()),a},i.prototype.prepareFrame=function(t,i){var r=t.pixelRatio,n=t.size,s=t.viewState,a=s.projection,d=s.resolution,u=s.center,g=this.getLayer(),T=g.getSource(),p=T.getRevision(),f=T.getTileGridForProjection(a),m=f.getZForResolution(d,this.zDirection),v=f.getResolution(m),x=Math.round(d/v)||1,_=t.extent;if(void 0!==i.extent&&(_=(0,h.getIntersection)(_,i.extent)),(0,h.isEmpty)(_))return!1;var R=f.getTileRangeForExtentAndZ(_,m),E=f.getTileRangeExtent(m,R),y=T.getTilePixelRatio(r),w={};w[m]={};var I,j,C,D=this.createLoadedTileFinder(T,a,w),S=t.viewHints,L=S[l.default.ANIMATING]||S[l.default.INTERACTING],O=this.tmpExtent,q=this.tmpTileRange_;for(this.newTiles_=!1,j=R.minX;j<=R.maxX;++j)for(C=R.minY;C<=R.maxY;++C)if(!(Date.now()-t.time>16&&L)){if(I=this.getTile(m,j,C,r,a),this.isDrawableTile_(I)){var A=(0,e.getUid)(this);if(I.getState()==o.default.LOADED){w[m][I.tileCoord.toString()]=I;var P=I.inTransition(A);this.newTiles_||!P&&-1!==this.renderedTiles.indexOf(I)||(this.newTiles_=!0)}if(1===I.getAlpha(A,t.time))continue}var b=f.getTileCoordChildTileRange(I.tileCoord,q,O),M=!1;b&&(M=D(m+1,b)),M||f.forEachTileCoordParentTileRange(I.tileCoord,D,null,q,O)}var z=v*r/y*x;if(!(this.renderedResolution&&Date.now()-t.time>16&&L)&&(this.newTiles_||!this.renderedExtent_||!(0,h.containsExtent)(this.renderedExtent_,_)||this.renderedRevision!=p||x!=this.oversampling_||!L&&z!=this.renderedResolution)){var F=this.context;if(F){var N=T.getTilePixelSize(m,r,a),U=Math.round(R.getWidth()*N[0]/x),G=Math.round(R.getHeight()*N[1]/x),H=F.canvas;H.width!=U||H.height!=G?(this.oversampling_=x,H.width=U,H.height=G):(this.renderedExtent_&&!(0,h.equals)(E,this.renderedExtent_)&&F.clearRect(0,0,U,G),x=this.oversampling_)}this.renderedTiles.length=0;var Y,X,Z,k,V,W,B,J,K,Q,$=Object.keys(w).map(Number);for($.sort(function(e,t){return e===m?1:t===m?-1:e>t?1:e<t?-1:0}),k=0,V=$.length;k<V;++k)for(var ee in Z=$[k],X=T.getTilePixelSize(Z,r,a),Y=f.getResolution(Z)/v,B=y*T.getGutter(a),J=w[Z])I=J[ee],j=((W=f.getTileCoordExtent(I.getTileCoord(),O))[0]-E[0])/v*y/x,C=(E[3]-W[3])/v*y/x,K=X[0]*Y/x,Q=X[1]*Y/x,this.drawTileImage(I,t,i,j,C,K,Q,B,m===Z),this.renderedTiles.push(I);this.renderedRevision=p,this.renderedResolution=v*r/y*x,this.renderedExtent_=E}var te=this.renderedResolution/d,ie=(0,c.compose)(this.imageTransform_,r*n[0]/2,r*n[1]/2,te,te,0,(this.renderedExtent_[0]-u[0])/this.renderedResolution*r,(u[1]-this.renderedExtent_[3])/this.renderedResolution*r);return(0,c.compose)(this.coordinateToCanvasPixelTransform,r*n[0]/2-ie[4],r*n[1]/2-ie[5],r/d,-r/d,0,-u[0],-u[1]),this.updateUsedTiles(t.usedTiles,T,m,R),this.manageTilePyramid(t,T,f,r,a,_,m,g.getPreload()),this.scheduleExpireCache(t,T),this.renderedTiles.length>0},i.prototype.drawTileImage=function(t,i,r,n,s,o,a,l,d){var h=t.getImage(this.getLayer());if(h){var u=(0,e.getUid)(this),g=d?t.getAlpha(u,i.time):1;1!==g||this.getLayer().getSource().getOpaque(i.viewState.projection)||this.context.clearRect(n,s,o,a);var c=g!==this.context.globalAlpha;c&&(this.context.save(),this.context.globalAlpha=g),this.context.drawImage(h,l,l,h.width-2*l,h.height-2*l,n,s,o,a),c&&this.context.restore(),1!==g?i.animate=!0:d&&t.endTransition(u)}},i.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},i.prototype.getImageTransform=function(){return this.imageTransform_},i}(g.default);p.handles=function(e){return e.getType()===i.default.TILE},p.create=function(e,t){return new p(t)},p.prototype.getLayer,exports.default=p;
},{"../../util.js":"KniQ","../../LayerType.js":"8+bQ","../../TileRange.js":"346s","../../TileState.js":"Xz9x","../../ViewHint.js":"cuLW","../../dom.js":"Xno5","../../extent.js":"QDir","../canvas/IntermediateCanvas.js":"F9m+","../../transform.js":"P4eA"}],"TK0U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){};t.prototype.getReplay=function(t,e){},t.prototype.isEmpty=function(){},exports.default=t;
},{}],"D882":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};
},{}],"JxN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawTextOnPath=a;var t=require("../../math.js");function a(a,r,h,e,M,o,s,n){for(var p,u,v,i=[],P=a[r]>a[h-e],f=M.length,l=a[r],I=a[r+1],w=a[r+=e],c=a[r+1],d=0,q=Math.sqrt(Math.pow(w-l,2)+Math.pow(c-I,2)),x="",b=0,j=0;j<f;++j){u=P?f-j-1:j;var O=M.charAt(u),_=o(x=P?O+x:x+O)-b;b+=_;for(var g=s+_/2;r<h-e&&d+q<g;)l=w,I=c,w=a[r+=e],c=a[r+1],d+=q,q=Math.sqrt(Math.pow(w-l,2)+Math.pow(c-I,2));var m=g-d,y=Math.atan2(c-I,w-l);if(P&&(y+=y>0?-Math.PI:Math.PI),void 0!==v){var A=y-v;if(A+=A>Math.PI?-2*Math.PI:A<-Math.PI?2*Math.PI:0,Math.abs(A)>n)return null}var T=m/q,k=(0,t.lerp)(l,w,T),z=(0,t.lerp)(I,c,T);v==y?(P&&(p[0]=k,p[1]=z,p[2]=_/2),p[4]=x):(b=_,p=[k,z,_/2,y,x=O],P?i.unshift(p):i.push(p),v=y),s+=_}return i}
},{"../../math.js":"B96G"}],"kTJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},E=exports.fillInstruction=[t.FILL],e=exports.strokeInstruction=[t.STROKE],_=exports.beginPathInstruction=[t.BEGIN_PATH],T=exports.closePathInstruction=[t.CLOSE_PATH];exports.default=t;
},{}],"FzwX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TEXT_ALIGN=exports.ORDER=void 0;var e=require("../render/ReplayType.js"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var a=exports.ORDER=[t.default.POLYGON,t.default.CIRCLE,t.default.LINE_STRING,t.default.IMAGE,t.default.TEXT,t.default.DEFAULT],d=exports.TEXT_ALIGN={};d.left=0,d.end=0,d.center=.5,d.right=1,d.start=1,d.top=0,d.middle=.5,d.hanging=.2,d.alphabetic=.8,d.ideographic=.8,d.bottom=1;
},{"../render/ReplayType.js":"D882"}],"zweS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../util.js"),e=require("../../functions.js"),i=require("../../array.js"),r=require("../../colorlike.js"),n=require("../../extent.js"),o=require("../../extent/Relationship.js"),s=L(o),a=require("../../geom/GeometryType.js"),l=L(a),h=require("../../geom/flat/inflate.js"),u=require("../../geom/flat/length.js"),d=require("../../geom/flat/textpath.js"),f=require("../../geom/flat/transform.js"),p=require("../../has.js"),c=require("../../obj.js"),y=require("../VectorContext.js"),_=L(y),g=require("../canvas.js"),v=require("../canvas/Instruction.js"),m=L(v),E=require("../replay.js"),x=require("../../transform.js");function L(t){return t&&t.__esModule?t:{default:t}}var S=(0,n.createEmpty)(),T=(0,x.create)(),C=function(e){function o(t,i,r,n,o,s){e.call(this),this.declutterTree=s,this.tolerance=t,this.maxExtent=i,this.overlaps=o,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=r,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=(0,x.create)(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.replayTextBackground_=function(t,e,i,r,n,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},o.prototype.replayImage_=function(t,e,i,r,o,s,a,l,h,u,d,f,p,c,y,_,v,m){var E=v||m;e-=o*=p,i-=s*=p;var L,C,I,O,k=y+u>r.width?r.width-u:y,D=l+d>r.height?r.height-d:l,b=_[3]+k*p+_[1],G=_[0]+D*p+_[2],M=e-_[3],R=i-_[0];(E||0!==f)&&(L=[M,R],C=[M+b,R],I=[M+b,R+G],O=[M,R+G]);var N=null;if(0!==f){var F=e+o,j=i+s;N=(0,x.compose)(T,F,j,1,1,f,-F,-j),(0,n.createOrUpdateEmpty)(S),(0,n.extendCoordinate)(S,(0,x.apply)(T,L)),(0,n.extendCoordinate)(S,(0,x.apply)(T,C)),(0,n.extendCoordinate)(S,(0,x.apply)(T,I)),(0,n.extendCoordinate)(S,(0,x.apply)(T,O))}else(0,n.createOrUpdate)(M,R,M+b,R+G,S);var q=t.canvas,w=m?m[2]*p/2:0,P=S[0]-w<=q.width&&S[2]+w>=0&&S[1]-w<=q.height&&S[3]+w>=0;if(c&&(e=Math.round(e),i=Math.round(i)),a){if(!P&&1==a[4])return;(0,n.extend)(a,S);var W=P?[t,N?N.slice(0):null,h,r,u,d,k,D,e,i,p]:null;W&&E&&W.push(v,m,L,C,I,O),a.push(W)}else P&&(E&&this.replayTextBackground_(t,L,C,I,O,v,m),(0,g.drawImage)(t,N,h,r,u,d,k,D,e,i,p))},o.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},o.prototype.appendFlatCoordinates=function(t,e,i,r,o,a){var l=this.coordinates.length,h=this.getBufferedMaxExtent();a&&(e+=r);var u,d,f,p=[t[e],t[e+1]],c=[NaN,NaN],y=!0;for(u=e+r;u<i;u+=r)c[0]=t[u],c[1]=t[u+1],(f=(0,n.coordinateRelationship)(h,c))!==d?(y&&(this.coordinates[l++]=p[0],this.coordinates[l++]=p[1]),this.coordinates[l++]=c[0],this.coordinates[l++]=c[1],y=!1):f===s.default.INTERSECTING?(this.coordinates[l++]=c[0],this.coordinates[l++]=c[1],y=!1):y=!0,p[0]=c[0],p[1]=c[1],d=f;return(o&&y||u===e+r)&&(this.coordinates[l++]=p[0],this.coordinates[l++]=p[1]),l},o.prototype.drawCustomCoordinates_=function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o],l=this.appendFlatCoordinates(t,e,a,r,!1,!1);n.push(l),e=a}return e},o.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var r,n,o,s,a,u=t.getType(),d=t.getStride(),f=this.coordinates.length;if(u==l.default.MULTI_POLYGON){r=(t=t).getOrientedFlatCoordinates(),s=[];var p=t.getEndss();a=0;for(var c=0,y=p.length;c<y;++c){var _=[];a=this.drawCustomCoordinates_(r,a,p[c],d,_),s.push(_)}this.instructions.push([m.default.CUSTOM,f,s,t,i,h.inflateMultiCoordinatesArray])}else u==l.default.POLYGON||u==l.default.MULTI_LINE_STRING?(o=[],r=u==l.default.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(r,0,t.getEnds(),d,o),this.instructions.push([m.default.CUSTOM,f,o,t,i,h.inflateCoordinatesArray])):u==l.default.LINE_STRING||u==l.default.MULTI_POINT?(r=t.getFlatCoordinates(),n=this.appendFlatCoordinates(r,0,r.length,d,!1,!1),this.instructions.push([m.default.CUSTOM,f,n,t,i,h.inflateCoordinates])):u==l.default.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),n=this.coordinates.length,this.instructions.push([m.default.CUSTOM,f,n,t,i]));this.endGeometry(t,e)},o.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[m.default.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[m.default.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},o.prototype.fill_=function(t){if(this.alignFill_){var e=(0,x.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,g.resetTransform)},o.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],p.CANVAS_LINE_DASH&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},o.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(r)){this.declutterTree.insert(r);for(var o=5,s=t.length;o<s;++o){var a=t[o];a&&(a.length>11&&this.replayTextBackground_(a[0],a[13],a[14],a[15],a[16],a[11],a[12]),g.drawImage.apply(void 0,a))}}t.length=5,(0,n.createOrUpdateEmpty)(t)}}},o.prototype.replay_=function(e,r,o,s,a,l){var h;this.pixelCoordinates_&&(0,i.equals)(r,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=(0,f.transform2D)(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),(0,x.setFromArray)(this.renderedTransform_,r));for(var p,y,_,v,L,S,T,C,I,O,k,D,b=!(0,c.isEmpty)(o),G=0,M=s.length,R=0,N=0,F=0,j=null,q=null,w=this.coordinateCache_,P=this.viewRotation_,W={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:P},Y=this.instructions!=s||this.overlaps?0:200;G<M;){var A=s[G];switch(A[0]){case m.default.BEGIN_GEOMETRY:O=A[1],b&&o[(0,t.getUid)(O).toString()]||!O.getGeometry()?G=A[2]:void 0===l||(0,n.intersects)(l,O.getGeometry().getExtent())?++G:G=A[2]+1;break;case m.default.BEGIN_PATH:N>Y&&(this.fill_(e),N=0),F>Y&&(e.stroke(),F=0),N||F||(e.beginPath(),v=L=NaN),++G;break;case m.default.CIRCLE:var U=h[R=A[1]],B=h[R+1],J=h[R+2]-U,H=h[R+3]-B,K=Math.sqrt(J*J+H*H);e.moveTo(U+K,B),e.arc(U,B,K,0,2*Math.PI,!0),++G;break;case m.default.CLOSE_PATH:e.closePath(),++G;break;case m.default.CUSTOM:R=A[1],p=A[2];var V=A[3],X=A[4],z=6==A.length?A[5]:void 0;W.geometry=V,W.feature=O,G in w||(w[G]=[]);var Q=w[G];z?z(h,R,p,2,Q):(Q[0]=h[R],Q[1]=h[R+1],Q.length=2),X(Q,W),++G;break;case m.default.DRAW_IMAGE:R=A[1],p=A[2],I=A[3],y=A[4],_=A[5],C=a?null:A[6];var Z=A[7],$=A[8],tt=A[9],et=A[10],it=A[11],rt=A[12],nt=A[13],ot=A[14],st=A[15],at=void 0,lt=void 0,ht=void 0;for(A.length>16?(at=A[16],lt=A[17],ht=A[18]):(at=g.defaultPadding,lt=ht=!1),it&&(rt+=P);R<p;R+=2)this.replayImage_(e,h[R],h[R+1],I,y,_,C,Z,$,tt,et,rt,nt,ot,st,at,lt?j:null,ht?q:null);this.renderDeclutter_(C,O),++G;break;case m.default.DRAW_CHARS:var ut=A[1],dt=A[2],ft=A[3];C=a?null:A[4];var pt=A[5],ct=A[6],yt=A[7],_t=A[8],gt=A[9],vt=A[10],mt=A[11],Et=A[12],xt=A[13],Lt=A[14],St=(0,u.lineStringLength)(h,ut,dt,2),Tt=_t(Et);if(pt||Tt<=St){var Ct=this.textStates[xt].textAlign,It=(St-Tt)*E.TEXT_ALIGN[Ct],Ot=(0,d.drawTextOnPath)(h,ut,dt,2,Et,_t,It,yt);if(Ot){var kt=void 0,Dt=void 0,bt=void 0,Gt=void 0,Mt=void 0;if(vt)for(kt=0,Dt=Ot.length;kt<Dt;++kt)bt=(Mt=Ot[kt])[4],Gt=this.getImage(bt,xt,"",vt),y=Mt[2]+mt,_=ft*Gt.height+2*(.5-ft)*mt-gt,this.replayImage_(e,Mt[0],Mt[1],Gt,y,_,C,Gt.height,1,0,0,Mt[3],Lt,!1,Gt.width,g.defaultPadding,null,null);if(ct)for(kt=0,Dt=Ot.length;kt<Dt;++kt)bt=(Mt=Ot[kt])[4],Gt=this.getImage(bt,xt,ct,""),y=Mt[2],_=ft*Gt.height-gt,this.replayImage_(e,Mt[0],Mt[1],Gt,y,_,C,Gt.height,1,0,0,Mt[3],Lt,!1,Gt.width,g.defaultPadding,null,null)}}this.renderDeclutter_(C,O),++G;break;case m.default.END_GEOMETRY:if(void 0!==a){var Rt=a(O=A[1]);if(Rt)return Rt}++G;break;case m.default.FILL:Y?N++:this.fill_(e),++G;break;case m.default.MOVE_TO_LINE_TO:for(R=A[1],p=A[2],k=h[R],T=(D=h[R+1])+.5|0,(S=k+.5|0)===v&&T===L||(e.moveTo(k,D),v=S,L=T),R+=2;R<p;R+=2)S=(k=h[R])+.5|0,T=(D=h[R+1])+.5|0,R!=p-2&&S===v&&T===L||(e.lineTo(k,D),v=S,L=T);++G;break;case m.default.SET_FILL_STYLE:j=A,this.alignFill_=A[2],N&&(this.fill_(e),N=0,F&&(e.stroke(),F=0)),e.fillStyle=A[1],++G;break;case m.default.SET_STROKE_STYLE:q=A,F&&(e.stroke(),F=0),this.setStrokeStyle_(e,A),++G;break;case m.default.STROKE:Y?F++:e.stroke(),++G;break;default:++G}}N&&this.fill_(e),F&&e.stroke()},o.prototype.replay=function(t,e,i,r){this.viewRotation_=i,this.replay_(t,e,r,this.instructions,void 0,void 0)},o.prototype.replayHitDetection=function(t,e,i,r,n,o){return this.viewRotation_=i,this.replay_(t,e,r,this.hitDetectionInstructions,n,o)},o.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var r,n,o=e.length,s=-1;for(t=0;t<o;++t)(n=(r=e[t])[0])==m.default.END_GEOMETRY?s=t:n==m.default.BEGIN_GEOMETRY&&(r[2]=t,(0,i.reverseSubArray)(this.hitDetectionInstructions,s,t),s=-1)},o.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=(0,r.asColorLike)(n||g.defaultFillStyle)}else i.fillStyle=void 0;if(e){var o=e.getColor();i.strokeStyle=(0,r.asColorLike)(o||g.defaultStrokeStyle);var s=e.getLineCap();i.lineCap=void 0!==s?s:g.defaultLineCap;var a=e.getLineDash();i.lineDash=a?a.slice():g.defaultLineDash;var l=e.getLineDashOffset();i.lineDashOffset=l||g.defaultLineDashOffset;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:g.defaultLineJoin;var u=e.getWidth();i.lineWidth=void 0!==u?u:g.defaultLineWidth;var d=e.getMiterLimit();i.miterLimit=void 0!==d?d:g.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},o.prototype.createFill=function(t,e){var i=t.fillStyle,r=[m.default.SET_FILL_STYLE,i];return"string"!=typeof i&&r.push(!0),r},o.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},o.prototype.createStroke=function(t){return[m.default.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},o.prototype.updateFillStyle=function(t,e,i){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=r)},o.prototype.updateStrokeStyle=function(t,e){var r=t.strokeStyle,n=t.lineCap,o=t.lineDash,s=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||o!=t.currentLineDash&&!(0,i.equals)(t.currentLineDash,o)||t.currentLineDashOffset!=s||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=h)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=s,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=h)},o.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[m.default.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},o.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,n.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,n.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},o}(_.default);C.prototype.finish=e.UNDEFINED,exports.default=C;
},{"../../util.js":"KniQ","../../functions.js":"RgA2","../../array.js":"luEr","../../colorlike.js":"V5+X","../../extent.js":"QDir","../../extent/Relationship.js":"bUAS","../../geom/GeometryType.js":"lmV0","../../geom/flat/inflate.js":"znXl","../../geom/flat/length.js":"ZZrx","../../geom/flat/textpath.js":"JxN9","../../geom/flat/transform.js":"LGwr","../../has.js":"f3Nv","../../obj.js":"mH6q","../VectorContext.js":"4LQ/","../canvas.js":"iAG7","../canvas/Instruction.js":"kTJv","../replay.js":"FzwX","../../transform.js":"P4eA"}],"+3Nw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../canvas/Instruction.js"),i=o(t),h=require("../canvas/Replay.js"),e=o(h);function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function h(i,h,e,o,s,n){t.call(this,i,h,e,o,s,n),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.snapToPixel_=void 0,this.width_=void 0}return t&&(h.__proto__=t),h.prototype=Object.create(t&&t.prototype),h.prototype.constructor=h,h.prototype.drawCoordinates_=function(t,i,h,e){return this.appendFlatCoordinates(t,i,h,e,!1,!1)},h.prototype.drawPoint=function(t,h){if(this.image_){this.beginGeometry(t,h);var e=t.getFlatCoordinates(),o=t.getStride(),s=this.coordinates.length,n=this.drawCoordinates_(e,0,e.length,o);this.instructions.push([i.default.DRAW_IMAGE,s,n,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,s,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,h)}},h.prototype.drawMultiPoint=function(t,h){if(this.image_){this.beginGeometry(t,h);var e=t.getFlatCoordinates(),o=t.getStride(),s=this.coordinates.length,n=this.drawCoordinates_(e,0,e.length,o);this.instructions.push([i.default.DRAW_IMAGE,s,n,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,s,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,h)}},h.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.snapToPixel_=void 0,this.width_=void 0},h.prototype.setImageStyle=function(t,i){var h=t.getAnchor(),e=t.getSize(),o=t.getHitDetectionImage(1),s=t.getImage(1),n=t.getOrigin();this.anchorX_=h[0],this.anchorY_=h[1],this.declutterGroup_=i,this.hitDetectionImage_=o,this.image_=s,this.height_=e[1],this.opacity_=t.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.snapToPixel_=t.getSnapToPixel(),this.width_=e[0]},h}(e.default);exports.default=s;
},{"../canvas/Instruction.js":"kTJv","../canvas/Replay.js":"zweS"}],"Z7Pq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../canvas/Instruction.js"),e=n(t),i=require("../canvas/Replay.js"),s=n(i);function n(t){return t&&t.__esModule?t:{default:t}}var o=function(i){function s(t,e,s,n,o,r){i.call(this,t,e,s,n,o,r)}return i&&(s.__proto__=i),s.prototype=Object.create(i&&i.prototype),s.prototype.constructor=s,s.prototype.drawFlatCoordinates_=function(t,i,s,n){var o=this.coordinates.length,r=this.appendFlatCoordinates(t,i,s,n,!1,!1),a=[e.default.MOVE_TO_LINE_TO,o,r];return this.instructions.push(a),this.hitDetectionInstructions.push(a),s},s.prototype.drawLineString=function(i,s){var n=this.state,o=n.strokeStyle,r=n.lineWidth;if(void 0!==o&&void 0!==r){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(i,s),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],t.beginPathInstruction);var a=i.getFlatCoordinates(),h=i.getStride();this.drawFlatCoordinates_(a,0,a.length,h),this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(i,s)}},s.prototype.drawMultiLineString=function(i,s){var n=this.state,o=n.strokeStyle,r=n.lineWidth;if(void 0!==o&&void 0!==r){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(i,s),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],t.beginPathInstruction);for(var a=i.getEnds(),h=i.getFlatCoordinates(),l=i.getStride(),u=0,c=0,p=a.length;c<p;++c)u=this.drawFlatCoordinates_(h,u,a[c],l);this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(i,s)}},s.prototype.finish=function(){var e=this.state;null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(t.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null},s.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(t.strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,i.prototype.applyStroke.call(this,e),this.instructions.push(t.beginPathInstruction)},s}(s.default);exports.default=o;
},{"../canvas/Instruction.js":"kTJv","../canvas/Replay.js":"zweS"}],"s4Hb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../color.js"),i=require("../../geom/flat/simplify.js"),e=require("../canvas.js"),s=require("../canvas/Instruction.js"),n=l(s),o=require("../canvas/Replay.js"),r=l(o);function l(t){return t&&t.__esModule?t:{default:t}}var h=function(o){function r(t,i,e,s,n,r){o.call(this,t,i,e,s,n,r)}return o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r,r.prototype.drawFlatCoordinatess_=function(t,i,e,o){var r=this.state,l=void 0!==r.fillStyle,h=null!=r.strokeStyle,u=e.length;this.instructions.push(s.beginPathInstruction),this.hitDetectionInstructions.push(s.beginPathInstruction);for(var a=0;a<u;++a){var c=e[a],d=this.coordinates.length,p=this.appendFlatCoordinates(t,i,c,o,!0,!h),S=[n.default.MOVE_TO_LINE_TO,d,p];this.instructions.push(S),this.hitDetectionInstructions.push(S),h&&(this.instructions.push(s.closePathInstruction),this.hitDetectionInstructions.push(s.closePathInstruction)),i=c}return l&&(this.instructions.push(s.fillInstruction),this.hitDetectionInstructions.push(s.fillInstruction)),h&&(this.instructions.push(s.strokeInstruction),this.hitDetectionInstructions.push(s.strokeInstruction)),i},r.prototype.drawCircle=function(i,o){var r=this.state,l=r.fillStyle,h=r.strokeStyle;if(void 0!==l||void 0!==h){this.setFillStrokeStyles_(i),this.beginGeometry(i,o),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([n.default.SET_FILL_STYLE,(0,t.asString)(e.defaultFillStyle)]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var u=i.getFlatCoordinates(),a=i.getStride(),c=this.coordinates.length;this.appendFlatCoordinates(u,0,u.length,a,!1,!1);var d=[n.default.CIRCLE,c];this.instructions.push(s.beginPathInstruction,d),this.hitDetectionInstructions.push(s.beginPathInstruction,d),this.hitDetectionInstructions.push(s.fillInstruction),void 0!==r.fillStyle&&this.instructions.push(s.fillInstruction),void 0!==r.strokeStyle&&(this.instructions.push(s.strokeInstruction),this.hitDetectionInstructions.push(s.strokeInstruction)),this.endGeometry(i,o)}},r.prototype.drawPolygon=function(i,s){var o=this.state,r=o.fillStyle,l=o.strokeStyle;if(void 0!==r||void 0!==l){this.setFillStrokeStyles_(i),this.beginGeometry(i,s),void 0!==o.fillStyle&&this.hitDetectionInstructions.push([n.default.SET_FILL_STYLE,(0,t.asString)(e.defaultFillStyle)]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset]);var h=i.getEnds(),u=i.getOrientedFlatCoordinates(),a=i.getStride();this.drawFlatCoordinatess_(u,0,h,a),this.endGeometry(i,s)}},r.prototype.drawMultiPolygon=function(i,s){var o=this.state,r=o.fillStyle,l=o.strokeStyle;if(void 0!==r||void 0!==l){this.setFillStrokeStyles_(i),this.beginGeometry(i,s),void 0!==o.fillStyle&&this.hitDetectionInstructions.push([n.default.SET_FILL_STYLE,(0,t.asString)(e.defaultFillStyle)]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset]);for(var h=i.getEndss(),u=i.getOrientedFlatCoordinates(),a=i.getStride(),c=0,d=0,p=h.length;d<p;++d)c=this.drawFlatCoordinatess_(u,c,h[d],a);this.endGeometry(i,s)}},r.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,s=0,n=e.length;s<n;++s)e[s]=(0,i.snap)(e[s],t)},r.prototype.setFillStrokeStyles_=function(t){var i=this.state;void 0!==i.fillStyle&&this.updateFillStyle(i,this.createFill,t),void 0!==i.strokeStyle&&this.updateStrokeStyle(i,this.applyStroke)},r}(r.default);exports.default=h;
},{"../../color.js":"eucy","../../geom/flat/simplify.js":"IEpt","../canvas.js":"iAG7","../canvas/Instruction.js":"kTJv","../canvas/Replay.js":"zweS"}],"96hC":[function(require,module,exports) {
"use strict";function t(t,e,r,o,a){var s,i,n,u,c,v,d,h,f,p=r,M=r,l=0,x=0,_=r;for(s=r;s<o;s+=a){var b=e[s],g=e[s+1];void 0!==u&&(h=b-u,f=g-c,n=Math.sqrt(h*h+f*f),void 0!==v&&(x+=i,Math.acos((v*h+d*f)/(i*n))>t&&(x>l&&(l=x,p=_,M=s),x=0,_=s-a)),i=n,v=h,d=f),u=b,c=g}return(x+=n)>l?[_,s]:[p,M]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchingChunk=t;
},{}],"0Bp2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureTextWidths=p;var t=require("../../util.js"),e=require("../../colorlike.js"),i=require("../../dom.js"),s=require("../../extent.js"),l=require("../../geom/flat/straightchunk.js"),a=require("../../geom/GeometryType.js"),n=c(a),r=require("../../has.js"),o=require("../canvas.js"),h=require("../canvas/Instruction.js"),f=c(h),u=require("../canvas/Replay.js"),d=c(u),g=require("../replay.js"),x=require("../../style/TextPlacement.js"),_=c(x);function c(t){return t&&t.__esModule?t:{default:t}}var S=function(a){function h(t,e,i,s,l,n){a.call(this,t,e,i,s,l,n),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},o.labelCache.prune()}return a&&(h.__proto__=a),h.prototype=Object.create(a&&a.prototype),h.prototype.constructor=h,h.prototype.drawText=function(t,e){var i=this.textFillState_,a=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||a)){var o,h,f=this.coordinates.length,u=t.getType(),d=null,g=2,x=2;if(r.placement===_.default.LINE){if(!(0,s.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var c;if(d=t.getFlatCoordinates(),x=t.getStride(),u==n.default.LINE_STRING)c=[d.length];else if(u==n.default.MULTI_LINE_STRING)c=t.getEnds();else if(u==n.default.POLYGON)c=t.getEnds().slice(0,1);else if(u==n.default.MULTI_POLYGON){var S=t.getEndss();for(c=[],o=0,h=S.length;o<h;++o)c.push(S[o][0])}this.beginGeometry(t,e);for(var p,k=r.textAlign,y=0,v=0,m=c.length;v<m;++v){if(null==k){var L=(0,l.matchingChunk)(r.maxAngle,d,y,c[v],x);y=L[0],p=L[1]}else p=c[v];for(o=y;o<p;o+=x)this.coordinates.push(d[o],d[o+1]);g=this.coordinates.length,y=c[v],this.drawChars_(f,g,this.declutterGroup_),f=g}this.endGeometry(t,e)}else{var T=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),I=T.width/this.pixelRatio;switch(u){case n.default.POINT:case n.default.MULTI_POINT:g=(d=t.getFlatCoordinates()).length;break;case n.default.LINE_STRING:d=t.getFlatMidpoint();break;case n.default.CIRCLE:d=t.getCenter();break;case n.default.MULTI_LINE_STRING:g=(d=t.getFlatMidpoints()).length;break;case n.default.POLYGON:if(d=t.getFlatInteriorPoint(),!r.overflow&&d[2]/this.resolution<I)return;x=3;break;case n.default.MULTI_POLYGON:var A=t.getFlatInteriorPoints();for(d=[],o=0,h=A.length;o<h;o+=3)(r.overflow||A[o+2]/this.resolution>=I)&&d.push(A[o],A[o+1]);if(0==(g=d.length))return}g=this.appendFlatCoordinates(d,0,g,x,!1,!1),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(T,f,g),this.endGeometry(t,e)}}},h.prototype.getImage=function(t,e,s,l){var a,n=l+e+t+s+this.pixelRatio;if(!o.labelCache.containsKey(n)){var h=l?this.strokeStates[l]||this.textStrokeState_:null,f=s?this.fillStates[s]||this.textFillState_:null,u=this.textStates[e]||this.textState_,d=this.pixelRatio,x=u.scale*d,_=g.TEXT_ALIGN[u.textAlign||o.defaultTextAlign],c=l&&h.lineWidth?h.lineWidth:0,S=t.split("\n"),k=S.length,y=[],v=p(u.font,S,y),m=(0,o.measureTextHeight)(u.font),L=m*k,T=v+c,I=(0,i.createCanvasContext2D)(Math.ceil(T*x),Math.ceil((L+c)*x));a=I.canvas,o.labelCache.set(n,a),1!=x&&I.scale(x,x),I.font=u.font,l&&(I.strokeStyle=h.strokeStyle,I.lineWidth=c,I.lineCap=h.lineCap,I.lineJoin=h.lineJoin,I.miterLimit=h.miterLimit,r.CANVAS_LINE_DASH&&h.lineDash.length&&(I.setLineDash(h.lineDash),I.lineDashOffset=h.lineDashOffset)),s&&(I.fillStyle=f.fillStyle),I.textBaseline="middle",I.textAlign="center";var A,O=.5-_,C=_*a.width/x+O*c;if(l)for(A=0;A<k;++A)I.strokeText(S[A],C+O*y[A],.5*(c+m)+A*m);if(s)for(A=0;A<k;++A)I.fillText(S[A],C+O*y[A],.5*(c+m)+A*m)}return o.labelCache.get(n)},h.prototype.drawTextImage_=function(t,e,i){var s=this.textState_,l=this.textStrokeState_,a=this.pixelRatio,n=g.TEXT_ALIGN[s.textAlign||o.defaultTextAlign],r=g.TEXT_ALIGN[s.textBaseline],h=l&&l.lineWidth?l.lineWidth:0,u=n*t.width/a+2*(.5-n)*h,d=r*t.height/a+2*(.5-r)*h;this.instructions.push([f.default.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*a,(d-this.textOffsetY_)*a,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,!0,t.width,s.padding==o.defaultPadding?o.defaultPadding:s.padding.map(function(t){return t*a}),!!s.backgroundFill,!!s.backgroundStroke]),this.hitDetectionInstructions.push([f.default.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*a,(d-this.textOffsetY_)*a,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/a,!0,t.width,s.padding,!!s.backgroundFill,!!s.backgroundStroke])},h.prototype.drawChars_=function(t,e,i){var s=this.textStrokeState_,l=this.textState_,a=this.textFillState_,n=this.strokeKey_;s&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:s.strokeStyle,lineCap:s.lineCap,lineDashOffset:s.lineDashOffset,lineWidth:s.lineWidth,lineJoin:s.lineJoin,miterLimit:s.miterLimit,lineDash:s.lineDash}));var r=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:l.font,textAlign:l.textAlign||o.defaultTextAlign,scale:l.scale});var h=this.fillKey_;a&&(h in this.fillStates||(this.fillStates[h]={fillStyle:a.fillStyle}));var u=this.pixelRatio,d=g.TEXT_ALIGN[l.textBaseline],x=this.textOffsetY_*u,_=this.text_,c=l.font,S=l.scale,p=s?s.lineWidth*S/2:0,k=this.widths_[c];k||(this.widths_[c]=k={}),this.instructions.push([f.default.DRAW_CHARS,t,e,d,i,l.overflow,h,l.maxAngle,function(t){var e=k[t];return e||(e=k[t]=(0,o.measureTextWidth)(c,t)),e*S*u},x,n,p*u,_,r,1]),this.hitDetectionInstructions.push([f.default.DRAW_CHARS,t,e,d,i,l.overflow,h,l.maxAngle,function(t){var e=k[t];return e||(e=k[t]=(0,o.measureTextWidth)(c,t)),e*S},x,n,p,_,r,1/u])},h.prototype.setTextStyle=function(i,s){var l,a,n;if(i){this.declutterGroup_=s;var r=i.getFill();r?((a=this.textFillState_)||(a=this.textFillState_={}),a.fillStyle=(0,e.asColorLike)(r.getColor()||o.defaultFillStyle)):a=this.textFillState_=null;var h=i.getStroke();if(h){(n=this.textStrokeState_)||(n=this.textStrokeState_={});var f=h.getLineDash(),u=h.getLineDashOffset(),d=h.getWidth(),g=h.getMiterLimit();n.lineCap=h.getLineCap()||o.defaultLineCap,n.lineDash=f?f.slice():o.defaultLineDash,n.lineDashOffset=void 0===u?o.defaultLineDashOffset:u,n.lineJoin=h.getLineJoin()||o.defaultLineJoin,n.lineWidth=void 0===d?o.defaultLineWidth:d,n.miterLimit=void 0===g?o.defaultMiterLimit:g,n.strokeStyle=(0,e.asColorLike)(h.getColor()||o.defaultStrokeStyle)}else n=this.textStrokeState_=null;l=this.textState_;var x=i.getFont()||o.defaultFont;(0,o.checkFont)(x);var _=i.getScale();l.overflow=i.getOverflow(),l.font=x,l.maxAngle=i.getMaxAngle(),l.placement=i.getPlacement(),l.textAlign=i.getTextAlign(),l.textBaseline=i.getTextBaseline()||o.defaultTextBaseline,l.backgroundFill=i.getBackgroundFill(),l.backgroundStroke=i.getBackgroundStroke(),l.padding=i.getPadding()||o.defaultPadding,l.scale=void 0===_?1:_;var c=i.getOffsetX(),S=i.getOffsetY(),p=i.getRotateWithView(),k=i.getRotation();this.text_=i.getText()||"",this.textOffsetX_=void 0===c?0:c,this.textOffsetY_=void 0===S?0:S,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0===k?0:k,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,t.getUid)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=l.font+l.scale+(l.textAlign||"?"),this.fillKey_=a?"string"==typeof a.fillStyle?a.fillStyle:"|"+(0,t.getUid)(a.fillStyle):""}else this.text_=""},h}(d.default);function p(t,e,i){for(var s=e.length,l=0,a=0;a<s;++a){var n=(0,o.measureTextWidth)(t,e[a]);l=Math.max(l,n),i.push(n)}return l}exports.default=S;
},{"../../util.js":"KniQ","../../colorlike.js":"V5+X","../../dom.js":"Xno5","../../extent.js":"QDir","../../geom/flat/straightchunk.js":"96hC","../../geom/GeometryType.js":"lmV0","../../has.js":"f3Nv","../canvas.js":"iAG7","../canvas/Instruction.js":"kTJv","../canvas/Replay.js":"zweS","../replay.js":"FzwX","../../style/TextPlacement.js":"AXKs"}],"TGed":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCircleArray=B,exports.replayDeclutter=C;var e=require("../../array.js"),t=require("../../dom.js"),r=require("../../extent.js"),a=require("../../geom/flat/transform.js"),i=require("../../obj.js"),o=require("../ReplayGroup.js"),n=j(o),s=require("../ReplayType.js"),l=j(s),u=require("../canvas/Replay.js"),p=j(u),f=require("../canvas/ImageReplay.js"),c=j(f),h=require("../canvas/LineStringReplay.js"),y=j(h),d=require("../canvas/PolygonReplay.js"),v=j(d),_=require("../canvas/TextReplay.js"),x=j(_),m=require("../replay.js"),g=require("../../transform.js");function j(e){return e&&e.__esModule?e:{default:e}}var R={Circle:v.default,Default:p.default,Image:c.default,LineString:y.default,Polygon:v.default,Text:x.default},T=function(o){function n(e,r,a,i,n,s,l){o.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=r,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=a,this.renderBuffer_=l,this.replaysByZIndex_={},this.hitDetectionContext_=(0,t.createCanvasContext2D)(1,1),this.hitDetectionTransform_=(0,g.create)()}return o&&(n.__proto__=o),n.prototype=Object.create(o&&o.prototype),n.prototype.constructor=n,n.prototype.addDeclutter=function(e){var t=null;return this.declutterTree_&&(e?(t=this.declutterGroup_)[4]++:(t=this.declutterGroup_=(0,r.createEmpty)()).push(1)),t},n.prototype.clip=function(e,t){var r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()},n.prototype.hasReplays=function(e){for(var t in this.replaysByZIndex_)for(var r=this.replaysByZIndex_[t],a=0,i=e.length;a<i;++a)if(e[a]in r)return!0;return!1},n.prototype.finish=function(){for(var e in this.replaysByZIndex_){var t=this.replaysByZIndex_[e];for(var r in t)t[r].finish()}},n.prototype.forEachFeatureAtCoordinate=function(t,a,i,o,n,s,u){var p,f=2*(o=Math.round(o))+1,c=(0,g.compose)(this.hitDetectionTransform_,o+.5,o+.5,1/a,-1/a,-i,-t[0],-t[1]),h=this.hitDetectionContext_;h.canvas.width!==f||h.canvas.height!==f?(h.canvas.width=f,h.canvas.height=f):h.clearRect(0,0,f,f),void 0!==this.renderBuffer_&&(p=(0,r.createEmpty)(),(0,r.extendCoordinate)(p,t),(0,r.buffer)(p,a*(this.renderBuffer_+o),p));var y,d,v=B(o);function _(e){for(var t=h.getImageData(0,0,f,f).data,r=0;r<f;r++)for(var a=0;a<f;a++)if(v[r][a]&&t[4*(a*f+r)+3]>0){var i=void 0;return(!y||d!=l.default.IMAGE&&d!=l.default.TEXT||-1!==y.indexOf(e))&&(i=s(e)),i||void h.clearRect(0,0,f,f)}}this.declutterTree_&&(y=this.declutterTree_.all().map(function(e){return e.value}));var x,j,R,T,I,E=Object.keys(this.replaysByZIndex_).map(Number);for(E.sort(e.numberSafeCompareFunction),x=E.length-1;x>=0;--x){var C=E[x].toString();for(R=this.replaysByZIndex_[C],j=m.ORDER.length-1;j>=0;--j)if(void 0!==(T=R[d=m.ORDER[j]]))if(!u||d!=l.default.IMAGE&&d!=l.default.TEXT){if(I=T.replayHitDetection(h,c,i,n,_,p))return I}else{var b=u[C];b?b.push(T,c.slice(0)):u[C]=[T,c.slice(0)]}}},n.prototype.getClipCoords=function(e){var t=this.maxExtent_,r=t[0],i=t[1],o=t[2],n=t[3],s=[r,i,r,n,o,n,o,i];return(0,a.transform2D)(s,0,8,2,e,s),s},n.prototype.getReplay=function(e,t){var r=void 0!==e?e.toString():"0",a=this.replaysByZIndex_[r];void 0===a&&(a={},this.replaysByZIndex_[r]=a);var i=a[t];void 0===i&&(i=new(0,R[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),a[t]=i);return i},n.prototype.getReplays=function(){return this.replaysByZIndex_},n.prototype.isEmpty=function(){return(0,i.isEmpty)(this.replaysByZIndex_)},n.prototype.replay=function(t,r,a,i,o,n){var s=Object.keys(this.replaysByZIndex_).map(Number);s.sort(e.numberSafeCompareFunction),t.save(),this.clip(t,r);var u,p,f,c,h,y,d=o||m.ORDER;for(u=0,p=s.length;u<p;++u){var v=s[u].toString();for(h=this.replaysByZIndex_[v],f=0,c=d.length;f<c;++f){var _=d[f];if(y=h[_],void 0!==y)if(!n||_!=l.default.IMAGE&&_!=l.default.TEXT)y.replay(t,r,a,i);else{var x=n[v];x?x.push(y,r.slice(0)):n[v]=[y,r.slice(0)]}}}t.restore()},n}(n.default),I={0:[[!0]]};function E(e,t,r){var a,i=Math.floor(e.length/2);if(t>=i)for(a=i;a<t;a++)e[a][r]=!0;else if(t<i)for(a=t+1;a<i;a++)e[a][r]=!0}function B(e){if(void 0!==I[e])return I[e];for(var t=2*e+1,r=new Array(t),a=0;a<t;a++)r[a]=new Array(t);for(var i=e,o=0,n=0;i>=o;)E(r,e+i,e+o),E(r,e+o,e+i),E(r,e-o,e+i),E(r,e-i,e+o),E(r,e-i,e-o),E(r,e-o,e-i),E(r,e+o,e-i),E(r,e+i,e-o),2*((n+=1+2*++o)-i)+1>0&&(n+=1-2*(i-=1));return I[e]=r,r}function C(t,r,a){for(var i=Object.keys(t).map(Number).sort(e.numberSafeCompareFunction),o={},n=0,s=i.length;n<s;++n)for(var l=t[i[n].toString()],u=0,p=l.length;u<p;){var f=l[u++],c=l[u++];f.replay(r,c,a,o)}}exports.default=T;
},{"../../array.js":"luEr","../../dom.js":"Xno5","../../extent.js":"QDir","../../geom/flat/transform.js":"LGwr","../../obj.js":"mH6q","../ReplayGroup.js":"TK0U","../ReplayType.js":"D882","../canvas/Replay.js":"zweS","../canvas/ImageReplay.js":"+3Nw","../canvas/LineStringReplay.js":"Z7Pq","../canvas/PolygonReplay.js":"s4Hb","../canvas/TextReplay.js":"0Bp2","../replay.js":"FzwX","../../transform.js":"P4eA"}],"UCah":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOrder=f,exports.getSquaredTolerance=o,exports.getTolerance=T,exports.renderFeature=x;var e=require("../util.js"),t=require("../ImageState.js"),r=d(t),a=require("../geom/GeometryType.js"),l=d(a),g=require("../render/ReplayType.js"),n=d(g);function d(e){return e&&e.__esModule?e:{default:e}}var i=.5,u={Point:R,LineString:s,Polygon:E,MultiPoint:m,MultiLineString:c,MultiPolygon:p,GeometryCollection:I,Circle:y};function f(t,r){return(0,e.getUid)(t)-(0,e.getUid)(r)}function o(e,t){var r=T(e,t);return r*r}function T(e,t){return i*e/t}function y(e,t,r,a){var l=r.getFill(),g=r.getStroke();if(l||g){var d=e.getReplay(r.getZIndex(),n.default.CIRCLE);d.setFillStrokeStyle(l,g),d.drawCircle(t,a)}var i=r.getText();if(i){var u=e.getReplay(r.getZIndex(),n.default.TEXT);u.setTextStyle(i,e.addDeclutter(!1)),u.drawText(t,a)}}function x(e,t,a,l,g,n){var d=!1,i=a.getImage();if(i){var u=i.getImageState();u==r.default.LOADED||u==r.default.ERROR?i.unlistenImageChange(g,n):(u==r.default.IDLE&&i.load(),u=i.getImageState(),i.listenImageChange(g,n),d=!0)}return v(e,t,a,l),d}function v(e,t,r,a){var l=r.getGeometryFunction()(t);if(l){var g=l.getSimplifiedGeometry(a);if(r.getRenderer())S(e,g,r,t);else(0,u[g.getType()])(e,g,r,t)}}function S(e,t,r,a){if(t.getType()!=l.default.GEOMETRY_COLLECTION)e.getReplay(r.getZIndex(),n.default.DEFAULT).drawCustom(t,a,r.getRenderer());else for(var g=t.getGeometries(),d=0,i=g.length;d<i;++d)S(e,g[d],r,a)}function I(e,t,r,a){var l,g,n=t.getGeometriesArray();for(l=0,g=n.length;l<g;++l){(0,u[n[l].getType()])(e,n[l],r,a)}}function s(e,t,r,a){var l=r.getStroke();if(l){var g=e.getReplay(r.getZIndex(),n.default.LINE_STRING);g.setFillStrokeStyle(null,l),g.drawLineString(t,a)}var d=r.getText();if(d){var i=e.getReplay(r.getZIndex(),n.default.TEXT);i.setTextStyle(d,e.addDeclutter(!1)),i.drawText(t,a)}}function c(e,t,r,a){var l=r.getStroke();if(l){var g=e.getReplay(r.getZIndex(),n.default.LINE_STRING);g.setFillStrokeStyle(null,l),g.drawMultiLineString(t,a)}var d=r.getText();if(d){var i=e.getReplay(r.getZIndex(),n.default.TEXT);i.setTextStyle(d,e.addDeclutter(!1)),i.drawText(t,a)}}function p(e,t,r,a){var l=r.getFill(),g=r.getStroke();if(g||l){var d=e.getReplay(r.getZIndex(),n.default.POLYGON);d.setFillStrokeStyle(l,g),d.drawMultiPolygon(t,a)}var i=r.getText();if(i){var u=e.getReplay(r.getZIndex(),n.default.TEXT);u.setTextStyle(i,e.addDeclutter(!1)),u.drawText(t,a)}}function R(e,t,a,l){var g=a.getImage();if(g){if(g.getImageState()!=r.default.LOADED)return;var d=e.getReplay(a.getZIndex(),n.default.IMAGE);d.setImageStyle(g,e.addDeclutter(!1)),d.drawPoint(t,l)}var i=a.getText();if(i){var u=e.getReplay(a.getZIndex(),n.default.TEXT);u.setTextStyle(i,e.addDeclutter(!!g)),u.drawText(t,l)}}function m(e,t,a,l){var g=a.getImage();if(g){if(g.getImageState()!=r.default.LOADED)return;var d=e.getReplay(a.getZIndex(),n.default.IMAGE);d.setImageStyle(g,e.addDeclutter(!1)),d.drawMultiPoint(t,l)}var i=a.getText();if(i){var u=e.getReplay(a.getZIndex(),n.default.TEXT);u.setTextStyle(i,e.addDeclutter(!!g)),u.drawText(t,l)}}function E(e,t,r,a){var l=r.getFill(),g=r.getStroke();if(l||g){var d=e.getReplay(r.getZIndex(),n.default.POLYGON);d.setFillStrokeStyle(l,g),d.drawPolygon(t,a)}var i=r.getText();if(i){var u=e.getReplay(r.getZIndex(),n.default.TEXT);u.setTextStyle(i,e.addDeclutter(!1)),u.drawText(t,a)}}
},{"../util.js":"KniQ","../ImageState.js":"u3k+","../geom/GeometryType.js":"lmV0","../render/ReplayType.js":"D882"}],"F2e3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../util.js"),t=require("../../LayerType.js"),r=E(t),a=require("../../ViewHint.js"),i=E(a),n=require("../../dom.js"),s=require("../../events.js"),o=require("../../events/EventType.js"),h=E(o),l=require("rbush"),d=E(l),u=require("../../extent.js"),p=require("../../render/EventType.js"),c=E(p),f=require("../../render/canvas.js"),g=require("../../render/canvas/ReplayGroup.js"),v=E(g),y=require("../canvas/Layer.js"),_=E(y),x=require("../vector.js");function E(e){return e&&e.__esModule?e:{default:e}}var R=function(t){function r(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?(0,d.default)(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,u.createEmpty)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=(0,n.createCanvasContext2D)(),(0,s.listen)(f.labelCache,h.default.CLEAR,this.handleFontsChanged_,this)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.disposeInternal=function(){(0,s.unlisten)(f.labelCache,h.default.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},r.prototype.compose=function(e,t,r){var a=t.extent,i=t.pixelRatio,n=r.managed?t.skippedFeatureUids:{},s=t.viewState,o=s.projection,h=s.rotation,l=o.getExtent(),d=this.getLayer().getSource(),p=this.getTransform(t,0),g=r.extent,v=void 0!==g;v&&this.clip(e,t,g);var y=this.replayGroup_;if(y&&!y.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var _,x=this.getLayer(),E=0,R=0,m=1!==r.opacity,C=x.hasListener(c.default.RENDER);if(m||C){var A=e.canvas.width,T=e.canvas.height;if(h){var j=Math.round(Math.sqrt(A*A+T*T));E=(j-A)/2,R=(j-T)/2,A=T=j}this.context.canvas.width=A,this.context.canvas.height=T,_=this.context}else _=e;var F=_.globalAlpha;m||(_.globalAlpha=r.opacity),_!=e&&_.translate(E,R);var q=t.size[0]*i,b=t.size[1]*i;if((0,f.rotateAtOffset)(_,-h,q/2,b/2),y.replay(_,p,h,n),d.getWrapX()&&o.canWrapX()&&!(0,u.containsExtent)(l,a)){for(var I,S=a[0],w=(0,u.getWidth)(l),G=0;S<l[0];)I=w*--G,p=this.getTransform(t,I),y.replay(_,p,h,n),S+=w;for(G=0,S=a[2];S>l[2];)I=w*++G,p=this.getTransform(t,I),y.replay(_,p,h,n),S-=w}if((0,f.rotateAtOffset)(_,h,q/2,b/2),C&&this.dispatchRenderEvent(_,t,p),_!=e){if(m){var O=e.globalAlpha;e.globalAlpha=r.opacity,e.drawImage(_.canvas,-E,-R),e.globalAlpha=O}else e.drawImage(_.canvas,-E,-R);_.translate(-E,-R)}m||(_.globalAlpha=F)}v&&e.restore()},r.prototype.composeFrame=function(e,t,r){var a=this.getTransform(e,0);this.preCompose(r,e,a),this.compose(r,e,t),this.postCompose(r,e,t,a)},r.prototype.forEachFeatureAtCoordinate=function(t,r,a,i,n){if(this.replayGroup_){var s=r.viewState.resolution,o=r.viewState.rotation,h=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,o,a,{},function(t){var r=(0,e.getUid)(t).toString();if(!(r in l))return l[r]=!0,i.call(n,t,h)},null)}},r.prototype.handleFontsChanged_=function(e){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},r.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},r.prototype.prepareFrame=function(e,t){var r=this.getLayer(),a=r.getSource(),n=e.viewHints[i.default.ANIMATING],s=e.viewHints[i.default.INTERACTING],o=r.getUpdateWhileAnimating(),h=r.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!h&&s)return!0;var l=e.extent,d=e.viewState,p=d.projection,c=d.resolution,f=e.pixelRatio,g=r.getRevision(),y=r.getRenderBuffer(),_=r.getRenderOrder();void 0===_&&(_=x.defaultOrder);var E=(0,u.buffer)(l,y*c),R=d.projection.getExtent();if(a.getWrapX()&&d.projection.canWrapX()&&!(0,u.containsExtent)(R,e.extent)){var m=(0,u.getWidth)(R),C=Math.max((0,u.getWidth)(E)/2,m);E[0]=R[0]-C,E[2]=R[2]+C}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==g&&this.renderedRenderOrder_==_&&(0,u.containsExtent)(this.renderedExtent_,E))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var A=new v.default((0,x.getTolerance)(c,f),E,c,f,a.getOverlaps(),this.declutterTree_,r.getRenderBuffer());a.loadFeatures(E,c,p);var T=function(e){var t,a=e.getStyleFunction()||r.getStyleFunction();if(a&&(t=a(e,c)),t){var i=this.renderFeature(e,c,f,t,A);this.dirty_=this.dirty_||i}}.bind(this);if(_){var j=[];a.forEachFeatureInExtent(E,function(e){j.push(e)},this),j.sort(_);for(var F=0,q=j.length;F<q;++F)T(j[F])}else a.forEachFeatureInExtent(E,T,this);return A.finish(),this.renderedResolution_=c,this.renderedRevision_=g,this.renderedRenderOrder_=_,this.renderedExtent_=E,this.replayGroup_=A,this.replayGroupChanged=!0,!0},r.prototype.renderFeature=function(e,t,r,a,i){if(!a)return!1;var n=!1;if(Array.isArray(a))for(var s=0,o=a.length;s<o;++s)n=(0,x.renderFeature)(i,e,a[s],(0,x.getSquaredTolerance)(t,r),this.handleStyleImageChange_,this)||n;else n=(0,x.renderFeature)(i,e,a,(0,x.getSquaredTolerance)(t,r),this.handleStyleImageChange_,this);return n},r}(_.default);R.handles=function(e){return e.getType()===r.default.VECTOR},R.create=function(e,t){return new R(t)},exports.default=R;
},{"../../util.js":"KniQ","../../LayerType.js":"8+bQ","../../ViewHint.js":"cuLW","../../dom.js":"Xno5","../../events.js":"55Uq","../../events/EventType.js":"C8cu","rbush":"y0Xa","../../extent.js":"QDir","../../render/EventType.js":"z39m","../../render/canvas.js":"iAG7","../../render/canvas/ReplayGroup.js":"TGed","../canvas/Layer.js":"+vPf","../vector.js":"UCah"}],"Q2C4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};
},{}],"UST7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../util.js"),t=require("../../LayerType.js"),r=j(t),i=require("../../TileState.js"),o=j(i),n=require("../../dom.js"),a=require("../../events.js"),l=require("../../events/EventType.js"),s=j(l),d=require("rbush"),u=j(d),g=require("../../extent.js"),p=require("../../layer/VectorTileRenderType.js"),f=j(p),h=require("../../proj.js"),y=require("../../proj/Units.js"),c=j(y),v=require("../../render/ReplayType.js"),T=j(v),R=require("../../render/canvas.js"),E=require("../../render/canvas/ReplayGroup.js"),C=j(E),_=require("../../render/replay.js"),S=require("../canvas/TileLayer.js"),m=j(S),L=require("../vector.js"),x=require("../../transform.js");function j(e){return e&&e.__esModule?e:{default:e}}var O={image:[T.default.POLYGON,T.default.CIRCLE,T.default.LINE_STRING,T.default.IMAGE,T.default.TEXT],hybrid:[T.default.POLYGON,T.default.LINE_STRING]},q={image:[T.default.DEFAULT],hybrid:[T.default.IMAGE,T.default.TEXT,T.default.DEFAULT],vector:_.ORDER},A=function(t){function r(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?(0,u.default)(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=(0,x.create)(),this.zDirection=e.getRenderMode()==f.default.VECTOR?1:0,(0,a.listen)(R.labelCache,s.default.CLEAR,this.handleFontsChanged_,this)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.disposeInternal=function(){(0,a.unlisten)(R.labelCache,s.default.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},r.prototype.getTile=function(e,r,i,n,a){var l=t.prototype.getTile.call(this,e,r,i,n,a);return l.getState()===o.default.LOADED&&(this.createReplayGroup_(l,n,a),this.context&&this.renderTileImage_(l,n,a)),l},r.prototype.prepareFrame=function(e,r){var i=this.getLayer(),o=i.getRevision();if(this.renderedLayerRevision_!=o){this.renderedTiles.length=0;var a=i.getRenderMode();this.context||a==f.default.VECTOR||(this.context=(0,n.createCanvasContext2D)()),this.context&&a==f.default.VECTOR&&(this.context=null)}return this.renderedLayerRevision_=o,t.prototype.prepareFrame.apply(this,arguments)},r.prototype.createReplayGroup_=function(e,t,r){var i=this,n=this.getLayer(),a=n.getRevision(),l=n.getRenderOrder()||null,s=e.getReplayState(n);if(s.dirty||s.renderedRevision!=a||s.renderedRenderOrder!=l){for(var d=n.getSource(),u=d.getTileGrid(),p=d.getTileGridForProjection(r).getResolution(e.tileCoord[0]),f=e.extent,y={},v=function(a,v){var T=e.getTile(e.tileKeys[a]);if(T.getState()==o.default.LOADED){var R=T.tileCoord,E=u.getTileCoordExtent(R),_=(0,g.getIntersection)(f,E),S=(0,g.equals)(E,_)?null:(0,g.buffer)(_,n.getRenderBuffer()*p,i.tmpExtent),m=T.getProjection(),x=!1;(0,h.equivalent)(r,m)||(x=!0,T.setProjection(r)),s.dirty=!1;var j=new C.default(0,_,p,t,d.getOverlaps(),i.declutterTree_,n.getRenderBuffer()),O=(0,L.getSquaredTolerance)(p,t),q=function(e){var t,r=e.getStyleFunction()||n.getStyleFunction();if(r&&(t=r(e,p)),t){var i=this.renderFeature(e,O,t,j);this.dirty_=this.dirty_||i,s.dirty=s.dirty||i}},A=T.getFeatures();l&&l!==s.renderedRenderOrder&&A.sort(l);for(var G=0,I=A.length;G<I;++G){var F=A[G];x&&(m.getUnits()==c.default.TILE_PIXELS&&(m.setWorldExtent(E),m.setExtent(T.getExtent())),F.getGeometry().transform(m,r)),S&&!(0,g.intersects)(S,F.getGeometry().getExtent())||q.call(i,F)}for(var D in j.finish(),j.getReplays())y[D]=!0;T.setReplayGroup(n,e.tileCoord.toString(),j)}},T=0,R=e.tileKeys.length;T<R;++T)v(T);s.renderedRevision=a,s.renderedRenderOrder=l}},r.prototype.forEachFeatureAtCoordinate=function(t,r,i,n,a){var l=r.viewState.resolution,s=r.viewState.rotation;i=null==i?0:i;var d,u,p,f,h,y=this.getLayer(),c={},v=this.renderedTiles;for(p=0,f=v.length;p<f;++p){var T=v[p];if(d=(0,g.buffer)(T.extent,i*l,d),(0,g.containsCoordinate)(d,t))for(var R=0,E=T.tileKeys.length;R<E;++R){var C=T.getTile(T.tileKeys[R]);C.getState()==o.default.LOADED&&(h=C.getReplayGroup(y,T.tileCoord.toString()),u=u||h.forEachFeatureAtCoordinate(t,l,s,i,{},function(t){var r=(0,e.getUid)(t).toString();if(!(r in c))return c[r]=!0,n.call(a,t,y)},null))}}return u},r.prototype.getReplayTransform_=function(e,t){var r=this.getLayer().getSource().getTileGrid(),i=e.tileCoord,o=r.getResolution(i[0]),n=t.viewState,a=t.pixelRatio,l=n.resolution/a,s=r.getTileCoordExtent(i,this.tmpExtent),d=n.center,u=(0,g.getTopLeft)(s),p=t.size,f=Math.round(a*p[0]/2),h=Math.round(a*p[1]/2);return(0,x.compose)(this.tmpTransform_,f,h,o/l,o/l,n.rotation,(u[0]-d[0])/o,(d[1]-u[1])/o)},r.prototype.handleFontsChanged_=function(e){var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},r.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},r.prototype.postCompose=function(e,r,i){var n=this.getLayer(),a=n.getRenderMode();if(a!=f.default.IMAGE){var l,s,d=n.getDeclutter()?{}:null,u=n.getSource(),g=q[a],p=r.pixelRatio,h=r.viewState.rotation,y=r.size;h&&(l=Math.round(p*y[0]/2),s=Math.round(p*y[1]/2),(0,R.rotateAtOffset)(e,-h,l,s)),d&&this.declutterTree_.clear();for(var c=this.renderedTiles,v=u.getTileGridForProjection(r.viewState.projection),T=[],C=[],_=c.length-1;_>=0;--_){var S=c[_];if(S.getState()!=o.default.ABORT)for(var m=S.tileCoord,L=v.getTileCoordExtent(m,this.tmpExtent)[0]-S.extent[0],x=void 0,j=0,O=S.tileKeys.length;j<O;++j){var A=S.getTile(S.tileKeys[j]);if(A.getState()==o.default.LOADED){var G=A.getReplayGroup(n,m.toString());if(G&&G.hasReplays(g)){x||(x=this.getTransform(r,L));var I=A.tileCoord[0],F=G.getClipCoords(x);e.save(),e.globalAlpha=i.opacity;for(var D=0,b=T.length;D<b;++D){var M=T[D];I<C[D]&&(e.beginPath(),e.moveTo(F[0],F[1]),e.lineTo(F[2],F[3]),e.lineTo(F[4],F[5]),e.lineTo(F[6],F[7]),e.moveTo(M[6],M[7]),e.lineTo(M[4],M[5]),e.lineTo(M[2],M[3]),e.lineTo(M[0],M[1]),e.clip())}G.replay(e,x,h,{},g,d),e.restore(),T.push(F),C.push(I)}}}}d&&(0,E.replayDeclutter)(d,e,h),h&&(0,R.rotateAtOffset)(e,h,l,s)}t.prototype.postCompose.apply(this,arguments)},r.prototype.renderFeature=function(e,t,r,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var n=0,a=r.length;n<a;++n)o=(0,L.renderFeature)(i,e,r[n],t,this.handleStyleImageChange_,this)||o;else o=(0,L.renderFeature)(i,e,r,t,this.handleStyleImageChange_,this);return o},r.prototype.renderTileImage_=function(e,t,r){var i=this.getLayer(),n=e.getReplayState(i),a=i.getRevision(),l=O[i.getRenderMode()];if(l&&n.renderedTileRevision!==a){n.renderedTileRevision=a;var s=e.wrappedTileCoord,d=s[0],u=i.getSource(),g=u.getTileGridForProjection(r),p=g.getResolution(d),f=e.getContext(i),h=u.getTilePixelSize(d,t,r);f.canvas.width=h[0],f.canvas.height=h[1];for(var y=g.getTileCoordExtent(s,this.tmpExtent),c=0,v=e.tileKeys.length;c<v;++c){var T=e.getTile(e.tileKeys[c]);if(T.getState()==o.default.LOADED){var R=t/p,E=(0,x.reset)(this.tmpTransform_);(0,x.scale)(E,R,-R),(0,x.translate)(E,-y[0],-y[3]),T.getReplayGroup(i,e.tileCoord.toString()).replay(f,E,0,{},l)}}}},r}(m.default);A.handles=function(e){return e.getType()===r.default.VECTOR_TILE},A.create=function(e,t){return new A(t)},exports.default=A;
},{"../../util.js":"KniQ","../../LayerType.js":"8+bQ","../../TileState.js":"Xz9x","../../dom.js":"Xno5","../../events.js":"55Uq","../../events/EventType.js":"C8cu","rbush":"y0Xa","../../extent.js":"QDir","../../layer/VectorTileRenderType.js":"Q2C4","../../proj.js":"Diht","../../proj/Units.js":"yZx6","../../render/ReplayType.js":"D882","../../render/canvas.js":"iAG7","../../render/canvas/ReplayGroup.js":"TGed","../../render/replay.js":"FzwX","../canvas/TileLayer.js":"hkM/","../vector.js":"UCah","../../transform.js":"P4eA"}],"8kYy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./PluggableMap.js"),r=y(e),t=require("./control/util.js"),a=require("./interaction.js"),n=require("./obj.js"),o=require("./renderer/canvas/ImageLayer.js"),s=y(o),u=require("./renderer/canvas/Map.js"),i=y(u),c=require("./renderer/canvas/TileLayer.js"),l=y(c),d=require("./renderer/canvas/VectorLayer.js"),f=y(d),p=require("./renderer/canvas/VectorTileLayer.js"),j=y(p);function y(e){return e&&e.__esModule?e:{default:e}}var q=function(e){function r(r){(r=(0,n.assign)({},r)).controls||(r.controls=(0,t.defaults)()),r.interactions||(r.interactions=(0,a.defaults)()),e.call(this,r)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.createRenderer=function(){var e=new i.default(this);return e.registerLayerRenderers([s.default,l.default,f.default,j.default]),e},r}(r.default);exports.default=q;
},{"./PluggableMap.js":"kRwz","./control/util.js":"uzb+","./interaction.js":"aMDX","./obj.js":"mH6q","./renderer/canvas/ImageLayer.js":"rz/N","./renderer/canvas/Map.js":"vJhp","./renderer/canvas/TileLayer.js":"hkM/","./renderer/canvas/VectorLayer.js":"F2e3","./renderer/canvas/VectorTileLayer.js":"UST7"}],"VpAM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};
},{}],"/qWc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./MapEventType.js"),e=p(t),i=require("./Object.js"),n=p(i),o=require("./OverlayPositioning.js"),s=p(o),r=require("./css.js"),a=require("./dom.js"),h=require("./events.js"),d=require("./extent.js");function p(t){return t&&t.__esModule?t:{default:t}}var l={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},u=function(t){function n(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("DIV"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+r.CLASS_SELECTABLE,this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,(0,h.listen)(this,(0,i.getChangeEventType)(l.ELEMENT),this.handleElementChanged,this),(0,h.listen)(this,(0,i.getChangeEventType)(l.MAP),this.handleMapChanged,this),(0,h.listen)(this,(0,i.getChangeEventType)(l.OFFSET),this.handleOffsetChanged,this),(0,h.listen)(this,(0,i.getChangeEventType)(l.POSITION),this.handlePositionChanged,this),(0,h.listen)(this,(0,i.getChangeEventType)(l.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:s.default.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getElement=function(){return this.get(l.ELEMENT)},n.prototype.getId=function(){return this.id},n.prototype.getMap=function(){return this.get(l.MAP)},n.prototype.getOffset=function(){return this.get(l.OFFSET)},n.prototype.getPosition=function(){return this.get(l.POSITION)},n.prototype.getPositioning=function(){return this.get(l.POSITIONING)},n.prototype.handleElementChanged=function(){(0,a.removeChildren)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&((0,a.removeNode)(this.element),(0,h.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,h.listen)(t,e.default.POSTRENDER,this.render,this),this.updatePixelPosition();var i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element)}},n.prototype.render=function(){this.updatePixelPosition()},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(l.POSITION)&&this.autoPan&&this.panIntoView()},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},n.prototype.setElement=function(t){this.set(l.ELEMENT,t)},n.prototype.setMap=function(t){this.set(l.MAP,t)},n.prototype.setOffset=function(t){this.set(l.OFFSET,t)},n.prototype.setPosition=function(t){this.set(l.POSITION,t)},n.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),n=this.getRect(i,[(0,a.outerWidth)(i),(0,a.outerHeight)(i)]),o=this.autoPanMargin;if(!(0,d.containsExtent)(e,n)){var s=n[0]-e[0],r=e[2]-n[2],h=n[1]-e[1],p=e[3]-n[3],l=[0,0];if(s<0?l[0]=s-o:r<0&&(l[0]=Math.abs(r)+o),h<0?l[1]=h-o:p<0&&(l[1]=Math.abs(p)+o),0!==l[0]||0!==l[1]){var u=t.getView().getCenter(),g=t.getPixelFromCoordinate(u),f=[g[0]+l[0],g[1]+l[1]];t.getView().animate({center:t.getCoordinateFromPixel(f),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},n.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]},n.prototype.setPositioning=function(t){this.set(l.POSITIONING,t)},n.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},n.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},n.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=n[0],a=n[1];if(o==s.default.BOTTOM_RIGHT||o==s.default.CENTER_RIGHT||o==s.default.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var h=Math.round(e[0]-t[0]-r)+"px";this.rendered.right_!=h&&(this.rendered.right_=i.right=h)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),o!=s.default.BOTTOM_CENTER&&o!=s.default.CENTER_CENTER&&o!=s.default.TOP_CENTER||(r-=this.element.offsetWidth/2);var d=Math.round(t[0]+r)+"px";this.rendered.left_!=d&&(this.rendered.left_=i.left=d)}if(o==s.default.BOTTOM_LEFT||o==s.default.BOTTOM_CENTER||o==s.default.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var p=Math.round(e[1]-t[1]-a)+"px";this.rendered.bottom_!=p&&(this.rendered.bottom_=i.bottom=p)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),o!=s.default.CENTER_LEFT&&o!=s.default.CENTER_CENTER&&o!=s.default.CENTER_RIGHT||(a-=this.element.offsetHeight/2);var l=Math.round(t[1]+a)+"px";this.rendered.top_!=l&&(this.rendered.top_=i.top=l)}},n.prototype.getOptions=function(){return this.options},n}(n.default);exports.default=u;
},{"./MapEventType.js":"xLGm","./Object.js":"PhPh","./OverlayPositioning.js":"VpAM","./css.js":"HgMV","./dom.js":"Xno5","./events.js":"55Uq","./extent.js":"QDir"}],"2faT":[function(require,module,exports) {
"use strict";function e(e,t,r,n){return void 0!==n?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function t(e,t,r){return e+"/"+t+"/"+r}function r(e){return t(e[0],e[1],e[2])}function n(e){return e.split("/").map(Number)}function o(e){return(e[1]<<e[0])+e[2]}function u(e){var t,r,n=e[0],o=new Array(n),u=1<<n-1;for(t=0;t<n;++t)r=48,e[1]&u&&(r+=1),e[2]&u&&(r+=2),o[t]=String.fromCharCode(r),u>>=1;return o.join("")}function i(e,t){var r=e[0],n=e[1],o=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var u,i=t.getExtent();return!(u=i?t.getTileRangeForExtentAndZ(i,r):t.getFullTileRange(r))||u.containsXY(n,o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=e,exports.getKeyZXY=t,exports.getKey=r,exports.fromKey=n,exports.hash=o,exports.quadKey=u,exports.withinExtentAndZ=i;
},{}],"YFDe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./structs/LRUCache.js"),t=r(e),o=require("./tilecoord.js");function r(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.expireCache=function(e){for(;this.canExpireCache();){var t=this.peekLast(),o=t.tileCoord[0].toString();if(o in e&&e[o].contains(t.tileCoord))break;this.pop().dispose()}},t.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var e=this.peekFirstKey(),t=(0,o.fromKey)(e)[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove((0,o.getKey)(e.tileCoord)),e.dispose())},this)}},t}(t.default);exports.default=i;
},{"./structs/LRUCache.js":"oMDz","./tilecoord.js":"2faT"}],"xDao":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultLoadFunction=y;var e=require("./util.js"),t=require("./Tile.js"),i=f(t),s=require("./TileState.js"),r=f(s),n=require("./dom.js"),o=require("./events.js"),l=require("./extent.js"),a=require("./events/EventType.js"),u=f(a),h=require("./featureloader.js"),d=require("./functions.js");function f(e){return e&&e.__esModule?e:{default:e}}var c=function(t){function i(e,s,n,a,h,f,c,y,g,p,_,v,L,E,T){if(t.call(this,e,s,{transition:0}),this.context_={},this.loader_,this.replayState_={},this.sourceTiles_=p,this.tileKeys=[],this.extent=null,this.sourceRevision_=n,this.wrappedTileCoord=f,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],f){var K=this.extent=g.getTileCoordExtent(f),D=g.getResolution(T),R=y.getZForResolution(D),O=T!=e[0],x=0;if(y.forEachTileCoord(K,R,function(e){var t=(0,l.getIntersection)(K,y.getTileCoordExtent(e)),i=y.getExtent();if(i&&(t=(0,l.getIntersection)(t,i,t)),(0,l.getWidth)(t)/D>=.5&&(0,l.getHeight)(t)/D>=.5){++x;var s=e.toString(),n=p[s];if(!n&&!O){var d=c(e,_,v);n=p[s]=new L(e,null==d?r.default.EMPTY:r.default.IDLE,null==d?"":d,a,h),this.sourceTileListenerKeys_.push((0,o.listen)(n,u.default.CHANGE,E))}!n||O&&n.getState()!=r.default.LOADED||(n.consumers++,this.tileKeys.push(s))}}.bind(this)),O&&x==this.tileKeys.length&&this.finishLoading_(),T<=e[0]&&this.state!=r.default.LOADED)for(;T>g.getMinZoom();){var S=new i(e,s,n,a,h,f,c,y,g,p,_,v,L,d.UNDEFINED,--T);if(S.state==r.default.LOADED){this.interimTile=S;break}}}}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){this.state=r.default.ABORT,this.changed(),this.interimTile&&this.interimTile.dispose();for(var e=0,i=this.tileKeys.length;e<i;++e){var s=this.tileKeys[e],n=this.getTile(s);n.consumers--,0==n.consumers&&(delete this.sourceTiles_[s],n.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(o.unlistenByKey),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(o.unlistenByKey),this.sourceTileListenerKeys_.length=0,t.prototype.disposeInternal.call(this)},i.prototype.getContext=function(t){var i=(0,e.getUid)(t).toString();return i in this.context_||(this.context_[i]=(0,n.createCanvasContext2D)()),this.context_[i]},i.prototype.getImage=function(e){return-1==this.getReplayState(e).renderedTileRevision?null:this.getContext(e).canvas},i.prototype.getReplayState=function(t){var i=(0,e.getUid)(t).toString();return i in this.replayState_||(this.replayState_[i]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[i]},i.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},i.prototype.getTile=function(e){return this.sourceTiles_[e]},i.prototype.load=function(){var t=0,i={};this.state==r.default.IDLE&&this.setState(r.default.LOADING),this.state==r.default.LOADING&&this.tileKeys.forEach(function(s){var n=this.getTile(s);if(n.state==r.default.IDLE&&(n.setLoader(this.loader_),n.load()),n.state==r.default.LOADING){var l=(0,o.listen)(n,u.default.CHANGE,function(s){var o=n.getState();if(o==r.default.LOADED||o==r.default.ERROR){var l=(0,e.getUid)(n);o==r.default.ERROR?i[l]=!0:(--t,delete i[l]),t-Object.keys(i).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(l),++t}}.bind(this)),t-Object.keys(i).length==0&&setTimeout(this.finishLoading_.bind(this),0)},i.prototype.finishLoading_=function(){for(var e=this.tileKeys.length,t=0,i=e-1;i>=0;--i){var s=this.getTile(this.tileKeys[i]).getState();s!=r.default.LOADED&&--e,s==r.default.EMPTY&&++t}e==this.tileKeys.length?(this.loadListenerKeys_.forEach(o.unlistenByKey),this.loadListenerKeys_.length=0,this.setState(r.default.LOADED)):this.setState(t==this.tileKeys.length?r.default.EMPTY:r.default.ERROR)},i}(i.default);function y(e,t){var i=(0,h.loadFeaturesXhr)(t,e.getFormat(),e.onLoad.bind(e),e.onError.bind(e));e.setLoader(i)}exports.default=c;
},{"./util.js":"KniQ","./Tile.js":"IWZI","./TileState.js":"Xz9x","./dom.js":"Xno5","./events.js":"55Uq","./extent.js":"QDir","./events/EventType.js":"C8cu","./featureloader.js":"U3JP","./functions.js":"RgA2"}],"yj80":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./util.js"),e=require("./Tile.js"),o=s(e),r=require("./TileState.js"),i=s(r);function s(t){return t&&t.__esModule?t:{default:t}}var n=[0,0,4096,4096],u=function(e){function o(t,o,r,i,s,n){e.call(this,t,o,n),this.consumers=0,this.extent_=null,this.format_=i,this.features_=null,this.loader_,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=s,this.url_=r}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=i.default.ABORT,this.changed(),e.prototype.disposeInternal.call(this)},o.prototype.getExtent=function(){return this.extent_||n},o.prototype.getFormat=function(){return this.format_},o.prototype.getFeatures=function(){return this.features_},o.prototype.getKey=function(){return this.url_},o.prototype.getProjection=function(){return this.projection_},o.prototype.getReplayGroup=function(e,o){return this.replayGroups_[(0,t.getUid)(e)+","+o]},o.prototype.load=function(){this.state==i.default.IDLE&&(this.setState(i.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},o.prototype.onLoad=function(t,e,o){this.setProjection(e),this.setFeatures(t),this.setExtent(o)},o.prototype.onError=function(){this.setState(i.default.ERROR)},o.prototype.setExtent=function(t){this.extent_=t},o.prototype.setFeatures=function(t){this.features_=t,this.setState(i.default.LOADED)},o.prototype.setProjection=function(t){this.projection_=t},o.prototype.setReplayGroup=function(e,o,r){this.replayGroups_[(0,t.getUid)(e)+","+o]=r},o.prototype.setLoader=function(t){this.loader_=t},o}(o.default);exports.default=u;
},{"./util.js":"KniQ","./Tile.js":"IWZI","./TileState.js":"Xz9x"}],"dOoh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../control/Control.js"),t=r(e),l=require("../css.js"),s=require("../dom.js"),n=require("../events.js"),u=require("../events/EventType.js"),c=r(u);function r(e){return e&&e.__esModule?e:{default:e}}var o=function(){var e;return function(){if(!e){var t=document.body;t.webkitRequestFullscreen?e="webkitfullscreenchange":t.mozRequestFullScreen?e="mozfullscreenchange":t.msRequestFullscreen?e="MSFullscreenChange":t.requestFullscreen&&(e="fullscreenchange")}return e}}(),i=function(e){function t(t){var s=t||{};e.call(this,{element:document.createElement("div"),target:s.target}),this.cssClassName_=void 0!==s.className?s.className:"ol-full-screen";var u=void 0!==s.label?s.label:"⤢";this.labelNode_="string"==typeof u?document.createTextNode(u):u;var r=void 0!==s.labelActive?s.labelActive:"×";this.labelActiveNode_="string"==typeof r?document.createTextNode(r):r;var o=s.tipLabel?s.tipLabel:"Toggle full-screen",i=document.createElement("button");i.className=this.cssClassName_+"-"+d(),i.setAttribute("type","button"),i.title=o,i.appendChild(this.labelNode_),(0,n.listen)(i,c.default.CLICK,this.handleClick_,this);var m=this.cssClassName_+" "+l.CLASS_UNSELECTABLE+" "+l.CLASS_CONTROL+" "+(a()?"":l.CLASS_UNSUPPORTED),h=this.element;h.className=m,h.appendChild(i),this.keys_=void 0!==s.keys&&s.keys,this.source_=s.source}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.handleClick_=function(e){e.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){if(a()){var e,t=this.getMap();if(t)if(d())p();else e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?h(e):m(e)}},t.prototype.handleFullScreenChange_=function(){var e=this.element.firstElementChild,t=this.getMap();d()?(e.className=this.cssClassName_+"-true",(0,s.replaceNode)(this.labelActiveNode_,this.labelNode_)):(e.className=this.cssClassName_+"-false",(0,s.replaceNode)(this.labelNode_,this.labelActiveNode_)),t&&t.updateSize()},t.prototype.setMap=function(t){e.prototype.setMap.call(this,t),t&&this.listenerKeys.push((0,n.listen)(document,o(),this.handleFullScreenChange_,this))},t}(t.default);function a(){var e=document.body;return!!(e.webkitRequestFullscreen||e.mozRequestFullScreen&&document.mozFullScreenEnabled||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function d(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function m(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function h(e){e.mozRequestFullScreenWithKeys?e.mozRequestFullScreenWithKeys():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):m(e)}function p(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}exports.default=i;
},{"../control/Control.js":"+/xx","../css.js":"HgMV","../dom.js":"Xno5","../events.js":"55Uq","../events/EventType.js":"C8cu"}],"KMhA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=R;var e=require("../Collection.js"),t=O(e),i=require("../Map.js"),o=O(i),a=require("../MapEventType.js"),s=O(a),l=require("../MapProperty.js"),n=O(l),r=require("../Object.js"),p=require("../ObjectEventType.js"),h=O(p),d=require("../Overlay.js"),c=O(d),u=require("../OverlayPositioning.js"),_=O(u),v=require("../ViewProperty.js"),g=O(v),m=require("../control/Control.js"),b=O(m),f=require("../coordinate.js"),y=require("../css.js"),w=require("../dom.js"),E=require("../events.js"),C=require("../events/EventType.js"),L=O(C),x=require("../extent.js");function O(e){return e&&e.__esModule?e:{default:e}}var M=.75,V=.1,T=function(e){function i(i){var a=i||{};e.call(this,{element:document.createElement("div"),render:a.render||R,target:a.target}),this.collapsed_=void 0===a.collapsed||a.collapsed,this.collapsible_=void 0===a.collapsible||a.collapsible,this.collapsible_||(this.collapsed_=!1);var s=void 0!==a.className?a.className:"ol-overviewmap",l=void 0!==a.tipLabel?a.tipLabel:"Overview map",n=void 0!==a.collapseLabel?a.collapseLabel:"«";"string"==typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;var r=void 0!==a.label?a.label:"»";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r):this.label_=r;var p=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=l,h.appendChild(p),(0,E.listen)(h,L.default.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("DIV"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new o.default({controls:new t.default,interactions:new t.default,view:a.view});var d=this.ovmap_;a.layers&&a.layers.forEach(function(e){d.addLayer(e)}.bind(this));var u=document.createElement("DIV");u.className="ol-overviewmap-box",u.style.boxSizing="border-box",this.boxOverlay_=new c.default({position:[0,0],positioning:_.default.BOTTOM_LEFT,element:u}),this.ovmap_.addOverlay(this.boxOverlay_);var v=s+" "+y.CLASS_UNSELECTABLE+" "+y.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+y.CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),g=this.element;g.className=v,g.appendChild(this.ovmapDiv_),g.appendChild(h);var m=this,b=this.boxOverlay_,f=this.boxOverlay_.getElement(),w=function(e){var t,i=d.getEventCoordinate({clientX:(t=e).clientX-f.offsetWidth/2,clientY:t.clientY+f.offsetHeight/2});b.setPosition(i)},C=function(e){var t=d.getEventCoordinate(e);m.getMap().getView().setCenter(t),window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",C)};f.addEventListener("mousedown",function(){window.addEventListener("mousemove",w),window.addEventListener("mouseup",C)})}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.setMap=function(t){var i=this.getMap();if(t!==i){if(i){var o=i.getView();o&&this.unbindView_(o),this.ovmap_.setTarget(null)}if(e.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,E.listen)(t,h.default.PROPERTYCHANGE,this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(t.getLayerGroup());var a=t.getView();a&&(this.bindView_(a),a.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},i.prototype.handleMapPropertyChange_=function(e){if(e.key===n.default.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var i=this.getMap().getView();this.bindView_(i)}},i.prototype.bindView_=function(e){(0,E.listen)(e,(0,r.getChangeEventType)(g.default.ROTATION),this.handleRotationChanged_,this)},i.prototype.unbindView_=function(e){(0,E.unlisten)(e,(0,r.getChangeEventType)(g.default.ROTATION),this.handleRotationChanged_,this)},i.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},i.prototype.validateExtent_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView().calculateExtent(i),a=t.getSize(),s=t.getView().calculateExtent(a),l=t.getPixelFromCoordinate((0,x.getTopLeft)(o)),n=t.getPixelFromCoordinate((0,x.getBottomRight)(o)),r=Math.abs(l[0]-n[0]),p=Math.abs(l[1]-n[1]),h=a[0],d=a[1];r<h*V||p<d*V||r>h*M||p>d*M?this.resetExtent_():(0,x.containsExtent)(s,o)||this.recenter_()}},i.prototype.resetExtent_=function(){if(0!==M&&0!==V){var e=this.getMap(),t=this.ovmap_,i=e.getSize(),o=e.getView().calculateExtent(i),a=t.getView(),s=Math.log(M/V)/Math.LN2,l=1/(Math.pow(2,s/2)*V);(0,x.scaleFromCenter)(o,l),a.fit(o)}},i.prototype.recenter_=function(){var e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenter(i.getCenter())},i.prototype.updateBox_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView(),a=t.getView(),s=o.getRotation(),l=this.boxOverlay_,n=this.boxOverlay_.getElement(),r=o.calculateExtent(i),p=a.getResolution(),h=(0,x.getBottomLeft)(r),d=(0,x.getTopRight)(r),c=this.calculateCoordinateRotate_(s,h);l.setPosition(c),n&&(n.style.width=Math.abs((h[0]-d[0])/p)+"px",n.style.height=Math.abs((d[1]-h[1])/p)+"px")}},i.prototype.calculateCoordinateRotate_=function(e,t){var i,o=this.getMap().getView().getCenter();return o&&(i=[t[0]-o[0],t[1]-o[1]],(0,f.rotate)(i,e),(0,f.add)(i,o)),i},i.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},i.prototype.handleToggle_=function(){this.element.classList.toggle(y.CLASS_COLLAPSED),this.collapsed_?(0,w.replaceNode)(this.collapseLabel_,this.label_):(0,w.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;this.collapsed_||e.isRendered()||(e.updateSize(),this.resetExtent_(),(0,E.listenOnce)(e,s.default.POSTRENDER,function(e){this.updateBox_()},this))},i.prototype.getCollapsible=function(){return this.collapsible_},i.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},i.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},i.prototype.getCollapsed=function(){return this.collapsed_},i.prototype.getOverviewMap=function(){return this.ovmap_},i}(b.default);function R(e){this.validateExtent_(),this.updateBox_()}exports.default=T;
},{"../Collection.js":"FnDa","../Map.js":"8kYy","../MapEventType.js":"xLGm","../MapProperty.js":"zlNQ","../Object.js":"PhPh","../ObjectEventType.js":"zehl","../Overlay.js":"/qWc","../OverlayPositioning.js":"VpAM","../ViewProperty.js":"0/98","../control/Control.js":"+/xx","../coordinate.js":"nGsj","../css.js":"HgMV","../dom.js":"Xno5","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir"}],"DK5d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Units=void 0,exports.render=m;var e=require("../Object.js"),t=require("../asserts.js"),i=require("../control/Control.js"),n=o(i),r=require("../css.js"),s=require("../events.js"),d=require("../proj.js"),l=require("../proj/Units.js"),a=o(l);function o(e){return e&&e.__esModule?e:{default:e}}var h="units",u=exports.Units={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},E=[1,2,5],_=function(i){function n(t){var n=t||{},d=void 0!==n.className?n.className:"ol-scale-line";i.call(this,{element:document.createElement("DIV"),render:n.render||m,target:n.target}),this.innerElement_=document.createElement("DIV"),this.innerElement_.className=d+"-inner",this.element.className=d+" "+r.CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==n.minWidth?n.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",(0,s.listen)(this,(0,e.getChangeEventType)(h),this.handleUnitsChanged_,this),this.setUnits(n.units||u.METRIC)}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n.prototype.getUnits=function(){return this.get(h)},n.prototype.handleUnitsChanged_=function(){this.updateElement_()},n.prototype.setUnits=function(e){this.set(h,e)},n.prototype.updateElement_=function(){var e=this.viewState_;if(e){var i=e.center,n=e.projection,r=this.getUnits(),s=r==u.DEGREES?a.default.DEGREES:a.default.METERS,l=(0,d.getPointResolution)(n,e.resolution,i,s);n.getUnits()!=a.default.DEGREES&&n.getMetersPerUnit()&&s==a.default.METERS&&(l*=n.getMetersPerUnit());var o=this.minWidth_*l,h="";if(r==u.DEGREES){var _=d.METERS_PER_UNIT[a.default.DEGREES];n.getUnits()==a.default.DEGREES?o*=_:l/=_,o<_/60?(h="″",l*=3600):o<_?(h="′",l*=60):h="°"}else r==u.IMPERIAL?o<.9144?(h="in",l/=.0254):o<1609.344?(h="ft",l/=.3048):(h="mi",l/=1609.344):r==u.NAUTICAL?(l/=1852,h="nm"):r==u.METRIC?o<.001?(h="μm",l*=1e6):o<1?(h="mm",l*=1e3):o<1e3?h="m":(h="km",l/=1e3):r==u.US?o<.9144?(h="in",l*=39.37):o<1609.344?(h="ft",l/=.30480061):(h="mi",l/=1609.3472):(0,t.assert)(!1,33);for(var m,p,c=3*Math.floor(Math.log(this.minWidth_*l)/Math.log(10));;){if(m=E[(c%3+3)%3]*Math.pow(10,Math.floor(c/3)),p=Math.round(m/l),isNaN(p))return this.element.style.display="none",void(this.renderedVisible_=!1);if(p>=this.minWidth_)break;++c}var f=m+" "+h;this.renderedHTML_!=f&&(this.innerElement_.innerHTML=f,this.renderedHTML_=f),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},n}(n.default);function m(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()}exports.default=_;
},{"../Object.js":"PhPh","../asserts.js":"fLG6","../control/Control.js":"+/xx","../css.js":"HgMV","../events.js":"55Uq","../proj.js":"Diht","../proj/Units.js":"yZx6"}],"A/Kw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=v;var t=require("../ViewHint.js"),e=c(t),i=require("../control/Control.js"),s=c(i),o=require("../css.js"),r=require("../easing.js"),n=require("../events.js"),a=require("../events/Event.js"),h=require("../events/EventType.js"),l=c(h),u=require("../math.js"),d=require("../pointer/EventType.js"),_=c(d),g=require("../pointer/PointerEventHandler.js"),p=c(g);function c(t){return t&&t.__esModule?t:{default:t}}var f={VERTICAL:0,HORIZONTAL:1},m=function(t){function i(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||v}),this.currentResolution_=void 0,this.direction_=f.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.previousX_,this.previousY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==i.duration?i.duration:200;var s=void 0!==i.className?i.className:"ol-zoomslider",r=document.createElement("button");r.setAttribute("type","button"),r.className=s+"-thumb "+o.CLASS_UNSELECTABLE;var h=this.element;h.className=s+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,h.appendChild(r),this.dragger_=new p.default(h),(0,n.listen)(this.dragger_,_.default.POINTERDOWN,this.handleDraggerStart_,this),(0,n.listen)(this.dragger_,_.default.POINTERMOVE,this.handleDraggerDrag_,this),(0,n.listen)(this.dragger_,_.default.POINTERUP,this.handleDraggerEnd_,this),(0,n.listen)(h,l.default.CLICK,this.handleContainerClick_,this),(0,n.listen)(r,l.default.CLICK,a.stopPropagation)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){this.dragger_.dispose(),t.prototype.disposeInternal.call(this)},i.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},i.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight,s=t.firstElementChild,o=getComputedStyle(s),r=s.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),n=s.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);this.thumbSize_=[r,n],e>i?(this.direction_=f.HORIZONTAL,this.widthLimit_=e-r):(this.direction_=f.VERTICAL,this.heightLimit_=i-n),this.sliderInitialized_=!0},i.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),s=this.getResolutionForPosition_(i);e.animate({resolution:e.constrainResolution(s),duration:this.duration_,easing:r.easeOut})},i.prototype.handleDraggerStart_=function(t){this.dragging_||t.originalEvent.target!==this.element.firstElementChild||(this.getMap().getView().setHint(e.default.INTERACTING,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0)},i.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=this.element.firstElementChild,i=t.clientX-this.previousX_+parseInt(e.style.left,10),s=t.clientY-this.previousY_+parseInt(e.style.top,10),o=this.getRelativePosition_(i,s);this.currentResolution_=this.getResolutionForPosition_(o),this.getMap().getView().setResolution(this.currentResolution_),this.setThumbPosition_(this.currentResolution_),this.previousX_=t.clientX,this.previousY_=t.clientY}},i.prototype.handleDraggerEnd_=function(t){if(this.dragging_){var i=this.getMap().getView();i.setHint(e.default.INTERACTING,-1),i.animate({resolution:i.constrainResolution(this.currentResolution_),duration:this.duration_,easing:r.easeOut}),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0}},i.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==f.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},i.prototype.getRelativePosition_=function(t,e){var i;return i=this.direction_===f.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,(0,u.clamp)(i,0,1)},i.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},i.prototype.getPositionForResolution_=function(t){return 1-this.getMap().getView().getValueForResolutionFunction()(t)},i}(s.default);function v(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;e!==this.currentResolution_&&(this.currentResolution_=e,this.setThumbPosition_(e))}}exports.default=m;
},{"../ViewHint.js":"cuLW","../control/Control.js":"+/xx","../css.js":"HgMV","../easing.js":"IeCz","../events.js":"55Uq","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../math.js":"B96G","../pointer/EventType.js":"TaSm","../pointer/PointerEventHandler.js":"zTqe"}],"W4Y0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../events.js"),t=require("../events/EventType.js"),o=l(t),n=require("../control/Control.js"),r=l(n),i=require("../css.js");function l(e){return e&&e.__esModule?e:{default:e}}var a=function(t){function n(n){var r=n||{};t.call(this,{element:document.createElement("div"),target:r.target}),this.extent=r.extent?r.extent:null;var l=void 0!==r.className?r.className:"ol-zoom-extent",a=void 0!==r.label?r.label:"E",s=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",u=document.createElement("button");u.setAttribute("type","button"),u.title=s,u.appendChild("string"==typeof a?document.createTextNode(a):a),(0,e.listen)(u,o.default.CLICK,this.handleClick_,this);var c=l+" "+i.CLASS_UNSELECTABLE+" "+i.CLASS_CONTROL,p=this.element;p.className=c,p.appendChild(u)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.handleClick_=function(e){e.preventDefault(),this.handleZoomToExtent()},n.prototype.handleZoomToExtent=function(){var e=this.getMap().getView(),t=this.extent?this.extent:e.getProjection().getExtent();e.fit(t)},n}(r.default);exports.default=a;
},{"../events.js":"55Uq","../events/EventType.js":"C8cu","../control/Control.js":"+/xx","../css.js":"HgMV"}],"95uc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./control/Attribution.js");Object.defineProperty(exports,"Attribution",{enumerable:!0,get:function(){return f(e).default}});var r=require("./control/Control.js");Object.defineProperty(exports,"Control",{enumerable:!0,get:function(){return f(r).default}});var t=require("./control/FullScreen.js");Object.defineProperty(exports,"FullScreen",{enumerable:!0,get:function(){return f(t).default}});var o=require("./control/OverviewMap.js");Object.defineProperty(exports,"OverviewMap",{enumerable:!0,get:function(){return f(o).default}});var n=require("./control/Rotate.js");Object.defineProperty(exports,"Rotate",{enumerable:!0,get:function(){return f(n).default}});var u=require("./control/ScaleLine.js");Object.defineProperty(exports,"ScaleLine",{enumerable:!0,get:function(){return f(u).default}});var l=require("./control/Zoom.js");Object.defineProperty(exports,"Zoom",{enumerable:!0,get:function(){return f(l).default}});var i=require("./control/ZoomSlider.js");Object.defineProperty(exports,"ZoomSlider",{enumerable:!0,get:function(){return f(i).default}});var a=require("./control/ZoomToExtent.js");Object.defineProperty(exports,"ZoomToExtent",{enumerable:!0,get:function(){return f(a).default}});var c=require("./control/util.js");function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"defaults",{enumerable:!0,get:function(){return c.defaults}});
},{"./control/Attribution.js":"Q4Cf","./control/Control.js":"+/xx","./control/FullScreen.js":"dOoh","./control/OverviewMap.js":"KMhA","./control/Rotate.js":"sCgw","./control/ScaleLine.js":"DK5d","./control/Zoom.js":"L3+c","./control/ZoomSlider.js":"A/Kw","./control/ZoomToExtent.js":"W4Y0","./control/util.js":"uzb+"}],"+jwT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../functions.js"),t=function(e){this.source_=e};t.prototype.getType=function(){},t.prototype.getSource=function(){return this.source_},t.prototype.isAnimated=e.FALSE,exports.default=t;
},{"../functions.js":"RgA2"}],"SAYv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../webgl.js"),t=require("../webgl/Shader.js"),r=o(t);function o(e){return e&&e.__esModule?e:{default:e}}var u=function(t){function r(e){t.call(this,e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.getType=function(){return e.FRAGMENT_SHADER},r}(r.default);exports.default=u;
},{"../webgl.js":"SCyv","../webgl/Shader.js":"+jwT"}],"mo14":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../webgl.js"),t=require("../webgl/Shader.js"),r=o(t);function o(e){return e&&e.__esModule?e:{default:e}}var u=function(t){function r(e){t.call(this,e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.getType=function(){return e.VERTEX_SHADER},r}(r.default);exports.default=u;
},{"../webgl.js":"SCyv","../webgl/Shader.js":"+jwT"}],"GZAE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vertex=exports.fragment=void 0;var i=require("../../../webgl.js"),e=require("../../../webgl/Fragment.js"),t=n(e),o=require("../../../webgl/Vertex.js"),a=n(o);function n(i){return i&&i.__esModule?i:{default:i}}var r=exports.fragment=new t.default(i.DEBUG?"precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n":"precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"),l=exports.vertex=new a.default(i.DEBUG?"varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n":"varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;if(f==0.0){offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}");
},{"../../../webgl.js":"SCyv","../../../webgl/Fragment.js":"SAYv","../../../webgl/Vertex.js":"mo14"}],"K5HK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../../../webgl.js"),i=function(i,o){this.u_projectionMatrix=i.getUniformLocation(o,t.DEBUG?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=i.getUniformLocation(o,t.DEBUG?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=i.getUniformLocation(o,t.DEBUG?"u_offsetRotateMatrix":"j"),this.u_lineWidth=i.getUniformLocation(o,t.DEBUG?"u_lineWidth":"k"),this.u_pixelRatio=i.getUniformLocation(o,t.DEBUG?"u_pixelRatio":"l"),this.u_opacity=i.getUniformLocation(o,t.DEBUG?"u_opacity":"m"),this.u_fillColor=i.getUniformLocation(o,t.DEBUG?"u_fillColor":"n"),this.u_strokeColor=i.getUniformLocation(o,t.DEBUG?"u_strokeColor":"o"),this.u_size=i.getUniformLocation(o,t.DEBUG?"u_size":"p"),this.a_position=i.getAttribLocation(o,t.DEBUG?"a_position":"e"),this.a_instruction=i.getAttribLocation(o,t.DEBUG?"a_instruction":"f"),this.a_radius=i.getAttribLocation(o,t.DEBUG?"a_radius":"g")};exports.default=i;
},{"../../../../webgl.js":"SCyv"}],"UkOi":[function(require,module,exports) {
"use strict";function e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e,r){return e[0]=r[0],e[1]=r[1],e[4]=r[2],e[5]=r[3],e[12]=r[4],e[13]=r[5],e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.fromTransform=r;
},{}],"HMSc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../extent.js"),e=require("../VectorContext.js"),r=o(e),i=require("../../transform.js"),a=require("../../vec/mat4.js"),n=require("../../webgl.js");function o(t){return t&&t.__esModule?t:{default:t}}var s=function(e){function r(r,n){e.call(this),this.tolerance=r,this.maxExtent=n,this.origin=(0,t.getCenter)(n),this.projectionMatrix_=(0,i.create)(),this.offsetRotateMatrix_=(0,i.create)(),this.offsetScaleMatrix_=(0,i.create)(),this.tmpMat4_=(0,a.create)(),this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getDeleteResourcesFunction=function(t){},r.prototype.finish=function(t){},r.prototype.setUpProgram=function(t,e,r,i){},r.prototype.shutDownProgram=function(t,e){},r.prototype.drawReplay=function(t,e,r,i){},r.prototype.drawHitDetectionReplayOneByOne=function(t,e,r,i,a){},r.prototype.drawHitDetectionReplay=function(t,e,r,i,a,n){return a?this.drawHitDetectionReplayOneByOne(t,e,r,i,n):this.drawHitDetectionReplayAll(t,e,r,i)},r.prototype.drawHitDetectionReplayAll=function(t,e,r,i){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,r,!0);var a=i(null);return a||void 0},r.prototype.replay=function(t,e,r,o,s,c,l,f,p,u,_){var E,h,S,T,R,m,y,d,I=t.getGL();this.lineStringReplay&&(E=I.isEnabled(I.STENCIL_TEST),h=I.getParameter(I.STENCIL_FUNC),S=I.getParameter(I.STENCIL_VALUE_MASK),T=I.getParameter(I.STENCIL_REF),R=I.getParameter(I.STENCIL_WRITEMASK),m=I.getParameter(I.STENCIL_FAIL),y=I.getParameter(I.STENCIL_PASS_DEPTH_PASS),d=I.getParameter(I.STENCIL_PASS_DEPTH_FAIL),I.enable(I.STENCIL_TEST),I.clear(I.STENCIL_BUFFER_BIT),I.stencilMask(255),I.stencilFunc(I.ALWAYS,1,255),I.stencilOp(I.KEEP,I.KEEP,I.REPLACE),this.lineStringReplay.replay(t,e,r,o,s,c,l,f,p,u,_),I.stencilMask(0),I.stencilFunc(I.NOTEQUAL,1,255)),t.bindBuffer(n.ARRAY_BUFFER,this.verticesBuffer),t.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);var M=this.setUpProgram(I,t,s,c),g=(0,i.reset)(this.projectionMatrix_);(0,i.scale)(g,2/(r*s[0]),2/(r*s[1])),(0,i.rotate)(g,-o),(0,i.translate)(g,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));var L=(0,i.reset)(this.offsetScaleMatrix_);(0,i.scale)(L,2/s[0],2/s[1]);var F,N=(0,i.reset)(this.offsetRotateMatrix_);return 0!==o&&(0,i.rotate)(N,-o),I.uniformMatrix4fv(M.u_projectionMatrix,!1,(0,a.fromTransform)(this.tmpMat4_,g)),I.uniformMatrix4fv(M.u_offsetScaleMatrix,!1,(0,a.fromTransform)(this.tmpMat4_,L)),I.uniformMatrix4fv(M.u_offsetRotateMatrix,!1,(0,a.fromTransform)(this.tmpMat4_,N)),I.uniform1f(M.u_opacity,l),void 0===p?this.drawReplay(I,t,f,!1):F=this.drawHitDetectionReplay(I,t,f,p,u,_),this.shutDownProgram(I,M),this.lineStringReplay&&(E||I.disable(I.STENCIL_TEST),I.clear(I.STENCIL_BUFFER_BIT),I.stencilFunc(h,T,S),I.stencilMask(R),I.stencilOp(m,d,y)),F},r.prototype.drawElements=function(t,e,r,i){var a=e.hasOESElementIndexUint?n.UNSIGNED_INT:n.UNSIGNED_SHORT,o=i-r,s=r*(e.hasOESElementIndexUint?4:2);t.drawElements(n.TRIANGLES,o,a,s)},r}(r.default);exports.default=s;
},{"../../extent.js":"QDir","../VectorContext.js":"4LQ/","../../transform.js":"P4eA","../../vec/mat4.js":"UkOi","../../webgl.js":"SCyv"}],"7DIo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.DEFAULT_FONT="10px sans-serif",r=exports.DEFAULT_FILLSTYLE=[0,0,0,1],E=exports.DEFAULT_LINECAP="round",L=exports.DEFAULT_LINEDASH=[],T=exports.DEFAULT_LINEDASHOFFSET=0,o=exports.DEFAULT_LINEJOIN="round",s=exports.DEFAULT_MITERLIMIT=10,t=exports.DEFAULT_STROKESTYLE=[0,0,0,1],p=exports.DEFAULT_TEXTALIGN=.5,A=exports.DEFAULT_TEXTBASELINE=.5,I=exports.DEFAULT_LINEWIDTH=1,x=exports.EPSILON=Number.EPSILON||2.220446049250313e-16,F=exports.triangleIsCounterClockwise=function(e,r,E,L,T,o){var s=(E-e)*(o-r)-(T-e)*(L-r);return s<=x&&s>=-x?void 0:s>0};
},{}],"zsRd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../webgl.js"),t={STATIC_DRAW:e.STATIC_DRAW,STREAM_DRAW:e.STREAM_DRAW,DYNAMIC_DRAW:e.DYNAMIC_DRAW},r=function(e,r){this.arr_=void 0!==e?e:[],this.usage_=void 0!==r?r:t.STATIC_DRAW};r.prototype.getArray=function(){return this.arr_},r.prototype.getUsage=function(){return this.usage_},exports.default=r;
},{"../webgl.js":"SCyv"}],"sHZH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../util.js"),e=require("../../array.js"),s=require("../../color.js"),i=require("../../extent.js"),r=require("../../obj.js"),n=require("../../geom/flat/transform.js"),a=require("../webgl/circlereplay/defaultshader.js"),o=require("../webgl/circlereplay/defaultshader/Locations.js"),l=y(o),h=require("../webgl/Replay.js"),c=y(h),d=require("../webgl.js"),u=require("../../webgl.js"),_=require("../../webgl/Buffer.js"),f=y(_);function y(t){return t&&t.__esModule?t:{default:t}}var p=function(o){function h(t,e){o.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}}return o&&(h.__proto__=o),h.prototype=Object.create(o&&o.prototype),h.prototype.constructor=h,h.prototype.drawCoordinates_=function(t,e,s,i){var r,n,a=this.vertices.length,o=this.indices.length,l=a/4;for(r=e,n=s;r<n;r+=i)this.vertices[a++]=t[r],this.vertices[a++]=t[r+1],this.vertices[a++]=0,this.vertices[a++]=this.radius_,this.vertices[a++]=t[r],this.vertices[a++]=t[r+1],this.vertices[a++]=1,this.vertices[a++]=this.radius_,this.vertices[a++]=t[r],this.vertices[a++]=t[r+1],this.vertices[a++]=2,this.vertices[a++]=this.radius_,this.vertices[a++]=t[r],this.vertices[a++]=t[r+1],this.vertices[a++]=3,this.vertices[a++]=this.radius_,this.indices[o++]=l,this.indices[o++]=l+1,this.indices[o++]=l+2,this.indices[o++]=l+2,this.indices[o++]=l+3,this.indices[o++]=l,l+=4},h.prototype.drawCircle=function(t,e){var s=t.getRadius(),i=t.getStride();if(s){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=s;var r=t.getFlatCoordinates();r=(0,n.translate)(r,0,2,i,-this.origin[0],-this.origin[1]),this.drawCoordinates_(r,0,2,i)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){var a=this.styles_[this.styles_.length-1];this.state_.fillColor=a[0],this.state_.strokeColor=a[1],this.state_.lineWidth=a[2],this.state_.changed=!1}},h.prototype.finish=function(t){this.verticesBuffer=new f.default(this.vertices),this.indicesBuffer=new f.default(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},h.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,s=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(s)}},h.prototype.setUpProgram=function(t,e,s,i){var r,n=e.getProgram(a.fragment,a.vertex);return this.defaultLocations_?r=this.defaultLocations_:(r=new l.default(t,n),this.defaultLocations_=r),e.useProgram(n),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,u.FLOAT,!1,16,0),t.enableVertexAttribArray(r.a_instruction),t.vertexAttribPointer(r.a_instruction,1,u.FLOAT,!1,16,8),t.enableVertexAttribArray(r.a_radius),t.vertexAttribPointer(r.a_radius,1,u.FLOAT,!1,16,12),t.uniform2fv(r.u_size,s),t.uniform1f(r.u_pixelRatio,i),r},h.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},h.prototype.drawReplay=function(t,e,s,i){var n,a,o,l;if((0,r.isEmpty)(s))for(o=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)a=this.styleIndices_[n],l=this.styles_[n],this.setFillStyle_(t,l[0]),this.setStrokeStyle_(t,l[1],l[2]),this.drawElements(t,e,a,o),o=a;else this.drawReplaySkipping_(t,e,s)},h.prototype.drawHitDetectionReplayOneByOne=function(e,s,r,n,a){var o,l,h,c,d,u,_;for(_=this.startIndices.length-2,h=this.startIndices[_+1],o=this.styleIndices_.length-1;o>=0;--o)for(c=this.styles_[o],this.setFillStyle_(e,c[0]),this.setStrokeStyle_(e,c[1],c[2]),d=this.styleIndices_[o];_>=0&&this.startIndices[_]>=d;){if(l=this.startIndices[_],u=this.startIndicesFeature[_],void 0===r[(0,t.getUid)(u).toString()]&&u.getGeometry()&&(void 0===a||(0,i.intersects)(a,u.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements(e,s,l,h);var f=n(u);if(f)return f}_--,h=l}},h.prototype.drawReplaySkipping_=function(e,s,i){var r,n,a,o,l,h,c,d;for(c=this.startIndices.length-2,a=n=this.startIndices[c+1],r=this.styleIndices_.length-1;r>=0;--r){for(o=this.styles_[r],this.setFillStyle_(e,o[0]),this.setStrokeStyle_(e,o[1],o[2]),l=this.styleIndices_[r];c>=0&&this.startIndices[c]>=l;)d=this.startIndices[c],h=this.startIndicesFeature[c],i[(0,t.getUid)(h).toString()]&&(n!==a&&this.drawElements(e,s,n,a),a=d),c--,n=d;n!==a&&this.drawElements(e,s,n,a),n=a=l}},h.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},h.prototype.setStrokeStyle_=function(t,e,s){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,s)},h.prototype.setFillStrokeStyle=function(t,i){var r,n;if(i){var a=i.getLineDash();this.state_.lineDash=a||d.DEFAULT_LINEDASH;var o=i.getLineDashOffset();this.state_.lineDashOffset=o||d.DEFAULT_LINEDASHOFFSET,r=(r=i.getColor())instanceof CanvasGradient||r instanceof CanvasPattern?d.DEFAULT_STROKESTYLE:(0,s.asArray)(r).map(function(t,e){return 3!=e?t/255:t})||d.DEFAULT_STROKESTYLE,n=void 0!==(n=i.getWidth())?n:d.DEFAULT_LINEWIDTH}else r=[0,0,0,0],n=0;var l=t?t.getColor():[0,0,0,0];l=l instanceof CanvasGradient||l instanceof CanvasPattern?d.DEFAULT_FILLSTYLE:(0,s.asArray)(l).map(function(t,e){return 3!=e?t/255:t})||d.DEFAULT_FILLSTYLE,this.state_.strokeColor&&(0,e.equals)(this.state_.strokeColor,r)&&this.state_.fillColor&&(0,e.equals)(this.state_.fillColor,l)&&this.state_.lineWidth===n||(this.state_.changed=!0,this.state_.fillColor=l,this.state_.strokeColor=r,this.state_.lineWidth=n,this.styles_.push([l,r,n]))},h}(c.default);exports.default=p;
},{"../../util.js":"KniQ","../../array.js":"luEr","../../color.js":"eucy","../../extent.js":"QDir","../../obj.js":"mH6q","../../geom/flat/transform.js":"LGwr","../webgl/circlereplay/defaultshader.js":"GZAE","../webgl/circlereplay/defaultshader/Locations.js":"K5HK","../webgl/Replay.js":"HMSc","../webgl.js":"7DIo","../../webgl.js":"SCyv","../../webgl/Buffer.js":"zsRd"}],"DqLP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vertex=exports.fragment=void 0;var t=require("../../../webgl.js"),a=require("../../../webgl/Fragment.js"),e=i(a),o=require("../../../webgl/Vertex.js"),r=i(o);function i(t){return t&&t.__esModule?t:{default:t}}var n=exports.fragment=new e.default(t.DEBUG?"precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),f=exports.vertex=new r.default(t.DEBUG?"varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n":"varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}");
},{"../../../webgl.js":"SCyv","../../../webgl/Fragment.js":"SAYv","../../../webgl/Vertex.js":"mo14"}],"ieq5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../../../webgl.js"),i=function(i,o){this.u_projectionMatrix=i.getUniformLocation(o,t.DEBUG?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=i.getUniformLocation(o,t.DEBUG?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=i.getUniformLocation(o,t.DEBUG?"u_offsetRotateMatrix":"j"),this.u_opacity=i.getUniformLocation(o,t.DEBUG?"u_opacity":"k"),this.u_image=i.getUniformLocation(o,t.DEBUG?"u_image":"l"),this.a_position=i.getAttribLocation(o,t.DEBUG?"a_position":"c"),this.a_texCoord=i.getAttribLocation(o,t.DEBUG?"a_texCoord":"d"),this.a_offsets=i.getAttribLocation(o,t.DEBUG?"a_offsets":"e"),this.a_opacity=i.getAttribLocation(o,t.DEBUG?"a_opacity":"f"),this.a_rotateWithView=i.getAttribLocation(o,t.DEBUG?"a_rotateWithView":"g")};exports.default=i;
},{"../../../../webgl.js":"SCyv"}],"HqWy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};
},{}],"2nJO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEmptyTexture=_,exports.createTexture=E;var e=require("../util.js"),t=require("../webgl.js"),r=require("../Disposable.js"),i=s(r),n=require("../array.js"),a=require("../events.js"),u=require("../obj.js"),h=require("../webgl/ContextEventType.js"),f=s(h);function s(e){return e&&e.__esModule?e:{default:e}}var o=function(r){function i(e,i){r.call(this),this.canvas_=e,this.gl_=i,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=(0,n.includes)(t.EXTENSIONS,"OES_element_index_uint"),this.hasOESElementIndexUint&&i.getExtension("OES_element_index_uint"),(0,a.listen)(this.canvas_,f.default.LOST,this.handleWebGLContextLost,this),(0,a.listen)(this.canvas_,f.default.RESTORED,this.handleWebGLContextRestored,this)}return r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i,i.prototype.bindBuffer=function(r,i){var n=this.getGL(),a=i.getArray(),u=String((0,e.getUid)(i));if(u in this.bufferCache_){var h=this.bufferCache_[u];n.bindBuffer(r,h.buffer)}else{var f,s=n.createBuffer();n.bindBuffer(r,s),r==t.ARRAY_BUFFER?f=new Float32Array(a):r==t.ELEMENT_ARRAY_BUFFER&&(f=this.hasOESElementIndexUint?new Uint32Array(a):new Uint16Array(a)),n.bufferData(r,f,i.getUsage()),this.bufferCache_[u]={buf:i,buffer:s}}},i.prototype.deleteBuffer=function(t){var r=this.getGL(),i=String((0,e.getUid)(t)),n=this.bufferCache_[i];r.isContextLost()||r.deleteBuffer(n.buffer),delete this.bufferCache_[i]},i.prototype.disposeInternal=function(){(0,a.unlistenAll)(this.canvas_);var e=this.getGL();if(!e.isContextLost()){for(var t in this.bufferCache_)e.deleteBuffer(this.bufferCache_[t].buffer);for(var r in this.programCache_)e.deleteProgram(this.programCache_[r]);for(var i in this.shaderCache_)e.deleteShader(this.shaderCache_[i]);e.deleteFramebuffer(this.hitDetectionFramebuffer_),e.deleteRenderbuffer(this.hitDetectionRenderbuffer_),e.deleteTexture(this.hitDetectionTexture_)}},i.prototype.getCanvas=function(){return this.canvas_},i.prototype.getGL=function(){return this.gl_},i.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},i.prototype.getShader=function(t){var r=String((0,e.getUid)(t));if(r in this.shaderCache_)return this.shaderCache_[r];var i=this.getGL(),n=i.createShader(t.getType());return i.shaderSource(n,t.getSource()),i.compileShader(n),this.shaderCache_[r]=n,n},i.prototype.getProgram=function(t,r){var i=(0,e.getUid)(t)+"/"+(0,e.getUid)(r);if(i in this.programCache_)return this.programCache_[i];var n=this.getGL(),a=n.createProgram();return n.attachShader(a,this.getShader(t)),n.attachShader(a,this.getShader(r)),n.linkProgram(a),this.programCache_[i]=a,a},i.prototype.handleWebGLContextLost=function(){(0,u.clear)(this.bufferCache_),(0,u.clear)(this.shaderCache_),(0,u.clear)(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},i.prototype.handleWebGLContextRestored=function(){},i.prototype.initHitDetectionFramebuffer_=function(){var e=this.gl_,t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var r=_(e,1,1),i=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,i),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,1,1),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,i),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=t,this.hitDetectionTexture_=r,this.hitDetectionRenderbuffer_=i},i.prototype.useProgram=function(e){return e!=this.currentProgram_&&(this.getGL().useProgram(e),this.currentProgram_=e,!0)},i}(i.default);function c(e,r,i){var n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),void 0!==r&&e.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,r),void 0!==i&&e.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,i),n}function _(e,t,r,i,n){var a=c(e,i,n);return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null),a}function E(e,t,r,i){var n=c(e,r,i);return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),n}exports.default=o;
},{"../util.js":"KniQ","../webgl.js":"SCyv","../Disposable.js":"DDda","../array.js":"luEr","../events.js":"55Uq","../obj.js":"mH6q","../webgl/ContextEventType.js":"HqWy"}],"rtlq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../util.js"),e=require("../../extent.js"),i=require("../../obj.js"),r=require("../webgl/texturereplay/defaultshader.js"),s=require("../webgl/texturereplay/defaultshader/Locations.js"),o=d(s),h=require("../webgl/Replay.js"),n=d(h),a=require("../../webgl.js"),c=require("../../webgl/Context.js");function d(t){return t&&t.__esModule?t:{default:t}}var v=function(s){function h(t,e){s.call(this,t,e),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0}return s&&(h.__proto__=s),h.prototype=Object.create(s&&s.prototype),h.prototype.constructor=h,h.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,r=this.getTextures(!0),s=t.getGL();return function(){var o,h;if(!s.isContextLost())for(o=0,h=r.length;o<h;++o)s.deleteTexture(r[o]);t.deleteBuffer(e),t.deleteBuffer(i)}},h.prototype.drawCoordinates=function(t,e,i,r){var s,o,h,n,a,c,d=this.anchorX,v=this.anchorY,u=this.height,l=this.imageHeight,g=this.imageWidth,p=this.opacity,f=this.originX,y=this.originY,x=this.rotateWithView?1:0,b=-this.rotation,_=this.scale,A=this.width,T=Math.cos(b),w=Math.sin(b),E=this.indices.length,I=this.vertices.length;for(s=e;s<i;s+=r)a=t[s]-this.origin[0],c=t[s+1]-this.origin[1],o=I/8,h=-_*d,n=-_*(u-v),this.vertices[I++]=a,this.vertices[I++]=c,this.vertices[I++]=h*T-n*w,this.vertices[I++]=h*w+n*T,this.vertices[I++]=f/g,this.vertices[I++]=(y+u)/l,this.vertices[I++]=p,this.vertices[I++]=x,h=_*(A-d),n=-_*(u-v),this.vertices[I++]=a,this.vertices[I++]=c,this.vertices[I++]=h*T-n*w,this.vertices[I++]=h*w+n*T,this.vertices[I++]=(f+A)/g,this.vertices[I++]=(y+u)/l,this.vertices[I++]=p,this.vertices[I++]=x,h=_*(A-d),n=_*v,this.vertices[I++]=a,this.vertices[I++]=c,this.vertices[I++]=h*T-n*w,this.vertices[I++]=h*w+n*T,this.vertices[I++]=(f+A)/g,this.vertices[I++]=y/l,this.vertices[I++]=p,this.vertices[I++]=x,h=-_*d,n=_*v,this.vertices[I++]=a,this.vertices[I++]=c,this.vertices[I++]=h*T-n*w,this.vertices[I++]=h*w+n*T,this.vertices[I++]=f/g,this.vertices[I++]=y/l,this.vertices[I++]=p,this.vertices[I++]=x,this.indices[E++]=o,this.indices[E++]=o+1,this.indices[E++]=o+2,this.indices[E++]=o,this.indices[E++]=o+2,this.indices[E++]=o+3;return I},h.prototype.createTextures=function(e,i,r,s){var o,h,n,d,v=i.length;for(d=0;d<v;++d)h=i[d],(n=(0,t.getUid)(h).toString())in r?o=r[n]:(o=(0,c.createTexture)(s,h,a.CLAMP_TO_EDGE,a.CLAMP_TO_EDGE),r[n]=o),e[d]=o},h.prototype.setUpProgram=function(t,e,i,s){var h,n=e.getProgram(r.fragment,r.vertex);return this.defaultLocations?h=this.defaultLocations:(h=new o.default(t,n),this.defaultLocations=h),e.useProgram(n),t.enableVertexAttribArray(h.a_position),t.vertexAttribPointer(h.a_position,2,a.FLOAT,!1,32,0),t.enableVertexAttribArray(h.a_offsets),t.vertexAttribPointer(h.a_offsets,2,a.FLOAT,!1,32,8),t.enableVertexAttribArray(h.a_texCoord),t.vertexAttribPointer(h.a_texCoord,2,a.FLOAT,!1,32,16),t.enableVertexAttribArray(h.a_opacity),t.vertexAttribPointer(h.a_opacity,1,a.FLOAT,!1,32,24),t.enableVertexAttribArray(h.a_rotateWithView),t.vertexAttribPointer(h.a_rotateWithView,1,a.FLOAT,!1,32,28),h},h.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},h.prototype.drawReplay=function(t,e,r,s){var o,h,n,c=s?this.getHitDetectionTextures():this.getTextures(),d=s?this.hitDetectionGroupIndices:this.groupIndices;if((0,i.isEmpty)(r))for(o=0,h=c.length,n=0;o<h;++o){t.bindTexture(a.TEXTURE_2D,c[o]);var v=d[o];this.drawElements(t,e,n,v),n=v}else this.drawReplaySkipping(t,e,r,c,d)},h.prototype.drawReplaySkipping=function(e,i,r,s,o){var h,n,c=0;for(h=0,n=s.length;h<n;++h){e.bindTexture(a.TEXTURE_2D,s[h]);for(var d=h>0?o[h-1]:0,v=o[h],u=d,l=d;c<this.startIndices.length&&this.startIndices[c]<=v;){var g=this.startIndicesFeature[c];void 0!==r[(0,t.getUid)(g).toString()]?(u!==l&&this.drawElements(e,i,u,l),l=u=c===this.startIndices.length-1?v:this.startIndices[c+1]):l=c===this.startIndices.length-1?v:this.startIndices[c+1],c++}u!==l&&this.drawElements(e,i,u,l)}},h.prototype.drawHitDetectionReplayOneByOne=function(i,r,s,o,h){var n,c,d,v,u,l=this.startIndices.length-1,g=this.getHitDetectionTextures();for(n=g.length-1;n>=0;--n)for(i.bindTexture(a.TEXTURE_2D,g[n]),c=n>0?this.hitDetectionGroupIndices[n-1]:0,v=this.hitDetectionGroupIndices[n];l>=0&&this.startIndices[l]>=c;){if(d=this.startIndices[l],u=this.startIndicesFeature[l],void 0===s[(0,t.getUid)(u).toString()]&&u.getGeometry()&&(void 0===h||(0,e.intersects)(h,u.getGeometry().getExtent()))){i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),this.drawElements(i,r,d,v);var p=o(u);if(p)return p}v=d,l--}},h.prototype.finish=function(t){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},h.prototype.getTextures=function(t){},h.prototype.getHitDetectionTextures=function(){},h}(n.default);exports.default=v;
},{"../../util.js":"KniQ","../../extent.js":"QDir","../../obj.js":"mH6q","../webgl/texturereplay/defaultshader.js":"DqLP","../webgl/texturereplay/defaultshader/Locations.js":"ieq5","../webgl/Replay.js":"HMSc","../../webgl.js":"SCyv","../../webgl/Context.js":"2nJO"}],"cwcG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../util.js"),e=require("../webgl/TextureReplay.js"),i=n(e),s=require("../../webgl/Buffer.js"),h=n(s);function n(t){return t&&t.__esModule?t:{default:t}}var r=function(e){function i(t,i){e.call(this,t,i),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),s=t.getStride();this.drawCoordinates(i,0,i.length,s)},i.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),s=t.getStride();this.drawCoordinates(i,0,i.length,s)},i.prototype.finish=function(t){var i=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new h.default(this.vertices);var s=this.indices;this.indicesBuffer=new h.default(s);var n={};this.createTextures(this.textures_,this.images_,n,i),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,n,i),this.images_=null,this.hitDetectionImages_=null,e.prototype.finish.call(this,t)},i.prototype.setImageStyle=function(e){var i,s=e.getAnchor(),h=e.getImage(1),n=e.getImageSize(),r=e.getHitDetectionImage(1),o=e.getOpacity(),a=e.getOrigin(),g=e.getRotateWithView(),u=e.getRotation(),c=e.getSize(),p=e.getScale();0===this.images_.length?this.images_.push(h):(i=this.images_[this.images_.length-1],(0,t.getUid)(i)!=(0,t.getUid)(h)&&(this.groupIndices.push(this.indices.length),this.images_.push(h))),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(r):(i=this.hitDetectionImages_[this.hitDetectionImages_.length-1],(0,t.getUid)(i)!=(0,t.getUid)(r)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(r))),this.anchorX=s[0],this.anchorY=s[1],this.height=c[1],this.imageHeight=n[1],this.imageWidth=n[0],this.opacity=o,this.originX=a[0],this.originY=a[1],this.rotation=u,this.rotateWithView=g,this.scale=p,this.width=c[0]},i.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},i.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_},i}(i.default);exports.default=r;
},{"../../util.js":"KniQ","../webgl/TextureReplay.js":"rtlq","../../webgl/Buffer.js":"zsRd"}],"p6xK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringIsClosed=r;var e=require("../flat/area.js");function r(r,t,i,n){var s=i-n;return r[t]===r[s]&&r[t+1]===r[s+1]&&(i-t)/n>3&&!!(0,e.linearRing)(r,t,i,n)}
},{"../flat/area.js":"EOSm"}],"7YtU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vertex=exports.fragment=void 0;var e=require("../../../webgl.js"),o=require("../../../webgl/Fragment.js"),t=i(o),n=require("../../../webgl/Vertex.js"),r=i(n);function i(e){return e&&e.__esModule?e:{default:e}}var a=exports.fragment=new t.default(e.DEBUG?"precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),l=exports.vertex=new r.default(e.DEBUG?"varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n":"varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}");
},{"../../../webgl.js":"SCyv","../../../webgl/Fragment.js":"SAYv","../../../webgl/Vertex.js":"mo14"}],"EnqV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../../../webgl.js"),i=function(i,o){this.u_projectionMatrix=i.getUniformLocation(o,t.DEBUG?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=i.getUniformLocation(o,t.DEBUG?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=i.getUniformLocation(o,t.DEBUG?"u_offsetRotateMatrix":"j"),this.u_lineWidth=i.getUniformLocation(o,t.DEBUG?"u_lineWidth":"k"),this.u_miterLimit=i.getUniformLocation(o,t.DEBUG?"u_miterLimit":"l"),this.u_opacity=i.getUniformLocation(o,t.DEBUG?"u_opacity":"m"),this.u_color=i.getUniformLocation(o,t.DEBUG?"u_color":"n"),this.u_size=i.getUniformLocation(o,t.DEBUG?"u_size":"o"),this.u_pixelRatio=i.getUniformLocation(o,t.DEBUG?"u_pixelRatio":"p"),this.a_lastPos=i.getAttribLocation(o,t.DEBUG?"a_lastPos":"d"),this.a_position=i.getAttribLocation(o,t.DEBUG?"a_position":"e"),this.a_nextPos=i.getAttribLocation(o,t.DEBUG?"a_nextPos":"f"),this.a_direction=i.getAttribLocation(o,t.DEBUG?"a_direction":"g")};exports.default=i;
},{"../../../../webgl.js":"SCyv"}],"Nu72":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../util.js"),e=require("../../array.js"),i=require("../../color.js"),s=require("../../extent.js"),r=require("../../geom/flat/orient.js"),n=require("../../geom/flat/transform.js"),a=require("../../geom/flat/topology.js"),h=require("../../obj.js"),o=require("../webgl.js"),d=require("../webgl/Replay.js"),l=E(d),c=require("../webgl/linestringreplay/defaultshader.js"),_=require("../webgl/linestringreplay/defaultshader/Locations.js"),u=E(_),f=require("../../webgl.js"),g=require("../../webgl/Buffer.js"),p=E(g);function E(t){return t&&t.__esModule?t:{default:t}}var I={ROUND:2,BEGIN_LINE:3,END_LINE:5,BEGIN_LINE_CAP:7,END_LINE_CAP:11,BEVEL_FIRST:13,BEVEL_SECOND:17,MITER_BOTTOM:19,MITER_TOP:23},y=function(d){function l(t,e){d.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}}return d&&(l.__proto__=d),l.prototype=Object.create(d&&d.prototype),l.prototype.constructor=l,l.prototype.drawCoordinates_=function(t,i,s,n){var h,d,l,c,_,u,f,g,p=this.vertices.length,E=this.indices.length,y="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,v="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,L=(0,a.lineStringIsClosed)(t,i,s,n),T=E,A=1;for(h=i,d=s;h<d;h+=n){if(_=p/7,u=f,f=g||[t[h],t[h+1]],h===i){if(g=[t[h+n],t[h+n+1]],s-i==2*n&&(0,e.equals)(f,g))break;if(!L){v&&(p=this.addVertices_([0,0],f,g,A*I.BEGIN_LINE_CAP*v,p),p=this.addVertices_([0,0],f,g,-A*I.BEGIN_LINE_CAP*v,p),this.indices[E++]=_+2,this.indices[E++]=_,this.indices[E++]=_+1,this.indices[E++]=_+1,this.indices[E++]=_+3,this.indices[E++]=_+2),p=this.addVertices_([0,0],f,g,A*I.BEGIN_LINE*(v||1),p),T=(p=this.addVertices_([0,0],f,g,-A*I.BEGIN_LINE*(v||1),p))/7-1;continue}u=[t[s-2*n],t[s-2*n+1]],l=g}else{if(h===s-n){if(L){g=l;break}u=u||[0,0],p=this.addVertices_(u,f,[0,0],A*I.END_LINE*(v||1),p),p=this.addVertices_(u,f,[0,0],-A*I.END_LINE*(v||1),p),this.indices[E++]=_,this.indices[E++]=T-1,this.indices[E++]=T,this.indices[E++]=T,this.indices[E++]=_+1,this.indices[E++]=_,v&&(p=this.addVertices_(u,f,[0,0],A*I.END_LINE_CAP*v,p),p=this.addVertices_(u,f,[0,0],-A*I.END_LINE_CAP*v,p),this.indices[E++]=_+2,this.indices[E++]=_,this.indices[E++]=_+1,this.indices[E++]=_+1,this.indices[E++]=_+3,this.indices[E++]=_+2);break}g=[t[h+n],t[h+n+1]]}c=(0,o.triangleIsCounterClockwise)(u[0],u[1],f[0],f[1],g[0],g[1])?-1:1,p=this.addVertices_(u,f,g,c*I.BEVEL_FIRST*(y||1),p),p=this.addVertices_(u,f,g,c*I.BEVEL_SECOND*(y||1),p),p=this.addVertices_(u,f,g,-c*I.MITER_BOTTOM*(y||1),p),h>i&&(this.indices[E++]=_,this.indices[E++]=T-1,this.indices[E++]=T,this.indices[E++]=_+2,this.indices[E++]=_,this.indices[E++]=A*c>0?T:T-1),this.indices[E++]=_,this.indices[E++]=_+2,this.indices[E++]=_+1,T=_+2,A=c,y&&(p=this.addVertices_(u,f,g,c*I.MITER_TOP*y,p),this.indices[E++]=_+1,this.indices[E++]=_+3,this.indices[E++]=_)}L&&(_=_||p/7,c=(0,r.linearRingIsClockwise)([u[0],u[1],f[0],f[1],g[0],g[1]],0,6,2)?1:-1,p=this.addVertices_(u,f,g,c*I.BEVEL_FIRST*(y||1),p),p=this.addVertices_(u,f,g,-c*I.MITER_BOTTOM*(y||1),p),this.indices[E++]=_,this.indices[E++]=T-1,this.indices[E++]=T,this.indices[E++]=_+1,this.indices[E++]=_,this.indices[E++]=A*c>0?T:T-1)},l.prototype.addVertices_=function(t,e,i,s,r){return this.vertices[r++]=t[0],this.vertices[r++]=t[1],this.vertices[r++]=e[0],this.vertices[r++]=e[1],this.vertices[r++]=i[0],this.vertices[r++]=i[1],this.vertices[r++]=s,r},l.prototype.isValid_=function(t,i,s,r){var n=s-i;if(n<2*r)return!1;if(n===2*r){var a=[t[i],t[i+1]],h=[t[i+r],t[i+r+1]];return!(0,e.equals)(a,h)}return!0},l.prototype.drawLineString=function(t,e){var i=t.getFlatCoordinates(),s=t.getStride();this.isValid_(i,0,i.length,s)&&(i=(0,n.translate)(i,0,i.length,s,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(i,0,i.length,s))},l.prototype.drawMultiLineString=function(t,e){var i=this.indices.length,s=t.getEnds();s.unshift(0);var r,a,h=t.getFlatCoordinates(),o=t.getStride();if(s.length>1)for(r=1,a=s.length;r<a;++r)if(this.isValid_(h,s[r-1],s[r],o)){var d=(0,n.translate)(h,s[r-1],s[r],o,-this.origin[0],-this.origin[1]);this.drawCoordinates_(d,0,d.length,o)}this.indices.length>i&&(this.startIndices.push(i),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1))},l.prototype.drawPolygonCoordinates=function(t,e,i){var s,r;if((0,a.lineStringIsClosed)(t,0,t.length,i)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,i),e.length)for(s=0,r=e.length;s<r;++s)(0,a.lineStringIsClosed)(e[s],0,e[s].length,i)||(e[s].push(e[s][0]),e[s].push(e[s][1])),this.drawCoordinates_(e[s],0,e[s].length,i)},l.prototype.setPolygonStyle=function(t,e){var i=void 0===e?this.indices.length:e;this.startIndices.push(i),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1)},l.prototype.getCurrentIndex=function(){return this.indices.length},l.prototype.finish=function(t){this.verticesBuffer=new p.default(this.vertices),this.indicesBuffer=new p.default(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},l.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},l.prototype.setUpProgram=function(t,e,i,s){var r,n=e.getProgram(c.fragment,c.vertex);return this.defaultLocations_?r=this.defaultLocations_:(r=new u.default(t,n),this.defaultLocations_=r),e.useProgram(n),t.enableVertexAttribArray(r.a_lastPos),t.vertexAttribPointer(r.a_lastPos,2,f.FLOAT,!1,28,0),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,f.FLOAT,!1,28,8),t.enableVertexAttribArray(r.a_nextPos),t.vertexAttribPointer(r.a_nextPos,2,f.FLOAT,!1,28,16),t.enableVertexAttribArray(r.a_direction),t.vertexAttribPointer(r.a_direction,1,f.FLOAT,!1,28,24),t.uniform2fv(r.u_size,i),t.uniform1f(r.u_pixelRatio,s),r},l.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},l.prototype.drawReplay=function(t,e,i,s){var r,n,a,o,d=t.getParameter(t.DEPTH_FUNC),l=t.getParameter(t.DEPTH_WRITEMASK);if(s||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),(0,h.isEmpty)(i))for(a=this.startIndices[this.startIndices.length-1],r=this.styleIndices_.length-1;r>=0;--r)n=this.styleIndices_[r],o=this.styles_[r],this.setStrokeStyle_(t,o[0],o[1],o[2]),this.drawElements(t,e,n,a),t.clear(t.DEPTH_BUFFER_BIT),a=n;else this.drawReplaySkipping_(t,e,i);s||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(l),t.depthFunc(d))},l.prototype.drawReplaySkipping_=function(e,i,s){var r,n,a,h,o,d,l,c;for(l=this.startIndices.length-2,a=n=this.startIndices[l+1],r=this.styleIndices_.length-1;r>=0;--r){for(h=this.styles_[r],this.setStrokeStyle_(e,h[0],h[1],h[2]),o=this.styleIndices_[r];l>=0&&this.startIndices[l]>=o;)c=this.startIndices[l],d=this.startIndicesFeature[l],s[(0,t.getUid)(d).toString()]&&(n!==a&&(this.drawElements(e,i,n,a),e.clear(e.DEPTH_BUFFER_BIT)),a=c),l--,n=c;n!==a&&(this.drawElements(e,i,n,a),e.clear(e.DEPTH_BUFFER_BIT)),n=a=o}},l.prototype.drawHitDetectionReplayOneByOne=function(e,i,r,n,a){var h,o,d,l,c,_,u;for(u=this.startIndices.length-2,d=this.startIndices[u+1],h=this.styleIndices_.length-1;h>=0;--h)for(l=this.styles_[h],this.setStrokeStyle_(e,l[0],l[1],l[2]),c=this.styleIndices_[h];u>=0&&this.startIndices[u]>=c;){if(o=this.startIndices[u],_=this.startIndicesFeature[u],void 0===r[(0,t.getUid)(_).toString()]&&_.getGeometry()&&(void 0===a||(0,s.intersects)(a,_.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements(e,i,o,d);var f=n(_);if(f)return f}u--,d=o}},l.prototype.setStrokeStyle_=function(t,e,i,s){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i),t.uniform1f(this.defaultLocations_.u_miterLimit,s)},l.prototype.setFillStrokeStyle=function(t,s){var r=s.getLineCap();this.state_.lineCap=void 0!==r?r:o.DEFAULT_LINECAP;var n=s.getLineDash();this.state_.lineDash=n||o.DEFAULT_LINEDASH;var a=s.getLineDashOffset();this.state_.lineDashOffset=a||o.DEFAULT_LINEDASHOFFSET;var h=s.getLineJoin();this.state_.lineJoin=void 0!==h?h:o.DEFAULT_LINEJOIN;var d=s.getColor();d=d instanceof CanvasGradient||d instanceof CanvasPattern?o.DEFAULT_STROKESTYLE:(0,i.asArray)(d).map(function(t,e){return 3!=e?t/255:t})||o.DEFAULT_STROKESTYLE;var l=s.getWidth();l=void 0!==l?l:o.DEFAULT_LINEWIDTH;var c=s.getMiterLimit();c=void 0!==c?c:o.DEFAULT_MITERLIMIT,this.state_.strokeColor&&(0,e.equals)(this.state_.strokeColor,d)&&this.state_.lineWidth===l&&this.state_.miterLimit===c||(this.state_.changed=!0,this.state_.strokeColor=d,this.state_.lineWidth=l,this.state_.miterLimit=c,this.styles_.push([d,l,c]))},l}(l.default);exports.default=y;
},{"../../util.js":"KniQ","../../array.js":"luEr","../../color.js":"eucy","../../extent.js":"QDir","../../geom/flat/orient.js":"2/8c","../../geom/flat/transform.js":"LGwr","../../geom/flat/topology.js":"p6xK","../../obj.js":"mH6q","../webgl.js":"7DIo","../webgl/Replay.js":"HMSc","../webgl/linestringreplay/defaultshader.js":"7YtU","../webgl/linestringreplay/defaultshader/Locations.js":"EnqV","../../webgl.js":"SCyv","../../webgl/Buffer.js":"zsRd"}],"KUzN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vertex=exports.fragment=void 0;var o=require("../../../webgl.js"),a=require("../../../webgl/Fragment.js"),e=r(a),n=require("../../../webgl/Vertex.js"),i=r(n);function r(o){return o&&o.__esModule?o:{default:o}}var t=exports.fragment=new e.default(o.DEBUG?"precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),l=exports.vertex=new i.default(o.DEBUG?"\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n":"attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}");
},{"../../../webgl.js":"SCyv","../../../webgl/Fragment.js":"SAYv","../../../webgl/Vertex.js":"mo14"}],"mO11":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../../../webgl.js"),o=function(o,i){this.u_projectionMatrix=o.getUniformLocation(i,t.DEBUG?"u_projectionMatrix":"b"),this.u_offsetScaleMatrix=o.getUniformLocation(i,t.DEBUG?"u_offsetScaleMatrix":"c"),this.u_offsetRotateMatrix=o.getUniformLocation(i,t.DEBUG?"u_offsetRotateMatrix":"d"),this.u_color=o.getUniformLocation(i,t.DEBUG?"u_color":"e"),this.u_opacity=o.getUniformLocation(i,t.DEBUG?"u_opacity":"f"),this.a_position=o.getAttribLocation(i,t.DEBUG?"a_position":"a")};exports.default=o;
},{"../../../../webgl.js":"SCyv"}],"2gDc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){this.first_,this.last_,this.head_,this.circular_=void 0===t||t,this.length_=0};t.prototype.insertItem=function(t){var e={prev:void 0,next:void 0,data:t},h=this.head_;if(h){var i=h.next;e.prev=h,e.next=i,h.next=e,i&&(i.prev=e),h===this.last_&&(this.last_=e)}else this.first_=e,this.last_=e,this.circular_&&(e.next=e,e.prev=e);this.head_=e,this.length_++},t.prototype.removeItem=function(){var t=this.head_;if(t){var e=t.next,h=t.prev;e&&(e.prev=h),h&&(h.next=e),this.head_=e||h,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=h?this.head_.prev:this.head_),this.length_--}},t.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},t.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},t.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},t.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},t.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},t.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},t.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},t.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},t.prototype.concat=function(t){if(t.head_){if(this.head_){var e=this.head_.next;this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_}else this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_;t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0}},t.prototype.getLength=function(){return this.length_},exports.default=t;
},{}],"Cbiy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../util.js"),e=require("../../array.js"),i=require("../../color.js"),s=require("../../extent.js"),r=require("../../obj.js"),n=require("../../geom/flat/contains.js"),a=require("../../geom/flat/orient.js"),o=require("../../geom/flat/transform.js"),l=require("../webgl/polygonreplay/defaultshader.js"),h=require("../webgl/polygonreplay/defaultshader/Locations.js"),p=C(h),y=require("../webgl/LineStringReplay.js"),x=C(y),c=require("../webgl/Replay.js"),u=C(c),d=require("../webgl.js"),g=require("../../style/Stroke.js"),f=C(g),m=require("../../structs/LinkedList.js"),_=C(m),I=require("../../structs/RBush.js"),v=C(I),M=require("../../webgl.js"),P=require("../../webgl/Buffer.js"),w=C(P);function C(t){return t&&t.__esModule?t:{default:t}}var S=function(h){function y(t,e){h.call(this,t,e),this.lineStringReplay=new x.default(t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}}return h&&(y.__proto__=h),y.prototype=Object.create(h&&h.prototype),y.prototype.constructor=y,y.prototype.drawCoordinates_=function(t,e,i){var s=new _.default,r=new v.default;this.processFlatCoordinates_(t,i,s,r,!0);var n=this.getMaxCoords_(s);if(e.length){var a,o,l=[];for(a=0,o=e.length;a<o;++a){var h={list:new _.default,maxCoords:void 0,rtree:new v.default};l.push(h),this.processFlatCoordinates_(e[a],i,h.list,h.rtree,!1),this.classifyPoints_(h.list,h.rtree,!0),h.maxCoords=this.getMaxCoords_(h.list)}for(l.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),a=0;a<l.length;++a){var p=l[a].list,y=p.firstItem(),x=y,c=void 0;do{if(this.getIntersections_(x,r).length){c=!0;break}x=p.nextItem()}while(y!==x);c||this.bridgeHole_(p,l[a].maxCoords[0],s,n[0],r)&&(r.concat(l[a].rtree),this.classifyPoints_(s,r,!1))}}else this.classifyPoints_(s,r,!1);this.triangulate_(s,r)},y.prototype.processFlatCoordinates_=function(t,e,i,s,r){var n,o,l,h,p,y=(0,a.linearRingIsClockwise)(t,0,t.length,e),x=this.vertices.length/2,c=[],u=[];if(r===y){for(h=l=this.createPoint_(t[0],t[1],x++),n=e,o=t.length;n<o;n+=e)p=this.createPoint_(t[n],t[n+1],x++),u.push(this.insertItem_(h,p,i)),c.push([Math.min(h.x,p.x),Math.min(h.y,p.y),Math.max(h.x,p.x),Math.max(h.y,p.y)]),h=p;u.push(this.insertItem_(p,l,i)),c.push([Math.min(h.x,p.x),Math.min(h.y,p.y),Math.max(h.x,p.x),Math.max(h.y,p.y)])}else{var d=t.length-e;for(h=l=this.createPoint_(t[d],t[d+1],x++),n=d-e,o=0;n>=o;n-=e)p=this.createPoint_(t[n],t[n+1],x++),u.push(this.insertItem_(h,p,i)),c.push([Math.min(h.x,p.x),Math.min(h.y,p.y),Math.max(h.x,p.x),Math.max(h.y,p.y)]),h=p;u.push(this.insertItem_(p,l,i)),c.push([Math.min(h.x,p.x),Math.min(h.y,p.y),Math.max(h.x,p.x),Math.max(h.y,p.y)])}s.load(c,u)},y.prototype.getMaxCoords_=function(t){var e=t.firstItem(),i=e,s=[i.p0.x,i.p0.y];do{(i=t.nextItem()).p0.x>s[0]&&(s=[i.p0.x,i.p0.y])}while(i!==e);return s},y.prototype.classifyPoints_=function(t,e,i){var s=t.firstItem(),r=s,n=t.nextItem(),a=!1;do{var o=i?(0,d.triangleIsCounterClockwise)(n.p1.x,n.p1.y,r.p1.x,r.p1.y,r.p0.x,r.p0.y):(0,d.triangleIsCounterClockwise)(r.p0.x,r.p0.y,r.p1.x,r.p1.y,n.p1.x,n.p1.y);void 0===o?(this.removeItem_(r,n,t,e),a=!0,n===s&&(s=t.getNextItem()),n=r,t.prevItem()):r.p1.reflex!==o&&(r.p1.reflex=o,a=!0),r=n,n=t.nextItem()}while(r!==s);return a},y.prototype.bridgeHole_=function(t,e,i,s,r){for(var n=t.firstItem();n.p1.x!==e;)n=t.nextItem();var a,o,l,h,p=n.p1,y={x:s,y:p.y,i:-1},x=1/0,c=this.getIntersections_({p0:p,p1:y},r,!0);for(a=0,o=c.length;a<o;++a){var u=c[a],g=this.calculateIntersection_(p,y,u.p0,u.p1,!0),f=Math.abs(p.x-g[0]);f<x&&void 0!==(0,d.triangleIsCounterClockwise)(p.x,p.y,u.p0.x,u.p0.y,u.p1.x,u.p1.y)&&(x=f,h={x:g[0],y:g[1],i:-1},n=u)}if(x===1/0)return!1;if(l=n.p1,x>0){var m=this.getPointsInTriangle_(p,h,n.p1,r);if(m.length){var _=1/0;for(a=0,o=m.length;a<o;++a){var I=m[a],v=Math.atan2(p.y-I.y,y.x-I.x);(v<_||v===_&&I.x<l.x)&&(_=v,l=I)}}}for(n=i.firstItem();n.p1.x!==l.x||n.p1.y!==l.y;)n=i.nextItem();var M={x:p.x,y:p.y,i:p.i,reflex:void 0},P={x:n.p1.x,y:n.p1.y,i:n.p1.i,reflex:void 0};return t.getNextItem().p0=M,this.insertItem_(p,n.p1,t,r),this.insertItem_(P,M,t,r),n.p1=P,t.setFirstItem(),i.concat(t),!0},y.prototype.triangulate_=function(t,e){for(var i=!1,s=this.isSimple_(t,e);t.getLength()>3;)if(s){if(!this.clipEars_(t,e,s,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e,!0))break}else if(!this.clipEars_(t,e,s,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e)){if(!(s=this.isSimple_(t,e))){this.splitPolygon_(t,e);break}i=!this.isClockwise_(t),this.classifyPoints_(t,e,i)}if(3===t.getLength()){var r=this.indices.length;this.indices[r++]=t.getPrevItem().p0.i,this.indices[r++]=t.getCurrItem().p0.i,this.indices[r++]=t.getNextItem().p0.i}},y.prototype.clipEars_=function(t,e,i,s){var r,n,o,l=this.indices.length,h=t.firstItem(),p=t.getPrevItem(),y=h,x=t.nextItem(),c=t.getNextItem(),u=!1;do{if(r=y.p0,n=y.p1,o=x.p1,!1===n.reflex){var d=void 0;d=i?0===this.getPointsInTriangle_(r,n,o,e,!0).length:s?this.diagonalIsInside_(c.p1,o,n,r,p.p0):this.diagonalIsInside_(p.p0,r,n,o,c.p1),(i||0===this.getIntersections_({p0:r,p1:o},e).length)&&d&&(i||!1===r.reflex||!1===o.reflex||(0,a.linearRingIsClockwise)([p.p0.x,p.p0.y,r.x,r.y,n.x,n.y,o.x,o.y,c.p1.x,c.p1.y],0,10,2)===!s)&&(this.indices[l++]=r.i,this.indices[l++]=n.i,this.indices[l++]=o.i,this.removeItem_(y,x,t,e),x===h&&(h=c),u=!0)}p=t.getPrevItem(),y=t.getCurrItem(),x=t.nextItem(),c=t.getNextItem()}while(y!==h&&t.getLength()>3);return u},y.prototype.resolveSelfIntersections_=function(t,e,i){var s=t.firstItem();t.nextItem();var r=s,n=t.nextItem(),a=!1;do{var o=this.calculateIntersection_(r.p0,r.p1,n.p0,n.p1,i);if(o){var l=!1,h=this.vertices.length,p=this.indices.length,y=h/2,x=t.prevItem();t.removeItem(),e.remove(x),l=x===s;var c=void 0;if(i?(o[0]===r.p0.x&&o[1]===r.p0.y?(t.prevItem(),c=r.p0,n.p0=c,e.remove(r),l=l||r===s):(c=n.p1,r.p1=c,e.remove(n),l=l||n===s),t.removeItem()):(c=this.createPoint_(o[0],o[1],y),r.p1=c,n.p0=c,e.update([Math.min(r.p0.x,r.p1.x),Math.min(r.p0.y,r.p1.y),Math.max(r.p0.x,r.p1.x),Math.max(r.p0.y,r.p1.y)],r),e.update([Math.min(n.p0.x,n.p1.x),Math.min(n.p0.y,n.p1.y),Math.max(n.p0.x,n.p1.x),Math.max(n.p0.y,n.p1.y)],n)),this.indices[p++]=x.p0.i,this.indices[p++]=x.p1.i,this.indices[p++]=c.i,a=!0,l)break}r=t.getPrevItem(),n=t.nextItem()}while(r!==s);return a},y.prototype.isSimple_=function(t,e){var i=t.firstItem(),s=i;do{if(this.getIntersections_(s,e).length)return!1;s=t.nextItem()}while(s!==i);return!0},y.prototype.isClockwise_=function(t){var e=2*t.getLength(),i=new Array(e),s=t.firstItem(),r=s,n=0;do{i[n++]=r.p0.x,i[n++]=r.p0.y,r=t.nextItem()}while(r!==s);return(0,a.linearRingIsClockwise)(i,0,e,2)},y.prototype.splitPolygon_=function(t,e){var i=t.firstItem(),s=i;do{var r=this.getIntersections_(s,e);if(r.length){var n=r[0],a=this.vertices.length/2,o=this.calculateIntersection_(s.p0,s.p1,n.p0,n.p1),l=this.createPoint_(o[0],o[1],a),h=new _.default,p=new v.default;this.insertItem_(l,s.p1,h,p),s.p1=l,e.update([Math.min(s.p0.x,l.x),Math.min(s.p0.y,l.y),Math.max(s.p0.x,l.x),Math.max(s.p0.y,l.y)],s);for(var y=t.nextItem();y!==n;)this.insertItem_(y.p0,y.p1,h,p),e.remove(y),t.removeItem(),y=t.getCurrItem();this.insertItem_(n.p0,l,h,p),n.p0=l,e.update([Math.min(n.p1.x,l.x),Math.min(n.p1.y,l.y),Math.max(n.p1.x,l.x),Math.max(n.p1.y,l.y)],n),this.classifyPoints_(t,e,!1),this.triangulate_(t,e),this.classifyPoints_(h,p,!1),this.triangulate_(h,p);break}s=t.nextItem()}while(s!==i)},y.prototype.createPoint_=function(t,e,i){var s=this.vertices.length;return this.vertices[s++]=t,this.vertices[s++]=e,{x:t,y:e,i:i,reflex:void 0}},y.prototype.insertItem_=function(t,e,i,s){var r={p0:t,p1:e};return i.insertItem(r),s&&s.insert([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],r),r},y.prototype.removeItem_=function(t,e,i,s){i.getCurrItem()===e&&(i.removeItem(),t.p1=e.p1,s.remove(e),s.update([Math.min(t.p0.x,t.p1.x),Math.min(t.p0.y,t.p1.y),Math.max(t.p0.x,t.p1.x),Math.max(t.p0.y,t.p1.y)],t))},y.prototype.getPointsInTriangle_=function(t,e,i,s,r){for(var a=[],o=s.getInExtent([Math.min(t.x,e.x,i.x),Math.min(t.y,e.y,i.y),Math.max(t.x,e.x,i.x),Math.max(t.y,e.y,i.y)]),l=0,h=o.length;l<h;++l)for(var p in o[l]){var y=o[l][p];"object"!=typeof y||r&&!y.reflex||y.x===t.x&&y.y===t.y||y.x===e.x&&y.y===e.y||y.x===i.x&&y.y===i.y||-1!==a.indexOf(y)||!(0,n.linearRingContainsXY)([t.x,t.y,e.x,e.y,i.x,i.y],0,6,2,y.x,y.y)||a.push(y)}return a},y.prototype.getIntersections_=function(t,e,i){for(var s=t.p0,r=t.p1,n=e.getInExtent([Math.min(s.x,r.x),Math.min(s.y,r.y),Math.max(s.x,r.x),Math.max(s.y,r.y)]),a=[],o=0,l=n.length;o<l;++o){var h=n[o];t!==h&&(i||h.p0!==r||h.p1!==s)&&this.calculateIntersection_(s,r,h.p0,h.p1,i)&&a.push(h)}return a},y.prototype.calculateIntersection_=function(t,e,i,s,r){var n=(s.y-i.y)*(e.x-t.x)-(s.x-i.x)*(e.y-t.y);if(0!==n){var a=((s.x-i.x)*(t.y-i.y)-(s.y-i.y)*(t.x-i.x))/n,o=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/n;if(!r&&a>d.EPSILON&&a<1-d.EPSILON&&o>d.EPSILON&&o<1-d.EPSILON||r&&a>=0&&a<=1&&o>=0&&o<=1)return[t.x+a*(e.x-t.x),t.y+a*(e.y-t.y)]}},y.prototype.diagonalIsInside_=function(t,e,i,s,r){if(void 0===e.reflex||void 0===s.reflex)return!1;var n=(i.x-s.x)*(e.y-s.y)>(i.y-s.y)*(e.x-s.x),a=(r.x-s.x)*(e.y-s.y)<(r.y-s.y)*(e.x-s.x),o=(t.x-e.x)*(s.y-e.y)>(t.y-e.y)*(s.x-e.x),l=(i.x-e.x)*(s.y-e.y)<(i.y-e.y)*(s.x-e.x),h=s.reflex?a||n:a&&n,p=e.reflex?l||o:l&&o;return h&&p},y.prototype.drawMultiPolygon=function(t,e){var i,s,r,n,a=t.getEndss(),l=t.getStride(),h=this.indices.length,p=this.lineStringReplay.getCurrentIndex(),y=t.getFlatCoordinates(),x=0;for(i=0,s=a.length;i<s;++i){var c=a[i];if(c.length>0){var u=(0,o.translate)(y,x,c[0],l,-this.origin[0],-this.origin[1]);if(u.length){var d=[],g=void 0;for(r=1,n=c.length;r<n;++r)c[r]!==c[r-1]&&(g=(0,o.translate)(y,c[r-1],c[r],l,-this.origin[0],-this.origin[1]),d.push(g));this.lineStringReplay.drawPolygonCoordinates(u,d,l),this.drawCoordinates_(u,d,l)}}x=c[c.length-1]}this.indices.length>h&&(this.startIndices.push(h),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(h),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>p&&this.lineStringReplay.setPolygonStyle(e,p)},y.prototype.drawPolygon=function(t,e){var i=t.getEnds(),s=t.getStride();if(i.length>0){var r=t.getFlatCoordinates().map(Number),n=(0,o.translate)(r,0,i[0],s,-this.origin[0],-this.origin[1]);if(n.length){var a,l,h,p=[];for(a=1,l=i.length;a<l;++a)i[a]!==i[a-1]&&(h=(0,o.translate)(r,i[a-1],i[a],s,-this.origin[0],-this.origin[1]),p.push(h));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(n,p,s),this.drawCoordinates_(n,p,s)}}},y.prototype.finish=function(t){this.verticesBuffer=new w.default(this.vertices),this.indicesBuffer=new w.default(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},y.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,s=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(i),s()}},y.prototype.setUpProgram=function(t,e,i,s){var r,n=e.getProgram(l.fragment,l.vertex);return this.defaultLocations_?r=this.defaultLocations_:(r=new p.default(t,n),this.defaultLocations_=r),e.useProgram(n),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,M.FLOAT,!1,8,0),r},y.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},y.prototype.drawReplay=function(t,e,i,s){var n,a,o,l,h=t.getParameter(t.DEPTH_FUNC),p=t.getParameter(t.DEPTH_WRITEMASK);if(s||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),(0,r.isEmpty)(i))for(o=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)a=this.styleIndices_[n],l=this.styles_[n],this.setFillStyle_(t,l),this.drawElements(t,e,a,o),o=a;else this.drawReplaySkipping_(t,e,i);s||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(p),t.depthFunc(h))},y.prototype.drawHitDetectionReplayOneByOne=function(e,i,r,n,a){var o,l,h,p,y,x,c;for(c=this.startIndices.length-2,h=this.startIndices[c+1],o=this.styleIndices_.length-1;o>=0;--o)for(p=this.styles_[o],this.setFillStyle_(e,p),y=this.styleIndices_[o];c>=0&&this.startIndices[c]>=y;){if(l=this.startIndices[c],x=this.startIndicesFeature[c],void 0===r[(0,t.getUid)(x).toString()]&&x.getGeometry()&&(void 0===a||(0,s.intersects)(a,x.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements(e,i,l,h);var u=n(x);if(u)return u}c--,h=l}},y.prototype.drawReplaySkipping_=function(e,i,s){var r,n,a,o,l,h,p,y;for(p=this.startIndices.length-2,a=n=this.startIndices[p+1],r=this.styleIndices_.length-1;r>=0;--r){for(o=this.styles_[r],this.setFillStyle_(e,o),l=this.styleIndices_[r];p>=0&&this.startIndices[p]>=l;)y=this.startIndices[p],h=this.startIndicesFeature[p],s[(0,t.getUid)(h).toString()]&&(n!==a&&(this.drawElements(e,i,n,a),e.clear(e.DEPTH_BUFFER_BIT)),a=y),p--,n=y;n!==a&&(this.drawElements(e,i,n,a),e.clear(e.DEPTH_BUFFER_BIT)),n=a=l}},y.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},y.prototype.setFillStrokeStyle=function(t,s){var r=t?t.getColor():[0,0,0,0];if(r=r instanceof CanvasGradient||r instanceof CanvasPattern?d.DEFAULT_FILLSTYLE:(0,i.asArray)(r).map(function(t,e){return 3!=e?t/255:t})||d.DEFAULT_FILLSTYLE,this.state_.fillColor&&(0,e.equals)(r,this.state_.fillColor)||(this.state_.fillColor=r,this.state_.changed=!0,this.styles_.push(r)),s)this.lineStringReplay.setFillStrokeStyle(null,s);else{var n=new f.default({color:[0,0,0,0],lineWidth:0});this.lineStringReplay.setFillStrokeStyle(null,n)}},y}(u.default);exports.default=S;
},{"../../util.js":"KniQ","../../array.js":"luEr","../../color.js":"eucy","../../extent.js":"QDir","../../obj.js":"mH6q","../../geom/flat/contains.js":"dzdN","../../geom/flat/orient.js":"2/8c","../../geom/flat/transform.js":"LGwr","../webgl/polygonreplay/defaultshader.js":"KUzN","../webgl/polygonreplay/defaultshader/Locations.js":"mO11","../webgl/LineStringReplay.js":"Nu72","../webgl/Replay.js":"HMSc","../webgl.js":"7DIo","../../style/Stroke.js":"TXDt","../../structs/LinkedList.js":"2gDc","../../structs/RBush.js":"MiUH","../../webgl.js":"SCyv","../../webgl/Buffer.js":"zsRd"}],"N0HK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../dom.js"),e=function(e,i){this.space_=i,this.emptyBlocks_=[{x:0,y:0,width:e,height:e}],this.entries_={},this.context_=(0,t.createCanvasContext2D)(e,e),this.canvas_=this.context_.canvas};e.prototype.get=function(t){return this.entries_[t]||null},e.prototype.add=function(t,e,i,h,s){for(var p=0,a=this.emptyBlocks_.length;p<a;++p){var c=this.emptyBlocks_[p];if(c.width>=e+this.space_&&c.height>=i+this.space_){var o={offsetX:c.x+this.space_,offsetY:c.y+this.space_,image:this.canvas_};return this.entries_[t]=o,h.call(s,this.context_,c.x+this.space_,c.y+this.space_),this.split_(p,c,e+this.space_,i+this.space_),o}}return null},e.prototype.split_=function(t,e,i,h){var s,p;e.width-i>e.height-h?(s={x:e.x+i,y:e.y,width:e.width-i,height:e.height},p={x:e.x,y:e.y+h,width:i,height:e.height-h},this.updateBlocks_(t,s,p)):(s={x:e.x+i,y:e.y,width:e.width-i,height:h},p={x:e.x,y:e.y+h,width:e.width,height:e.height-h},this.updateBlocks_(t,s,p))},e.prototype.updateBlocks_=function(t,e,i){var h=[t,1];e.width>0&&e.height>0&&h.push(e),i.width>0&&i.height>0&&h.push(i),this.emptyBlocks_.splice.apply(this.emptyBlocks_,h)},exports.default=e;
},{"../dom.js":"Xno5"}],"SyS8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../webgl.js"),e=require("../functions.js"),i=require("../style/Atlas.js"),r=s(i);function s(t){return t&&t.__esModule?t:{default:t}}var n=256,a=-1,u=function(e){var i=e||{};this.currentSize_=void 0!==i.initialSize?i.initialSize:n,this.maxSize_=void 0!==i.maxSize?i.maxSize:-1!=a?a:void 0!==t.MAX_TEXTURE_SIZE?t.MAX_TEXTURE_SIZE:2048,this.space_=void 0!==i.space?i.space:1,this.atlases_=[new r.default(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new r.default(this.currentHitSize_,this.space_)]};u.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var i=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,i)},u.prototype.getInfo_=function(t,e){for(var i=0,r=t.length;i<r;++i){var s=t[i].get(e);if(s)return s}return null},u.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},u.prototype.add=function(t,i,r,s,n,a){if(i+this.space_>this.maxSize_||r+this.space_>this.maxSize_)return null;var u=this.add_(!1,t,i,r,s,a);if(!u)return null;var _=void 0!==n?n:e.UNDEFINED,o=this.add_(!0,t,i,r,_,a);return this.mergeInfos_(u,o)},u.prototype.add_=function(t,e,i,s,n,a){var u,_,o,h,f=t?this.hitAtlases_:this.atlases_;for(o=0,h=f.length;o<h;++o){if(_=(u=f[o]).add(e,i,s,n,a))return _;if(!_&&o===h-1){var l=void 0;t?(l=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=l):(l=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=l),u=new r.default(l,this.space_),f.push(u),++h}}return null},exports.default=u;
},{"../webgl.js":"SCyv","../functions.js":"RgA2","../style/Atlas.js":"N0HK"}],"0Vdg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../util.js"),e=require("../../colorlike.js"),i=require("../../dom.js"),s=require("../../geom/GeometryType.js"),a=g(s),r=require("../../has.js"),o=require("../replay.js"),l=require("../webgl.js"),h=require("../webgl/TextureReplay.js"),n=g(h),f=require("../../style/AtlasManager.js"),u=g(f),d=require("../../webgl/Buffer.js"),_=g(d);function g(t){return t&&t.__esModule?t:{default:t}}var c=function(s){function h(t,e){s.call(this,t,e),this.images_=[],this.textures_=[],this.measureCanvas_=(0,i.createCanvasContext2D)(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1}return s&&(h.__proto__=s),h.prototype=Object.create(s&&s.prototype),h.prototype.constructor=h,h.prototype.drawText=function(e,i){if(this.text_){var s=null,r=2,o=2;switch(e.getType()){case a.default.POINT:case a.default.MULTI_POINT:r=(s=e.getFlatCoordinates()).length,o=e.getStride();break;case a.default.CIRCLE:s=e.getCenter();break;case a.default.LINE_STRING:s=e.getFlatMidpoint();break;case a.default.MULTI_LINE_STRING:r=(s=e.getFlatMidpoints()).length;break;case a.default.POLYGON:s=e.getFlatInteriorPoint();break;case a.default.MULTI_POLYGON:r=(s=e.getFlatInteriorPoints()).length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(i);var l,h,n,f,u,d,_,g,c=this.currAtlas_,p=this.text_.split("\n"),T=this.getTextSize_(p),v=Math.round(T[0]*this.textAlign_-this.offsetX_),L=Math.round(T[1]*this.textBaseline_-this.offsetY_),x=this.state_.lineWidth/2*this.state_.scale;for(l=0,h=p.length;l<h;++l)for(u=0,d=c.height*l,n=0,f=(_=p[l].split("")).length;n<f;++n){if(g=c.atlas.getInfo(_[n])){var A=g.image;if(this.anchorX=v-u,this.anchorY=L-d,this.originX=0===n?g.offsetX-x:g.offsetX,this.originY=g.offsetY,this.height=c.height,this.width=0===n||n===_.length-1?c.width[_[n]]+x:c.width[_[n]],this.imageHeight=A.height,this.imageWidth=A.width,0===this.images_.length)this.images_.push(A);else{var C=this.images_[this.images_.length-1];(0,t.getUid)(C)!=(0,t.getUid)(A)&&(this.groupIndices.push(this.indices.length),this.images_.push(A))}this.drawText_(s,0,r,o)}u+=this.width}}},h.prototype.getTextSize_=function(t){var e=this,i=this.currAtlas_,s=t.length*i.height;return[t.map(function(t){for(var s=0,a=0,r=t.length;a<r;++a){var o=t[a];i.width[o]||e.addCharToAtlas_(o),s+=i.width[o]?i.width[o]:0}return s}).reduce(function(t,e){return Math.max(t,e)}),s]},h.prototype.drawText_=function(t,e,i,s){for(var a=e,r=i;a<r;a+=s)this.drawCoordinates(t,e,i,s)},h.prototype.addCharToAtlas_=function(t){if(1===t.length){var e=this.currAtlas_,i=this.state_,s=this.measureCanvas_.getContext("2d");s.font=i.font;var a=Math.ceil(s.measureText(t).width*i.scale);e.atlas.add(t,a,e.height,function(e,s,a){e.font=i.font,e.fillStyle=i.fillColor,e.strokeStyle=i.strokeColor,e.lineWidth=i.lineWidth,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.miterLimit=i.miterLimit,e.textAlign="left",e.textBaseline="top",r.CANVAS_LINE_DASH&&i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),1!==i.scale&&e.setTransform(i.scale,0,0,i.scale,0,0),i.strokeColor&&e.strokeText(t,s,a),i.fillColor&&e.fillText(t,s,a)})&&(e.width[t]=a)}},h.prototype.finish=function(t){var e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new _.default(this.vertices),this.indicesBuffer=new _.default(this.indices);this.createTextures(this.textures_,this.images_,{},e),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,s.prototype.finish.call(this,t)},h.prototype.setTextStyle=function(t){var i=this.state_,s=t.getFill(),a=t.getStroke();if(t&&t.getText()&&(s||a)){if(s){var r=s.getColor();i.fillColor=(0,e.asColorLike)(r||l.DEFAULT_FILLSTYLE)}else i.fillColor=null;if(a){var h=a.getColor();i.strokeColor=(0,e.asColorLike)(h||l.DEFAULT_STROKESTYLE),i.lineWidth=a.getWidth()||l.DEFAULT_LINEWIDTH,i.lineCap=a.getLineCap()||l.DEFAULT_LINECAP,i.lineDashOffset=a.getLineDashOffset()||l.DEFAULT_LINEDASHOFFSET,i.lineJoin=a.getLineJoin()||l.DEFAULT_LINEJOIN,i.miterLimit=a.getMiterLimit()||l.DEFAULT_MITERLIMIT;var n=a.getLineDash();i.lineDash=n?n.slice():l.DEFAULT_LINEDASH}else i.strokeColor=null,i.lineWidth=0;i.font=t.getFont()||l.DEFAULT_FONT,i.scale=t.getScale()||1,this.text_=t.getText();var f=o.TEXT_ALIGN[t.getTextAlign()],u=o.TEXT_ALIGN[t.getTextBaseline()];this.textAlign_=void 0===f?l.DEFAULT_TEXTALIGN:f,this.textBaseline_=void 0===u?l.DEFAULT_TEXTBASELINE:u,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(i)}else this.text_=""},h.prototype.getAtlas_=function(t){var e=[];for(var i in t)(t[i]||0===t[i])&&(Array.isArray(t[i])?e=e.concat(t[i]):e.push(t[i]));var s=this.calculateHash_(e);if(!this.atlases_[s]){var a=this.measureCanvas_.getContext("2d");a.font=t.font;var r=Math.ceil((1.5*a.measureText("M").width+t.lineWidth/2)*t.scale);this.atlases_[s]={atlas:new u.default({space:t.lineWidth+1}),width:{},height:r}}return this.atlases_[s]},h.prototype.calculateHash_=function(t){for(var e="",i=0,s=t.length;i<s;++i)e+=t[i];return e},h.prototype.getTextures=function(t){return this.textures_},h.prototype.getHitDetectionTextures=function(){return this.textures_},h}(n.default);exports.default=c;
},{"../../util.js":"KniQ","../../colorlike.js":"V5+X","../../dom.js":"Xno5","../../geom/GeometryType.js":"lmV0","../../has.js":"f3Nv","../replay.js":"FzwX","../webgl.js":"7DIo","../webgl/TextureReplay.js":"rtlq","../../style/AtlasManager.js":"SyS8","../../webgl/Buffer.js":"zsRd"}],"aOHC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../array.js"),r=require("../../extent.js"),t=require("../../obj.js"),n=require("../replay.js"),i=require("../ReplayGroup.js"),o=_(i),a=require("../webgl/CircleReplay.js"),u=_(a),s=require("../webgl/ImageReplay.js"),p=_(s),l=require("../webgl/LineStringReplay.js"),y=_(l),f=require("../webgl/PolygonReplay.js"),d=_(f),c=require("../webgl/TextReplay.js"),h=_(c);function _(e){return e&&e.__esModule?e:{default:e}}var v=[1,1],g={Circle:u.default,Image:p.default,LineString:y.default,Polygon:d.default,Text:h.default},x=function(i){function o(e,r,t){i.call(this),this.maxExtent_=r,this.tolerance_=e,this.renderBuffer_=t,this.replaysByZIndex_={}}return i&&(o.__proto__=i),o.prototype=Object.create(i&&i.prototype),o.prototype.constructor=o,o.prototype.addDeclutter=function(e,r){},o.prototype.getDeleteResourcesFunction=function(e){var r,t=[];for(r in this.replaysByZIndex_){var n=this.replaysByZIndex_[r];for(var i in n)t.push(n[i].getDeleteResourcesFunction(e))}return function(){for(var e,r=arguments,n=t.length,i=0;i<n;i++)e=t[i].apply(this,r);return e}},o.prototype.finish=function(e){var r;for(r in this.replaysByZIndex_){var t=this.replaysByZIndex_[r];for(var n in t)t[n].finish(e)}},o.prototype.getReplay=function(e,r){var t=void 0!==e?e.toString():"0",n=this.replaysByZIndex_[t];void 0===n&&(n={},this.replaysByZIndex_[t]=n);var i=n[r];void 0===i&&(i=new(0,g[r])(this.tolerance_,this.maxExtent_),n[r]=i);return i},o.prototype.isEmpty=function(){return(0,t.isEmpty)(this.replaysByZIndex_)},o.prototype.replay=function(r,t,i,o,a,u,s,p){var l,y,f,d,c,h,_=Object.keys(this.replaysByZIndex_).map(Number);for(_.sort(e.numberSafeCompareFunction),l=0,y=_.length;l<y;++l)for(c=this.replaysByZIndex_[_[l].toString()],f=0,d=n.ORDER.length;f<d;++f)h=c[n.ORDER[f]],void 0!==h&&h.replay(r,t,i,o,a,u,s,p,void 0,!1)},o.prototype.replayHitDetection_=function(e,r,t,i,o,a,u,s,p,l,y){var f,d,c,h,_,v,g=Object.keys(this.replaysByZIndex_).map(Number);for(g.sort(function(e,r){return r-e}),f=0,d=g.length;f<d;++f)for(h=this.replaysByZIndex_[g[f].toString()],c=n.ORDER.length-1;c>=0;--c)if(void 0!==(_=h[n.ORDER[c]])&&(v=_.replay(e,r,t,i,o,a,u,s,p,l,y)))return v},o.prototype.forEachFeatureAtCoordinate=function(e,t,n,i,o,a,u,s,p,l){var y,f=t.getGL();return f.bindFramebuffer(f.FRAMEBUFFER,t.getHitDetectionFramebuffer()),void 0!==this.renderBuffer_&&(y=(0,r.buffer)((0,r.createOrUpdateFromCoordinate)(e),i*this.renderBuffer_)),this.replayHitDetection_(t,e,i,o,v,u,s,p,function(e){var r=new Uint8Array(4);if(f.readPixels(0,0,1,1,f.RGBA,f.UNSIGNED_BYTE,r),r[3]>0){var t=l(e);if(t)return t}},!0,y)},o.prototype.hasFeatureAtCoordinate=function(e,r,t,n,i,o,a,u,s){var p=r.getGL();return p.bindFramebuffer(p.FRAMEBUFFER,r.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(r,e,n,i,v,a,u,s,function(e){var r=new Uint8Array(4);return p.readPixels(0,0,1,1,p.RGBA,p.UNSIGNED_BYTE,r),r[3]>0},!1)},o}(o.default);exports.default=x;
},{"../../array.js":"luEr","../../extent.js":"QDir","../../obj.js":"mH6q","../replay.js":"FzwX","../ReplayGroup.js":"TK0U","../webgl/CircleReplay.js":"sHZH","../webgl/ImageReplay.js":"cwcG","../webgl/LineStringReplay.js":"Nu72","../webgl/PolygonReplay.js":"Cbiy","../webgl/TextReplay.js":"0Vdg"}],"PT5w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../extent.js"),e=require("../../geom/GeometryType.js"),i=h(e),s=require("../ReplayType.js"),o=h(s),l=require("../VectorContext.js"),r=h(l),n=require("../webgl/ReplayGroup.js"),a=h(n);function h(t){return t&&t.__esModule?t:{default:t}}var _=function(e){function s(t,i,s,o,l,r,n){e.call(this),this.context_=t,this.center_=i,this.extent_=r,this.pixelRatio_=n,this.size_=l,this.rotation_=o,this.resolution_=s,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null}return e&&(s.__proto__=e),s.prototype=Object.create(e&&e.prototype),s.prototype.constructor=s,s.prototype.drawText_=function(t,e){var i=this.context_,s=t.getReplay(0,o.default.TEXT);s.setTextStyle(this.textStyle_),s.drawText(e,null),s.finish(i);s.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),s.getDeleteResourcesFunction(i)()},s.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},s.prototype.drawGeometry=function(t){switch(t.getType()){case i.default.POINT:this.drawPoint(t,null);break;case i.default.LINE_STRING:this.drawLineString(t,null);break;case i.default.POLYGON:this.drawPolygon(t,null);break;case i.default.MULTI_POINT:this.drawMultiPoint(t,null);break;case i.default.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case i.default.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case i.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case i.default.CIRCLE:this.drawCircle(t,null)}},s.prototype.drawFeature=function(e,i){var s=i.getGeometryFunction()(e);s&&(0,t.intersects)(this.extent_,s.getExtent())&&(this.setStyle(i),this.drawGeometry(s))},s.prototype.drawGeometryCollection=function(t,e){var i,s,o=t.getGeometriesArray();for(i=0,s=o.length;i<s;++i)this.drawGeometry(o[i])},s.prototype.drawPoint=function(t,e){var i=this.context_,s=new a.default(1,this.extent_),l=s.getReplay(0,o.default.IMAGE);l.setImageStyle(this.imageStyle_),l.drawPoint(t,e),l.finish(i);l.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),l.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(s,t)},s.prototype.drawMultiPoint=function(t,e){var i=this.context_,s=new a.default(1,this.extent_),l=s.getReplay(0,o.default.IMAGE);l.setImageStyle(this.imageStyle_),l.drawMultiPoint(t,e),l.finish(i);l.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),l.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(s,t)},s.prototype.drawLineString=function(t,e){var i=this.context_,s=new a.default(1,this.extent_),l=s.getReplay(0,o.default.LINE_STRING);l.setFillStrokeStyle(null,this.strokeStyle_),l.drawLineString(t,e),l.finish(i);l.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),l.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(s,t)},s.prototype.drawMultiLineString=function(t,e){var i=this.context_,s=new a.default(1,this.extent_),l=s.getReplay(0,o.default.LINE_STRING);l.setFillStrokeStyle(null,this.strokeStyle_),l.drawMultiLineString(t,e),l.finish(i);l.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),l.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(s,t)},s.prototype.drawPolygon=function(t,e){var i=this.context_,s=new a.default(1,this.extent_),l=s.getReplay(0,o.default.POLYGON);l.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),l.drawPolygon(t,e),l.finish(i);l.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),l.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(s,t)},s.prototype.drawMultiPolygon=function(t,e){var i=this.context_,s=new a.default(1,this.extent_),l=s.getReplay(0,o.default.POLYGON);l.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),l.drawMultiPolygon(t,e),l.finish(i);l.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),l.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(s,t)},s.prototype.drawCircle=function(t,e){var i=this.context_,s=new a.default(1,this.extent_),l=s.getReplay(0,o.default.CIRCLE);l.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),l.drawCircle(t,e),l.finish(i);l.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),l.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(s,t)},s.prototype.setImageStyle=function(t){this.imageStyle_=t},s.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},s.prototype.setTextStyle=function(t){this.textStyle_=t},s}(r.default);exports.default=_;
},{"../../extent.js":"QDir","../../geom/GeometryType.js":"lmV0","../ReplayType.js":"D882","../VectorContext.js":"4LQ/","../webgl/ReplayGroup.js":"aOHC"}],"6MfN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vertex=exports.fragment=void 0;var e=require("../../webgl.js"),o=require("../../webgl/Fragment.js"),r=i(o),t=require("../../webgl/Vertex.js"),n=i(t);function i(e){return e&&e.__esModule?e:{default:e}}var a=exports.fragment=new r.default(e.DEBUG?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n":"precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"),u=exports.vertex=new n.default(e.DEBUG?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}");
},{"../../webgl.js":"SCyv","../../webgl/Fragment.js":"SAYv","../../webgl/Vertex.js":"mo14"}],"jKm2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../../webgl.js"),o=function(o,i){this.u_texCoordMatrix=o.getUniformLocation(i,t.DEBUG?"u_texCoordMatrix":"d"),this.u_projectionMatrix=o.getUniformLocation(i,t.DEBUG?"u_projectionMatrix":"e"),this.u_opacity=o.getUniformLocation(i,t.DEBUG?"u_opacity":"f"),this.u_texture=o.getUniformLocation(i,t.DEBUG?"u_texture":"g"),this.a_position=o.getAttribLocation(i,t.DEBUG?"a_position":"b"),this.a_texCoord=o.getAttribLocation(i,t.DEBUG?"a_texCoord":"c")};exports.default=o;
},{"../../../webgl.js":"SCyv"}],"7nUx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../render/Event.js"),t=b(e),r=require("../../render/EventType.js"),i=b(r),o=require("../../render/webgl/Immediate.js"),a=b(o),n=require("../Layer.js"),u=b(n),f=require("../webgl/defaultmapshader.js"),s=require("../webgl/defaultmapshader/Locations.js"),p=b(s),d=require("../../transform.js"),m=require("../../vec/mat4.js"),l=require("../../webgl.js"),h=require("../../webgl/Buffer.js"),c=b(h),x=require("../../webgl/Context.js");function b(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function r(t,r){e.call(this,r),this.mapRenderer=t,this.arrayBuffer_=new c.default([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=(0,d.create)(),this.projectionMatrix=(0,d.create)(),this.tmpMat4_=(0,m.create)(),this.defaultLocations_=null}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.bindFramebuffer=function(e,t){var r=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=t){var i=function(e,t,r){e.isContextLost()||(e.deleteFramebuffer(t),e.deleteTexture(r))}.bind(null,r,this.framebuffer,this.texture);e.postRenderFunctions.push(i);var o=(0,x.createEmptyTexture)(r,t,t),a=r.createFramebuffer();r.bindFramebuffer(l.FRAMEBUFFER,a),r.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,o,0),this.texture=o,this.framebuffer=a,this.framebufferDimension=t}else r.bindFramebuffer(l.FRAMEBUFFER,this.framebuffer)},r.prototype.composeFrame=function(e,t,r){this.dispatchComposeEvent_(i.default.PRECOMPOSE,r,e),r.bindBuffer(l.ARRAY_BUFFER,this.arrayBuffer_);var o,a=r.getGL(),n=r.getProgram(f.fragment,f.vertex);this.defaultLocations_?o=this.defaultLocations_:(o=new p.default(a,n),this.defaultLocations_=o),r.useProgram(n)&&(a.enableVertexAttribArray(o.a_position),a.vertexAttribPointer(o.a_position,2,l.FLOAT,!1,16,0),a.enableVertexAttribArray(o.a_texCoord),a.vertexAttribPointer(o.a_texCoord,2,l.FLOAT,!1,16,8),a.uniform1i(o.u_texture,0)),a.uniformMatrix4fv(o.u_texCoordMatrix,!1,(0,m.fromTransform)(this.tmpMat4_,this.getTexCoordMatrix())),a.uniformMatrix4fv(o.u_projectionMatrix,!1,(0,m.fromTransform)(this.tmpMat4_,this.getProjectionMatrix())),a.uniform1f(o.u_opacity,t.opacity),a.bindTexture(l.TEXTURE_2D,this.getTexture()),a.drawArrays(l.TRIANGLE_STRIP,0,4),this.dispatchComposeEvent_(i.default.POSTCOMPOSE,r,e)},r.prototype.dispatchComposeEvent_=function(e,r,i){var o=this.getLayer();if(o.hasListener(e)){var n=i.viewState,u=n.resolution,f=i.pixelRatio,s=i.extent,p=n.center,d=n.rotation,m=i.size,l=new a.default(r,p,u,d,m,s,f),h=new t.default(e,l,i,null,r);o.dispatchEvent(h)}},r.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},r.prototype.getTexture=function(){return this.texture},r.prototype.getProjectionMatrix=function(){return this.projectionMatrix},r.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},r.prototype.prepareFrame=function(e,t,r){},r.prototype.forEachLayerAtPixel=function(e,t,r,i){},r}(u.default);exports.default=_;
},{"../../render/Event.js":"E+B6","../../render/EventType.js":"z39m","../../render/webgl/Immediate.js":"PT5w","../Layer.js":"fpOz","../webgl/defaultmapshader.js":"6MfN","../webgl/defaultmapshader/Locations.js":"jKm2","../../transform.js":"P4eA","../../vec/mat4.js":"UkOi","../../webgl.js":"SCyv","../../webgl/Buffer.js":"zsRd","../../webgl/Context.js":"2nJO"}],"w+NT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../reproj/common.js"),e=require("../../functions.js"),r=require("../../LayerType.js"),a=g(r),i=require("../../ViewHint.js"),o=g(i),n=require("../../dom.js"),s=require("../../extent.js"),u=require("../webgl/Layer.js"),h=g(u),l=require("../../transform.js"),c=require("../../webgl.js"),p=require("../../webgl/Context.js");function g(t){return t&&t.__esModule?t:{default:t}}var f=function(r){function a(t,e){r.call(this,t,e),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null}return r&&(a.__proto__=r),a.prototype=Object.create(r&&r.prototype),a.prototype.constructor=a,a.prototype.createTexture_=function(t){var e=t.getImage(),r=this.mapRenderer.getGL();return(0,p.createTexture)(r,e,c.CLAMP_TO_EDGE,c.CLAMP_TO_EDGE)},a.prototype.forEachFeatureAtCoordinate=function(t,e,r,a,i){var o=this.getLayer(),n=o.getSource(),s=e.viewState.resolution,u=e.viewState.rotation,h=e.skippedFeatureUids;return n.forEachFeatureAtCoordinate(t,s,u,r,h,function(t){return a.call(i,t,o)})},a.prototype.prepareFrame=function(e,r,a){var i=this.mapRenderer.getGL(),n=e.pixelRatio,u=e.viewState,h=u.center,c=u.resolution,p=u.rotation,g=this.image_,f=this.texture,x=this.getLayer().getSource(),_=e.viewHints,d=e.extent;if(void 0!==r.extent&&(d=(0,s.getIntersection)(d,r.extent)),!_[o.default.ANIMATING]&&!_[o.default.INTERACTING]&&!(0,s.isEmpty)(d)){var m=u.projection;if(!t.ENABLE_RASTER_REPROJECTION){var v=x.getProjection();v&&(m=v)}var C=x.getImage(d,c,n,m);if(C)if(this.loadImage(C)&&(g=C,f=this.createTexture_(C),this.texture)){var y=function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,i,this.texture);e.postRenderFunctions.push(y)}}if(g){var T=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(T.width,T.height,n,h,c,p,g.getExtent()),this.hitTransformationMatrix_=null;var E=this.texCoordMatrix;(0,l.reset)(E),(0,l.scale)(E,1,-1),(0,l.translate)(E,0,-1),this.image_=g,this.texture=f}return!!g},a.prototype.updateProjectionMatrix_=function(t,e,r,a,i,o,n){var s=t*i,u=e*i,h=this.projectionMatrix;(0,l.reset)(h),(0,l.scale)(h,2*r/s,2*r/u),(0,l.rotate)(h,-o),(0,l.translate)(h,n[0]-a[0],n[1]-a[1]),(0,l.scale)(h,(n[2]-n[0])/2,(n[3]-n[1])/2),(0,l.translate)(h,1,1)},a.prototype.hasFeatureAtCoordinate=function(t,r){return void 0!==this.forEachFeatureAtCoordinate(t,r,0,e.TRUE,this)},a.prototype.forEachLayerAtPixel=function(t,r,a,i){if(this.image_&&this.image_.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==e.UNDEFINED){var o=(0,l.apply)(r.pixelToCoordinateTransform,t.slice());return this.forEachFeatureAtCoordinate(o,r,0,e.TRUE,this)?a.call(i,this.getLayer(),null):void 0}var s=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(r.size,s));var u=(0,l.apply)(this.hitTransformationMatrix_,t.slice());if(!(u[0]<0||u[0]>s[0]||u[1]<0||u[1]>s[1])){this.hitCanvasContext_||(this.hitCanvasContext_=(0,n.createCanvasContext2D)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),u[0],u[1],1,1,0,0,1,1);var h=this.hitCanvasContext_.getImageData(0,0,1,1).data;return h[3]>0?a.call(i,this.getLayer(),h):void 0}}},a.prototype.getHitTransformationMatrix_=function(t,e){var r=(0,l.create)();(0,l.translate)(r,-1,-1),(0,l.scale)(r,2/t[0],2/t[1]),(0,l.translate)(r,0,t[1]),(0,l.scale)(r,1,-1);var a=(0,l.invert)(this.projectionMatrix.slice()),i=(0,l.create)();return(0,l.translate)(i,0,e[1]),(0,l.scale)(i,1,-1),(0,l.scale)(i,e[0]/2,e[1]/2),(0,l.translate)(i,1,1),(0,l.multiply)(i,a),(0,l.multiply)(i,r),i},a}(h.default);f.handles=function(t){return t.getType()===a.default.IMAGE},f.create=function(t,e){return new f(t,e)},exports.default=f;
},{"../../reproj/common.js":"7f+F","../../functions.js":"RgA2","../../LayerType.js":"8+bQ","../../ViewHint.js":"cuLW","../../dom.js":"Xno5","../../extent.js":"QDir","../webgl/Layer.js":"7nUx","../../transform.js":"P4eA","../../webgl.js":"SCyv","../../webgl/Context.js":"2nJO"}],"VyQL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../array.js"),t=require("../../css.js"),i=require("../../dom.js"),r=require("../../events.js"),a=require("../../layer/Layer.js"),s=require("../../render/Event.js"),n=L(s),o=require("../../render/EventType.js"),u=L(o),h=require("../../render/webgl/Immediate.js"),l=L(h),c=require("../Map.js"),_=L(c),d=require("../../source/State.js"),p=L(d),T=require("../../structs/LRUCache.js"),x=L(T),E=require("../../structs/PriorityQueue.js"),C=L(E),f=require("../../webgl.js"),v=require("../../webgl/Context.js"),y=L(v),R=require("../../webgl/ContextEventType.js"),g=L(R);function L(e){return e&&e.__esModule?e:{default:e}}var m=1024,A=function(s){function o(e){s.call(this,e);var a=e.getViewport();this.canvas_=document.createElement("CANVAS"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=t.CLASS_UNSELECTABLE,a.insertBefore(this.canvas_,a.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=(0,i.createCanvasContext2D)(),this.renderedVisible_=!0,this.gl_=(0,f.getContext)(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new y.default(this.canvas_,this.gl_),(0,r.listen)(this.canvas_,g.default.LOST,this.handleWebGLContextLost,this),(0,r.listen)(this.canvas_,g.default.RESTORED,this.handleWebGLContextRestored,this),this.textureCache_=new x.default,this.focus_=null,this.tileTextureQueue_=new C.default(function(e){var t=e[1],i=e[2],r=t[0]-this.focus_[0],a=t[1]-this.focus_[1];return 65536*Math.log(i)+Math.sqrt(r*r+a*a)/i}.bind(this),function(e){return e[0].getKey()}),this.loadNextTileTexture_=function(e,t){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var i=this.tileTextureQueue_.dequeue(),r=i[0],a=i[3],s=i[4];this.bindTileTexture(r,a,s,f.LINEAR,f.LINEAR)}return!1}.bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()}return s&&(o.__proto__=s),o.prototype=Object.create(s&&s.prototype),o.prototype.constructor=o,o.prototype.bindTileTexture=function(e,t,i,r,a){var s=this.getGL(),n=e.getKey();if(this.textureCache_.containsKey(n)){var o=this.textureCache_.get(n);s.bindTexture(f.TEXTURE_2D,o.texture),o.magFilter!=r&&(s.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,r),o.magFilter=r),o.minFilter!=a&&(s.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,a),o.minFilter=a)}else{var u=s.createTexture();if(s.bindTexture(f.TEXTURE_2D,u),i>0){var h=this.clipTileContext_.canvas,l=this.clipTileContext_;this.clipTileCanvasWidth_!==t[0]||this.clipTileCanvasHeight_!==t[1]?(h.width=t[0],h.height=t[1],this.clipTileCanvasWidth_=t[0],this.clipTileCanvasHeight_=t[1]):l.clearRect(0,0,t[0],t[1]),l.drawImage(e.getImage(),i,i,t[0],t[1],0,0,t[0],t[1]),s.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,h)}else s.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,e.getImage());s.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,r),s.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,a),s.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),s.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),this.textureCache_.set(n,{texture:u,magFilter:r,minFilter:a})}},o.prototype.dispatchComposeEvent_=function(e,t){var i=this.getMap();if(i.hasListener(e)){var r=this.context_,a=t.extent,s=t.size,o=t.viewState,u=t.pixelRatio,h=o.resolution,c=o.center,_=o.rotation,d=new l.default(r,c,h,_,s,a,u),p=new n.default(e,d,t,null,r);i.dispatchEvent(p)}},o.prototype.disposeInternal=function(){var e=this.getGL();e.isContextLost()||this.textureCache_.forEach(function(t){t&&e.deleteTexture(t.texture)}),this.context_.dispose(),s.prototype.disposeInternal.call(this)},o.prototype.expireCache_=function(e,t){for(var i,r=this.getGL();this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>m;){if(i=this.textureCache_.peekLast())r.deleteTexture(i.texture);else{if(+this.textureCache_.peekLastKey()==t.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},o.prototype.getContext=function(){return this.context_},o.prototype.getGL=function(){return this.gl_},o.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},o.prototype.handleWebGLContextLost=function(e){e.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;var t=this.getLayerRenderers();for(var i in t){t[i].handleWebGLContextLost()}},o.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},o.prototype.initializeGL_=function(){var e=this.gl_;e.activeTexture(f.TEXTURE0),e.blendFuncSeparate(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA,f.ONE,f.ONE_MINUS_SRC_ALPHA),e.disable(f.CULL_FACE),e.disable(f.DEPTH_TEST),e.disable(f.SCISSOR_TEST),e.disable(f.STENCIL_TEST)},o.prototype.isTileTextureLoaded=function(e){return this.textureCache_.containsKey(e.getKey())},o.prototype.renderFrame=function(t){var i=this.getContext(),r=this.getGL();if(r.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchComposeEvent_(u.default.PRECOMPOSE,t);var s=[],n=t.layerStatesArray;(0,e.stableSort)(n,c.sortByZIndex);var o,h,l,_=t.viewState.resolution;for(o=0,h=n.length;o<h;++o)l=n[o],(0,a.visibleAtResolution)(l,_)&&l.sourceState==p.default.READY&&this.getLayerRenderer(l.layer).prepareFrame(t,l,i)&&s.push(l);var d=t.size[0]*t.pixelRatio,T=t.size[1]*t.pixelRatio;for(this.canvas_.width==d&&this.canvas_.height==T||(this.canvas_.width=d,this.canvas_.height=T),r.bindFramebuffer(f.FRAMEBUFFER,null),r.clearColor(0,0,0,0),r.clear(f.COLOR_BUFFER_BIT),r.enable(f.BLEND),r.viewport(0,0,this.canvas_.width,this.canvas_.height),o=0,h=s.length;o<h;++o)l=s[o],this.getLayerRenderer(l.layer).composeFrame(t,l,i);this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>m&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchComposeEvent_(u.default.POSTCOMPOSE,t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},o.prototype.forEachFeatureAtCoordinate=function(e,t,i,r,s,n,o){var u;if(this.getGL().isContextLost())return!1;var h,l=t.viewState,c=t.layerStatesArray;for(h=c.length-1;h>=0;--h){var _=c[h],d=_.layer;if((0,a.visibleAtResolution)(_,l.resolution)&&n.call(o,d))if(u=this.getLayerRenderer(d).forEachFeatureAtCoordinate(e,t,i,r,s))return u}},o.prototype.hasFeatureAtCoordinate=function(e,t,i,r,s){var n=!1;if(this.getGL().isContextLost())return!1;var o,u=t.viewState,h=t.layerStatesArray;for(o=h.length-1;o>=0;--o){var l=h[o],c=l.layer;if((0,a.visibleAtResolution)(l,u.resolution)&&r.call(s,c))if(n=this.getLayerRenderer(c).hasFeatureAtCoordinate(e,t))return!0}return n},o.prototype.forEachLayerAtPixel=function(e,t,i,r,s,n,o){if(this.getGL().isContextLost())return!1;var u,h,l=t.viewState,c=t.layerStatesArray;for(h=c.length-1;h>=0;--h){var _=c[h],d=_.layer;if((0,a.visibleAtResolution)(_,l.resolution)&&n.call(s,d))if(u=this.getLayerRenderer(d).forEachLayerAtPixel(e,t,r,s))return u}},o}(_.default);exports.default=A;
},{"../../array.js":"luEr","../../css.js":"HgMV","../../dom.js":"Xno5","../../events.js":"55Uq","../../layer/Layer.js":"GCgv","../../render/Event.js":"E+B6","../../render/EventType.js":"z39m","../../render/webgl/Immediate.js":"PT5w","../Map.js":"8oIh","../../source/State.js":"iC8j","../../structs/LRUCache.js":"oMDz","../../structs/PriorityQueue.js":"RQLY","../../webgl.js":"SCyv","../../webgl/Context.js":"2nJO","../../webgl/ContextEventType.js":"HqWy"}],"POLO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vertex=exports.fragment=void 0;var e=require("../../webgl.js"),t=require("../../webgl/Fragment.js"),r=i(t),o=require("../../webgl/Vertex.js"),n=i(o);function i(e){return e&&e.__esModule?e:{default:e}}var a=exports.fragment=new r.default(e.DEBUG?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n":"precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"),v=exports.vertex=new n.default(e.DEBUG?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}");
},{"../../webgl.js":"SCyv","../../webgl/Fragment.js":"SAYv","../../webgl/Vertex.js":"mo14"}],"t0kf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../../webgl.js"),e=function(e,o){this.u_tileOffset=e.getUniformLocation(o,t.DEBUG?"u_tileOffset":"d"),this.u_texture=e.getUniformLocation(o,t.DEBUG?"u_texture":"e"),this.a_position=e.getAttribLocation(o,t.DEBUG?"a_position":"b"),this.a_texCoord=e.getAttribLocation(o,t.DEBUG?"a_texCoord":"c")};exports.default=e;
},{"../../../webgl.js":"SCyv"}],"colh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../LayerType.js"),t=x(e),r=require("../../TileRange.js"),i=x(r),o=require("../../TileState.js"),n=x(o),a=require("../../array.js"),s=require("../../extent.js"),l=require("../../math.js"),d=require("../webgl/Layer.js"),u=x(d),f=require("../webgl/tilelayershader.js"),h=require("../webgl/tilelayershader/Locations.js"),g=x(h),c=require("../../size.js"),T=require("../../transform.js"),_=require("../../webgl.js"),p=require("../../webgl/Buffer.js"),m=x(p);function x(e){return e&&e.__esModule?e:{default:e}}var R=function(e){function t(t,r){e.call(this,t,r),this.fragmentShader_=f.fragment,this.vertexShader_=f.vertex,this.locations_=null,this.renderArrayBuffer_=new m.default([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),e.prototype.disposeInternal.call(this)},t.prototype.createLoadedTileFinder=function(e,t,r){var i=this.mapRenderer;return function(o,n){return e.forEachLoadedTile(t,o,n,function(e){var t=i.isTileTextureLoaded(e);return t&&(r[o]||(r[o]={}),r[o][e.tileCoord.toString()]=e),t})}},t.prototype.handleWebGLContextLost=function(){e.prototype.handleWebGLContextLost.call(this),this.locations_=null},t.prototype.prepareFrame=function(e,t,r){var o,d=this.mapRenderer,u=r.getGL(),f=e.viewState,h=f.projection,p=this.getLayer(),m=p.getSource(),x=m.getTileGridForProjection(h),R=x.getZForResolution(f.resolution),y=x.getResolution(R),v=m.getTilePixelSize(R,e.pixelRatio,h),b=v[0]/(0,c.toSize)(x.getTileSize(R),this.tmpSize_)[0],E=y/b,L=m.getTilePixelRatio(b)*m.getGutter(h),C=f.center,A=e.extent,F=x.getTileRangeForExtentAndZ(A,R);if(this.renderedTileRange_&&this.renderedTileRange_.equals(F)&&this.renderedRevision_==m.getRevision())o=this.renderedFramebufferExtent_;else{var S=F.getSize(),j=Math.max(S[0]*v[0],S[1]*v[1]),P=(0,l.roundUpToPowerOfTwo)(j),w=E*P,O=x.getOrigin(R),q=O[0]+F.minX*v[0]*E,B=O[1]+F.minY*v[1]*E;o=[q,B,q+w,B+w],this.bindFramebuffer(e,P),u.viewport(0,0,P,P),u.clearColor(0,0,0,0),u.clear(_.COLOR_BUFFER_BIT),u.disable(_.BLEND);var z=r.getProgram(this.fragmentShader_,this.vertexShader_);r.useProgram(z),this.locations_||(this.locations_=new g.default(u,z)),r.bindBuffer(_.ARRAY_BUFFER,this.renderArrayBuffer_),u.enableVertexAttribArray(this.locations_.a_position),u.vertexAttribPointer(this.locations_.a_position,2,_.FLOAT,!1,16,0),u.enableVertexAttribArray(this.locations_.a_texCoord),u.vertexAttribPointer(this.locations_.a_texCoord,2,_.FLOAT,!1,16,8),u.uniform1i(this.locations_.u_texture,0);var I={};I[R]={};var D,M,G,U,N,Y,X=this.createLoadedTileFinder(m,h,I),K=p.getUseInterimTilesOnError(),Q=!0,V=(0,s.createEmpty)(),W=new i.default(0,0,0,0);for(U=F.minX;U<=F.maxX;++U)for(N=F.minY;N<=F.maxY;++N)if(M=m.getTile(R,U,N,b,h),void 0===t.extent||(Y=x.getTileCoordExtent(M.tileCoord,V),(0,s.intersects)(Y,t.extent))){if((G=M.getState())==n.default.LOADED||G==n.default.EMPTY||G==n.default.ERROR&&!K||(M=M.getInterimTile()),(G=M.getState())==n.default.LOADED){if(d.isTileTextureLoaded(M)){I[R][M.tileCoord.toString()]=M;continue}}else if(G==n.default.EMPTY||G==n.default.ERROR&&!K)continue;Q=!1,x.forEachTileCoordParentTileRange(M.tileCoord,X,null,W,V)||(D=x.getTileCoordChildTileRange(M.tileCoord,W,V))&&X(R+1,D)}var Z=Object.keys(I).map(Number);Z.sort(a.numberSafeCompareFunction);for(var k=new Float32Array(4),H=0,J=Z.length;H<J;++H){var $=I[Z[H]];for(var ee in $)M=$[ee],Y=x.getTileCoordExtent(M.tileCoord,V),k[0]=2*(Y[2]-Y[0])/w,k[1]=2*(Y[3]-Y[1])/w,k[2]=2*(Y[0]-o[0])/w-1,k[3]=2*(Y[1]-o[1])/w-1,u.uniform4fv(this.locations_.u_tileOffset,k),d.bindTileTexture(M,v,L*b,_.LINEAR,_.LINEAR),u.drawArrays(_.TRIANGLE_STRIP,0,4)}Q?(this.renderedTileRange_=F,this.renderedFramebufferExtent_=o,this.renderedRevision_=m.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,e.animate=!0)}this.updateUsedTiles(e.usedTiles,m,R,F);var te=d.getTileTextureQueue();this.manageTilePyramid(e,m,x,b,h,A,R,p.getPreload(),function(e){e.getState()!=n.default.LOADED||d.isTileTextureLoaded(e)||te.isKeyQueued(e.getKey())||te.enqueue([e,x.getTileCoordCenter(e.tileCoord),x.getResolution(e.tileCoord[0]),v,L*b])},this),this.scheduleExpireCache(e,m);var re=this.texCoordMatrix;return(0,T.reset)(re),(0,T.translate)(re,(Math.round(C[0]/y)*y-o[0])/(o[2]-o[0]),(Math.round(C[1]/y)*y-o[1])/(o[3]-o[1])),0!==f.rotation&&(0,T.rotate)(re,f.rotation),(0,T.scale)(re,e.size[0]*f.resolution/(o[2]-o[0]),e.size[1]*f.resolution/(o[3]-o[1])),(0,T.translate)(re,-.5,-.5),!0},t.prototype.forEachLayerAtPixel=function(e,t,r,i){if(this.framebuffer){var o=[e[0]/t.size[0],(t.size[1]-e[1])/t.size[1]],n=(0,T.apply)(this.texCoordMatrix,o.slice()),a=[n[0]*this.framebufferDimension,n[1]*this.framebufferDimension],s=this.mapRenderer.getContext().getGL();s.bindFramebuffer(s.FRAMEBUFFER,this.framebuffer);var l=new Uint8Array(4);return s.readPixels(a[0],a[1],1,1,s.RGBA,s.UNSIGNED_BYTE,l),l[3]>0?r.call(i,this.getLayer(),l):void 0}},t}(u.default);R.handles=function(e){return e.getType()===t.default.TILE},R.create=function(e,t){return new R(e,t)},exports.default=R;
},{"../../LayerType.js":"8+bQ","../../TileRange.js":"346s","../../TileState.js":"Xz9x","../../array.js":"luEr","../../extent.js":"QDir","../../math.js":"B96G","../webgl/Layer.js":"7nUx","../webgl/tilelayershader.js":"POLO","../webgl/tilelayershader/Locations.js":"t0kf","../../size.js":"TAHd","../../transform.js":"P4eA","../../webgl.js":"SCyv","../../webgl/Buffer.js":"zsRd"}],"u0w/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../util.js"),t=require("../../LayerType.js"),r=h(t),i=require("../../ViewHint.js"),n=h(i),a=require("../../extent.js"),o=require("../../render/webgl/ReplayGroup.js"),s=h(o),u=require("../vector.js"),d=require("../webgl/Layer.js"),l=h(d),p=require("../../transform.js");function h(e){return e&&e.__esModule?e:{default:e}}var y=function(t){function r(e,r){t.call(this,e,r),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,a.createEmpty)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.composeFrame=function(e,t,r){this.layerState_=t;var i=e.viewState,n=this.replayGroup_,a=e.size,o=e.pixelRatio,s=this.mapRenderer.getGL();n&&!n.isEmpty()&&(s.enable(s.SCISSOR_TEST),s.scissor(0,0,a[0]*o,a[1]*o),n.replay(r,i.center,i.resolution,i.rotation,a,o,t.opacity,t.managed?e.skippedFeatureUids:{}),s.disable(s.SCISSOR_TEST))},r.prototype.disposeInternal=function(){var e=this.replayGroup_;if(e){var r=this.mapRenderer.getContext();e.getDeleteResourcesFunction(r)(),this.replayGroup_=null}t.prototype.disposeInternal.call(this)},r.prototype.forEachFeatureAtCoordinate=function(t,r,i,n,a){if(this.replayGroup_&&this.layerState_){var o=this.mapRenderer.getContext(),s=r.viewState,u=this.getLayer(),d=this.layerState_,l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,s.center,s.resolution,s.rotation,r.size,r.pixelRatio,d.opacity,{},function(t){var r=(0,e.getUid)(t).toString();if(!(r in l))return l[r]=!0,n.call(a,t,u)})}},r.prototype.hasFeatureAtCoordinate=function(e,t){if(this.replayGroup_&&this.layerState_){var r=this.mapRenderer.getContext(),i=t.viewState,n=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(e,r,i.center,i.resolution,i.rotation,t.size,t.pixelRatio,n.opacity,t.skippedFeatureUids)}return!1},r.prototype.forEachLayerAtPixel=function(e,t,r,i){var n=(0,p.apply)(t.pixelToCoordinateTransform,e.slice());return this.hasFeatureAtCoordinate(n,t)?r.call(i,this.getLayer(),null):void 0},r.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},r.prototype.prepareFrame=function(e,t,r){var i=this.getLayer(),o=i.getSource(),d=e.viewHints[n.default.ANIMATING],l=e.viewHints[n.default.INTERACTING],p=i.getUpdateWhileAnimating(),h=i.getUpdateWhileInteracting();if(!this.dirty_&&!p&&d||!h&&l)return!0;var y=e.extent,c=e.viewState,f=c.projection,_=c.resolution,g=e.pixelRatio,v=i.getRevision(),R=i.getRenderBuffer(),S=i.getRenderOrder();void 0===S&&(S=u.defaultOrder);var F=(0,a.buffer)(y,R*_);if(!this.dirty_&&this.renderedResolution_==_&&this.renderedRevision_==v&&this.renderedRenderOrder_==S&&(0,a.containsExtent)(this.renderedExtent_,F))return!0;this.replayGroup_&&e.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(r)),this.dirty_=!1;var x=new s.default((0,u.getTolerance)(_,g),F,i.getRenderBuffer());o.loadFeatures(F,_,f);var E=function(e){var t,r=e.getStyleFunction()||i.getStyleFunction();if(r&&(t=r(e,_)),t){var n=this.renderFeature(e,_,g,t,x);this.dirty_=this.dirty_||n}};if(S){var m=[];o.forEachFeatureInExtent(F,function(e){m.push(e)},this),m.sort(S),m.forEach(E.bind(this))}else o.forEachFeatureInExtent(F,E,this);return x.finish(r),this.renderedResolution_=_,this.renderedRevision_=v,this.renderedRenderOrder_=S,this.renderedExtent_=F,this.replayGroup_=x,!0},r.prototype.renderFeature=function(e,t,r,i,n){if(!i)return!1;var a=!1;if(Array.isArray(i))for(var o=i.length-1;o>=0;--o)a=(0,u.renderFeature)(n,e,i[o],(0,u.getSquaredTolerance)(t,r),this.handleStyleImageChange_,this)||a;else a=(0,u.renderFeature)(n,e,i,(0,u.getSquaredTolerance)(t,r),this.handleStyleImageChange_,this)||a;return a},r}(l.default);y.handles=function(e){return e.getType()===r.default.VECTOR},y.create=function(e,t){return new y(e,t)},exports.default=y;
},{"../../util.js":"KniQ","../../LayerType.js":"8+bQ","../../ViewHint.js":"cuLW","../../extent.js":"QDir","../../render/webgl/ReplayGroup.js":"aOHC","../vector.js":"UCah","../webgl/Layer.js":"7nUx","../../transform.js":"P4eA"}],"4/P8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./PluggableMap.js"),r=p(e),t=require("./control.js"),o=require("./interaction.js"),n=require("./obj.js"),u=require("./renderer/webgl/ImageLayer.js"),a=p(u),s=require("./renderer/webgl/Map.js"),i=p(s),l=require("./renderer/webgl/TileLayer.js"),c=p(l),d=require("./renderer/webgl/VectorLayer.js"),f=p(d);function p(e){return e&&e.__esModule?e:{default:e}}var j=function(e){function r(r){(r=(0,n.assign)({},r)).controls||(r.controls=(0,t.defaults)()),r.interactions||(r.interactions=(0,o.defaults)()),e.call(this,r)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.createRenderer=function(){var e=new i.default(this);return e.registerLayerRenderers([a.default,c.default,f.default]),e},r}(r.default);exports.default=j;
},{"./PluggableMap.js":"kRwz","./control.js":"95uc","./interaction.js":"aMDX","./obj.js":"mH6q","./renderer/webgl/ImageLayer.js":"w+NT","./renderer/webgl/Map.js":"VyQL","./renderer/webgl/TileLayer.js":"colh","./renderer/webgl/VectorLayer.js":"u0w/"}],"DRei":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./AssertionError.js");Object.defineProperty(exports,"AssertionError",{enumerable:!0,get:function(){return B(e).default}});var r=require("./Collection.js");Object.defineProperty(exports,"Collection",{enumerable:!0,get:function(){return B(r).default}});var t=require("./Disposable.js");Object.defineProperty(exports,"Disposable",{enumerable:!0,get:function(){return B(t).default}});var n=require("./Feature.js");Object.defineProperty(exports,"Feature",{enumerable:!0,get:function(){return B(n).default}});var u=require("./Geolocation.js");Object.defineProperty(exports,"Geolocation",{enumerable:!0,get:function(){return B(u).default}});var a=require("./Graticule.js");Object.defineProperty(exports,"Graticule",{enumerable:!0,get:function(){return B(a).default}});var i=require("./Image.js");Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return B(i).default}});var o=require("./ImageBase.js");Object.defineProperty(exports,"ImageBase",{enumerable:!0,get:function(){return B(o).default}});var l=require("./ImageCanvas.js");Object.defineProperty(exports,"ImageCanvas",{enumerable:!0,get:function(){return B(l).default}});var f=require("./ImageTile.js");Object.defineProperty(exports,"ImageTile",{enumerable:!0,get:function(){return B(f).default}});var s=require("./Kinetic.js");Object.defineProperty(exports,"Kinetic",{enumerable:!0,get:function(){return B(s).default}});var c=require("./Map.js");Object.defineProperty(exports,"Map",{enumerable:!0,get:function(){return B(c).default}});var p=require("./MapBrowserEvent.js");Object.defineProperty(exports,"MapBrowserEvent",{enumerable:!0,get:function(){return B(p).default}});var b=require("./MapBrowserEventHandler.js");Object.defineProperty(exports,"MapBrowserEventHandler",{enumerable:!0,get:function(){return B(b).default}});var d=require("./MapBrowserPointerEvent.js");Object.defineProperty(exports,"MapBrowserPointerEvent",{enumerable:!0,get:function(){return B(d).default}});var j=require("./MapEvent.js");Object.defineProperty(exports,"MapEvent",{enumerable:!0,get:function(){return B(j).default}});var g=require("./Object.js");Object.defineProperty(exports,"Object",{enumerable:!0,get:function(){return B(g).default}});var v=require("./Observable.js");Object.defineProperty(exports,"Observable",{enumerable:!0,get:function(){return B(v).default}});var m=require("./Overlay.js");Object.defineProperty(exports,"Overlay",{enumerable:!0,get:function(){return B(m).default}});var O=require("./PluggableMap.js");Object.defineProperty(exports,"PluggableMap",{enumerable:!0,get:function(){return B(O).default}});var P=require("./Tile.js");Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return B(P).default}});var y=require("./TileCache.js");Object.defineProperty(exports,"TileCache",{enumerable:!0,get:function(){return B(y).default}});var x=require("./TileQueue.js");Object.defineProperty(exports,"TileQueue",{enumerable:!0,get:function(){return B(x).default}});var q=require("./TileRange.js");Object.defineProperty(exports,"TileRange",{enumerable:!0,get:function(){return B(q).default}});var M=require("./VectorImageTile.js");Object.defineProperty(exports,"VectorImageTile",{enumerable:!0,get:function(){return B(M).default}});var T=require("./VectorTile.js");Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return B(T).default}});var E=require("./View.js");Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return B(E).default}});var I=require("./WebGLMap.js");Object.defineProperty(exports,"WebGLMap",{enumerable:!0,get:function(){return B(I).default}});var w=require("./util.js");function B(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"getUid",{enumerable:!0,get:function(){return w.getUid}}),Object.defineProperty(exports,"inherits",{enumerable:!0,get:function(){return w.inherits}}),Object.defineProperty(exports,"VERSION",{enumerable:!0,get:function(){return w.VERSION}});
},{"./AssertionError.js":"ygGQ","./Collection.js":"FnDa","./Disposable.js":"DDda","./Feature.js":"mYW9","./Geolocation.js":"X4ix","./Graticule.js":"/QUi","./Image.js":"DHWK","./ImageBase.js":"Ojbp","./ImageCanvas.js":"K7j2","./ImageTile.js":"T/Os","./Kinetic.js":"77gA","./Map.js":"8kYy","./MapBrowserEvent.js":"HMLS","./MapBrowserEventHandler.js":"ohHk","./MapBrowserPointerEvent.js":"J1WQ","./MapEvent.js":"vFcA","./Object.js":"PhPh","./Observable.js":"8IdS","./Overlay.js":"/qWc","./PluggableMap.js":"kRwz","./Tile.js":"IWZI","./TileCache.js":"YFDe","./TileQueue.js":"0tHO","./TileRange.js":"346s","./VectorImageTile.js":"xDao","./VectorTile.js":"yj80","./View.js":"hNqE","./WebGLMap.js":"4/P8","./util.js":"KniQ"}],"M5pz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};
},{}],"BU+E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../LayerType.js"),t=u(e),r=require("../layer/Layer.js"),o=u(r),s=require("../layer/TileProperty.js"),i=u(s),n=require("../obj.js");function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function r(r){var o=r||{},s=(0,n.assign)({},o);delete s.preload,delete s.useInterimTilesOnError,e.call(this,s),this.setPreload(void 0!==o.preload?o.preload:0),this.setUseInterimTilesOnError(void 0===o.useInterimTilesOnError||o.useInterimTilesOnError),this.type=t.default.TILE}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getPreload=function(){return this.get(i.default.PRELOAD)},r.prototype.setPreload=function(e){this.set(i.default.PRELOAD,e)},r.prototype.getUseInterimTilesOnError=function(){return this.get(i.default.USE_INTERIM_TILES_ON_ERROR)},r.prototype.setUseInterimTilesOnError=function(e){this.set(i.default.USE_INTERIM_TILES_ON_ERROR,e)},r}(o.default);l.prototype.getSource,exports.default=l;
},{"../LayerType.js":"8+bQ","../layer/Layer.js":"GCgv","../layer/TileProperty.js":"M5pz","../obj.js":"mH6q"}],"2KHB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../LayerType.js"),t=u(e),r=require("../layer/Layer.js"),o=u(r);function u(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function r(r){var o=r||{};e.call(this,o),this.type=t.default.IMAGE}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r}(o.default);p.prototype.getSource,exports.default=p;
},{"../LayerType.js":"8+bQ","../layer/Layer.js":"GCgv"}],"U255":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateSourceResolution=n,exports.render=i;var e=require("./dom.js"),t=require("./extent.js"),r=require("./math.js"),a=require("./proj.js");function n(e,r,n,o){var i=(0,a.transform)(n,r,e),s=(0,a.getPointResolution)(r,o,n),u=r.getMetersPerUnit();void 0!==u&&(s*=u);var c=e.getMetersPerUnit();void 0!==c&&(s/=c);var v=e.getExtent();if(!v||(0,t.containsCoordinate)(v,i)){var g=(0,a.getPointResolution)(e,s,i)/s;isFinite(g)&&g>0&&(s/=g)}return s}function o(e,t,r,a){var n=r-e,o=a-t,i=Math.sqrt(n*n+o*o);return[Math.round(r+n/i),Math.round(a+o/i)]}function i(a,n,i,s,u,c,v,g,h,l,d){var f=(0,e.createCanvasContext2D)(Math.round(i*a),Math.round(i*n));if(0===h.length)return f.canvas;f.scale(i,i);var m=(0,t.createEmpty)();h.forEach(function(e,r,a){(0,t.extend)(m,e.extent)});var x=(0,t.getWidth)(m),M=(0,t.getHeight)(m),T=(0,e.createCanvasContext2D)(Math.round(i*x/s),Math.round(i*M/s)),p=i/s;h.forEach(function(e,r,a){var n=e.extent[0]-m[0],o=-(e.extent[3]-m[3]),i=(0,t.getWidth)(e.extent),s=(0,t.getHeight)(e.extent);T.drawImage(e.image,l,l,e.image.width-2*l,e.image.height-2*l,n*p,o*p,i*p,s*p)});var P=(0,t.getTopLeft)(v);return g.getTriangles().forEach(function(e,t,a){var n=e.source,u=e.target,v=n[0][0],g=n[0][1],h=n[1][0],l=n[1][1],d=n[2][0],x=n[2][1],M=(u[0][0]-P[0])/c,p=-(u[0][1]-P[1])/c,j=(u[1][0]-P[0])/c,E=-(u[1][1]-P[1])/c,q=(u[2][0]-P[0])/c,C=-(u[2][1]-P[1])/c,b=v,y=g;v=0,g=0;var k=[[h-=b,l-=y,0,0,j-M],[d-=b,x-=y,0,0,q-M],[0,0,h,l,E-p],[0,0,d,x,C-p]],w=(0,r.solveLinearSystem)(k);if(w){f.save(),f.beginPath();var R=(M+j+q)/3,S=(p+E+C)/3,W=o(R,S,M,p),D=o(R,S,j,E),H=o(R,S,q,C);f.moveTo(D[0],D[1]),f.lineTo(W[0],W[1]),f.lineTo(H[0],H[1]),f.clip(),f.transform(w[0],w[2],w[1],w[3],M,p),f.translate(m[0]-b,m[3]-y),f.scale(s/i,-s/i),f.drawImage(T.canvas,0,0),f.restore()}}),d&&(f.save(),f.strokeStyle="black",f.lineWidth=1,g.getTriangles().forEach(function(e,t,r){var a=e.target,n=(a[0][0]-P[0])/c,o=-(a[0][1]-P[1])/c,i=(a[1][0]-P[0])/c,s=-(a[1][1]-P[1])/c,u=(a[2][0]-P[0])/c,v=-(a[2][1]-P[1])/c;f.beginPath(),f.moveTo(i,s),f.lineTo(n,o),f.lineTo(u,v),f.closePath(),f.stroke()}),f.restore()),f.canvas}
},{"./dom.js":"Xno5","./extent.js":"QDir","./math.js":"B96G","./proj.js":"Diht"}],"BiRY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../extent.js"),r=require("../math.js"),i=require("../proj.js"),e=10,s=.25,o=function(r,s,o,n,h){this.sourceProj_=r,this.targetProj_=s;var a={},u=(0,i.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var r=t[0]+"/"+t[1];return a[r]||(a[r]=u(t)),a[r]},this.maxSourceExtent_=n,this.errorThresholdSquared_=h*h,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&(0,t.getWidth)(n)==(0,t.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,t.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,t.getWidth)(this.targetProj_.getExtent()):null;var d=(0,t.getTopLeft)(o),c=(0,t.getTopRight)(o),_=(0,t.getBottomRight)(o),l=(0,t.getBottomLeft)(o),f=this.transformInv_(d),g=this.transformInv_(c),W=this.transformInv_(_),v=this.transformInv_(l);if(this.addQuad_(d,c,_,l,f,g,W,v,e),this.wrapsXInSource_){var m=1/0;this.triangles_.forEach(function(t,r,i){m=Math.min(m,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-m>this.sourceWorldWidth_/2){var r=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];r[0][0]-m>this.sourceWorldWidth_/2&&(r[0][0]-=this.sourceWorldWidth_),r[1][0]-m>this.sourceWorldWidth_/2&&(r[1][0]-=this.sourceWorldWidth_),r[2][0]-m>this.sourceWorldWidth_/2&&(r[2][0]-=this.sourceWorldWidth_);var i=Math.min(r[0][0],r[1][0],r[2][0]);Math.max(r[0][0],r[1][0],r[2][0])-i<this.sourceWorldWidth_/2&&(t.source=r)}}.bind(this))}a={}};o.prototype.addTriangle_=function(t,r,i,e,s,o){this.triangles_.push({source:[e,s,o],target:[t,r,i]})},o.prototype.addQuad_=function(i,e,o,n,h,a,u,d,c){var _=(0,t.boundingExtent)([h,a,u,d]),l=this.sourceWorldWidth_?(0,t.getWidth)(_)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&l>.5&&l<1,W=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var v=(0,t.boundingExtent)([i,e,o,n]);W|=(0,t.getWidth)(v)/this.targetWorldWidth_>s}!g&&this.sourceProj_.isGlobal()&&l&&(W|=l>s)}if(W||!this.maxSourceExtent_||(0,t.intersects)(_,this.maxSourceExtent_)){if(!(W||isFinite(h[0])&&isFinite(h[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(d[0])&&isFinite(d[1]))){if(!(c>0))return;W=!0}if(c>0){if(!W){var m,p=[(i[0]+o[0])/2,(i[1]+o[1])/2],x=this.transformInv_(p);if(g)m=((0,r.modulo)(h[0],f)+(0,r.modulo)(u[0],f))/2-(0,r.modulo)(x[0],f);else m=(h[0]+u[0])/2-x[0];var j=(h[1]+u[1])/2-x[1];W=m*m+j*j>this.errorThresholdSquared_}if(W){if(Math.abs(i[0]-o[0])<=Math.abs(i[1]-o[1])){var E=[(e[0]+o[0])/2,(e[1]+o[1])/2],I=this.transformInv_(E),P=[(n[0]+i[0])/2,(n[1]+i[1])/2],S=this.transformInv_(P);this.addQuad_(i,e,E,P,h,a,I,S,c-1),this.addQuad_(P,E,o,n,S,I,u,d,c-1)}else{var T=[(i[0]+e[0])/2,(i[1]+e[1])/2],b=this.transformInv_(T),F=[(o[0]+n[0])/2,(o[1]+n[1])/2],M=this.transformInv_(F);this.addQuad_(i,T,F,n,h,b,M,d,c-1),this.addQuad_(T,e,o,F,b,a,u,M,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(i,o,n,h,u,d),this.addTriangle_(i,e,o,h,a,u)}},o.prototype.calculateSourceExtent=function(){var r=(0,t.createEmpty)();return this.triangles_.forEach(function(i,e,s){var o=i.source;(0,t.extendCoordinate)(r,o[0]),(0,t.extendCoordinate)(r,o[1]),(0,t.extendCoordinate)(r,o[2])}),r},o.prototype.getTriangles=function(){return this.triangles_},exports.default=o;
},{"../extent.js":"QDir","../math.js":"B96G","../proj.js":"Diht"}],"WlOd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./common.js"),t=require("../Tile.js"),i=_(t),s=require("../TileState.js"),r=_(s),o=require("../events.js"),a=require("../events/EventType.js"),n=_(a),u=require("../extent.js"),l=require("../math.js"),h=require("../reproj.js"),c=require("../reproj/Triangulation.js"),d=_(c);function _(e){return e&&e.__esModule?e:{default:e}}var f=function(t){function i(i,s,o,a,n,c,_,f,g,p,T){t.call(this,n,r.default.IDLE),this.renderEdges_=void 0!==T&&T,this.pixelRatio_=_,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=s,this.targetTileGrid_=a,this.wrappedTileCoord_=c||n,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var E=a.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent(),y=this.sourceTileGrid_.getExtent(),R=v?(0,u.getIntersection)(E,v):E;if(0!==(0,u.getArea)(R)){var x=i.getExtent();x&&(y=y?(0,u.getIntersection)(y,x):x);var j=a.getResolution(this.wrappedTileCoord_[0]),L=(0,u.getCenter)(R),m=(0,h.calculateSourceResolution)(i,o,L,j);if(!isFinite(m)||m<=0)this.state=r.default.EMPTY;else{var D=void 0!==p?p:e.ERROR_THRESHOLD;if(this.triangulation_=new d.default(i,o,R,y,m*D),0!==this.triangulation_.getTriangles().length){this.sourceZ_=s.getZForResolution(m);var G=this.triangulation_.calculateSourceExtent();if(y&&(i.canWrapX()?(G[1]=(0,l.clamp)(G[1],y[1],y[3]),G[3]=(0,l.clamp)(G[3],y[1],y[3])):G=(0,u.getIntersection)(G,y)),(0,u.getArea)(G)){for(var I=s.getTileRangeForExtentAndZ(G,this.sourceZ_),O=I.minX;O<=I.maxX;O++)for(var S=I.minY;S<=I.maxY;S++){var C=g(this.sourceZ_,O,S,_);C&&this.sourceTiles_.push(C)}0===this.sourceTiles_.length&&(this.state=r.default.EMPTY)}else this.state=r.default.EMPTY}else this.state=r.default.EMPTY}}else this.state=r.default.EMPTY}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){this.state==r.default.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},i.prototype.getImage=function(){return this.canvas_},i.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(t,i,s){t&&t.getState()==r.default.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=r.default.ERROR;else{var t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),s="number"==typeof i?i:i[0],o="number"==typeof i?i:i[1],a=this.targetTileGrid_.getResolution(t),n=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,h.render)(s,o,this.pixelRatio_,n,this.sourceTileGrid_.getExtent(),a,u,this.triangulation_,e,this.gutter_,this.renderEdges_),this.state=r.default.LOADED}this.changed()},i.prototype.load=function(){if(this.state==r.default.IDLE){this.state=r.default.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,i,s){var a=t.getState();if(a==r.default.IDLE||a==r.default.LOADING){e++;var u=(0,o.listen)(t,n.default.CHANGE,function(i){var s=t.getState();s!=r.default.LOADED&&s!=r.default.ERROR&&s!=r.default.EMPTY||((0,o.unlistenByKey)(u),0===--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(u)}}.bind(this)),this.sourceTiles_.forEach(function(e,t,i){e.getState()==r.default.IDLE&&e.load()}),0===e&&setTimeout(this.reproject_.bind(this),0)}},i.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(o.unlistenByKey),this.sourcesListenerKeys_=null},i}(i.default);exports.default=f;
},{"./common.js":"7f+F","../Tile.js":"IWZI","../TileState.js":"Xz9x","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../math.js":"B96G","../reproj.js":"U255","../reproj/Triangulation.js":"BiRY"}],"p1v/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromTemplate=n,exports.createFromTemplates=o,exports.createFromTileUrlFunctions=a,exports.nullTileUrlFunction=u,exports.expandUrl=i;var r=require("./asserts.js"),e=require("./math.js"),t=require("./tilecoord.js");function n(e,t){var n=/\{z\}/g,o=/\{x\}/g,a=/\{y\}/g,u=/\{-y\}/g;return function(i,c,l){return i?e.replace(n,i[0].toString()).replace(o,i[1].toString()).replace(a,function(){return(-i[2]-1).toString()}).replace(u,function(){var e=i[0],n=t.getFullTileRange(e);return(0,r.assert)(n,55),(n.getHeight()+i[2]).toString()}):void 0}}function o(r,e){for(var t=r.length,o=new Array(t),u=0;u<t;++u)o[u]=n(r[u],e);return a(o)}function a(r){return 1===r.length?r[0]:function(n,o,a){if(n){var u=(0,t.hash)(n),i=(0,e.modulo)(u,r.length);return r[i](n,o,a)}}}function u(r,e,t){}function i(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n,o=t[1].charCodeAt(0),a=t[2].charCodeAt(0);for(n=o;n<=a;++n)e.push(r.replace(t[0],String.fromCharCode(n)));return e}if(t=t=/\{(\d+)-(\d+)\}/.exec(r)){for(var u=parseInt(t[2],10),i=parseInt(t[1],10);i<=u;i++)e.push(r.replace(t[0],i.toString()));return e}return e.push(r),e}
},{"./asserts.js":"fLG6","./math.js":"B96G","./tilecoord.js":"2faT"}],"5dp/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./common.js"),i=require("../asserts.js"),e=require("../TileRange.js"),o=u(e),r=require("../array.js"),n=require("../extent.js"),s=require("../math.js"),l=require("../size.js"),h=require("../tilecoord.js");function u(t){return t&&t.__esModule?t:{default:t}}var a=[0,0,0],g=function(e){var s;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,(0,i.assert)((0,r.isSorted)(this.resolutions_,function(t,i){return i-t},!0),17),!e.origins)for(var l=0,h=this.resolutions_.length-1;l<h;++l)if(s){if(this.resolutions_[l]/this.resolutions_[l+1]!==s){s=void 0;break}}else s=this.resolutions_[l]/this.resolutions_[l+1];this.zoomFactor_=s,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,(0,i.assert)(this.origins_.length==this.resolutions_.length,20));var u=e.extent;void 0===u||this.origin_||this.origins_||(this.origin_=(0,n.getTopLeft)(u)),(0,i.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,(0,i.assert)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:t.DEFAULT_TILE_SIZE,(0,i.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==u?u:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(t,i){return new o.default(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):u&&this.calculateTileRanges_(u)};g.prototype.forEachTileCoord=function(t,i,e){for(var o=this.getTileRangeForExtentAndZ(t,i),r=o.minX,n=o.maxX;r<=n;++r)for(var s=o.minY,l=o.maxY;s<=l;++s)e([i,r,s])},g.prototype.forEachTileCoordParentTileRange=function(t,i,o,r,n){var s,l,h,u=null,a=t[0]-1;for(2===this.zoomFactor_?(l=t[1],h=t[2]):u=this.getTileCoordExtent(t,n);a>=this.minZoom;){if(2===this.zoomFactor_?(l=Math.floor(l/2),h=Math.floor(h/2),s=(0,e.createOrUpdate)(l,l,h,h,r)):s=this.getTileRangeForExtentAndZ(u,a,r),i.call(o,a,s))return!0;--a}return!1},g.prototype.getExtent=function(){return this.extent_},g.prototype.getMaxZoom=function(){return this.maxZoom},g.prototype.getMinZoom=function(){return this.minZoom},g.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},g.prototype.getResolution=function(t){return this.resolutions_[t]},g.prototype.getResolutions=function(){return this.resolutions_},g.prototype.getTileCoordChildTileRange=function(t,i,o){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],n=2*t[2];return(0,e.createOrUpdate)(r,r+1,n,n+1,i)}var s=this.getTileCoordExtent(t,o);return this.getTileRangeForExtentAndZ(s,t[0]+1,i)}return null},g.prototype.getTileRangeExtent=function(t,i,e){var o=this.getOrigin(t),r=this.getResolution(t),s=(0,l.toSize)(this.getTileSize(t),this.tmpSize_),h=o[0]+i.minX*s[0]*r,u=o[0]+(i.maxX+1)*s[0]*r,a=o[1]+i.minY*s[1]*r,g=o[1]+(i.maxY+1)*s[1]*r;return(0,n.createOrUpdate)(h,a,u,g,e)},g.prototype.getTileRangeForExtentAndZ=function(t,i,o){var r=a;this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,r);var n=r[1],s=r[2];return this.getTileCoordForXYAndZ_(t[2],t[3],i,!0,r),(0,e.createOrUpdate)(n,r[1],s,r[2],o)},g.prototype.getTileCoordCenter=function(t){var i=this.getOrigin(t[0]),e=this.getResolution(t[0]),o=(0,l.toSize)(this.getTileSize(t[0]),this.tmpSize_);return[i[0]+(t[1]+.5)*o[0]*e,i[1]+(t[2]+.5)*o[1]*e]},g.prototype.getTileCoordExtent=function(t,i){var e=this.getOrigin(t[0]),o=this.getResolution(t[0]),r=(0,l.toSize)(this.getTileSize(t[0]),this.tmpSize_),s=e[0]+t[1]*r[0]*o,h=e[1]+t[2]*r[1]*o,u=s+r[0]*o,a=h+r[1]*o;return(0,n.createOrUpdate)(s,h,u,a,i)},g.prototype.getTileCoordForCoordAndResolution=function(t,i,e){return this.getTileCoordForXYAndResolution_(t[0],t[1],i,!1,e)},g.prototype.getTileCoordForXYAndResolution_=function(t,i,e,o,r){var n=this.getZForResolution(e),s=e/this.getResolution(n),u=this.getOrigin(n),a=(0,l.toSize)(this.getTileSize(n),this.tmpSize_),g=o?.5:0,_=o?0:.5,p=Math.floor((t-u[0])/e+g),f=Math.floor((i-u[1])/e+_),d=s*p/a[0],c=s*f/a[1];return o?(d=Math.ceil(d)-1,c=Math.ceil(c)-1):(d=Math.floor(d),c=Math.floor(c)),(0,h.createOrUpdate)(n,d,c,r)},g.prototype.getTileCoordForXYAndZ_=function(t,i,e,o,r){var n=this.getOrigin(e),s=this.getResolution(e),u=(0,l.toSize)(this.getTileSize(e),this.tmpSize_),a=o?.5:0,g=o?0:.5,_=Math.floor((t-n[0])/s+a),p=Math.floor((i-n[1])/s+g),f=_/u[0],d=p/u[1];return o?(f=Math.ceil(f)-1,d=Math.ceil(d)-1):(f=Math.floor(f),d=Math.floor(d)),(0,h.createOrUpdate)(e,f,d,r)},g.prototype.getTileCoordForCoordAndZ=function(t,i,e){return this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,e)},g.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},g.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},g.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},g.prototype.getZForResolution=function(t,i){var e=(0,r.linearFindNearest)(this.resolutions_,t,i||0);return(0,s.clamp)(e,this.minZoom,this.maxZoom)},g.prototype.calculateTileRanges_=function(t){for(var i=this.resolutions_.length,e=new Array(i),o=this.minZoom;o<i;++o)e[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=e},exports.default=g;
},{"./common.js":"mOEX","../asserts.js":"fLG6","../TileRange.js":"346s","../array.js":"luEr","../extent.js":"QDir","../math.js":"B96G","../size.js":"TAHd","../tilecoord.js":"2faT"}],"ExRx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getForProjection=x,exports.wrapX=f,exports.createForExtent=g,exports.createXYZ=j,exports.createForProjection=E,exports.extentFromProjection=p;var e=require("./tilegrid/common.js"),t=require("./size.js"),r=require("./extent.js"),o=require("./extent/Corner.js"),i=c(o),n=require("./obj.js"),u=require("./proj.js"),a=require("./proj/Units.js"),s=c(a),d=require("./tilegrid/TileGrid.js"),l=c(d);function c(e){return e&&e.__esModule?e:{default:e}}function x(e){var t=e.getDefaultTileGrid();return t||(t=E(e),e.setDefaultTileGrid(t)),t}function f(e,t,o){var i=t[0],n=e.getTileCoordCenter(t),u=p(o);if((0,r.containsCoordinate)(u,n))return t;var a=(0,r.getWidth)(u),s=Math.ceil((u[0]-n[0])/a);return n[0]+=a*s,e.getTileCoordForCoordAndZ(n,i)}function g(e,t,o,n){var u=void 0!==n?n:i.default.TOP_LEFT,a=v(e,t,o);return new l.default({extent:e,origin:(0,r.getCorner)(e,u),resolutions:a,tileSize:o})}function j(e){var t={};return(0,n.assign)(t,void 0!==e?e:{}),void 0===t.extent&&(t.extent=(0,u.get)("EPSG:3857").getExtent()),t.resolutions=v(t.extent,t.maxZoom,t.tileSize),delete t.maxZoom,new l.default(t)}function v(o,i,n){for(var u=void 0!==i?i:e.DEFAULT_MAX_ZOOM,a=(0,r.getHeight)(o),s=(0,r.getWidth)(o),d=(0,t.toSize)(void 0!==n?n:e.DEFAULT_TILE_SIZE),l=Math.max(s/d[0],a/d[1]),c=u+1,x=new Array(c),f=0;f<c;++f)x[f]=l/Math.pow(2,f);return x}function E(e,t,r,o){return g(p(e),t,r,o)}function p(e){var t=(e=(0,u.get)(e)).getExtent();if(!t){var o=180*u.METERS_PER_UNIT[s.default.DEGREES]/e.getMetersPerUnit();t=(0,r.createOrUpdate)(-o,-o,o,o)}return t}
},{"./tilegrid/common.js":"mOEX","./size.js":"TAHd","./extent.js":"QDir","./extent/Corner.js":"urGY","./obj.js":"mH6q","./proj.js":"Diht","./proj/Units.js":"yZx6","./tilegrid/TileGrid.js":"5dp/"}],"JECm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TileSourceEvent=void 0;var t=require("../functions.js"),e=require("../TileCache.js"),i=f(e),r=require("../TileState.js"),o=f(r),n=require("../events/Event.js"),u=f(n),s=require("../proj.js"),c=require("../size.js"),l=require("../source/Source.js"),p=f(l),a=require("../tilecoord.js"),h=require("../tilegrid.js");function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(e){t.call(this,{attributions:e.attributions,extent:e.extent,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new i.default(e.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,r){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var u,s,c,l=!0,p=i.minX;p<=i.maxX;++p)for(var h=i.minY;h<=i.maxY;++h)s=(0,a.getKeyZXY)(e,p,h),c=!1,n.containsKey(s)&&(c=(u=n.get(s)).getState()===o.default.LOADED)&&(c=!1!==r(u)),c||(l=!1);return l},e.prototype.getGutter=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,r,o){},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:(0,h.getForProjection)(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!(0,s.equivalent)(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),n=(0,c.toSize)(r.getTileSize(t),this.tmpSize);return 1==o?n:(0,c.scale)(n,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=(0,h.wrapX)(r,t,i)),(0,a.withinExtentAndZ)(t,r)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e}(p.default);d.prototype.useTile=t.UNDEFINED;var y=exports.TileSourceEvent=function(t){function e(e,i){t.call(this,e),this.tile=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(u.default);exports.default=d;
},{"../functions.js":"RgA2","../TileCache.js":"YFDe","../TileState.js":"Xz9x","../events/Event.js":"fKNg","../proj.js":"Diht","../size.js":"TAHd","../source/Source.js":"H38a","../tilecoord.js":"2faT","../tilegrid.js":"ExRx"}],"5KXh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};
},{}],"uv+9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util.js"),e=require("../TileState.js"),i=c(e),n=require("../tileurlfunction.js"),l=require("../source/Tile.js"),r=c(l),o=require("../source/TileEventType.js"),s=c(o),u=require("../tilecoord.js");function c(t){return t&&t.__esModule?t:{default:t}}var a=function(e){function r(t){e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):n.nullTileUrlFunction,this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),t.tileUrlFunction&&this.setTileUrlFunction(t.tileUrlFunction),this.tileLoadingKeys_={}}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},r.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},r.prototype.getUrls=function(){return this.urls},r.prototype.handleTileChange=function(e){var n,r=e.target,o=(0,t.getUid)(r),u=r.getState();u==i.default.LOADING?(this.tileLoadingKeys_[o]=!0,n=s.default.TILELOADSTART):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],n=u==i.default.ERROR?s.default.TILELOADERROR:u==i.default.LOADED||u==i.default.ABORT?s.default.TILELOADEND:void 0),null!=n&&this.dispatchEvent(new l.TileSourceEvent(n,r))},r.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},r.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},r.prototype.setUrl=function(t){var e=this.urls=(0,n.expandUrl)(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):(0,n.createFromTemplates)(e,this.tileGrid),t)},r.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):(0,n.createFromTemplates)(t,this.tileGrid),e)},r.prototype.useTile=function(t,e,i){var n=(0,u.getKeyZXY)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},r}(r.default);a.prototype.fixedTileUrlFunction,exports.default=a;
},{"../util.js":"KniQ","../TileState.js":"Xz9x","../tileurlfunction.js":"p1v/","../source/Tile.js":"JECm","../source/TileEventType.js":"5KXh","../tilecoord.js":"2faT"}],"6udA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../reproj/common.js"),t=require("../util.js"),i=require("../ImageTile.js"),r=C(i),o=require("../TileCache.js"),n=C(o),l=require("../TileState.js"),s=C(l),c=require("../events.js"),a=require("../events/EventType.js"),h=C(a),u=require("../proj.js"),p=require("../reproj/Tile.js"),E=C(p),d=require("../source/UrlTile.js"),j=C(d),g=require("../tilecoord.js"),T=require("../tilegrid.js");function C(e){return e&&e.__esModule?e:{default:e}}var f=function(i){function o(e){i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:P,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:r.default,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return i&&(o.__proto__=i),o.prototype=Object.create(i&&i.prototype),o.prototype.constructor=o,o.prototype.canExpireCache=function(){if(!e.ENABLE_RASTER_REPROJECTION)return i.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},o.prototype.expireCache=function(t,r){if(e.ENABLE_RASTER_REPROJECTION){var o=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==o?r:{}),this.tileCacheForProjection){var l=this.tileCacheForProjection[n];l.expireCache(l==o?r:{})}}else i.prototype.expireCache.call(this,t,r)},o.prototype.getGutter=function(t){return e.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!(0,u.equivalent)(this.getProjection(),t)?0:this.getGutterInternal()},o.prototype.getGutterInternal=function(){return 0},o.prototype.getOpaque=function(t){return!(e.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!(0,u.equivalent)(this.getProjection(),t))&&i.prototype.getOpaque.call(this,t)},o.prototype.getTileGridForProjection=function(r){if(!e.ENABLE_RASTER_REPROJECTION)return i.prototype.getTileGridForProjection.call(this,r);var o=this.getProjection();if(!this.tileGrid||o&&!(0,u.equivalent)(o,r)){var n=(0,t.getUid)(r).toString();return n in this.tileGridForProjection||(this.tileGridForProjection[n]=(0,T.getForProjection)(r)),this.tileGridForProjection[n]}return this.tileGrid},o.prototype.getTileCacheForProjection=function(r){if(!e.ENABLE_RASTER_REPROJECTION)return i.prototype.getTileCacheForProjection.call(this,r);var o=this.getProjection();if(!o||(0,u.equivalent)(o,r))return this.tileCache;var l=(0,t.getUid)(r).toString();return l in this.tileCacheForProjection||(this.tileCacheForProjection[l]=new n.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[l]},o.prototype.createTile_=function(e,t,i,r,o,n){var l=[e,t,i],a=this.getTileCoordForTileUrlFunction(l,o),u=a?this.tileUrlFunction(a,r,o):void 0,p=new this.tileClass(l,void 0!==u?s.default.IDLE:s.default.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=n,(0,c.listen)(p,h.default.CHANGE,this.handleTileChange,this),p},o.prototype.getTile=function(t,i,r,o,n){var l=this.getProjection();if(e.ENABLE_RASTER_REPROJECTION&&l&&n&&!(0,u.equivalent)(l,n)){var s,c=this.getTileCacheForProjection(n),a=[t,i,r],h=(0,g.getKey)(a);c.containsKey(h)&&(s=c.get(h));var p=this.getKey();if(s&&s.key==p)return s;var d=this.getTileGridForProjection(l),j=this.getTileGridForProjection(n),T=this.getTileCoordForTileUrlFunction(a,n),C=new E.default(l,d,n,j,a,T,this.getTilePixelRatio(o),this.getGutterInternal(),function(e,t,i,r){return this.getTileInternal(e,t,i,r,l)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return C.key=p,s?(C.interimTile=s,C.refreshInterimChain(),c.replace(h,C)):c.set(h,C),C}return this.getTileInternal(t,i,r,o,l||n)},o.prototype.getTileInternal=function(e,t,i,r,o){var n=null,l=(0,g.getKeyZXY)(e,t,i),c=this.getKey();if(this.tileCache.containsKey(l)){if((n=this.tileCache.get(l)).key!=c){var a=n;n=this.createTile_(e,t,i,r,o,c),a.getState()==s.default.IDLE?n.interimTile=a.interimTile:n.interimTile=a,n.refreshInterimChain(),this.tileCache.replace(l,n)}}else n=this.createTile_(e,t,i,r,o,c),this.tileCache.set(l,n);return n},o.prototype.setRenderReprojectionEdges=function(t){if(e.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=t){for(var i in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}},o.prototype.setTileGridForProjection=function(i,r){if(e.ENABLE_RASTER_REPROJECTION){var o=(0,u.get)(i);if(o){var n=(0,t.getUid)(o).toString();n in this.tileGridForProjection||(this.tileGridForProjection[n]=r)}}},o}(j.default);function P(e,t){e.getImage().src=t}exports.default=f;
},{"../reproj/common.js":"7f+F","../util.js":"KniQ","../ImageTile.js":"T/Os","../TileCache.js":"YFDe","../TileState.js":"Xz9x","../events.js":"55Uq","../events/EventType.js":"C8cu","../proj.js":"Diht","../reproj/Tile.js":"WlOd","../source/UrlTile.js":"uv+9","../tilecoord.js":"2faT","../tilegrid.js":"ExRx"}],"knlU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../source/TileImage.js"),t=r(e),o=require("../tilegrid.js");function r(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(t){var r=t||{},i=void 0!==r.projection?r.projection:"EPSG:3857",n=void 0!==r.tileGrid?r.tileGrid:(0,o.createXYZ)({extent:(0,o.extentFromProjection)(i),maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,opaque:r.opaque,projection:i,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(t.default);exports.default=i;
},{"../source/TileImage.js":"6udA","../tilegrid.js":"ExRx"}],"Rmo4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ATTRIBUTION=void 0;var o=require("../source/XYZ.js"),r=t(o);function t(o){return o&&o.__esModule?o:{default:o}}var e=exports.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',i=function(o){function r(r){var t,i=r||{};t=void 0!==i.attributions?i.attributions:[e];var a=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",p=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";o.call(this,{attributions:t,cacheSize:i.cacheSize,crossOrigin:a,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:p,wrapX:i.wrapX})}return o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r,r}(r.default);exports.default=i;
},{"../source/XYZ.js":"knlU"}],"Rlas":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={FRACTION:"fraction",PIXELS:"pixels"};
},{}],"XCOy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=c;var t=require("../dom.js"),e=require("../events.js"),i=require("../events/EventTarget.js"),a=_(i),s=require("../events/EventType.js"),n=_(s),h=require("../ImageState.js"),r=_(h),o=require("../style/IconImageCache.js");function _(t){return t&&t.__esModule?t:{default:t}}var g=function(i){function a(t,e,a,s,n,h){i.call(this),this.hitDetectionImage_=null,this.image_=t||new Image,null!==s&&(this.image_.crossOrigin=s),this.canvas_=h?document.createElement("CANVAS"):null,this.color_=h,this.imageListenerKeys_=null,this.imageState_=n,this.size_=a,this.src_=e,this.tainting_=!1,this.imageState_==r.default.LOADED&&this.determineTainting_()}return i&&(a.__proto__=i),a.prototype=Object.create(i&&i.prototype),a.prototype.constructor=a,a.prototype.determineTainting_=function(){var e=(0,t.createCanvasContext2D)(1,1);try{e.drawImage(this.image_,0,0),e.getImageData(0,0,1,1)}catch(t){this.tainting_=!0}},a.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(n.default.CHANGE)},a.prototype.handleImageError_=function(){this.imageState_=r.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},a.prototype.handleImageLoad_=function(){this.imageState_=r.default.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},a.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},a.prototype.getImageState=function(){return this.imageState_},a.prototype.getHitDetectionImage=function(e){if(!this.hitDetectionImage_)if(this.tainting_){var i=this.size_[0],a=this.size_[1],s=(0,t.createCanvasContext2D)(i,a);s.fillRect(0,0,i,a),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},a.prototype.getSize=function(){return this.size_},a.prototype.getSrc=function(){return this.src_},a.prototype.load=function(){if(this.imageState_==r.default.IDLE){this.imageState_=r.default.LOADING,this.imageListenerKeys_=[(0,e.listenOnce)(this.image_,n.default.ERROR,this.handleImageError_,this),(0,e.listenOnce)(this.image_,n.default.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},a.prototype.replaceColor_=function(){if(!this.tainting_&&null!==this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,a=this.color_[0]/255,s=this.color_[1]/255,n=this.color_[2]/255,h=0,r=i.length;h<r;h+=4)i[h]*=a,i[h+1]*=s,i[h+2]*=n;t.putImageData(e,0,0)}},a.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(e.unlistenByKey),this.imageListenerKeys_=null},a}(a.default);function c(t,e,i,a,s,n){var h=o.shared.get(e,a,n);return h||(h=new g(t,e,i,a,s,n),o.shared.set(e,a,n,h)),h}exports.default=g;
},{"../dom.js":"Xno5","../events.js":"55Uq","../events/EventTarget.js":"PAZw","../events/EventType.js":"C8cu","../ImageState.js":"u3k+","../style/IconImageCache.js":"6V0o"}],"z2xv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util.js"),i=require("../ImageState.js"),e=d(i),o=require("../asserts.js"),r=require("../color.js"),n=require("../events.js"),s=require("../events/EventType.js"),a=d(s),h=require("../style/IconAnchorUnits.js"),c=d(h),l=require("../style/IconImage.js"),g=require("../style/IconOrigin.js"),u=d(g),_=require("../style/Image.js"),f=d(_);function d(t){return t&&t.__esModule?t:{default:t}}var O=function(i){function s(n){var s=n||{},a=void 0!==s.opacity?s.opacity:1,h=void 0!==s.rotation?s.rotation:0,g=void 0!==s.scale?s.scale:1,_=void 0!==s.rotateWithView&&s.rotateWithView,f=void 0===s.snapToPixel||s.snapToPixel;i.call(this,{opacity:a,rotation:h,scale:g,snapToPixel:f,rotateWithView:_}),this.anchor_=void 0!==s.anchor?s.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==s.anchorOrigin?s.anchorOrigin:u.default.TOP_LEFT,this.anchorXUnits_=void 0!==s.anchorXUnits?s.anchorXUnits:c.default.FRACTION,this.anchorYUnits_=void 0!==s.anchorYUnits?s.anchorYUnits:c.default.FRACTION,this.crossOrigin_=void 0!==s.crossOrigin?s.crossOrigin:null;var d=void 0!==s.img?s.img:null,O=void 0!==s.imgSize?s.imgSize:null,p=s.src;(0,o.assert)(!(void 0!==p&&d),4),(0,o.assert)(!d||d&&O,5),void 0!==p&&0!==p.length||!d||(p=d.src||(0,t.getUid)(d).toString()),(0,o.assert)(void 0!==p&&p.length>0,6);var T=void 0!==s.src?e.default.IDLE:e.default.LOADED;this.color_=void 0!==s.color?(0,r.asArray)(s.color):null,this.iconImage_=(0,l.get)(d,p,O,this.crossOrigin_,T,this.color_),this.offset_=void 0!==s.offset?s.offset:[0,0],this.offsetOrigin_=void 0!==s.offsetOrigin?s.offsetOrigin:u.default.TOP_LEFT,this.origin_=null,this.size_=void 0!==s.size?s.size:null}return i&&(s.__proto__=i),s.prototype=Object.create(i&&i.prototype),s.prototype.constructor=s,s.prototype.clone=function(){return new s({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},s.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,i=this.getSize();if(this.anchorXUnits_==c.default.FRACTION||this.anchorYUnits_==c.default.FRACTION){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_==c.default.FRACTION&&(t[0]*=i[0]),this.anchorYUnits_==c.default.FRACTION&&(t[1]*=i[1])}if(this.anchorOrigin_!=u.default.TOP_LEFT){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=u.default.TOP_RIGHT&&this.anchorOrigin_!=u.default.BOTTOM_RIGHT||(t[0]=-t[0]+i[0]),this.anchorOrigin_!=u.default.BOTTOM_LEFT&&this.anchorOrigin_!=u.default.BOTTOM_RIGHT||(t[1]=-t[1]+i[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},s.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},s.prototype.getColor=function(){return this.color_},s.prototype.getImage=function(t){return this.iconImage_.getImage(t)},s.prototype.getImageSize=function(){return this.iconImage_.getSize()},s.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},s.prototype.getImageState=function(){return this.iconImage_.getImageState()},s.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},s.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=u.default.TOP_LEFT){var i=this.getSize(),e=this.iconImage_.getSize();if(!i||!e)return null;t=t.slice(),this.offsetOrigin_!=u.default.TOP_RIGHT&&this.offsetOrigin_!=u.default.BOTTOM_RIGHT||(t[0]=e[0]-i[0]-t[0]),this.offsetOrigin_!=u.default.BOTTOM_LEFT&&this.offsetOrigin_!=u.default.BOTTOM_RIGHT||(t[1]=e[1]-i[1]-t[1])}return this.origin_=t,this.origin_},s.prototype.getSrc=function(){return this.iconImage_.getSrc()},s.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},s.prototype.listenImageChange=function(t,i){return(0,n.listen)(this.iconImage_,a.default.CHANGE,t,i)},s.prototype.load=function(){this.iconImage_.load()},s.prototype.unlistenImageChange=function(t,i){(0,n.unlisten)(this.iconImage_,a.default.CHANGE,t,i)},s}(f.default);exports.default=O;
},{"../util.js":"KniQ","../ImageState.js":"u3k+","../asserts.js":"fLG6","../color.js":"eucy","../events.js":"55Uq","../events/EventType.js":"C8cu","../style/IconAnchorUnits.js":"Rlas","../style/IconImage.js":"XCOy","../style/IconOrigin.js":"urGY","../style/Image.js":"S8ow"}],"I4BI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../events.js"),e=require("../Object.js"),i=require("../dom.js"),r=require("../layer/Vector.js"),a=g(r),n=require("../math.js"),s=require("../obj.js"),h=require("../render/EventType.js"),o=g(h),d=require("../style/Icon.js"),l=g(d),u=require("../style/Style.js"),c=g(u);function g(t){return t&&t.__esModule?t:{default:t}}var f={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},p=["#00f","#0ff","#0f0","#ff0","#f00"],y=function(r){function a(i){var a=i||{},h=(0,s.assign)({},a);delete h.gradient,delete h.radius,delete h.blur,delete h.shadow,delete h.weight,r.call(this,h),this.gradient_=null,this.shadow_=void 0!==a.shadow?a.shadow:250,this.circleImage_=void 0,this.styleCache_=null,(0,t.listen)(this,(0,e.getChangeEventType)(f.GRADIENT),this.handleGradientChanged_,this),this.setGradient(a.gradient?a.gradient:p),this.setBlur(void 0!==a.blur?a.blur:15),this.setRadius(void 0!==a.radius?a.radius:8),(0,t.listen)(this,(0,e.getChangeEventType)(f.BLUR),this.handleStyleChanged_,this),(0,t.listen)(this,(0,e.getChangeEventType)(f.RADIUS),this.handleStyleChanged_,this),this.handleStyleChanged_();var d,u=a.weight?a.weight:"weight";d="string"==typeof u?function(t){return t.get(u)}:u,this.setStyle(function(t,e){var i=d(t),r=void 0!==i?(0,n.clamp)(i,0,1):1,a=255*r|0,s=this.styleCache_[a];return s||(s=[new c.default({image:new l.default({opacity:r,src:this.circleImage_})})],this.styleCache_[a]=s),s}.bind(this)),this.setRenderOrder(null),(0,t.listen)(this,o.default.RENDER,this.handleRender_,this)}return r&&(a.__proto__=r),a.prototype=Object.create(r&&r.prototype),a.prototype.constructor=a,a.prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),r=t+e+1,a=2*r,n=(0,i.createCanvasContext2D)(a,a);n.shadowOffsetX=n.shadowOffsetY=this.shadow_,n.shadowBlur=e,n.shadowColor="#000",n.beginPath();var s=r-this.shadow_;return n.arc(s,s,t,0,2*Math.PI,!0),n.fill(),n.canvas.toDataURL()},a.prototype.getBlur=function(){return this.get(f.BLUR)},a.prototype.getGradient=function(){return this.get(f.GRADIENT)},a.prototype.getRadius=function(){return this.get(f.RADIUS)},a.prototype.handleGradientChanged_=function(){this.gradient_=_(this.getGradient())},a.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},a.prototype.handleRender_=function(t){for(var e=t.context,i=e.canvas,r=e.getImageData(0,0,i.width,i.height),a=r.data,n=0,s=a.length;n<s;n+=4){var h=4*a[n+3];h&&(a[n]=this.gradient_[h],a[n+1]=this.gradient_[h+1],a[n+2]=this.gradient_[h+2])}e.putImageData(r,0,0)},a.prototype.setBlur=function(t){this.set(f.BLUR,t)},a.prototype.setGradient=function(t){this.set(f.GRADIENT,t)},a.prototype.setRadius=function(t){this.set(f.RADIUS,t)},a}(a.default);function _(t){for(var e=(0,i.createCanvasContext2D)(1,256),r=e.createLinearGradient(0,0,1,256),a=1/(t.length-1),n=0,s=t.length;n<s;++n)r.addColorStop(n*a,t[n]);return e.fillStyle=r,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}exports.default=y;
},{"../events.js":"55Uq","../Object.js":"PhPh","../dom.js":"Xno5","../layer/Vector.js":"dflx","../math.js":"B96G","../obj.js":"mH6q","../render/EventType.js":"z39m","../style/Icon.js":"z2xv","../style/Style.js":"1he4"}],"6zOJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderType=void 0;var e=require("../LayerType.js"),r=a(e),t=require("../asserts.js"),o=require("../layer/TileProperty.js"),s=a(o),i=require("../layer/Vector.js"),u=a(i),l=require("../layer/VectorTileRenderType.js"),n=a(l),d=require("../obj.js");function a(e){return e&&e.__esModule?e:{default:e}}var p=exports.RenderType={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},E=function(e){function o(o){var s=o||{},i=s.renderMode||n.default.HYBRID;(0,t.assert)(null==i||i==n.default.IMAGE||i==n.default.HYBRID||i==n.default.VECTOR,28),s.declutter&&i==n.default.IMAGE&&(i=n.default.HYBRID),s.renderMode=i;var u=(0,d.assign)({},s);delete u.preload,delete u.useInterimTilesOnError,e.call(this,u),this.setPreload(s.preload?s.preload:0),this.setUseInterimTilesOnError(void 0===s.useInterimTilesOnError||s.useInterimTilesOnError),this.type=r.default.VECTOR_TILE}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.getPreload=function(){return this.get(s.default.PRELOAD)},o.prototype.getUseInterimTilesOnError=function(){return this.get(s.default.USE_INTERIM_TILES_ON_ERROR)},o.prototype.setPreload=function(e){this.set(s.default.PRELOAD,e)},o.prototype.setUseInterimTilesOnError=function(e){this.set(s.default.USE_INTERIM_TILES_ON_ERROR,e)},o}(u.default);E.prototype.getSource,exports.default=E;
},{"../LayerType.js":"8+bQ","../asserts.js":"fLG6","../layer/TileProperty.js":"M5pz","../layer/Vector.js":"dflx","../layer/VectorTileRenderType.js":"Q2C4","../obj.js":"mH6q"}],"ZVaS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./layer/Group.js");Object.defineProperty(exports,"Group",{enumerable:!0,get:function(){return l(e).default}});var r=require("./layer/Heatmap.js");Object.defineProperty(exports,"Heatmap",{enumerable:!0,get:function(){return l(r).default}});var t=require("./layer/Image.js");Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return l(t).default}});var u=require("./layer/Layer.js");Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return l(u).default}});var n=require("./layer/Tile.js");Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return l(n).default}});var a=require("./layer/Vector.js");Object.defineProperty(exports,"Vector",{enumerable:!0,get:function(){return l(a).default}});var o=require("./layer/VectorTile.js");function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return l(o).default}});
},{"./layer/Group.js":"q0nK","./layer/Heatmap.js":"I4BI","./layer/Image.js":"2KHB","./layer/Layer.js":"GCgv","./layer/Tile.js":"BU+E","./layer/Vector.js":"dflx","./layer/VectorTile.js":"6zOJ"}],"SU9K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jsonp=t;var e=require("./util.js");function t(t,n,o,i){var c=document.createElement("script"),r="olc_"+(0,e.getUid)(n);function a(){delete window[r],c.parentNode.removeChild(c)}c.async=!0,c.src=t+(-1==t.indexOf("?")?"?":"&")+(i||"callback")+"="+r;var d=setTimeout(function(){a(),o&&o()},1e4);window[r]=function(e){clearTimeout(d),a(),n(e)},document.getElementsByTagName("head")[0].appendChild(c)}
},{"./util.js":"KniQ"}],"K+sj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../tileurlfunction.js"),t=require("../extent.js"),r=require("../net.js"),i=require("../proj.js"),o=require("../source/State.js"),a=h(o),s=require("../source/TileImage.js"),n=h(s),u=require("../tilecoord.js"),c=require("../tilegrid.js");function h(e){return e&&e.__esModule?e:{default:e}}var m='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>',l=function(o){function s(e){var t=void 0!==e.hidpi&&e.hidpi;o.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:(0,i.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:a.default.LOADING,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.hidpi_=t,this.culture_=void 0!==e.culture?e.culture:"en-us",this.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet;var s="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;(0,r.jsonp)(s,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")}return o&&(s.__proto__=o),s.prototype=Object.create(o&&o.prototype),s.prototype.constructor=s,s.prototype.getApiKey=function(){return this.apiKey_},s.prototype.getImagerySet=function(){return this.imagerySet_},s.prototype.handleImageryMetadataResponse=function(r){if(200==r.statusCode&&"OK"==r.statusDescription&&"ValidCredentials"==r.authenticationResultCode&&1==r.resourceSets.length&&1==r.resourceSets[0].resources.length){var o=r.resourceSets[0].resources[0],s=-1==this.maxZoom_?o.zoomMax:this.maxZoom_,n=this.getProjection(),h=(0,c.extentFromProjection)(n),l=o.imageWidth==o.imageHeight?o.imageWidth:[o.imageWidth,o.imageHeight],p=(0,c.createXYZ)({extent:h,minZoom:o.zoomMin,maxZoom:s,tileSize:l/(this.hidpi_?2:1)});this.tileGrid=p;var d=this.culture_,g=this.hidpi_;if(this.tileUrlFunction=(0,e.createFromTileUrlFunctions)(o.imageUrlSubdomains.map(function(e){var t=[0,0,0],r=o.imageUrl.replace("{subdomain}",e).replace("{culture}",d);return function(e,i,o){if(e){(0,u.createOrUpdate)(e[0],e[1],-e[2]-1,t);var a=r;return g&&(a+="&dpi=d1&device=mobile"),a.replace("{quadkey}",(0,u.quadKey)(t))}}})),o.imageryProviders){var f=(0,i.getTransformFromProjections)((0,i.get)("EPSG:4326"),this.getProjection());this.setAttributions(function(e){var r=[],i=e.viewState.zoom;return o.imageryProviders.map(function(o){for(var a=!1,s=o.coverageAreas,n=0,u=s.length;n<u;++n){var c=s[n];if(i>=c.zoomMin&&i<=c.zoomMax){var h=c.bbox,m=[h[1],h[0],h[3],h[2]],l=(0,t.applyTransform)(m,f);if((0,t.intersects)(l,e.extent)){a=!0;break}}}a&&r.push(o.attribution)}),r.push(m),r})}this.setState(a.default.READY)}else this.setState(a.default.ERROR)},s}(n.default);exports.default=l;
},{"../tileurlfunction.js":"p1v/","../extent.js":"QDir","../net.js":"SU9K","../proj.js":"Diht","../source/State.js":"iC8j","../source/TileImage.js":"6udA","../tilecoord.js":"2faT","../tilegrid.js":"ExRx"}],"WJrq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../obj.js"),e=require("../source/State.js"),i=s(e),o=require("../source/XYZ.js"),a=s(o);function s(t){return t&&t.__esModule?t:{default:t}}var n=function(e){function o(t){e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,state:i.default.LOADING,wrapX:t.wrapX}),this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},this.initializeMap_()}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.getConfig=function(){return this.config_},o.prototype.updateConfig=function(e){(0,t.assign)(this.config_,e),this.initializeMap_()},o.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},o.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var i=new XMLHttpRequest;i.addEventListener("load",this.handleInitResponse_.bind(this,t)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",e),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))}},o.prototype.handleInitResponse_=function(t,e){var o=e.target;if(!o.status||o.status>=200&&o.status<300){var a;try{a=JSON.parse(o.responseText)}catch(t){return void this.setState(i.default.ERROR)}this.applyTemplate_(a),this.templateCache_[t]=a,this.setState(i.default.READY)}else this.setState(i.default.ERROR)},o.prototype.handleInitError_=function(t){this.setState(i.default.ERROR)},o.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},o}(a.default);exports.default=n;
},{"../obj.js":"mH6q","../source/State.js":"iC8j","../source/XYZ.js":"knlU"}],"sV2m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util.js"),e=require("../asserts.js"),r=require("../Feature.js"),s=p(r),i=require("../coordinate.js"),o=require("../events.js"),n=require("../events/EventType.js"),u=p(n),a=require("../extent.js"),c=require("../geom/Point.js"),h=p(c),f=require("../source/Vector.js"),l=p(f);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(r){function n(t){r.call(this,{attributions:t.attributions,extent:t.extent,projection:t.projection,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.features=[],this.geometryFunction=t.geometryFunction||function(t){var r=t.getGeometry();return(0,e.assert)(r instanceof h.default,10),r},this.source=t.source,(0,o.listen)(this.source,u.default.CHANGE,this.refresh,this)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDistance=function(){return this.distance},n.prototype.getSource=function(){return this.source},n.prototype.loadFeatures=function(t,e,r){this.source.loadFeatures(t,e,r),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},n.prototype.setDistance=function(t){this.distance=t,this.refresh()},n.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),r.prototype.refresh.call(this)},n.prototype.cluster=function(){if(void 0!==this.resolution){this.features.length=0;for(var e=(0,a.createEmpty)(),r=this.distance*this.resolution,s=this.source.getFeatures(),i={},o=0,n=s.length;o<n;o++){var u=s[o];if(!((0,t.getUid)(u).toString()in i)){var c=this.geometryFunction(u);if(c){var h=c.getCoordinates();(0,a.createOrUpdateFromCoordinate)(h,e),(0,a.buffer)(e,r,e);var f=this.source.getFeaturesInExtent(e);f=f.filter(function(e){var r=(0,t.getUid)(e).toString();return!(r in i)&&(i[r]=!0,!0)}),this.features.push(this.createCluster(f))}}}}},n.prototype.createCluster=function(t){for(var e=[0,0],r=t.length-1;r>=0;--r){var o=this.geometryFunction(t[r]);o?(0,i.add)(e,o.getCoordinates()):t.splice(r,1)}(0,i.scale)(e,1/t.length);var n=new s.default(new h.default(e));return n.set("features",t),n},n}(l.default);exports.default=d;
},{"../util.js":"KniQ","../asserts.js":"fLG6","../Feature.js":"mYW9","../coordinate.js":"nGsj","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../geom/Point.js":"gLcY","../source/Vector.js":"ZS12"}],"rc7/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./common.js"),e=require("../ImageBase.js"),r=_(e),s=require("../ImageState.js"),i=_(s),o=require("../events.js"),a=require("../events/EventType.js"),n=_(a),u=require("../extent.js"),c=require("../reproj.js"),l=require("../reproj/Triangulation.js"),h=_(l);function _(t){return t&&t.__esModule?t:{default:t}}var g=function(e){function r(r,s,o,a,n,l){var _=r.getExtent(),g=s.getExtent(),p=g?(0,u.getIntersection)(o,g):o,f=(0,u.getCenter)(p),d=(0,c.calculateSourceResolution)(r,s,f,a),E=t.ERROR_THRESHOLD,I=new h.default(r,s,p,_,d*E),x=l(I.calculateSourceExtent(),d,n),R=i.default.LOADED;x&&(R=i.default.IDLE);var j=x?x.getPixelRatio():1;e.call(this,o,a,j,R),this.targetProj_=s,this.maxSourceExtent_=_,this.triangulation_=I,this.targetResolution_=a,this.targetExtent_=o,this.sourceImage_=x,this.sourcePixelRatio_=j,this.canvas_=null,this.sourceListenerKey_=null}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.disposeInternal=function(){this.state==i.default.LOADING&&this.unlistenSource_(),e.prototype.disposeInternal.call(this)},r.prototype.getImage=function(){return this.canvas_},r.prototype.getProjection=function(){return this.targetProj_},r.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==i.default.LOADED){var e=(0,u.getWidth)(this.targetExtent_)/this.targetResolution_,r=(0,u.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,c.render)(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},r.prototype.load=function(){if(this.state==i.default.IDLE){this.state=i.default.LOADING,this.changed();var t=this.sourceImage_.getState();t==i.default.LOADED||t==i.default.ERROR?this.reproject_():(this.sourceListenerKey_=(0,o.listen)(this.sourceImage_,n.default.CHANGE,function(t){var e=this.sourceImage_.getState();e!=i.default.LOADED&&e!=i.default.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},r.prototype.unlistenSource_=function(){(0,o.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null},r}(r.default);exports.default=g;
},{"./common.js":"7f+F","../ImageBase.js":"Ojbp","../ImageState.js":"u3k+","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../reproj.js":"U255","../reproj/Triangulation.js":"BiRY"}],"XHvt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultImageLoadFunction=j;var e=require("../reproj/common.js"),t=require("../ImageState.js"),r=d(t),o=require("../array.js"),i=require("../events/Event.js"),n=d(i),s=require("../extent.js"),a=require("../proj.js"),u=require("../reproj/Image.js"),c=d(u),p=require("../source/Source.js"),l=d(p);function d(e){return e&&e.__esModule?e:{default:e}}var g={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},h=function(e){function t(t,r){e.call(this,t),this.image=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(n.default),_=function(t){function i(e){t.call(this,{attributions:e.attributions,extent:e.extent,projection:e.projection,state:e.state}),this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.findNearestResolution=function(e){if(this.resolutions_){var t=(0,o.linearFindNearest)(this.resolutions_,e,0);e=this.resolutions_[t]}return e},i.prototype.getImage=function(t,r,o,i){var n=this.getProjection();if(e.ENABLE_RASTER_REPROJECTION&&n&&i&&!(0,a.equivalent)(n,i)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,a.equivalent)(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==r&&(0,s.equals)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new c.default(n,i,t,r,o,function(e,t,r){return this.getImageInternal(e,t,r,n)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return n&&(i=n),this.getImageInternal(t,r,o,i)},i.prototype.getImageInternal=function(e,t,r,o){},i.prototype.handleImageChange=function(e){var t=e.target;switch(t.getState()){case r.default.LOADING:this.dispatchEvent(new h(g.IMAGELOADSTART,t));break;case r.default.LOADED:this.dispatchEvent(new h(g.IMAGELOADEND,t));break;case r.default.ERROR:this.dispatchEvent(new h(g.IMAGELOADERROR,t))}},i}(l.default);function j(e,t){e.getImage().src=t}exports.default=_;
},{"../reproj/common.js":"7f+F","../ImageState.js":"u3k+","../array.js":"luEr","../events/Event.js":"fKNg","../extent.js":"QDir","../proj.js":"Diht","../reproj/Image.js":"rc7/","../source/Source.js":"H38a"}],"2n7G":[function(require,module,exports) {
"use strict";function e(e,n){var o=[];Object.keys(n).forEach(function(e){null!==n[e]&&void 0!==n[e]&&o.push(e+"="+encodeURIComponent(n[e]))});var r=o.join("&");return(e=-1===(e=e.replace(/[?&]$/,"")).indexOf("?")?e+"?":e+"&")+r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appendParams=e;
},{}],"P20y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../Image.js"),e=p(t),i=require("../asserts.js"),r=require("../events.js"),s=require("../events/EventType.js"),a=p(s),o=require("../extent.js"),n=require("../obj.js"),u=require("../source/Image.js"),h=p(u),g=require("../uri.js");function p(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function s(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.hidpi_=void 0===i.hidpi||i.hidpi,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:u.defaultImageLoadFunction,this.params_=i.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return t&&(s.__proto__=t),s.prototype=Object.create(t&&t.prototype),s.prototype.constructor=s,s.prototype.getParams=function(){return this.params_},s.prototype.getImageInternal=function(t,i,s,u){if(void 0===this.url_)return null;i=this.findNearestResolution(i),s=this.hidpi_?s:1;var h=this.image_;if(h&&this.renderedRevision_==this.getRevision()&&h.getResolution()==i&&h.getPixelRatio()==s&&(0,o.containsExtent)(h.getExtent(),t))return h;var g={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};(0,n.assign)(g,this.params_);var p=((t=t.slice())[0]+t[2])/2,l=(t[1]+t[3])/2;if(1!=this.ratio_){var _=this.ratio_*(0,o.getWidth)(t)/2,d=this.ratio_*(0,o.getHeight)(t)/2;t[0]=p-_,t[1]=l-d,t[2]=p+_,t[3]=l+d}var c=i/s,m=Math.ceil((0,o.getWidth)(t)/c),v=Math.ceil((0,o.getHeight)(t)/c);t[0]=p-c*m/2,t[2]=p+c*m/2,t[1]=l-c*v/2,t[3]=l+c*v/2,this.imageSize_[0]=m,this.imageSize_[1]=v;var f=this.getRequestUrl_(t,this.imageSize_,s,u,g);return this.image_=new e.default(t,i,s,f,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),(0,r.listen)(this.image_,a.default.CHANGE,this.handleImageChange,this),this.image_},s.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},s.prototype.getRequestUrl_=function(t,e,r,s,a){var o=s.getCode().split(":").pop();a.SIZE=e[0]+","+e[1],a.BBOX=t.join(","),a.BBOXSR=o,a.IMAGESR=o,a.DPI=Math.round(90*r);var n=this.url_,u=n.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return u==n&&(0,i.assert)(!1,50),(0,g.appendParams)(u,a)},s.prototype.getUrl=function(){return this.url_},s.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},s.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},s.prototype.updateParams=function(t){(0,n.assign)(this.params_,t),this.image_=null,this.changed()},s}(h.default);exports.default=l;
},{"../Image.js":"DHWK","../asserts.js":"fLG6","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../obj.js":"mH6q","../source/Image.js":"XHvt","../uri.js":"2n7G"}],"3Y2u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../ImageCanvas.js"),e=r(t),i=require("../extent.js"),n=require("../source/Image.js"),o=r(n);function r(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function n(e){t.call(this,{attributions:e.attributions,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getImageInternal=function(t,n,o,r){n=this.findNearestResolution(n);var s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==n&&s.getPixelRatio()==o&&(0,i.containsExtent)(s.getExtent(),t))return s;t=t.slice(),(0,i.scaleFromCenter)(t,this.ratio_);var a=[(0,i.getWidth)(t)/n*o,(0,i.getHeight)(t)/n*o],u=this.canvasFunction_(t,n,o,a,r);return u&&(s=new e.default(t,n,o,u)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s},n}(o.default);exports.default=s;
},{"../ImageCanvas.js":"K7j2","../extent.js":"QDir","../source/Image.js":"XHvt"}],"C9PY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../Image.js"),t=d(e),i=require("../events.js"),r=require("../events/EventType.js"),s=d(r),n=require("../extent.js"),o=require("../obj.js"),a=require("../source/Image.js"),u=d(a),h=require("../uri.js");function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function r(t){e.call(this,{projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.displayDpi_=void 0!==t.displayDpi?t.displayDpi:96,this.params_=t.params||{},this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:a.defaultImageLoadFunction,this.hidpi_=void 0===t.hidpi||t.hidpi,this.metersPerUnit_=void 0!==t.metersPerUnit?t.metersPerUnit:1,this.ratio_=void 0!==t.ratio?t.ratio:1,this.useOverlay_=void 0!==t.useOverlay&&t.useOverlay,this.image_=null,this.renderedRevision_=0}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getParams=function(){return this.params_},r.prototype.getImageInternal=function(e,r,o,a){r=this.findNearestResolution(r),o=this.hidpi_?o:1;var u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==r&&u.getPixelRatio()==o&&(0,n.containsExtent)(u.getExtent(),e))return u;1!=this.ratio_&&(e=e.slice(),(0,n.scaleFromCenter)(e,this.ratio_));var h=[(0,n.getWidth)(e)/r*o,(0,n.getHeight)(e)/r*o];if(void 0!==this.url_){var d=this.getUrl(this.url_,this.params_,e,h,a);u=new t.default(e,r,o,d,this.crossOrigin_,this.imageLoadFunction_),(0,i.listen)(u,s.default.CHANGE,this.handleImageChange,this)}else u=null;return this.image_=u,this.renderedRevision_=this.getRevision(),u},r.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},r.prototype.updateParams=function(e){(0,o.assign)(this.params_,e),this.changed()},r.prototype.getUrl=function(e,t,i,r,s){var a=l(i,r,this.metersPerUnit_,this.displayDpi_),u=(0,n.getCenter)(i),d={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:a,SETVIEWCENTERX:u[0],SETVIEWCENTERY:u[1]};return(0,o.assign)(d,t),(0,h.appendParams)(e,d)},r.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},r}(u.default);function l(e,t,i,r){var s=(0,n.getWidth)(e),o=(0,n.getHeight)(e),a=t[0],u=t[1],h=.0254/r;return u*s>a*o?s*i/(a*h):o*i/(u*h)}exports.default=p;
},{"../Image.js":"DHWK","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../obj.js":"mH6q","../source/Image.js":"XHvt","../uri.js":"2n7G"}],"zK6j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../Image.js"),t=l(e),i=require("../ImageState.js"),a=l(i),r=require("../dom.js"),n=require("../events.js"),o=require("../events/EventType.js"),s=l(o),g=require("../extent.js"),u=require("../proj.js"),h=require("../source/Image.js"),m=l(h);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function i(i){var a=i.imageExtent,r=void 0!==i.crossOrigin?i.crossOrigin:null,o=void 0!==i.imageLoadFunction?i.imageLoadFunction:h.defaultImageLoadFunction;e.call(this,{attributions:i.attributions,projection:(0,u.get)(i.projection)}),this.image_=new t.default(a,void 0,1,i.url,r,o),this.imageSize_=i.imageSize?i.imageSize:null,(0,n.listen)(this.image_,s.default.CHANGE,this.handleImageChange,this)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getImageInternal=function(e,t,i,a){return(0,g.intersects)(e,this.image_.getExtent())?this.image_:null},i.prototype.handleImageChange=function(t){if(this.image_.getState()==a.default.LOADED){var i,n,o=this.image_.getExtent(),s=this.image_.getImage();this.imageSize_?(i=this.imageSize_[0],n=this.imageSize_[1]):(i=s.width,n=s.height);var u=(0,g.getHeight)(o)/n,h=Math.ceil((0,g.getWidth)(o)/u);if(h!=i){var m=(0,r.createCanvasContext2D)(h,n),l=m.canvas;m.drawImage(s,0,0,i,n,0,0,l.width,l.height),this.image_.setImage(l)}}e.prototype.handleImageChange.call(this,t)},i}(m.default);exports.default=c;
},{"../Image.js":"DHWK","../ImageState.js":"u3k+","../dom.js":"Xno5","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../proj.js":"Diht","../source/Image.js":"XHvt"}],"a8mu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.DEFAULT_WMS_VERSION="1.3.0";
},{}],"mXwm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};
},{}],"e4Kb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./common.js"),t=require("../Image.js"),i=S(t),r=require("../asserts.js"),s=require("../events.js"),a=require("../events/EventType.js"),o=S(a),n=require("../extent.js"),u=require("../obj.js"),h=require("../proj.js"),_=require("../reproj.js"),g=require("../source/Image.js"),p=S(g),d=require("../source/WMSServerType.js"),l=S(d),c=require("../string.js"),R=require("../uri.js");function S(e){return e&&e.__esModule?e:{default:e}}var m=[101,101],v=function(t){function a(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:g.defaultImageLoadFunction,this.params_=i.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=i.serverType,this.hidpi_=void 0===i.hidpi||i.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return t&&(a.__proto__=t),a.prototype=Object.create(t&&t.prototype),a.prototype.constructor=a,a.prototype.getGetFeatureInfoUrl=function(t,i,r,s){if(void 0!==this.url_){var a=(0,h.get)(r),o=this.getProjection();o&&o!==a&&(i=(0,_.calculateSourceResolution)(o,a,t,i),t=(0,h.transform)(t,a,o));var g=(0,n.getForViewAndSize)(t,i,0,m),p={SERVICE:"WMS",VERSION:e.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};(0,u.assign)(p,this.params_,s);var d=Math.floor((t[0]-g[0])/i),l=Math.floor((g[3]-t[1])/i);return p[this.v13_?"I":"X"]=d,p[this.v13_?"J":"Y"]=l,this.getRequestUrl_(g,m,1,o||a,p)}},a.prototype.getParams=function(){return this.params_},a.prototype.getImageInternal=function(t,r,a,h){if(void 0===this.url_)return null;r=this.findNearestResolution(r),1==a||this.hidpi_&&void 0!==this.serverType_||(a=1);var _=r/a,g=(0,n.getCenter)(t),p=Math.ceil((0,n.getWidth)(t)/_),d=Math.ceil((0,n.getHeight)(t)/_),l=(0,n.getForViewAndSize)(g,_,0,[p,d]),c=Math.ceil(this.ratio_*(0,n.getWidth)(t)/_),R=Math.ceil(this.ratio_*(0,n.getHeight)(t)/_),S=(0,n.getForViewAndSize)(g,_,0,[c,R]),m=this.image_;if(m&&this.renderedRevision_==this.getRevision()&&m.getResolution()==r&&m.getPixelRatio()==a&&(0,n.containsExtent)(m.getExtent(),l))return m;var v={SERVICE:"WMS",VERSION:e.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};(0,u.assign)(v,this.params_),this.imageSize_[0]=Math.round((0,n.getWidth)(S)/_),this.imageSize_[1]=Math.round((0,n.getHeight)(S)/_);var E=this.getRequestUrl_(S,this.imageSize_,a,h,v);return this.image_=new i.default(S,r,a,E,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),(0,s.listen)(this.image_,o.default.CHANGE,this.handleImageChange,this),this.image_},a.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},a.prototype.getRequestUrl_=function(e,t,i,s,a){if((0,r.assert)(void 0!==this.url_,9),a[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=i)switch(this.serverType_){case l.default.GEOSERVER:var o=90*i+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+o:a.FORMAT_OPTIONS="dpi:"+o;break;case l.default.MAPSERVER:a.MAP_RESOLUTION=90*i;break;case l.default.CARMENTA_SERVER:case l.default.QGIS:a.DPI=90*i;break;default:(0,r.assert)(!1,8)}a.WIDTH=t[0],a.HEIGHT=t[1];var n,u=s.getAxisOrientation();return n=this.v13_&&"ne"==u.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,a.BBOX=n.join(","),(0,R.appendParams)(this.url_,a)},a.prototype.getUrl=function(){return this.url_},a.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},a.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},a.prototype.updateParams=function(e){(0,u.assign)(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},a.prototype.updateV13_=function(){var t=this.params_.VERSION||e.DEFAULT_WMS_VERSION;this.v13_=(0,c.compareVersions)(t,"1.3")>=0},a}(p.default);exports.default=v;
},{"./common.js":"a8mu","../Image.js":"DHWK","../asserts.js":"fLG6","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../obj.js":"mH6q","../proj.js":"Diht","../reproj.js":"U255","../source/Image.js":"XHvt","../source/WMSServerType.js":"mXwm","../string.js":"AiCK","../uri.js":"2n7G"}],"dJUt":[function(require,module,exports) {
var a=!0;try{new ImageData(10,10)}catch(e){a=!1}var e=document.createElement("canvas").getContext("2d");function t(t,n,r){if(a)return new ImageData(t,n,r);var c=e.createImageData(n,r);return c.data.set(t),c}exports.newImageData=t;
},{}],"lnrF":[function(require,module,exports) {
var t=require("./util").newImageData;function e(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function a(t,a,i){return e?new ImageData(t,a,i):{data:t,width:a,height:i}}return function(e){var i,r,n=e.buffers,s=e.meta,o=e.imageOps,u=e.width,h=e.height,f=n.length,p=n[0].byteLength;if(o){var _=new Array(f);for(r=0;r<f;++r)_[r]=a(new Uint8ClampedArray(n[r]),u,h);i=t(_,s).data}else{i=new Uint8ClampedArray(p);var l=new Array(f),d=new Array(f);for(r=0;r<f;++r)l[r]=new Uint8ClampedArray(n[r]),d[r]=[0,0,0,0];for(var g=0;g<p;g+=4){for(var m=0;m<f;++m){var c=l[m];d[m][0]=c[g],d[m][1]=c[g+1],d[m][2]=c[g+2],d[m][3]=c[g+3]}var v=t(d,s);i[g]=v[0],i[g+1]=v[1],i[g+2]=v[2],i[g+3]=v[3]}}return i.buffer}}function a(t,a){var i=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+e.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(i,{type:"text/javascript"}),n=URL.createObjectURL(r),s=new Worker(n);return s.addEventListener("message",a),s}function i(t,a){var i=e(t.operation);return{postMessage:function(t){setTimeout(function(){a({data:{buffer:i(t),meta:t.meta}})},0)}}}function r(t){var e;this._imageOps=!!t.imageOps;var r=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var n=0;n<e;++n)r[n]=a(t,this._onWorkerMessage.bind(this,n));else r[0]=i(t,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}r.prototype.process=function(t,e,a){this._enqueue({inputs:t,meta:e,callback:a}),this._dispatch()},r.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},r.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},r.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,a=t.inputs[0].height,i=t.inputs.map(function(t){return t.data.buffer}),r=this._workers.length;if(this._running=r,1===r)this._workers[0].postMessage({buffers:i,meta:t.meta,imageOps:this._imageOps,width:e,height:a},i);else for(var n=t.inputs[0].data.length,s=4*Math.ceil(n/4/r),o=0;o<r;++o){for(var u=o*s,h=[],f=0,p=i.length;f<p;++f)h.push(i[o].slice(u,u+s));this._workers[o].postMessage({buffers:h,meta:t.meta,imageOps:this._imageOps,width:e,height:a},h)}}},r.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},r.prototype._resolveJob=function(){var e,a,i=this._job,r=this._workers.length;if(1===r)e=new Uint8ClampedArray(this._dataLookup[0].buffer),a=this._dataLookup[0].meta;else{var n=i.inputs[0].data.length;e=new Uint8ClampedArray(n),a=new Array(n);for(var s=4*Math.ceil(n/4/r),o=0;o<r;++o){var u=this._dataLookup[o].buffer,h=o*s;e.set(new Uint8ClampedArray(u),h),a[o]=this._dataLookup[o].meta}}this._job=null,this._dataLookup={},i.callback(null,t(e,i.inputs[0].width,i.inputs[0].height),a),this._dispatch()},module.exports=r;
},{"./util":"dJUt"}],"8pn8":[function(require,module,exports) {
var r=require("./processor");exports.Processor=r;
},{"./processor":"lnrF"}],"w95b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util.js"),t=require("../ImageCanvas.js"),r=b(t),a=require("../TileQueue.js"),n=b(a),i=require("../dom.js"),s=require("../events.js"),o=require("../events/Event.js"),u=b(o),d=require("../events/EventType.js"),l=b(d),h=require("pixelworks/lib/index"),c=require("../extent.js"),p=require("../LayerType.js"),f=b(p),v=require("../layer/Layer.js"),g=b(v),_=require("../layer/Image.js"),m=b(_),y=require("../layer/Tile.js"),S=b(y),q=require("../obj.js"),w=require("../renderer/canvas/ImageLayer.js"),I=b(w),T=require("../renderer/canvas/TileLayer.js"),j=b(T),C=require("../source/Image.js"),E=b(C),x=require("../source/State.js"),R=b(x),O=require("../source/Tile.js"),A=b(O),F=require("../transform.js");function b(e){return e&&e.__esModule?e:{default:e}}var M={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"},L={PIXEL:"pixel",IMAGE:"image"},P=function(e){function t(t,r,a){e.call(this,t),this.extent=r.extent,this.resolution=r.viewState.resolution/r.pixelRatio,this.data=a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(u.default),k=function(t){function a(r){t.call(this,{}),this.worker_=null,this.operationType_=void 0!==r.operationType?r.operationType:L.PIXEL,this.threads_=void 0!==r.threads?r.threads:1,this.renderers_=Q(r.sources);for(var a=0,i=this.renderers_.length;a<i;++a)(0,s.listen)(this.renderers_[a],l.default.CHANGE,this.changed,this);this.tileQueue_=new n.default(function(){return 1},this.changed.bind(this));for(var o=N(this.renderers_),u={},d=0,h=o.length;d<h;++d)u[(0,e.getUid)(o[d].layer)]=o[d];this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:(0,F.create)(),extent:null,focus:null,index:0,layerStates:u,layerStatesArray:o,pixelRatio:1,pixelToCoordinateTransform:(0,F.create)(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},void 0!==r.operation&&this.setOperation(r.operation,r.lib)}return t&&(a.__proto__=t),a.prototype=Object.create(t&&t.prototype),a.prototype.constructor=a,a.prototype.setOperation=function(e,t){this.worker_=new h.Processor({operation:e,imageOps:this.operationType_===L.IMAGE,queue:1,lib:t,threads:this.threads_}),this.changed()},a.prototype.updateFrameState_=function(e,t,r){var a=(0,q.assign)({},this.frameState_);a.viewState=(0,q.assign)({},a.viewState);var n=(0,c.getCenter)(e);a.extent=e.slice(),a.focus=n,a.size[0]=Math.round((0,c.getWidth)(e)/t),a.size[1]=Math.round((0,c.getHeight)(e)/t),a.time=Date.now(),a.animate=!1;var i=a.viewState;return i.center=n,i.projection=r,i.resolution=t,a},a.prototype.allSourcesReady_=function(){for(var e=!0,t=0,r=this.renderers_.length;t<r;++t)if(this.renderers_[t].getLayer().getSource().getState()!==R.default.READY){e=!1;break}return e},a.prototype.getImage=function(e,t,r,a){if(!this.allSourcesReady_())return null;var n=this.updateFrameState_(e,t,a);if(this.requestedFrameState_=n,this.renderedImageCanvas_){var i=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();t===i&&(0,c.equals)(e,s)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),n.tileQueue.loadMoreTiles(16,16),n.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},a.prototype.processSources_=function(){for(var e=this.requestedFrameState_,t=this.renderers_.length,r=new Array(t),a=0;a<t;++a){var n=z(this.renderers_[a],e,e.layerStatesArray[a]);if(!n)return;r[a]=n}var i={};this.dispatchEvent(new P(M.BEFOREOPERATIONS,e,i)),this.worker_.process(r,i,this.onWorkerComplete_.bind(this,e))},a.prototype.onWorkerComplete_=function(e,t,a,n){if(!t&&a){var s=e.extent,o=e.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&(0,c.equals)(s,this.requestedFrameState_.extent)){var u;if(this.renderedImageCanvas_)u=this.renderedImageCanvas_.getImage().getContext("2d");else{var d=Math.round((0,c.getWidth)(s)/o),l=Math.round((0,c.getHeight)(s)/o);u=(0,i.createCanvasContext2D)(d,l),this.renderedImageCanvas_=new r.default(s,o,1,u.canvas)}u.putImageData(a,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new P(M.AFTEROPERATIONS,e,n))}}},a.prototype.getImageInternal=function(){return null},a}(E.default),D=null;function z(e,t,r){if(!e.prepareFrame(t,r))return null;var a=t.size[0],n=t.size[1];if(D){var s=D.canvas;s.width!==a||s.height!==n?D=(0,i.createCanvasContext2D)(a,n):D.clearRect(0,0,a,n)}else D=(0,i.createCanvasContext2D)(a,n);return e.composeFrame(t,r,D),D.getImageData(0,0,a,n)}function N(e){return e.map(function(e){return e.getLayer().getLayerState()})}function Q(e){for(var t=e.length,r=new Array(t),a=0;a<t;++a)r[a]=G(e[a]);return r}function G(e){var t=null;return e instanceof A.default?t=W(e):e instanceof E.default?t=H(e):e instanceof S.default?t=new j.default(e):e instanceof g.default&&(e.getType()==f.default.IMAGE||e.getType()==f.default.VECTOR)&&(t=new I.default(e)),t}function H(e){var t=new m.default({source:e});return new I.default(t)}function W(e){var t=new S.default({source:e});return new j.default(t)}exports.default=k;
},{"../util.js":"KniQ","../ImageCanvas.js":"K7j2","../TileQueue.js":"0tHO","../dom.js":"Xno5","../events.js":"55Uq","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","pixelworks/lib/index":"8pn8","../extent.js":"QDir","../LayerType.js":"8+bQ","../layer/Layer.js":"GCgv","../layer/Image.js":"2KHB","../layer/Tile.js":"BU+E","../obj.js":"mH6q","../renderer/canvas/ImageLayer.js":"rz/N","../renderer/canvas/TileLayer.js":"hkM/","../source/Image.js":"XHvt","../source/State.js":"iC8j","../source/Tile.js":"JECm","../transform.js":"P4eA"}],"3ehV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../source/OSM.js"),o=require("../source/XYZ.js"),n=r(o);function r(e){return e&&e.__esModule?e:{default:e}}var t=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',e.ATTRIBUTION],a={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},i={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},s=function(e){function o(o){var n=o.layer.indexOf("-"),r=-1==n?o.layer:o.layer.slice(0,n),s=i[r],p=a[o.layer],u=void 0!==o.url?o.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+o.layer+"/{z}/{x}/{y}."+p.extension;e.call(this,{attributions:t,cacheSize:o.cacheSize,crossOrigin:"anonymous",maxZoom:null!=o.maxZoom?o.maxZoom:s.maxZoom,minZoom:null!=o.minZoom?o.minZoom:s.minZoom,opaque:p.opaque,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileLoadFunction:o.tileLoadFunction,url:u,wrapX:o.wrapX})}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o}(n.default);exports.default=s;
},{"../source/OSM.js":"Rmo4","../source/XYZ.js":"knlU"}],"XUos":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../extent.js"),t=require("../math.js"),r=require("../obj.js"),i=require("../size.js"),o=require("../source/TileImage.js"),s=p(o),a=require("../tilecoord.js"),n=require("../uri.js");function p(e){return e&&e.__esModule?e:{default:e}}var u=function(o){function s(t){var r=t||{};o.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition}),this.params_=r.params||{},this.tmpExtent_=(0,e.createEmpty)(),this.setKey(this.getKeyForParams_())}return o&&(s.__proto__=o),s.prototype=Object.create(o&&o.prototype),s.prototype.constructor=s,s.prototype.getKeyForParams_=function(){var e=0,t=[];for(var r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")},s.prototype.getParams=function(){return this.params_},s.prototype.getRequestUrl_=function(e,r,i,o,s,p){var u=this.urls;if(u){var l,c=s.getCode().split(":").pop();if(p.SIZE=r[0]+","+r[1],p.BBOX=i.join(","),p.BBOXSR=c,p.IMAGESR=c,p.DPI=Math.round(p.DPI?p.DPI*o:90*o),1==u.length)l=u[0];else l=u[(0,t.modulo)((0,a.hash)(e),u.length)];var h=l.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,n.appendParams)(h,p)}},s.prototype.getTilePixelRatio=function(e){return e},s.prototype.fixedTileUrlFunction=function(e,t,o){var s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(o)),!(s.getResolutions().length<=e[0])){var a=s.getTileCoordExtent(e,this.tmpExtent_),n=(0,i.toSize)(s.getTileSize(e[0]),this.tmpSize);1!=t&&(n=(0,i.scale)(n,t,this.tmpSize));var p={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return(0,r.assign)(p,this.params_),this.getRequestUrl_(e,n,a,t,o,p)}},s.prototype.updateParams=function(e){(0,r.assign)(this.params_,e),this.setKey(this.getKeyForParams_())},s}(s.default);exports.default=u;
},{"../extent.js":"QDir","../math.js":"B96G","../obj.js":"mH6q","../size.js":"TAHd","../source/TileImage.js":"6udA","../tilecoord.js":"2faT","../uri.js":"2n7G"}],"dQMP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../Tile.js"),e=c(t),r=require("../TileState.js"),i=c(r),o=require("../dom.js"),n=require("../size.js"),s=require("../source/Tile.js"),l=c(s),a=require("../tilecoord.js");function c(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(e,r,o){t.call(this,e,i.default.LOADED),this.tileSize_=r,this.text_=o,this.canvas_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=(0,o.createCanvasContext2D)(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.text_,t[0]/2,t[1]/2),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(e.default),p=function(t){function e(e){t.call(this,{opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:void 0===e.wrapX||e.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTile=function(t,e,r){var i=(0,a.getKeyZXY)(t,e,r);if(this.tileCache.containsKey(i))return this.tileCache.get(i);var o=(0,n.toSize)(this.tileGrid.getTileSize(t)),s=[t,e,r],l=this.getTileCoordForTileUrlFunction(s),c=l?this.getTileCoordForTileUrlFunction(l).toString():"",p=new u(s,o,c);return this.tileCache.set(i,p),p},e}(l.default);exports.default=p;
},{"../Tile.js":"IWZI","../TileState.js":"Xz9x","../dom.js":"Xno5","../size.js":"TAHd","../source/Tile.js":"JECm","../tilecoord.js":"2faT"}],"V9RY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../tileurlfunction.js"),e=require("../asserts.js"),r=require("../extent.js"),i=require("../net.js"),o=require("../proj.js"),n=require("../source/State.js"),s=d(n),a=require("../source/TileImage.js"),l=d(a),u=require("../tilegrid.js");function d(t){return t&&t.__esModule?t:{default:t}}var h=function(n){function a(t){if(n.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:(0,o.get)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:s.default.LOADING,tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.tileJSON_=null,t.url)if(t.jsonp)(0,i.jsonp)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var r=new XMLHttpRequest;r.addEventListener("load",this.onXHRLoad_.bind(this)),r.addEventListener("error",this.onXHRError_.bind(this)),r.open("GET",t.url),r.send()}else t.tileJSON?this.handleTileJSONResponse(t.tileJSON):(0,e.assert)(!1,51)}return n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a,a.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},a.prototype.onXHRError_=function(t){this.handleTileJSONError()},a.prototype.getTileJSON=function(){return this.tileJSON_},a.prototype.handleTileJSONResponse=function(e){var i,n=(0,o.get)("EPSG:4326"),a=this.getProjection();if(void 0!==e.bounds){var l=(0,o.getTransformFromProjections)(n,a);i=(0,r.applyTransform)(e.bounds,l)}var d=e.minzoom||0,h=e.maxzoom||22,p=(0,u.createXYZ)({extent:(0,u.extentFromProjection)(a),maxZoom:h,minZoom:d});if(this.tileGrid=p,this.tileUrlFunction=(0,t.createFromTemplates)(e.tiles,p),void 0!==e.attribution&&!this.getAttributions()){var c=void 0!==i?i:n.getExtent();this.setAttributions(function(t){return(0,r.intersects)(c,t.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState(s.default.READY)},a.prototype.handleTileJSONError=function(){this.setState(s.default.ERROR)},a}(l.default);exports.default=h;
},{"../tileurlfunction.js":"p1v/","../asserts.js":"fLG6","../extent.js":"QDir","../net.js":"SU9K","../proj.js":"Diht","../source/State.js":"iC8j","../source/TileImage.js":"6udA","../tilegrid.js":"ExRx"}],"IcO7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./common.js"),e=require("../asserts.js"),r=require("../extent.js"),i=require("../obj.js"),s=require("../math.js"),o=require("../proj.js"),a=require("../reproj.js"),n=require("../size.js"),u=require("../source/TileImage.js"),p=g(u),h=require("../source/WMSServerType.js"),l=g(h),_=require("../tilecoord.js"),c=require("../string.js"),S=require("../uri.js");function g(t){return t&&t.__esModule?t:{default:t}}var d=function(u){function p(t){var e=t||{},i=e.params||{},s=!("TRANSPARENT"in i)||i.TRANSPARENT;u.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:!s,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=(0,r.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}return u&&(p.__proto__=u),p.prototype=Object.create(u&&u.prototype),p.prototype.constructor=p,p.prototype.getGetFeatureInfoUrl=function(e,s,u,p){var h=(0,o.get)(u),l=this.getProjection(),_=this.getTileGrid();_||(_=this.getTileGridForProjection(h));var c=_.getTileCoordForCoordAndResolution(e,s);if(!(_.getResolutions().length<=c[0])){var S=_.getResolution(c[0]),g=_.getTileCoordExtent(c,this.tmpExtent_),d=(0,n.toSize)(_.getTileSize(c[0]),this.tmpSize),T=this.gutter_;0!==T&&(d=(0,n.buffer)(d,T,this.tmpSize),g=(0,r.buffer)(g,S*T,g)),l&&l!==h&&(S=(0,a.calculateSourceResolution)(l,h,e,S),g=(0,o.transformExtent)(g,h,l),e=(0,o.transform)(e,h,l));var R={SERVICE:"WMS",VERSION:t.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};(0,i.assign)(R,this.params_,p);var E=Math.floor((e[0]-g[0])/S),f=Math.floor((g[3]-e[1])/S);return R[this.v13_?"I":"X"]=E,R[this.v13_?"J":"Y"]=f,this.getRequestUrl_(c,d,g,1,l||h,R)}},p.prototype.getGutterInternal=function(){return this.gutter_},p.prototype.getParams=function(){return this.params_},p.prototype.getRequestUrl_=function(t,r,i,o,a,n){var u=this.urls;if(u){if(n.WIDTH=r[0],n.HEIGHT=r[1],n[this.v13_?"CRS":"SRS"]=a.getCode(),"STYLES"in this.params_||(n.STYLES=""),1!=o)switch(this.serverType_){case l.default.GEOSERVER:var p=90*o+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+p:n.FORMAT_OPTIONS="dpi:"+p;break;case l.default.MAPSERVER:n.MAP_RESOLUTION=90*o;break;case l.default.CARMENTA_SERVER:case l.default.QGIS:n.DPI=90*o;break;default:(0,e.assert)(!1,52)}var h,c,g=a.getAxisOrientation(),d=i;if(this.v13_&&"ne"==g.substr(0,2))h=i[0],d[0]=i[1],d[1]=h,h=i[2],d[2]=i[3],d[3]=h;if(n.BBOX=d.join(","),1==u.length)c=u[0];else c=u[(0,s.modulo)((0,_.hash)(t),u.length)];return(0,S.appendParams)(c,n)}},p.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},p.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},p.prototype.fixedTileUrlFunction=function(e,s,o){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(o)),!(a.getResolutions().length<=e[0])){1==s||this.hidpi_&&void 0!==this.serverType_||(s=1);var u=a.getResolution(e[0]),p=a.getTileCoordExtent(e,this.tmpExtent_),h=(0,n.toSize)(a.getTileSize(e[0]),this.tmpSize),l=this.gutter_;0!==l&&(h=(0,n.buffer)(h,l,this.tmpSize),p=(0,r.buffer)(p,u*l,p)),1!=s&&(h=(0,n.scale)(h,s,this.tmpSize));var _={SERVICE:"WMS",VERSION:t.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return(0,i.assign)(_,this.params_),this.getRequestUrl_(e,h,p,s,o,_)}},p.prototype.updateParams=function(t){(0,i.assign)(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},p.prototype.updateV13_=function(){var e=this.params_.VERSION||t.DEFAULT_WMS_VERSION;this.v13_=(0,c.compareVersions)(e,"1.3")>=0},p}(p.default);exports.default=d;
},{"./common.js":"a8mu","../asserts.js":"fLG6","../extent.js":"QDir","../obj.js":"mH6q","../math.js":"B96G","../proj.js":"Diht","../reproj.js":"U255","../size.js":"TAHd","../source/TileImage.js":"6udA","../source/WMSServerType.js":"mXwm","../tilecoord.js":"2faT","../string.js":"AiCK","../uri.js":"2n7G"}],"o/CP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomTile=void 0;var t=require("../Tile.js"),e=g(t),i=require("../TileState.js"),r=g(i),o=require("../tileurlfunction.js"),s=require("../asserts.js"),n=require("../events.js"),a=require("../events/EventType.js"),l=g(a),h=require("../extent.js"),u=require("../net.js"),d=require("../proj.js"),p=require("../source/State.js"),c=g(p),_=require("../source/Tile.js"),f=g(_),v=require("../tilecoord.js"),y=require("../tilegrid.js");function g(t){return t&&t.__esModule?t:{default:t}}var E=exports.CustomTile=function(t){function e(e,i,r,o,s,n){t.call(this,e,i),this.src_=r,this.extent_=o,this.preemptive_=s,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e.default);E.prototype.getImage=function(){return null},E.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),r=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof r)return null;var o=r.charCodeAt(Math.floor(e*r.length));o>=93&&o--,o>=35&&o--;var s=null;if((o-=32)in this.keys_){var n=this.keys_[o];s=this.data_&&n in this.data_?this.data_[n]:n}return s},E.prototype.forDataAtCoordinate=function(t,e,i,o){this.state==r.default.IDLE&&!0===o?((0,n.listenOnce)(this,l.default.CHANGE,function(r){e.call(i,this.getData(t))},this),this.loadInternal_()):!0===o?setTimeout(function(){e.call(i,this.getData(t))}.bind(this),0):e.call(i,this.getData(t))},E.prototype.getKey=function(){return this.src_},E.prototype.handleError_=function(){this.state=r.default.ERROR,this.changed()},E.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=r.default.EMPTY,this.changed()},E.prototype.loadInternal_=function(){if(this.state==r.default.IDLE)if(this.state=r.default.LOADING,this.jsonp_)(0,u.jsonp)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},E.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},E.prototype.onXHRError_=function(t){this.handleError_()},E.prototype.load=function(){this.preemptive_&&this.loadInternal_()};var T=function(t){function e(e){if(t.call(this,{projection:(0,d.get)("EPSG:3857"),state:c.default.LOADING}),this.preemptive_=void 0===e.preemptive||e.preemptive,this.tileUrlFunction_=o.nullTileUrlFunction,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)(0,u.jsonp)(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):(0,s.assert)(!1,51)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(f.default);T.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},T.prototype.onXHRError_=function(t){this.handleTileJSONError()},T.prototype.getTemplate=function(){return this.template_},T.prototype.forDataAtCoordinateAndResolution=function(t,e,i,r){if(this.tileGrid){var o=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,null,r)}else!0===r?setTimeout(function(){i(null)},0):i(null)},T.prototype.handleTileJSONError=function(){this.setState(c.default.ERROR)},T.prototype.handleTileJSONResponse=function(t){var e,i=(0,d.get)("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var s=(0,d.getTransformFromProjections)(i,r);e=(0,h.applyTransform)(t.bounds,s)}var n=t.minzoom||0,a=t.maxzoom||22,l=(0,y.createXYZ)({extent:(0,y.extentFromProjection)(r),maxZoom:a,minZoom:n});this.tileGrid=l,this.template_=t.template;var u=t.grids;if(u){if(this.tileUrlFunction_=(0,o.createFromTemplates)(u,l),void 0!==t.attribution){var p=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return(0,h.intersects)(p,e.extent)?[t.attribution]:null})}this.setState(c.default.READY)}else this.setState(c.default.ERROR)},T.prototype.getTile=function(t,e,i,o,s){var n=(0,v.getKeyZXY)(t,e,i);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,s),h=this.tileUrlFunction_(l,o,s),u=new E(a,void 0!==h?r.default.IDLE:r.default.EMPTY,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(n,u),u},T.prototype.useTile=function(t,e,i){var r=(0,v.getKeyZXY)(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},exports.default=T;
},{"../Tile.js":"IWZI","../TileState.js":"Xz9x","../tileurlfunction.js":"p1v/","../asserts.js":"fLG6","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../net.js":"SU9K","../proj.js":"Diht","../source/State.js":"iC8j","../source/Tile.js":"JECm","../tilecoord.js":"2faT","../tilegrid.js":"ExRx"}],"21gB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={KVP:"KVP",REST:"REST"};
},{}],"5omF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromCapabilitiesMatrixSet=s;var e=require("../array.js"),t=require("../proj.js"),i=require("../tilegrid/TileGrid.js"),r=n(i);function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(t){e.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getMatrixId=function(e){return this.matrixIds_[e]},t.prototype.getMatrixIds=function(){return this.matrixIds_},t}(r.default);function s(i,r,n){var s=[],u=[],a=[],l=[],p=[],d=void 0!==n?n:[],f=i.SupportedCRS,c=(0,t.get)(f.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,t.get)(f),x=c.getMetersPerUnit(),g="ne"==c.getAxisOrientation().substr(0,2);return i.TileMatrix.sort(function(e,t){return t.ScaleDenominator-e.ScaleDenominator}),i.TileMatrix.forEach(function(t){if(!(d.length>0)||(0,e.find)(d,function(e){return t.Identifier==e.TileMatrix||-1===t.Identifier.indexOf(":")&&i.Identifier+":"+t.Identifier===e.TileMatrix})){u.push(t.Identifier);var r=28e-5*t.ScaleDenominator/x,n=t.TileWidth,o=t.TileHeight;g?a.push([t.TopLeftCorner[1],t.TopLeftCorner[0]]):a.push(t.TopLeftCorner),s.push(r),l.push(n==o?n:[n,o]),p.push([t.MatrixWidth,-t.MatrixHeight])}}),new o({extent:r,origins:a,resolutions:s,matrixIds:u,tileSizes:l,sizes:p})}exports.default=o;
},{"../array.js":"luEr","../proj.js":"Diht","../tilegrid/TileGrid.js":"5dp/"}],"LIR5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.optionsFromCapabilities=p;var e=require("../tileurlfunction.js"),t=require("../array.js"),i=require("../extent.js"),r=require("../obj.js"),n=require("../proj.js"),o=require("../source/TileImage.js"),s=d(o),a=require("../source/WMTSRequestEncoding.js"),u=d(a),l=require("../tilegrid/WMTS.js"),c=require("../uri.js");function d(e){return e&&e.__esModule?e:{default:e}}var f=function(t){function i(i){var r=void 0!==i.requestEncoding?i.requestEncoding:u.default.KVP,n=i.tileGrid,o=i.urls;void 0===o&&void 0!==i.url&&(o=(0,e.expandUrl)(i.url)),t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:n,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:e.nullTileUrlFunction,urls:o,wrapX:void 0!==i.wrapX&&i.wrapX,transition:i.transition}),this.version_=void 0!==i.version?i.version:"1.0.0",this.format_=void 0!==i.format?i.format:"image/jpeg",this.dimensions_=void 0!==i.dimensions?i.dimensions:{},this.layer_=i.layer,this.matrixSet_=i.matrixSet,this.style_=i.style,this.requestEncoding_=r,this.setKey(this.getKeyForDimensions_()),o&&o.length>0&&(this.tileUrlFunction=(0,e.createFromTileUrlFunctions)(o.map(h.bind(this))))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(s.default);function p(e,r){var o=e.Contents.Layer,s=(0,t.find)(o,function(e,t,i){return e.Identifier==r.layer});if(null===s)return null;var a,c=e.Contents.TileMatrixSet;(a=s.TileMatrixSetLink.length>1?"projection"in r?(0,t.findIndex)(s.TileMatrixSetLink,function(e,i,o){var s=(0,t.find)(c,function(t){return t.Identifier==e.TileMatrixSet}).SupportedCRS,a=(0,n.get)(s.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,n.get)(s),u=(0,n.get)(r.projection);return a&&u?(0,n.equivalent)(a,u):s==r.projection}):(0,t.findIndex)(s.TileMatrixSetLink,function(e,t,i){return e.TileMatrixSet==r.matrixSet}):0)<0&&(a=0);var d=s.TileMatrixSetLink[a].TileMatrixSet,f=s.TileMatrixSetLink[a].TileMatrixSetLimits,p=s.Format[0];"format"in r&&(p=r.format),(a=(0,t.findIndex)(s.Style,function(e,t,i){return"style"in r?e.Title==r.style:e.isDefault}))<0&&(a=0);var h=s.Style[a].Identifier,g={};"Dimension"in s&&s.Dimension.forEach(function(e,t,i){var r=e.Identifier,n=e.Default;void 0===n&&(n=e.Value[0]),g[r]=n});var m,v=e.Contents.TileMatrixSet,y=(0,t.find)(v,function(e,t,i){return e.Identifier==d}),x=y.SupportedCRS;if(x&&(m=(0,n.get)(x.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,n.get)(x)),"projection"in r){var S=(0,n.get)(r.projection);S&&(m&&!(0,n.equivalent)(S,m)||(m=S))}var _,T,j=s.WGS84BoundingBox;if(void 0!==j){var M=(0,n.get)("EPSG:4326").getExtent();T=j[0]==M[0]&&j[2]==M[2],_=(0,n.transformExtent)(j,"EPSG:4326",m);var q=m.getExtent();q&&((0,i.containsExtent)(q,_)||(_=void 0))}var E=(0,l.createFromCapabilitiesMatrixSet)(y,_,f),F=[],P=r.requestEncoding;if(P=void 0!==P?P:"","OperationsMetadata"in e&&"GetTile"in e.OperationsMetadata)for(var C=e.OperationsMetadata.GetTile.DCP.HTTP.Get,w=0,L=C.length;w<L;++w)if(C[w].Constraint){var G=(0,t.find)(C[w].Constraint,function(e){return"GetEncoding"==e.name}).AllowedValues.Value;if(""===P&&(P=G[0]),P!==u.default.KVP)break;(0,t.includes)(G,u.default.KVP)&&F.push(C[w].href)}else C[w].href&&(P=u.default.KVP,F.push(C[w].href));return 0===F.length&&(P=u.default.REST,s.ResourceURL.forEach(function(e){"tile"===e.resourceType&&(p=e.format,F.push(e.template))})),{urls:F,layer:r.layer,matrixSet:d,format:p,projection:m,requestEncoding:P,tileGrid:E,style:h,dimensions:g,wrapX:T,crossOrigin:r.crossOrigin}}function h(e){var t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t==u.default.KVP&&(0,r.assign)(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t==u.default.KVP?(0,c.appendParams)(e,i):e.replace(/\{(\w+?)\}/g,function(e,t){return t.toLowerCase()in i?i[t.toLowerCase()]:e});var n=this.tileGrid;return function(i,o,s){if(i){var a={TileMatrix:n.getMatrixId(i[0]),TileCol:i[1],TileRow:-i[2]-1};(0,r.assign)(a,this.dimensions_);var l=e;return l=t==u.default.KVP?(0,c.appendParams)(l,a):l.replace(/\{(\w+?)\}/g,function(e,t){return a[t]})}}}f.prototype.setUrls=function(t){this.urls=t;var i=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):(0,e.createFromTileUrlFunctions)(t.map(h.bind(this))),i)},f.prototype.getDimensions=function(){return this.dimensions_},f.prototype.getFormat=function(){return this.format_},f.prototype.getLayer=function(){return this.layer_},f.prototype.getMatrixSet=function(){return this.matrixSet_},f.prototype.getRequestEncoding=function(){return this.requestEncoding_},f.prototype.getStyle=function(){return this.style_},f.prototype.getVersion=function(){return this.version_},f.prototype.getKeyForDimensions_=function(){var e=0,t=[];for(var i in this.dimensions_)t[e++]=i+"-"+this.dimensions_[i];return t.join("/")},f.prototype.updateDimensions=function(e){(0,r.assign)(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())},exports.default=f;
},{"../tileurlfunction.js":"p1v/","../array.js":"luEr","../extent.js":"QDir","../obj.js":"mH6q","../proj.js":"Diht","../source/TileImage.js":"6udA","../source/WMTSRequestEncoding.js":"21gB","../tilegrid/WMTS.js":"5omF","../uri.js":"2n7G"}],"aDh3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomTile=void 0;var e=require("../tilegrid/common.js"),t=require("../ImageTile.js"),r=d(t),i=require("../TileState.js"),o=d(i),a=require("../tileurlfunction.js"),n=require("../asserts.js"),s=require("../dom.js"),u=require("../extent.js"),l=require("../size.js"),c=require("../source/TileImage.js"),p=d(c),f=require("../tilegrid/TileGrid.js"),h=d(f);function d(e){return e&&e.__esModule?e:{default:e}}var T={DEFAULT:"default",TRUNCATED:"truncated"},g=exports.CustomTile=function(e){function t(t,r,i,o,a,n,s){e.call(this,r,i,o,a,n,s),this.zoomifyImage_=null,this.tileSize_=(0,l.toSize)(t.getTileSize(r[0]))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r.default);g.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=r.default.prototype.getImage.call(this);if(this.state==o.default.LOADED){var t=this.tileSize_;if(e.width==t[0]&&e.height==t[1])return this.zoomifyImage_=e,e;var i=(0,s.createCanvasContext2D)(t[0],t[1]);return i.drawImage(e,0,0),this.zoomifyImage_=i.canvas,i.canvas}return e};var m=function(t){function r(r){var i=r||{},o=i.size,s=void 0!==i.tierSizeCalculation?i.tierSizeCalculation:T.DEFAULT,l=o[0],c=o[1],p=i.extent||[0,-o[1],o[0],0],f=[],d=i.tileSize||e.DEFAULT_TILE_SIZE,m=d;switch(s){case T.DEFAULT:for(;l>m||c>m;)f.push([Math.ceil(l/m),Math.ceil(c/m)]),m+=m;break;case T.TRUNCATED:for(var v=l,_=c;v>m||_>m;)f.push([Math.ceil(v/m),Math.ceil(_/m)]),v>>=1,_>>=1;break;default:(0,n.assert)(!1,53)}f.push([1,1]),f.reverse();for(var z=[1],j=[0],y=1,x=f.length;y<x;y++)z.push(1<<y),j.push(f[y-1][0]*f[y-1][1]+j[y-1]);z.reverse();var I=new h.default({tileSize:d,extent:p,origin:(0,u.getTopLeft)(p),resolutions:z}),S=i.url;S&&-1==S.indexOf("{TileGroup}")&&-1==S.indexOf("{tileIndex}")&&(S+="{TileGroup}/{z}-{x}-{y}.jpg");var E=(0,a.expandUrl)(S);var q=(0,a.createFromTileUrlFunctions)(E.map(function(e){return function(t,r,i){if(t){var o=t[0],a=t[1],n=-t[2]-1,s=a+n*f[o][0],u=I.getTileSize(o),l={z:o,x:a,y:n,tileIndex:s,TileGroup:"TileGroup"+((s+j[o])/u|0)};return e.replace(/\{(\w+?)\}/g,function(e,t){return l[t]})}}})),C=g.bind(null,I);t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:C,tileGrid:I,tileUrlFunction:q,transition:i.transition})}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(p.default);exports.default=m;
},{"../tilegrid/common.js":"mOEX","../ImageTile.js":"T/Os","../TileState.js":"Xz9x","../tileurlfunction.js":"p1v/","../asserts.js":"fLG6","../dom.js":"Xno5","../extent.js":"QDir","../size.js":"TAHd","../source/TileImage.js":"6udA","../tilegrid/TileGrid.js":"5dp/"}],"kDr9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./source/BingMaps.js");Object.defineProperty(exports,"BingMaps",{enumerable:!0,get:function(){return I(e).default}});var r=require("./source/CartoDB.js");Object.defineProperty(exports,"CartoDB",{enumerable:!0,get:function(){return I(r).default}});var t=require("./source/Cluster.js");Object.defineProperty(exports,"Cluster",{enumerable:!0,get:function(){return I(t).default}});var u=require("./source/Image.js");Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return I(u).default}});var n=require("./source/ImageArcGISRest.js");Object.defineProperty(exports,"ImageArcGISRest",{enumerable:!0,get:function(){return I(n).default}});var o=require("./source/ImageCanvas.js");Object.defineProperty(exports,"ImageCanvas",{enumerable:!0,get:function(){return I(o).default}});var a=require("./source/ImageMapGuide.js");Object.defineProperty(exports,"ImageMapGuide",{enumerable:!0,get:function(){return I(a).default}});var i=require("./source/ImageStatic.js");Object.defineProperty(exports,"ImageStatic",{enumerable:!0,get:function(){return I(i).default}});var s=require("./source/ImageWMS.js");Object.defineProperty(exports,"ImageWMS",{enumerable:!0,get:function(){return I(s).default}});var c=require("./source/OSM.js");Object.defineProperty(exports,"OSM",{enumerable:!0,get:function(){return I(c).default}});var f=require("./source/Raster.js");Object.defineProperty(exports,"Raster",{enumerable:!0,get:function(){return I(f).default}});var l=require("./source/Source.js");Object.defineProperty(exports,"Source",{enumerable:!0,get:function(){return I(l).default}});var d=require("./source/Stamen.js");Object.defineProperty(exports,"Stamen",{enumerable:!0,get:function(){return I(d).default}});var p=require("./source/Tile.js");Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return I(p).default}});var b=require("./source/TileArcGISRest.js");Object.defineProperty(exports,"TileArcGISRest",{enumerable:!0,get:function(){return I(b).default}});var j=require("./source/TileDebug.js");Object.defineProperty(exports,"TileDebug",{enumerable:!0,get:function(){return I(j).default}});var g=require("./source/TileImage.js");Object.defineProperty(exports,"TileImage",{enumerable:!0,get:function(){return I(g).default}});var m=require("./source/TileJSON.js");Object.defineProperty(exports,"TileJSON",{enumerable:!0,get:function(){return I(m).default}});var O=require("./source/TileWMS.js");Object.defineProperty(exports,"TileWMS",{enumerable:!0,get:function(){return I(O).default}});var v=require("./source/UrlTile.js");Object.defineProperty(exports,"UrlTile",{enumerable:!0,get:function(){return I(v).default}});var y=require("./source/UTFGrid.js");Object.defineProperty(exports,"UTFGrid",{enumerable:!0,get:function(){return I(y).default}});var x=require("./source/Vector.js");Object.defineProperty(exports,"Vector",{enumerable:!0,get:function(){return I(x).default}});var P=require("./source/WMTS.js");Object.defineProperty(exports,"WMTS",{enumerable:!0,get:function(){return I(P).default}});var q=require("./source/XYZ.js");Object.defineProperty(exports,"XYZ",{enumerable:!0,get:function(){return I(q).default}});var S=require("./source/Zoomify.js");function I(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"Zoomify",{enumerable:!0,get:function(){return I(S).default}});
},{"./source/BingMaps.js":"K+sj","./source/CartoDB.js":"WJrq","./source/Cluster.js":"sV2m","./source/Image.js":"XHvt","./source/ImageArcGISRest.js":"P20y","./source/ImageCanvas.js":"3Y2u","./source/ImageMapGuide.js":"C9PY","./source/ImageStatic.js":"zK6j","./source/ImageWMS.js":"e4Kb","./source/OSM.js":"Rmo4","./source/Raster.js":"w95b","./source/Source.js":"H38a","./source/Stamen.js":"3ehV","./source/Tile.js":"JECm","./source/TileArcGISRest.js":"XUos","./source/TileDebug.js":"dQMP","./source/TileImage.js":"6udA","./source/TileJSON.js":"V9RY","./source/TileWMS.js":"IcO7","./source/UrlTile.js":"uv+9","./source/UTFGrid.js":"o/CP","./source/Vector.js":"ZS12","./source/WMTS.js":"LIR5","./source/XYZ.js":"knlU","./source/Zoomify.js":"aDh3"}],"qu/t":[function(require,module,exports) {
"use strict";var e=require("ol"),r=require("ol/layer/Tile"),o=E(r),t=require("ol/layer/Image"),l=E(t),n=require("ol/proj/Projection"),i=E(n),a=require("ol/proj"),u=require("ol/source/OSM"),s=E(u),c=require("ol/source/XYZ"),g=E(c),d=require("ol/Graticule"),p=E(d),w=require("ol/geom/Polygon"),f=E(w),q=require("ol/Feature"),m=E(q),x=require("ol/layer"),j=require("ol/source"),v=require("ol/source/ImageStatic"),h=E(v);function E(e){return e&&e.__esModule?e:{default:e}}var S=(0,a.get)("EPSG:4326").getExtent(),b=[17,-90,377,90],y=new i.default({axisOrientation:"neu",code:"FGIS:1001",extent:b,worldExtent:b,global:!0,units:"degrees",canWarpX:!0}),k=new i.default({axisOrientation:"neu",code:"FGIS:1001",extent:S,worldExtent:S,global:!0,units:"degrees",canWarpX:!0}),z=[0,0],F=[100,0],G=[S[0]+F[0],S[1]+F[1],S[2]-z[0]+F[0],S[3]-z[1]+F[1]];console.log("Offset : ",G),console.log("Proj. extent : ",y.getExtent()),console.log(y);var I=new e.Map({target:"map-container",layers:[new o.default({source:new g.default({tileUrlFunction:function(e){if(null!==e){var r=e[0]-1;return"http://tiles-arii.herrcrazidev.tk/tiles/kerbin/sat/"+r+"/"+e[1]+"/"+(e[2]+Math.pow(2,r))+".png"}},projection:y})}),new l.default({source:new h.default({url:"http://tiles-arii.herrcrazidev.tk/raster/kp/borders.png",projection:y,imageExtent:[-227.8,-88,580,88],imageSize:[0,0,4700,2e3]})})],view:new e.View({center:[0,0],zoom:2.3,minZoom:1,maxZoom:6,projection:k})}),M=new p.default({map:I,showLabels:!1});console.log(S);
},{"ol":"DRei","ol/layer/Tile":"BU+E","ol/layer/Image":"2KHB","ol/proj/Projection":"WUar","ol/proj":"Diht","ol/source/OSM":"Rmo4","ol/source/XYZ":"knlU","ol/Graticule":"/QUi","ol/geom/Polygon":"6Nww","ol/Feature":"mYW9","ol/layer":"ZVaS","ol/source":"kDr9","ol/source/ImageStatic":"zK6j"}]},{},["qu/t"], null)
//# sourceMappingURL=map.ab3caa91.map